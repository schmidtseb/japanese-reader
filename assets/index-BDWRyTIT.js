(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(s){if(s.ep)return;s.ep=!0;const f=i(s);fetch(s.href,f)}})();function NT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gu={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function MT(){if(Dp)return Nl;Dp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(l,s,f){var m=null;if(f!==void 0&&(m=""+f),s.key!==void 0&&(m=""+s.key),"key"in s){f={};for(var p in s)p!=="key"&&(f[p]=s[p])}else f=s;return s=f.ref,{$$typeof:t,type:l,key:m,ref:s!==void 0?s:null,props:f}}return Nl.Fragment=e,Nl.jsx=i,Nl.jsxs=i,Nl}var Ip;function RT(){return Ip||(Ip=1,Gu.exports=MT()),Gu.exports}var x=RT(),Bu={exports:{}},Ml={},zu={exports:{}},Hu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function wT(){return Up||(Up=1,function(t){function e(P,j){var fe=P.length;P.push(j);e:for(;0<fe;){var Me=fe-1>>>1,b=P[Me];if(0<s(b,j))P[Me]=j,P[fe]=b,fe=Me;else break e}}function i(P){return P.length===0?null:P[0]}function l(P){if(P.length===0)return null;var j=P[0],fe=P.pop();if(fe!==j){P[0]=fe;e:for(var Me=0,b=P.length,V=b>>>1;Me<V;){var K=2*(Me+1)-1,J=P[K],ee=K+1,ce=P[ee];if(0>s(J,fe))ee<b&&0>s(ce,J)?(P[Me]=ce,P[ee]=fe,Me=ee):(P[Me]=J,P[K]=fe,Me=K);else if(ee<b&&0>s(ce,fe))P[Me]=ce,P[ee]=fe,Me=ee;else break e}}return j}function s(P,j){var fe=P.sortIndex-j.sortIndex;return fe!==0?fe:P.id-j.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();t.unstable_now=function(){return m.now()-p}}var y=[],h=[],v=1,S=null,E=3,A=!1,M=!1,k=!1,L=!1,H=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function Q(P){for(var j=i(h);j!==null;){if(j.callback===null)l(h);else if(j.startTime<=P)l(h),j.sortIndex=j.expirationTime,e(y,j);else break;j=i(h)}}function z(P){if(k=!1,Q(P),!M)if(i(y)!==null)M=!0,W||(W=!0,le());else{var j=i(h);j!==null&&Ee(z,j.startTime-P)}}var W=!1,Z=-1,ge=5,X=-1;function ve(){return L?!0:!(t.unstable_now()-X<ge)}function oe(){if(L=!1,W){var P=t.unstable_now();X=P;var j=!0;try{e:{M=!1,k&&(k=!1,Y(Z),Z=-1),A=!0;var fe=E;try{t:{for(Q(P),S=i(y);S!==null&&!(S.expirationTime>P&&ve());){var Me=S.callback;if(typeof Me=="function"){S.callback=null,E=S.priorityLevel;var b=Me(S.expirationTime<=P);if(P=t.unstable_now(),typeof b=="function"){S.callback=b,Q(P),j=!0;break t}S===i(y)&&l(y),Q(P)}else l(y);S=i(y)}if(S!==null)j=!0;else{var V=i(h);V!==null&&Ee(z,V.startTime-P),j=!1}}break e}finally{S=null,E=fe,A=!1}j=void 0}}finally{j?le():W=!1}}}var le;if(typeof F=="function")le=function(){F(oe)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Ge=Ye.port2;Ye.port1.onmessage=oe,le=function(){Ge.postMessage(null)}}else le=function(){H(oe,0)};function Ee(P,j){Z=H(function(){P(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(P){switch(E){case 1:case 2:case 3:var j=3;break;default:j=E}var fe=E;E=j;try{return P()}finally{E=fe}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(P,j){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var fe=E;E=P;try{return j()}finally{E=fe}},t.unstable_scheduleCallback=function(P,j,fe){var Me=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Me+fe:Me):fe=Me,P){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=fe+b,P={id:v++,callback:j,priorityLevel:P,startTime:fe,expirationTime:b,sortIndex:-1},fe>Me?(P.sortIndex=fe,e(h,P),i(y)===null&&P===i(h)&&(k?(Y(Z),Z=-1):k=!0,Ee(z,fe-Me))):(P.sortIndex=b,e(y,P),M||A||(M=!0,W||(W=!0,le()))),P},t.unstable_shouldYield=ve,t.unstable_wrapCallback=function(P){var j=E;return function(){var fe=E;E=j;try{return P.apply(this,arguments)}finally{E=fe}}}}(Hu)),Hu}var kp;function DT(){return kp||(kp=1,zu.exports=wT()),zu.exports}var Fu={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function IT(){if(Lp)return xe;Lp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.iterator;function E(b){return b===null||typeof b!="object"?null:(b=S&&b[S]||b["@@iterator"],typeof b=="function"?b:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function L(b,V,K){this.props=b,this.context=V,this.refs=k,this.updater=K||A}L.prototype.isReactComponent={},L.prototype.setState=function(b,V){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,V,"setState")},L.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function H(){}H.prototype=L.prototype;function Y(b,V,K){this.props=b,this.context=V,this.refs=k,this.updater=K||A}var F=Y.prototype=new H;F.constructor=Y,M(F,L.prototype),F.isPureReactComponent=!0;var Q=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function Z(b,V,K,J,ee,ce){return K=ce.ref,{$$typeof:t,type:b,key:V,ref:K!==void 0?K:null,props:ce}}function ge(b,V){return Z(b.type,V,void 0,void 0,void 0,b.props)}function X(b){return typeof b=="object"&&b!==null&&b.$$typeof===t}function ve(b){var V={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(K){return V[K]})}var oe=/\/+/g;function le(b,V){return typeof b=="object"&&b!==null&&b.key!=null?ve(""+b.key):V.toString(36)}function Ye(){}function Ge(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(Ye,Ye):(b.status="pending",b.then(function(V){b.status==="pending"&&(b.status="fulfilled",b.value=V)},function(V){b.status==="pending"&&(b.status="rejected",b.reason=V)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function Ee(b,V,K,J,ee){var ce=typeof b;(ce==="undefined"||ce==="boolean")&&(b=null);var ae=!1;if(b===null)ae=!0;else switch(ce){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(b.$$typeof){case t:case e:ae=!0;break;case v:return ae=b._init,Ee(ae(b._payload),V,K,J,ee)}}if(ae)return ee=ee(b),ae=J===""?"."+le(b,0):J,Q(ee)?(K="",ae!=null&&(K=ae.replace(oe,"$&/")+"/"),Ee(ee,V,K,"",function(_n){return _n})):ee!=null&&(X(ee)&&(ee=ge(ee,K+(ee.key==null||b&&b.key===ee.key?"":(""+ee.key).replace(oe,"$&/")+"/")+ae)),V.push(ee)),1;ae=0;var Re=J===""?".":J+":";if(Q(b))for(var Ve=0;Ve<b.length;Ve++)J=b[Ve],ce=Re+le(J,Ve),ae+=Ee(J,V,K,ce,ee);else if(Ve=E(b),typeof Ve=="function")for(b=Ve.call(b),Ve=0;!(J=b.next()).done;)J=J.value,ce=Re+le(J,Ve++),ae+=Ee(J,V,K,ce,ee);else if(ce==="object"){if(typeof b.then=="function")return Ee(Ge(b),V,K,J,ee);throw V=String(b),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ae}function P(b,V,K){if(b==null)return b;var J=[],ee=0;return Ee(b,J,"","",function(ce){return V.call(K,ce,ee++)}),J}function j(b){if(b._status===-1){var V=b._result;V=V(),V.then(function(K){(b._status===0||b._status===-1)&&(b._status=1,b._result=K)},function(K){(b._status===0||b._status===-1)&&(b._status=2,b._result=K)}),b._status===-1&&(b._status=0,b._result=V)}if(b._status===1)return b._result.default;throw b._result}var fe=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)};function Me(){}return xe.Children={map:P,forEach:function(b,V,K){P(b,function(){V.apply(this,arguments)},K)},count:function(b){var V=0;return P(b,function(){V++}),V},toArray:function(b){return P(b,function(V){return V})||[]},only:function(b){if(!X(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},xe.Component=L,xe.Fragment=i,xe.Profiler=s,xe.PureComponent=Y,xe.StrictMode=l,xe.Suspense=y,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,xe.__COMPILER_RUNTIME={__proto__:null,c:function(b){return z.H.useMemoCache(b)}},xe.cache=function(b){return function(){return b.apply(null,arguments)}},xe.cloneElement=function(b,V,K){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var J=M({},b.props),ee=b.key,ce=void 0;if(V!=null)for(ae in V.ref!==void 0&&(ce=void 0),V.key!==void 0&&(ee=""+V.key),V)!W.call(V,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&V.ref===void 0||(J[ae]=V[ae]);var ae=arguments.length-2;if(ae===1)J.children=K;else if(1<ae){for(var Re=Array(ae),Ve=0;Ve<ae;Ve++)Re[Ve]=arguments[Ve+2];J.children=Re}return Z(b.type,ee,void 0,void 0,ce,J)},xe.createContext=function(b){return b={$$typeof:m,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:f,_context:b},b},xe.createElement=function(b,V,K){var J,ee={},ce=null;if(V!=null)for(J in V.key!==void 0&&(ce=""+V.key),V)W.call(V,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ee[J]=V[J]);var ae=arguments.length-2;if(ae===1)ee.children=K;else if(1<ae){for(var Re=Array(ae),Ve=0;Ve<ae;Ve++)Re[Ve]=arguments[Ve+2];ee.children=Re}if(b&&b.defaultProps)for(J in ae=b.defaultProps,ae)ee[J]===void 0&&(ee[J]=ae[J]);return Z(b,ce,void 0,void 0,null,ee)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(b){return{$$typeof:p,render:b}},xe.isValidElement=X,xe.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:j}},xe.memo=function(b,V){return{$$typeof:h,type:b,compare:V===void 0?null:V}},xe.startTransition=function(b){var V=z.T,K={};z.T=K;try{var J=b(),ee=z.S;ee!==null&&ee(K,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Me,fe)}catch(ce){fe(ce)}finally{z.T=V}},xe.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},xe.use=function(b){return z.H.use(b)},xe.useActionState=function(b,V,K){return z.H.useActionState(b,V,K)},xe.useCallback=function(b,V){return z.H.useCallback(b,V)},xe.useContext=function(b){return z.H.useContext(b)},xe.useDebugValue=function(){},xe.useDeferredValue=function(b,V){return z.H.useDeferredValue(b,V)},xe.useEffect=function(b,V,K){var J=z.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(b,V)},xe.useId=function(){return z.H.useId()},xe.useImperativeHandle=function(b,V,K){return z.H.useImperativeHandle(b,V,K)},xe.useInsertionEffect=function(b,V){return z.H.useInsertionEffect(b,V)},xe.useLayoutEffect=function(b,V){return z.H.useLayoutEffect(b,V)},xe.useMemo=function(b,V){return z.H.useMemo(b,V)},xe.useOptimistic=function(b,V){return z.H.useOptimistic(b,V)},xe.useReducer=function(b,V,K){return z.H.useReducer(b,V,K)},xe.useRef=function(b){return z.H.useRef(b)},xe.useState=function(b){return z.H.useState(b)},xe.useSyncExternalStore=function(b,V,K){return z.H.useSyncExternalStore(b,V,K)},xe.useTransition=function(){return z.H.useTransition()},xe.version="19.1.0",xe}var Vp;function _c(){return Vp||(Vp=1,Fu.exports=IT()),Fu.exports}var Yu={exports:{}},dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function UT(){if(Pp)return dt;Pp=1;var t=_c();function e(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function f(y,h,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:S==null?null:""+S,children:y,containerInfo:h,implementation:v}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,dt.createPortal=function(y,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return f(y,h,null,v)},dt.flushSync=function(y){var h=m.T,v=l.p;try{if(m.T=null,l.p=2,y)return y()}finally{m.T=h,l.p=v,l.d.f()}},dt.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(y,h))},dt.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},dt.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var v=h.as,S=p(v,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?l.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:A}):v==="script"&&l.d.X(y,{crossOrigin:S,integrity:E,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},dt.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=p(h.as,h.crossOrigin);l.d.M(y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(y)},dt.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,S=p(v,h.crossOrigin);l.d.L(y,v,{crossOrigin:S,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},dt.preloadModule=function(y,h){if(typeof y=="string")if(h){var v=p(h.as,h.crossOrigin);l.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(y)},dt.requestFormReset=function(y){l.d.r(y)},dt.unstable_batchedUpdates=function(y,h){return y(h)},dt.useFormState=function(y,h,v){return m.H.useFormState(y,h,v)},dt.useFormStatus=function(){return m.H.useHostTransitionStatus()},dt.version="19.1.0",dt}var Op;function Pg(){if(Op)return Yu.exports;Op=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yu.exports=UT(),Yu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function kT(){if(qp)return Ml;qp=1;var t=DT(),e=_c(),i=Pg();function l(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function f(n){var o=n,a=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(a=o.return),n=o.return;while(n)}return o.tag===3?a:null}function m(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function p(n){if(f(n)!==n)throw Error(l(188))}function y(n){var o=n.alternate;if(!o){if(o=f(n),o===null)throw Error(l(188));return o!==n?null:n}for(var a=n,c=o;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return p(d),n;if(g===c)return p(d),o;g=g.sibling}throw Error(l(188))}if(a.return!==c.return)a=d,c=g;else{for(var T=!1,_=d.child;_;){if(_===a){T=!0,a=d,c=g;break}if(_===c){T=!0,c=d,a=g;break}_=_.sibling}if(!T){for(_=g.child;_;){if(_===a){T=!0,a=g,c=d;break}if(_===c){T=!0,c=g,a=d;break}_=_.sibling}if(!T)throw Error(l(189))}}if(a.alternate!==c)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?n:o}function h(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=h(n),o!==null)return o;n=n.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),F=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function le(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var Ye=Symbol.for("react.client.reference");function Ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ye?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case L:return"Profiler";case k:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList";case X:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case F:return(n.displayName||"Context")+".Provider";case Y:return(n._context.displayName||"Context")+".Consumer";case Q:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z:return o=n.displayName||null,o!==null?o:Ge(n.type)||"Memo";case ge:o=n._payload,n=n._init;try{return Ge(n(o))}catch{}}return null}var Ee=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Me=[],b=-1;function V(n){return{current:n}}function K(n){0>b||(n.current=Me[b],Me[b]=null,b--)}function J(n,o){b++,Me[b]=n.current,n.current=o}var ee=V(null),ce=V(null),ae=V(null),Re=V(null);function Ve(n,o){switch(J(ae,o),J(ce,n),J(ee,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?lp(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=lp(o),n=ap(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(ee),J(ee,n)}function _n(){K(ee),K(ce),K(ae)}function As(n){n.memoizedState!==null&&J(Re,n);var o=ee.current,a=ap(o,n.type);o!==a&&(J(ce,n),J(ee,a))}function Ol(n){ce.current===n&&(K(ee),K(ce)),Re.current===n&&(K(Re),_l._currentValue=fe)}var bs=Object.prototype.hasOwnProperty,Ns=t.unstable_scheduleCallback,Ms=t.unstable_cancelCallback,lv=t.unstable_shouldYield,av=t.unstable_requestPaint,Jt=t.unstable_now,sv=t.unstable_getCurrentPriorityLevel,Oc=t.unstable_ImmediatePriority,qc=t.unstable_UserBlockingPriority,ql=t.unstable_NormalPriority,rv=t.unstable_LowPriority,Gc=t.unstable_IdlePriority,uv=t.log,cv=t.unstable_setDisableYieldValue,wo=null,St=null;function En(n){if(typeof uv=="function"&&cv(n),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(wo,n)}catch{}}var _t=Math.clz32?Math.clz32:mv,fv=Math.log,dv=Math.LN2;function mv(n){return n>>>=0,n===0?32:31-(fv(n)/dv|0)|0}var Gl=256,Bl=4194304;function Xn(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function zl(n,o,a){var c=n.pendingLanes;if(c===0)return 0;var d=0,g=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var _=c&134217727;return _!==0?(c=_&~g,c!==0?d=Xn(c):(T&=_,T!==0?d=Xn(T):a||(a=_&~n,a!==0&&(d=Xn(a))))):(_=c&~g,_!==0?d=Xn(_):T!==0?d=Xn(T):a||(a=c&~n,a!==0&&(d=Xn(a)))),d===0?0:o!==0&&o!==d&&(o&g)===0&&(g=d&-d,a=o&-o,g>=a||g===32&&(a&4194048)!==0)?o:d}function Do(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function pv(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bc(){var n=Gl;return Gl<<=1,(Gl&4194048)===0&&(Gl=256),n}function zc(){var n=Bl;return Bl<<=1,(Bl&62914560)===0&&(Bl=4194304),n}function Rs(n){for(var o=[],a=0;31>a;a++)o.push(n);return o}function Io(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hv(n,o,a,c,d,g){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var _=n.entanglements,C=n.expirationTimes,D=n.hiddenUpdates;for(a=T&~a;0<a;){var O=31-_t(a),B=1<<O;_[O]=0,C[O]=-1;var I=D[O];if(I!==null)for(D[O]=null,O=0;O<I.length;O++){var U=I[O];U!==null&&(U.lane&=-536870913)}a&=~B}c!==0&&Hc(n,c,0),g!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=g&~(T&~o))}function Hc(n,o,a){n.pendingLanes|=o,n.suspendedLanes&=~o;var c=31-_t(o);n.entangledLanes|=o,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function Fc(n,o){var a=n.entangledLanes|=o;for(n=n.entanglements;a;){var c=31-_t(a),d=1<<c;d&o|n[c]&o&&(n[c]|=o),a&=~d}}function ws(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ds(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Yc(){var n=j.p;return n!==0?n:(n=window.event,n===void 0?32:Ap(n.type))}function gv(n,o){var a=j.p;try{return j.p=n,o()}finally{j.p=a}}var Cn=Math.random().toString(36).slice(2),ct="__reactFiber$"+Cn,gt="__reactProps$"+Cn,Ti="__reactContainer$"+Cn,Is="__reactEvents$"+Cn,yv="__reactListeners$"+Cn,vv="__reactHandles$"+Cn,Jc="__reactResources$"+Cn,Uo="__reactMarker$"+Cn;function Us(n){delete n[ct],delete n[gt],delete n[Is],delete n[yv],delete n[vv]}function Si(n){var o=n[ct];if(o)return o;for(var a=n.parentNode;a;){if(o=a[Ti]||a[ct]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(n=cp(n);n!==null;){if(a=n[ct])return a;n=cp(n)}return o}n=a,a=n.parentNode}return null}function _i(n){if(n=n[ct]||n[Ti]){var o=n.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return n}return null}function ko(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(l(33))}function Ei(n){var o=n[Jc];return o||(o=n[Jc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function it(n){n[Uo]=!0}var Kc=new Set,Zc={};function Qn(n,o){Ci(n,o),Ci(n+"Capture",o)}function Ci(n,o){for(Zc[n]=o,n=0;n<o.length;n++)Kc.add(o[n])}var xv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$c={},Xc={};function Tv(n){return bs.call(Xc,n)?!0:bs.call($c,n)?!1:xv.test(n)?Xc[n]=!0:($c[n]=!0,!1)}function Hl(n,o,a){if(Tv(o))if(a===null)n.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+a)}}function Fl(n,o,a){if(a===null)n.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+a)}}function nn(n,o,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(o,a,""+c)}}var ks,Qc;function Ai(n){if(ks===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);ks=o&&o[1]||"",Qc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+n+Qc}var Ls=!1;function Vs(n,o){if(!n||Ls)return"";Ls=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(U){var I=U}Reflect.construct(n,[],B)}else{try{B.call()}catch(U){I=U}n.call(B.prototype)}}else{try{throw Error()}catch(U){I=U}(B=n())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(U){if(U&&I&&typeof U.stack=="string")return[U.stack,I.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],_=g[1];if(T&&_){var C=T.split(`
`),D=_.split(`
`);for(d=c=0;c<C.length&&!C[c].includes("DetermineComponentFrameRoot");)c++;for(;d<D.length&&!D[d].includes("DetermineComponentFrameRoot");)d++;if(c===C.length||d===D.length)for(c=C.length-1,d=D.length-1;1<=c&&0<=d&&C[c]!==D[d];)d--;for(;1<=c&&0<=d;c--,d--)if(C[c]!==D[d]){if(c!==1||d!==1)do if(c--,d--,0>d||C[c]!==D[d]){var O=`
`+C[c].replace(" at new "," at ");return n.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",n.displayName)),O}while(1<=c&&0<=d);break}}}finally{Ls=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ai(a):""}function Sv(n){switch(n.tag){case 26:case 27:case 5:return Ai(n.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return Vs(n.type,!1);case 11:return Vs(n.type.render,!1);case 1:return Vs(n.type,!0);case 31:return Ai("Activity");default:return""}}function jc(n){try{var o="";do o+=Sv(n),n=n.return;while(n);return o}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Dt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wc(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function _v(n){var o=Wc(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),c=""+n[o];if(!n.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return d.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(n,o,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Yl(n){n._valueTracker||(n._valueTracker=_v(n))}function ef(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return n&&(c=Wc(n)?n.checked?"true":"false":n.value),n=c,n!==a?(o.setValue(n),!0):!1}function Jl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ev=/[\n"\\]/g;function It(n){return n.replace(Ev,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ps(n,o,a,c,d,g,T,_){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),o!=null?T==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Dt(o)):n.value!==""+Dt(o)&&(n.value=""+Dt(o)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),o!=null?Os(n,T,Dt(o)):a!=null?Os(n,T,Dt(a)):c!=null&&n.removeAttribute("value"),d==null&&g!=null&&(n.defaultChecked=!!g),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.name=""+Dt(_):n.removeAttribute("name")}function tf(n,o,a,c,d,g,T,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),o!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||o!=null))return;a=a!=null?""+Dt(a):"",o=o!=null?""+Dt(o):a,_||o===n.value||(n.value=o),n.defaultValue=o}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=_?n.checked:!!c,n.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Os(n,o,a){o==="number"&&Jl(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function bi(n,o,a,c){if(n=n.options,o){o={};for(var d=0;d<a.length;d++)o["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=o.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Dt(a),o=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}o!==null||n[d].disabled||(o=n[d])}o!==null&&(o.selected=!0)}}function nf(n,o,a){if(o!=null&&(o=""+Dt(o),o!==n.value&&(n.value=o),a==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=a!=null?""+Dt(a):""}function of(n,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(l(92));if(Ee(c)){if(1<c.length)throw Error(l(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=Dt(o),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Ni(n,o){if(o){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=o;return}}n.textContent=o}var Cv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lf(n,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":c?n.setProperty(o,a):typeof a!="number"||a===0||Cv.has(o)?o==="float"?n.cssFloat=a:n[o]=(""+a).trim():n[o]=a+"px"}function af(n,o,a){if(o!=null&&typeof o!="object")throw Error(l(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in o)c=o[d],o.hasOwnProperty(d)&&a[d]!==c&&lf(n,d,c)}else for(var g in o)o.hasOwnProperty(g)&&lf(n,g,o[g])}function qs(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Av=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kl(n){return bv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Gs=null;function Bs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mi=null,Ri=null;function sf(n){var o=_i(n);if(o&&(n=o.stateNode)){var a=n[gt]||null;e:switch(n=o.stateNode,o.type){case"input":if(Ps(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+It(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==n&&c.form===n.form){var d=c[gt]||null;if(!d)throw Error(l(90));Ps(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===n.form&&ef(c)}break e;case"textarea":nf(n,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&bi(n,!!a.multiple,o,!1)}}}var zs=!1;function rf(n,o,a){if(zs)return n(o,a);zs=!0;try{var c=n(o);return c}finally{if(zs=!1,(Mi!==null||Ri!==null)&&(Ia(),Mi&&(o=Mi,n=Ri,Ri=Mi=null,sf(o),n)))for(o=0;o<n.length;o++)sf(n[o])}}function Lo(n,o){var a=n.stateNode;if(a===null)return null;var c=a[gt]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(l(231,o,typeof a));return a}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hs=!1;if(on)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{Hs=!1}var An=null,Fs=null,Zl=null;function uf(){if(Zl)return Zl;var n,o=Fs,a=o.length,c,d="value"in An?An.value:An.textContent,g=d.length;for(n=0;n<a&&o[n]===d[n];n++);var T=a-n;for(c=1;c<=T&&o[a-c]===d[g-c];c++);return Zl=d.slice(n,1<c?1-c:void 0)}function $l(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Xl(){return!0}function cf(){return!1}function yt(n){function o(a,c,d,g,T){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var _ in n)n.hasOwnProperty(_)&&(a=n[_],this[_]=a?a(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xl:cf,this.isPropagationStopped=cf,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),o}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=yt(jn),Po=v({},jn,{view:0,detail:0}),Nv=yt(Po),Ys,Js,Oo,jl=v({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oo&&(Oo&&n.type==="mousemove"?(Ys=n.screenX-Oo.screenX,Js=n.screenY-Oo.screenY):Js=Ys=0,Oo=n),Ys)},movementY:function(n){return"movementY"in n?n.movementY:Js}}),ff=yt(jl),Mv=v({},jl,{dataTransfer:0}),Rv=yt(Mv),wv=v({},Po,{relatedTarget:0}),Ks=yt(wv),Dv=v({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=yt(Dv),Uv=v({},jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kv=yt(Uv),Lv=v({},jn,{data:0}),df=yt(Lv),Vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ov={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Ov[n])?!!o[n]:!1}function Zs(){return qv}var Gv=v({},Po,{key:function(n){if(n.key){var o=Vv[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=$l(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(n){return n.type==="keypress"?$l(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$l(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Bv=yt(Gv),zv=v({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mf=yt(zv),Hv=v({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),Fv=yt(Hv),Yv=v({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jv=yt(Yv),Kv=v({},jl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=yt(Kv),$v=v({},jn,{newState:0,oldState:0}),Xv=yt($v),Qv=[9,13,27,32],$s=on&&"CompositionEvent"in window,qo=null;on&&"documentMode"in document&&(qo=document.documentMode);var jv=on&&"TextEvent"in window&&!qo,pf=on&&(!$s||qo&&8<qo&&11>=qo),hf=" ",gf=!1;function yf(n,o){switch(n){case"keyup":return Qv.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wi=!1;function Wv(n,o){switch(n){case"compositionend":return vf(o);case"keypress":return o.which!==32?null:(gf=!0,hf);case"textInput":return n=o.data,n===hf&&gf?null:n;default:return null}}function ex(n,o){if(wi)return n==="compositionend"||!$s&&yf(n,o)?(n=uf(),Zl=Fs=An=null,wi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return pf&&o.locale!=="ko"?null:o.data;default:return null}}var tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!tx[n.type]:o==="textarea"}function Tf(n,o,a,c){Mi?Ri?Ri.push(c):Ri=[c]:Mi=c,o=Oa(o,"onChange"),0<o.length&&(a=new Ql("onChange","change",null,a,c),n.push({event:a,listeners:o}))}var Go=null,Bo=null;function nx(n){ep(n,0)}function Wl(n){var o=ko(n);if(ef(o))return n}function Sf(n,o){if(n==="change")return o}var _f=!1;if(on){var Xs;if(on){var Qs="oninput"in document;if(!Qs){var Ef=document.createElement("div");Ef.setAttribute("oninput","return;"),Qs=typeof Ef.oninput=="function"}Xs=Qs}else Xs=!1;_f=Xs&&(!document.documentMode||9<document.documentMode)}function Cf(){Go&&(Go.detachEvent("onpropertychange",Af),Bo=Go=null)}function Af(n){if(n.propertyName==="value"&&Wl(Bo)){var o=[];Tf(o,Bo,n,Bs(n)),rf(nx,o)}}function ix(n,o,a){n==="focusin"?(Cf(),Go=o,Bo=a,Go.attachEvent("onpropertychange",Af)):n==="focusout"&&Cf()}function ox(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wl(Bo)}function lx(n,o){if(n==="click")return Wl(o)}function ax(n,o){if(n==="input"||n==="change")return Wl(o)}function sx(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Et=typeof Object.is=="function"?Object.is:sx;function zo(n,o){if(Et(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var a=Object.keys(n),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!bs.call(o,d)||!Et(n[d],o[d]))return!1}return!0}function bf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Nf(n,o){var a=bf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=o&&c>=o)return{node:a,offset:o-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bf(a)}}function Mf(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Mf(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Rf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Jl(n.document);o instanceof n.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)n=o.contentWindow;else break;o=Jl(n.document)}return o}function js(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var rx=on&&"documentMode"in document&&11>=document.documentMode,Di=null,Ws=null,Ho=null,er=!1;function wf(n,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;er||Di==null||Di!==Jl(c)||(c=Di,"selectionStart"in c&&js(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ho&&zo(Ho,c)||(Ho=c,c=Oa(Ws,"onSelect"),0<c.length&&(o=new Ql("onSelect","select",null,o,a),n.push({event:o,listeners:c}),o.target=Di)))}function Wn(n,o){var a={};return a[n.toLowerCase()]=o.toLowerCase(),a["Webkit"+n]="webkit"+o,a["Moz"+n]="moz"+o,a}var Ii={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionrun:Wn("Transition","TransitionRun"),transitionstart:Wn("Transition","TransitionStart"),transitioncancel:Wn("Transition","TransitionCancel"),transitionend:Wn("Transition","TransitionEnd")},tr={},Df={};on&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function ei(n){if(tr[n])return tr[n];if(!Ii[n])return n;var o=Ii[n],a;for(a in o)if(o.hasOwnProperty(a)&&a in Df)return tr[n]=o[a];return n}var If=ei("animationend"),Uf=ei("animationiteration"),kf=ei("animationstart"),ux=ei("transitionrun"),cx=ei("transitionstart"),fx=ei("transitioncancel"),Lf=ei("transitionend"),Vf=new Map,nr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nr.push("scrollEnd");function zt(n,o){Vf.set(n,o),Qn(o,[n])}var Pf=new WeakMap;function Ut(n,o){if(typeof n=="object"&&n!==null){var a=Pf.get(n);return a!==void 0?a:(o={value:n,source:o,stack:jc(o)},Pf.set(n,o),o)}return{value:n,source:o,stack:jc(o)}}var kt=[],Ui=0,ir=0;function ea(){for(var n=Ui,o=ir=Ui=0;o<n;){var a=kt[o];kt[o++]=null;var c=kt[o];kt[o++]=null;var d=kt[o];kt[o++]=null;var g=kt[o];if(kt[o++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}g!==0&&Of(a,d,g)}}function ta(n,o,a,c){kt[Ui++]=n,kt[Ui++]=o,kt[Ui++]=a,kt[Ui++]=c,ir|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function or(n,o,a,c){return ta(n,o,a,c),na(n)}function ki(n,o){return ta(n,null,null,o),na(n)}function Of(n,o,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var d=!1,g=n.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(d=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,d&&o!==null&&(d=31-_t(a),n=g.hiddenUpdates,c=n[d],c===null?n[d]=[o]:c.push(o),o.lane=a|536870912),g):null}function na(n){if(50<pl)throw pl=0,cu=null,Error(l(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var Li={};function dx(n,o,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(n,o,a,c){return new dx(n,o,a,c)}function lr(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ln(n,o){var a=n.alternate;return a===null?(a=Ct(n.tag,o,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=o,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,o=n.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function qf(n,o){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,o=a.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function ia(n,o,a,c,d,g){var T=0;if(c=n,typeof n=="function")lr(n)&&(T=1);else if(typeof n=="string")T=pT(n,a,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case X:return n=Ct(31,a,o,d),n.elementType=X,n.lanes=g,n;case M:return ti(a.children,d,g,o);case k:T=8,d|=24;break;case L:return n=Ct(12,a,o,d|2),n.elementType=L,n.lanes=g,n;case z:return n=Ct(13,a,o,d),n.elementType=z,n.lanes=g,n;case W:return n=Ct(19,a,o,d),n.elementType=W,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:case F:T=10;break e;case Y:T=9;break e;case Q:T=11;break e;case Z:T=14;break e;case ge:T=16,c=null;break e}T=29,a=Error(l(130,n===null?"null":typeof n,"")),c=null}return o=Ct(T,a,o,d),o.elementType=n,o.type=c,o.lanes=g,o}function ti(n,o,a,c){return n=Ct(7,n,c,o),n.lanes=a,n}function ar(n,o,a){return n=Ct(6,n,null,o),n.lanes=a,n}function sr(n,o,a){return o=Ct(4,n.children!==null?n.children:[],n.key,o),o.lanes=a,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var Vi=[],Pi=0,oa=null,la=0,Lt=[],Vt=0,ni=null,an=1,sn="";function ii(n,o){Vi[Pi++]=la,Vi[Pi++]=oa,oa=n,la=o}function Gf(n,o,a){Lt[Vt++]=an,Lt[Vt++]=sn,Lt[Vt++]=ni,ni=n;var c=an;n=sn;var d=32-_t(c)-1;c&=~(1<<d),a+=1;var g=32-_t(o)+d;if(30<g){var T=d-d%5;g=(c&(1<<T)-1).toString(32),c>>=T,d-=T,an=1<<32-_t(o)+d|a<<d|c,sn=g+n}else an=1<<g|a<<d|c,sn=n}function rr(n){n.return!==null&&(ii(n,1),Gf(n,1,0))}function ur(n){for(;n===oa;)oa=Vi[--Pi],Vi[Pi]=null,la=Vi[--Pi],Vi[Pi]=null;for(;n===ni;)ni=Lt[--Vt],Lt[Vt]=null,sn=Lt[--Vt],Lt[Vt]=null,an=Lt[--Vt],Lt[Vt]=null}var pt=null,Ze=null,Ie=!1,oi=null,Kt=!1,cr=Error(l(519));function li(n){var o=Error(l(418,""));throw Jo(Ut(o,n)),cr}function Bf(n){var o=n.stateNode,a=n.type,c=n.memoizedProps;switch(o[ct]=n,o[gt]=c,a){case"dialog":Ae("cancel",o),Ae("close",o);break;case"iframe":case"object":case"embed":Ae("load",o);break;case"video":case"audio":for(a=0;a<gl.length;a++)Ae(gl[a],o);break;case"source":Ae("error",o);break;case"img":case"image":case"link":Ae("error",o),Ae("load",o);break;case"details":Ae("toggle",o);break;case"input":Ae("invalid",o),tf(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Yl(o);break;case"select":Ae("invalid",o);break;case"textarea":Ae("invalid",o),of(o,c.value,c.defaultValue,c.children),Yl(o)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||op(o.textContent,a)?(c.popover!=null&&(Ae("beforetoggle",o),Ae("toggle",o)),c.onScroll!=null&&Ae("scroll",o),c.onScrollEnd!=null&&Ae("scrollend",o),c.onClick!=null&&(o.onclick=qa),o=!0):o=!1,o||li(n)}function zf(n){for(pt=n.return;pt;)switch(pt.tag){case 5:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:pt=pt.return}}function Fo(n){if(n!==pt)return!1;if(!Ie)return zf(n),Ie=!0,!1;var o=n.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||bu(n.type,n.memoizedProps)),a=!a),a&&Ze&&li(n),zf(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(o===0){Ze=Ft(n.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++;n=n.nextSibling}Ze=null}}else o===27?(o=Ze,Bn(n.type)?(n=wu,wu=null,Ze=n):Ze=o):Ze=pt?Ft(n.stateNode.nextSibling):null;return!0}function Yo(){Ze=pt=null,Ie=!1}function Hf(){var n=oi;return n!==null&&(Tt===null?Tt=n:Tt.push.apply(Tt,n),oi=null),n}function Jo(n){oi===null?oi=[n]:oi.push(n)}var fr=V(null),ai=null,rn=null;function bn(n,o,a){J(fr,o._currentValue),o._currentValue=a}function un(n){n._currentValue=fr.current,K(fr)}function dr(n,o,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),n===a)break;n=n.return}}function mr(n,o,a,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var _=g;g=d;for(var C=0;C<o.length;C++)if(_.context===o[C]){g.lanes|=a,_=g.alternate,_!==null&&(_.lanes|=a),dr(g.return,a,n),c||(T=null);break e}g=_.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(l(341));T.lanes|=a,g=T.alternate,g!==null&&(g.lanes|=a),dr(T,a,n),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===n){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Ko(n,o,a,c){n=null;for(var d=o,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(l(387));if(T=T.memoizedProps,T!==null){var _=d.type;Et(d.pendingProps.value,T.value)||(n!==null?n.push(_):n=[_])}}else if(d===Re.current){if(T=d.alternate,T===null)throw Error(l(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(_l):n=[_l])}d=d.return}n!==null&&mr(o,n,a,c),o.flags|=262144}function aa(n){for(n=n.firstContext;n!==null;){if(!Et(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function si(n){ai=n,rn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ft(n){return Ff(ai,n)}function sa(n,o){return ai===null&&si(n),Ff(n,o)}function Ff(n,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},rn===null){if(n===null)throw Error(l(308));rn=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else rn=rn.next=o;return a}var mx=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){o.aborted=!0,n.forEach(function(a){return a()})}},px=t.unstable_scheduleCallback,hx=t.unstable_NormalPriority,tt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pr(){return{controller:new mx,data:new Map,refCount:0}}function Zo(n){n.refCount--,n.refCount===0&&px(hx,function(){n.controller.abort()})}var $o=null,hr=0,Oi=0,qi=null;function gx(n,o){if($o===null){var a=$o=[];hr=0,Oi=yu(),qi={status:"pending",value:void 0,then:function(c){a.push(c)}}}return hr++,o.then(Yf,Yf),o}function Yf(){if(--hr===0&&$o!==null){qi!==null&&(qi.status="fulfilled");var n=$o;$o=null,Oi=0,qi=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function yx(n,o){var a=[],c={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){c.status="fulfilled",c.value=o;for(var d=0;d<a.length;d++)(0,a[d])(o)},function(d){for(c.status="rejected",c.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),c}var Jf=P.S;P.S=function(n,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&gx(n,o),Jf!==null&&Jf(n,o)};var ri=V(null);function gr(){var n=ri.current;return n!==null?n:ze.pooledCache}function ra(n,o){o===null?J(ri,ri.current):J(ri,o.pool)}function Kf(){var n=gr();return n===null?null:{parent:tt._currentValue,pool:n}}var Xo=Error(l(460)),Zf=Error(l(474)),ua=Error(l(542)),yr={then:function(){}};function $f(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ca(){}function Xf(n,o,a){switch(a=n[a],a===void 0?n.push(o):a!==o&&(o.then(ca,ca),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,jf(n),n;default:if(typeof o.status=="string")o.then(ca,ca);else{if(n=ze,n!==null&&100<n.shellSuspendCounter)throw Error(l(482));n=o,n.status="pending",n.then(function(c){if(o.status==="pending"){var d=o;d.status="fulfilled",d.value=c}},function(c){if(o.status==="pending"){var d=o;d.status="rejected",d.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,jf(n),n}throw Qo=o,Xo}}var Qo=null;function Qf(){if(Qo===null)throw Error(l(459));var n=Qo;return Qo=null,n}function jf(n){if(n===Xo||n===ua)throw Error(l(483))}var Nn=!1;function vr(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xr(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Mn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Rn(n,o,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var d=c.pending;return d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o,o=na(n),Of(n,null,a),o}return ta(n,c,o,a),na(n)}function jo(n,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=n.pendingLanes,a|=c,o.lanes=a,Fc(n,a)}}function Tr(n,o){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,a=a.next}while(a!==null);g===null?d=g=o:g=g.next=o}else d=g=o;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=o:n.next=o,a.lastBaseUpdate=o}var Sr=!1;function Wo(){if(Sr){var n=qi;if(n!==null)throw n}}function el(n,o,a,c){Sr=!1;var d=n.updateQueue;Nn=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var C=_,D=C.next;C.next=null,T===null?g=D:T.next=D,T=C;var O=n.alternate;O!==null&&(O=O.updateQueue,_=O.lastBaseUpdate,_!==T&&(_===null?O.firstBaseUpdate=D:_.next=D,O.lastBaseUpdate=C))}if(g!==null){var B=d.baseState;T=0,O=D=C=null,_=g;do{var I=_.lane&-536870913,U=I!==_.lane;if(U?(Ne&I)===I:(c&I)===I){I!==0&&I===Oi&&(Sr=!0),O!==null&&(O=O.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var pe=n,de=_;I=o;var qe=a;switch(de.tag){case 1:if(pe=de.payload,typeof pe=="function"){B=pe.call(qe,B,I);break e}B=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=de.payload,I=typeof pe=="function"?pe.call(qe,B,I):pe,I==null)break e;B=v({},B,I);break e;case 2:Nn=!0}}I=_.callback,I!==null&&(n.flags|=64,U&&(n.flags|=8192),U=d.callbacks,U===null?d.callbacks=[I]:U.push(I))}else U={lane:I,tag:_.tag,payload:_.payload,callback:_.callback,next:null},O===null?(D=O=U,C=B):O=O.next=U,T|=I;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;U=_,_=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);O===null&&(C=B),d.baseState=C,d.firstBaseUpdate=D,d.lastBaseUpdate=O,g===null&&(d.shared.lanes=0),Pn|=T,n.lanes=T,n.memoizedState=B}}function Wf(n,o){if(typeof n!="function")throw Error(l(191,n));n.call(o)}function ed(n,o){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Wf(a[n],o)}var Gi=V(null),fa=V(0);function td(n,o){n=gn,J(fa,n),J(Gi,o),gn=n|o.baseLanes}function _r(){J(fa,gn),J(Gi,Gi.current)}function Er(){gn=fa.current,K(Gi),K(fa)}var wn=0,Se=null,Pe=null,je=null,da=!1,Bi=!1,ui=!1,ma=0,tl=0,zi=null,vx=0;function Xe(){throw Error(l(321))}function Cr(n,o){if(o===null)return!1;for(var a=0;a<o.length&&a<n.length;a++)if(!Et(n[a],o[a]))return!1;return!0}function Ar(n,o,a,c,d,g){return wn=g,Se=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=n===null||n.memoizedState===null?Od:qd,ui=!1,g=a(c,d),ui=!1,Bi&&(g=id(o,a,c,d)),nd(n),g}function nd(n){P.H=xa;var o=Pe!==null&&Pe.next!==null;if(wn=0,je=Pe=Se=null,da=!1,tl=0,zi=null,o)throw Error(l(300));n===null||ot||(n=n.dependencies,n!==null&&aa(n)&&(ot=!0))}function id(n,o,a,c){Se=n;var d=0;do{if(Bi&&(zi=null),tl=0,Bi=!1,25<=d)throw Error(l(301));if(d+=1,je=Pe=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=Ax,g=o(a,c)}while(Bi);return g}function xx(){var n=P.H,o=n.useState()[0];return o=typeof o.then=="function"?nl(o):o,n=n.useState()[0],(Pe!==null?Pe.memoizedState:null)!==n&&(Se.flags|=1024),o}function br(){var n=ma!==0;return ma=0,n}function Nr(n,o,a){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~a}function Mr(n){if(da){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}da=!1}wn=0,je=Pe=Se=null,Bi=!1,tl=ma=0,zi=null}function vt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Se.memoizedState=je=n:je=je.next=n,je}function We(){if(Pe===null){var n=Se.alternate;n=n!==null?n.memoizedState:null}else n=Pe.next;var o=je===null?Se.memoizedState:je.next;if(o!==null)je=o,Pe=n;else{if(n===null)throw Se.alternate===null?Error(l(467)):Error(l(310));Pe=n,n={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},je===null?Se.memoizedState=je=n:je=je.next=n}return je}function Rr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(n){var o=tl;return tl+=1,zi===null&&(zi=[]),n=Xf(zi,n,o),o=Se,(je===null?o.memoizedState:je.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?Od:qd),n}function pa(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return nl(n);if(n.$$typeof===F)return ft(n)}throw Error(l(438,String(n)))}function wr(n){var o=null,a=Se.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=Se.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(d){return d.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Rr(),Se.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(n),c=0;c<n;c++)a[c]=ve;return o.index++,a}function cn(n,o){return typeof o=="function"?o(n):o}function ha(n){var o=We();return Dr(o,Pe,n)}function Dr(n,o,a){var c=n.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=a;var d=n.baseQueue,g=c.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}o.baseQueue=d=g,c.pending=null}if(g=n.baseState,d===null)n.memoizedState=g;else{o=d.next;var _=T=null,C=null,D=o,O=!1;do{var B=D.lane&-536870913;if(B!==D.lane?(Ne&B)===B:(wn&B)===B){var I=D.revertLane;if(I===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),B===Oi&&(O=!0);else if((wn&I)===I){D=D.next,I===Oi&&(O=!0);continue}else B={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},C===null?(_=C=B,T=g):C=C.next=B,Se.lanes|=I,Pn|=I;B=D.action,ui&&a(g,B),g=D.hasEagerState?D.eagerState:a(g,B)}else I={lane:B,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},C===null?(_=C=I,T=g):C=C.next=I,Se.lanes|=B,Pn|=B;D=D.next}while(D!==null&&D!==o);if(C===null?T=g:C.next=_,!Et(g,n.memoizedState)&&(ot=!0,O&&(a=qi,a!==null)))throw a;n.memoizedState=g,n.baseState=T,n.baseQueue=C,c.lastRenderedState=g}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Ir(n){var o=We(),a=o.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=o.memoizedState;if(d!==null){a.pending=null;var T=d=d.next;do g=n(g,T.action),T=T.next;while(T!==d);Et(g,o.memoizedState)||(ot=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),a.lastRenderedState=g}return[g,c]}function od(n,o,a){var c=Se,d=We(),g=Ie;if(g){if(a===void 0)throw Error(l(407));a=a()}else a=o();var T=!Et((Pe||d).memoizedState,a);T&&(d.memoizedState=a,ot=!0),d=d.queue;var _=sd.bind(null,c,d,n);if(il(2048,8,_,[n]),d.getSnapshot!==o||T||je!==null&&je.memoizedState.tag&1){if(c.flags|=2048,Hi(9,ga(),ad.bind(null,c,d,a,o),null),ze===null)throw Error(l(349));g||(wn&124)!==0||ld(c,o,a)}return a}function ld(n,o,a){n.flags|=16384,n={getSnapshot:o,value:a},o=Se.updateQueue,o===null?(o=Rr(),Se.updateQueue=o,o.stores=[n]):(a=o.stores,a===null?o.stores=[n]:a.push(n))}function ad(n,o,a,c){o.value=a,o.getSnapshot=c,rd(o)&&ud(n)}function sd(n,o,a){return a(function(){rd(o)&&ud(n)})}function rd(n){var o=n.getSnapshot;n=n.value;try{var a=o();return!Et(n,a)}catch{return!0}}function ud(n){var o=ki(n,2);o!==null&&Rt(o,n,2)}function Ur(n){var o=vt();if(typeof n=="function"){var a=n;if(n=a(),ui){En(!0);try{a()}finally{En(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:n},o}function cd(n,o,a,c){return n.baseState=a,Dr(n,Pe,typeof c=="function"?c:cn)}function Tx(n,o,a,c,d){if(va(n))throw Error(l(485));if(n=o.action,n!==null){var g={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};P.T!==null?a(!0):g.isTransition=!1,c(g),a=o.pending,a===null?(g.next=o.pending=g,fd(o,g)):(g.next=a.next,o.pending=a.next=g)}}function fd(n,o){var a=o.action,c=o.payload,d=n.state;if(o.isTransition){var g=P.T,T={};P.T=T;try{var _=a(d,c),C=P.S;C!==null&&C(T,_),dd(n,o,_)}catch(D){kr(n,o,D)}finally{P.T=g}}else try{g=a(d,c),dd(n,o,g)}catch(D){kr(n,o,D)}}function dd(n,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){md(n,o,c)},function(c){return kr(n,o,c)}):md(n,o,a)}function md(n,o,a){o.status="fulfilled",o.value=a,pd(o),n.state=a,o=n.pending,o!==null&&(a=o.next,a===o?n.pending=null:(a=a.next,o.next=a,fd(n,a)))}function kr(n,o,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,pd(o),o=o.next;while(o!==c)}n.action=null}function pd(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function hd(n,o){return o}function gd(n,o){if(Ie){var a=ze.formState;if(a!==null){e:{var c=Se;if(Ie){if(Ze){t:{for(var d=Ze,g=Kt;d.nodeType!==8;){if(!g){d=null;break t}if(d=Ft(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Ze=Ft(d.nextSibling),c=d.data==="F!";break e}}li(c)}c=!1}c&&(o=a[0])}}return a=vt(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hd,lastRenderedState:o},a.queue=c,a=Ld.bind(null,Se,c),c.dispatch=a,c=Ur(!1),g=qr.bind(null,Se,!1,c.queue),c=vt(),d={state:o,dispatch:null,action:n,pending:null},c.queue=d,a=Tx.bind(null,Se,d,g,a),d.dispatch=a,c.memoizedState=n,[o,a,!1]}function yd(n){var o=We();return vd(o,Pe,n)}function vd(n,o,a){if(o=Dr(n,o,hd)[0],n=ha(cn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=nl(o)}catch(T){throw T===Xo?ua:T}else c=o;o=We();var d=o.queue,g=d.dispatch;return a!==o.memoizedState&&(Se.flags|=2048,Hi(9,ga(),Sx.bind(null,d,a),null)),[c,g,n]}function Sx(n,o){n.action=o}function xd(n){var o=We(),a=Pe;if(a!==null)return vd(o,a,n);We(),o=o.memoizedState,a=We();var c=a.queue.dispatch;return a.memoizedState=n,[o,c,!1]}function Hi(n,o,a,c){return n={tag:n,create:a,deps:c,inst:o,next:null},o=Se.updateQueue,o===null&&(o=Rr(),Se.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,o.lastEffect=n),n}function ga(){return{destroy:void 0,resource:void 0}}function Td(){return We().memoizedState}function ya(n,o,a,c){var d=vt();c=c===void 0?null:c,Se.flags|=n,d.memoizedState=Hi(1|o,ga(),a,c)}function il(n,o,a,c){var d=We();c=c===void 0?null:c;var g=d.memoizedState.inst;Pe!==null&&c!==null&&Cr(c,Pe.memoizedState.deps)?d.memoizedState=Hi(o,g,a,c):(Se.flags|=n,d.memoizedState=Hi(1|o,g,a,c))}function Sd(n,o){ya(8390656,8,n,o)}function _d(n,o){il(2048,8,n,o)}function Ed(n,o){return il(4,2,n,o)}function Cd(n,o){return il(4,4,n,o)}function Ad(n,o){if(typeof o=="function"){n=n();var a=o(n);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function bd(n,o,a){a=a!=null?a.concat([n]):null,il(4,4,Ad.bind(null,o,n),a)}function Lr(){}function Nd(n,o){var a=We();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&Cr(o,c[1])?c[0]:(a.memoizedState=[n,o],n)}function Md(n,o){var a=We();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&Cr(o,c[1]))return c[0];if(c=n(),ui){En(!0);try{n()}finally{En(!1)}}return a.memoizedState=[c,o],c}function Vr(n,o,a){return a===void 0||(wn&1073741824)!==0?n.memoizedState=o:(n.memoizedState=a,n=Dm(),Se.lanes|=n,Pn|=n,a)}function Rd(n,o,a,c){return Et(a,o)?a:Gi.current!==null?(n=Vr(n,a,c),Et(n,o)||(ot=!0),n):(wn&42)===0?(ot=!0,n.memoizedState=a):(n=Dm(),Se.lanes|=n,Pn|=n,o)}function wd(n,o,a,c,d){var g=j.p;j.p=g!==0&&8>g?g:8;var T=P.T,_={};P.T=_,qr(n,!1,o,a);try{var C=d(),D=P.S;if(D!==null&&D(_,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var O=yx(C,c);ol(n,o,O,Mt(n))}else ol(n,o,c,Mt(n))}catch(B){ol(n,o,{then:function(){},status:"rejected",reason:B},Mt())}finally{j.p=g,P.T=T}}function _x(){}function Pr(n,o,a,c){if(n.tag!==5)throw Error(l(476));var d=Dd(n).queue;wd(n,d,o,fe,a===null?_x:function(){return Id(n),a(c)})}function Dd(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:fe},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:a},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function Id(n){var o=Dd(n).next.queue;ol(n,o,{},Mt())}function Or(){return ft(_l)}function Ud(){return We().memoizedState}function kd(){return We().memoizedState}function Ex(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var a=Mt();n=Mn(a);var c=Rn(o,n,a);c!==null&&(Rt(c,o,a),jo(c,o,a)),o={cache:pr()},n.payload=o;return}o=o.return}}function Cx(n,o,a){var c=Mt();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},va(n)?Vd(o,a):(a=or(n,o,a,c),a!==null&&(Rt(a,n,c),Pd(a,o,c)))}function Ld(n,o,a){var c=Mt();ol(n,o,a,c)}function ol(n,o,a,c){var d={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(va(n))Vd(o,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var T=o.lastRenderedState,_=g(T,a);if(d.hasEagerState=!0,d.eagerState=_,Et(_,T))return ta(n,o,d,0),ze===null&&ea(),!1}catch{}finally{}if(a=or(n,o,d,c),a!==null)return Rt(a,n,c),Pd(a,o,c),!0}return!1}function qr(n,o,a,c){if(c={lane:2,revertLane:yu(),action:c,hasEagerState:!1,eagerState:null,next:null},va(n)){if(o)throw Error(l(479))}else o=or(n,a,c,2),o!==null&&Rt(o,n,2)}function va(n){var o=n.alternate;return n===Se||o!==null&&o===Se}function Vd(n,o){Bi=da=!0;var a=n.pending;a===null?o.next=o:(o.next=a.next,a.next=o),n.pending=o}function Pd(n,o,a){if((a&4194048)!==0){var c=o.lanes;c&=n.pendingLanes,a|=c,o.lanes=a,Fc(n,a)}}var xa={readContext:ft,use:pa,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe},Od={readContext:ft,use:pa,useCallback:function(n,o){return vt().memoizedState=[n,o===void 0?null:o],n},useContext:ft,useEffect:Sd,useImperativeHandle:function(n,o,a){a=a!=null?a.concat([n]):null,ya(4194308,4,Ad.bind(null,o,n),a)},useLayoutEffect:function(n,o){return ya(4194308,4,n,o)},useInsertionEffect:function(n,o){ya(4,2,n,o)},useMemo:function(n,o){var a=vt();o=o===void 0?null:o;var c=n();if(ui){En(!0);try{n()}finally{En(!1)}}return a.memoizedState=[c,o],c},useReducer:function(n,o,a){var c=vt();if(a!==void 0){var d=a(o);if(ui){En(!0);try{a(o)}finally{En(!1)}}}else d=o;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=Cx.bind(null,Se,n),[c.memoizedState,n]},useRef:function(n){var o=vt();return n={current:n},o.memoizedState=n},useState:function(n){n=Ur(n);var o=n.queue,a=Ld.bind(null,Se,o);return o.dispatch=a,[n.memoizedState,a]},useDebugValue:Lr,useDeferredValue:function(n,o){var a=vt();return Vr(a,n,o)},useTransition:function(){var n=Ur(!1);return n=wd.bind(null,Se,n.queue,!0,!1),vt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,a){var c=Se,d=vt();if(Ie){if(a===void 0)throw Error(l(407));a=a()}else{if(a=o(),ze===null)throw Error(l(349));(Ne&124)!==0||ld(c,o,a)}d.memoizedState=a;var g={value:a,getSnapshot:o};return d.queue=g,Sd(sd.bind(null,c,g,n),[n]),c.flags|=2048,Hi(9,ga(),ad.bind(null,c,g,a,o),null),a},useId:function(){var n=vt(),o=ze.identifierPrefix;if(Ie){var a=sn,c=an;a=(c&~(1<<32-_t(c)-1)).toString(32)+a,o="«"+o+"R"+a,a=ma++,0<a&&(o+="H"+a.toString(32)),o+="»"}else a=vx++,o="«"+o+"r"+a.toString(32)+"»";return n.memoizedState=o},useHostTransitionStatus:Or,useFormState:gd,useActionState:gd,useOptimistic:function(n){var o=vt();o.memoizedState=o.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=qr.bind(null,Se,!0,a),a.dispatch=o,[n,o]},useMemoCache:wr,useCacheRefresh:function(){return vt().memoizedState=Ex.bind(null,Se)}},qd={readContext:ft,use:pa,useCallback:Nd,useContext:ft,useEffect:_d,useImperativeHandle:bd,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:Md,useReducer:ha,useRef:Td,useState:function(){return ha(cn)},useDebugValue:Lr,useDeferredValue:function(n,o){var a=We();return Rd(a,Pe.memoizedState,n,o)},useTransition:function(){var n=ha(cn)[0],o=We().memoizedState;return[typeof n=="boolean"?n:nl(n),o]},useSyncExternalStore:od,useId:Ud,useHostTransitionStatus:Or,useFormState:yd,useActionState:yd,useOptimistic:function(n,o){var a=We();return cd(a,Pe,n,o)},useMemoCache:wr,useCacheRefresh:kd},Ax={readContext:ft,use:pa,useCallback:Nd,useContext:ft,useEffect:_d,useImperativeHandle:bd,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:Md,useReducer:Ir,useRef:Td,useState:function(){return Ir(cn)},useDebugValue:Lr,useDeferredValue:function(n,o){var a=We();return Pe===null?Vr(a,n,o):Rd(a,Pe.memoizedState,n,o)},useTransition:function(){var n=Ir(cn)[0],o=We().memoizedState;return[typeof n=="boolean"?n:nl(n),o]},useSyncExternalStore:od,useId:Ud,useHostTransitionStatus:Or,useFormState:xd,useActionState:xd,useOptimistic:function(n,o){var a=We();return Pe!==null?cd(a,Pe,n,o):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:wr,useCacheRefresh:kd},Fi=null,ll=0;function Ta(n){var o=ll;return ll+=1,Fi===null&&(Fi=[]),Xf(Fi,n,o)}function al(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Sa(n,o){throw o.$$typeof===S?Error(l(525)):(n=Object.prototype.toString.call(o),Error(l(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Gd(n){var o=n._init;return o(n._payload)}function Bd(n){function o(R,N){if(n){var w=R.deletions;w===null?(R.deletions=[N],R.flags|=16):w.push(N)}}function a(R,N){if(!n)return null;for(;N!==null;)o(R,N),N=N.sibling;return null}function c(R){for(var N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function d(R,N){return R=ln(R,N),R.index=0,R.sibling=null,R}function g(R,N,w){return R.index=w,n?(w=R.alternate,w!==null?(w=w.index,w<N?(R.flags|=67108866,N):w):(R.flags|=67108866,N)):(R.flags|=1048576,N)}function T(R){return n&&R.alternate===null&&(R.flags|=67108866),R}function _(R,N,w,q){return N===null||N.tag!==6?(N=ar(w,R.mode,q),N.return=R,N):(N=d(N,w),N.return=R,N)}function C(R,N,w,q){var ne=w.type;return ne===M?O(R,N,w.props.children,q,w.key):N!==null&&(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ge&&Gd(ne)===N.type)?(N=d(N,w.props),al(N,w),N.return=R,N):(N=ia(w.type,w.key,w.props,null,R.mode,q),al(N,w),N.return=R,N)}function D(R,N,w,q){return N===null||N.tag!==4||N.stateNode.containerInfo!==w.containerInfo||N.stateNode.implementation!==w.implementation?(N=sr(w,R.mode,q),N.return=R,N):(N=d(N,w.children||[]),N.return=R,N)}function O(R,N,w,q,ne){return N===null||N.tag!==7?(N=ti(w,R.mode,q,ne),N.return=R,N):(N=d(N,w),N.return=R,N)}function B(R,N,w){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=ar(""+N,R.mode,w),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case E:return w=ia(N.type,N.key,N.props,null,R.mode,w),al(w,N),w.return=R,w;case A:return N=sr(N,R.mode,w),N.return=R,N;case ge:var q=N._init;return N=q(N._payload),B(R,N,w)}if(Ee(N)||le(N))return N=ti(N,R.mode,w,null),N.return=R,N;if(typeof N.then=="function")return B(R,Ta(N),w);if(N.$$typeof===F)return B(R,sa(R,N),w);Sa(R,N)}return null}function I(R,N,w,q){var ne=N!==null?N.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return ne!==null?null:_(R,N,""+w,q);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E:return w.key===ne?C(R,N,w,q):null;case A:return w.key===ne?D(R,N,w,q):null;case ge:return ne=w._init,w=ne(w._payload),I(R,N,w,q)}if(Ee(w)||le(w))return ne!==null?null:O(R,N,w,q,null);if(typeof w.then=="function")return I(R,N,Ta(w),q);if(w.$$typeof===F)return I(R,N,sa(R,w),q);Sa(R,w)}return null}function U(R,N,w,q,ne){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return R=R.get(w)||null,_(N,R,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return R=R.get(q.key===null?w:q.key)||null,C(N,R,q,ne);case A:return R=R.get(q.key===null?w:q.key)||null,D(N,R,q,ne);case ge:var _e=q._init;return q=_e(q._payload),U(R,N,w,q,ne)}if(Ee(q)||le(q))return R=R.get(w)||null,O(N,R,q,ne,null);if(typeof q.then=="function")return U(R,N,w,Ta(q),ne);if(q.$$typeof===F)return U(R,N,w,sa(N,q),ne);Sa(N,q)}return null}function pe(R,N,w,q){for(var ne=null,_e=null,ue=N,me=N=0,at=null;ue!==null&&me<w.length;me++){ue.index>me?(at=ue,ue=null):at=ue.sibling;var we=I(R,ue,w[me],q);if(we===null){ue===null&&(ue=at);break}n&&ue&&we.alternate===null&&o(R,ue),N=g(we,N,me),_e===null?ne=we:_e.sibling=we,_e=we,ue=at}if(me===w.length)return a(R,ue),Ie&&ii(R,me),ne;if(ue===null){for(;me<w.length;me++)ue=B(R,w[me],q),ue!==null&&(N=g(ue,N,me),_e===null?ne=ue:_e.sibling=ue,_e=ue);return Ie&&ii(R,me),ne}for(ue=c(ue);me<w.length;me++)at=U(ue,R,me,w[me],q),at!==null&&(n&&at.alternate!==null&&ue.delete(at.key===null?me:at.key),N=g(at,N,me),_e===null?ne=at:_e.sibling=at,_e=at);return n&&ue.forEach(function(Jn){return o(R,Jn)}),Ie&&ii(R,me),ne}function de(R,N,w,q){if(w==null)throw Error(l(151));for(var ne=null,_e=null,ue=N,me=N=0,at=null,we=w.next();ue!==null&&!we.done;me++,we=w.next()){ue.index>me?(at=ue,ue=null):at=ue.sibling;var Jn=I(R,ue,we.value,q);if(Jn===null){ue===null&&(ue=at);break}n&&ue&&Jn.alternate===null&&o(R,ue),N=g(Jn,N,me),_e===null?ne=Jn:_e.sibling=Jn,_e=Jn,ue=at}if(we.done)return a(R,ue),Ie&&ii(R,me),ne;if(ue===null){for(;!we.done;me++,we=w.next())we=B(R,we.value,q),we!==null&&(N=g(we,N,me),_e===null?ne=we:_e.sibling=we,_e=we);return Ie&&ii(R,me),ne}for(ue=c(ue);!we.done;me++,we=w.next())we=U(ue,R,me,we.value,q),we!==null&&(n&&we.alternate!==null&&ue.delete(we.key===null?me:we.key),N=g(we,N,me),_e===null?ne=we:_e.sibling=we,_e=we);return n&&ue.forEach(function(bT){return o(R,bT)}),Ie&&ii(R,me),ne}function qe(R,N,w,q){if(typeof w=="object"&&w!==null&&w.type===M&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case E:e:{for(var ne=w.key;N!==null;){if(N.key===ne){if(ne=w.type,ne===M){if(N.tag===7){a(R,N.sibling),q=d(N,w.props.children),q.return=R,R=q;break e}}else if(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ge&&Gd(ne)===N.type){a(R,N.sibling),q=d(N,w.props),al(q,w),q.return=R,R=q;break e}a(R,N);break}else o(R,N);N=N.sibling}w.type===M?(q=ti(w.props.children,R.mode,q,w.key),q.return=R,R=q):(q=ia(w.type,w.key,w.props,null,R.mode,q),al(q,w),q.return=R,R=q)}return T(R);case A:e:{for(ne=w.key;N!==null;){if(N.key===ne)if(N.tag===4&&N.stateNode.containerInfo===w.containerInfo&&N.stateNode.implementation===w.implementation){a(R,N.sibling),q=d(N,w.children||[]),q.return=R,R=q;break e}else{a(R,N);break}else o(R,N);N=N.sibling}q=sr(w,R.mode,q),q.return=R,R=q}return T(R);case ge:return ne=w._init,w=ne(w._payload),qe(R,N,w,q)}if(Ee(w))return pe(R,N,w,q);if(le(w)){if(ne=le(w),typeof ne!="function")throw Error(l(150));return w=ne.call(w),de(R,N,w,q)}if(typeof w.then=="function")return qe(R,N,Ta(w),q);if(w.$$typeof===F)return qe(R,N,sa(R,w),q);Sa(R,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,N!==null&&N.tag===6?(a(R,N.sibling),q=d(N,w),q.return=R,R=q):(a(R,N),q=ar(w,R.mode,q),q.return=R,R=q),T(R)):a(R,N)}return function(R,N,w,q){try{ll=0;var ne=qe(R,N,w,q);return Fi=null,ne}catch(ue){if(ue===Xo||ue===ua)throw ue;var _e=Ct(29,ue,null,R.mode);return _e.lanes=q,_e.return=R,_e}finally{}}}var Yi=Bd(!0),zd=Bd(!1),Pt=V(null),Zt=null;function Dn(n){var o=n.alternate;J(nt,nt.current&1),J(Pt,n),Zt===null&&(o===null||Gi.current!==null||o.memoizedState!==null)&&(Zt=n)}function Hd(n){if(n.tag===22){if(J(nt,nt.current),J(Pt,n),Zt===null){var o=n.alternate;o!==null&&o.memoizedState!==null&&(Zt=n)}}else In()}function In(){J(nt,nt.current),J(Pt,Pt.current)}function fn(n){K(Pt),Zt===n&&(Zt=null),K(nt)}var nt=V(0);function _a(n){for(var o=n;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ru(a)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Gr(n,o,a,c){o=n.memoizedState,a=a(c,o),a=a==null?o:v({},o,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Br={enqueueSetState:function(n,o,a){n=n._reactInternals;var c=Mt(),d=Mn(c);d.payload=o,a!=null&&(d.callback=a),o=Rn(n,d,c),o!==null&&(Rt(o,n,c),jo(o,n,c))},enqueueReplaceState:function(n,o,a){n=n._reactInternals;var c=Mt(),d=Mn(c);d.tag=1,d.payload=o,a!=null&&(d.callback=a),o=Rn(n,d,c),o!==null&&(Rt(o,n,c),jo(o,n,c))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var a=Mt(),c=Mn(a);c.tag=2,o!=null&&(c.callback=o),o=Rn(n,c,a),o!==null&&(Rt(o,n,a),jo(o,n,a))}};function Fd(n,o,a,c,d,g,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,T):o.prototype&&o.prototype.isPureReactComponent?!zo(a,c)||!zo(d,g):!0}function Yd(n,o,a,c){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==n&&Br.enqueueReplaceState(o,o.state,null)}function ci(n,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(n=n.defaultProps){a===o&&(a=v({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var Ea=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Jd(n){Ea(n)}function Kd(n){console.error(n)}function Zd(n){Ea(n)}function Ca(n,o){try{var a=n.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function $d(n,o,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function zr(n,o,a){return a=Mn(a),a.tag=3,a.payload={element:null},a.callback=function(){Ca(n,o)},a}function Xd(n){return n=Mn(n),n.tag=3,n}function Qd(n,o,a,c){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;n.payload=function(){return d(g)},n.callback=function(){$d(o,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){$d(o,a,c),typeof d!="function"&&(On===null?On=new Set([this]):On.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function bx(n,o,a,c,d){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&Ko(o,a,d,!0),a=Pt.current,a!==null){switch(a.tag){case 13:return Zt===null?du():a.alternate===null&&$e===0&&($e=3),a.flags&=-257,a.flags|=65536,a.lanes=d,c===yr?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),pu(n,c,d)),!1;case 22:return a.flags|=65536,c===yr?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),pu(n,c,d)),!1}throw Error(l(435,a.tag))}return pu(n,c,d),du(),!1}if(Ie)return o=Pt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=d,c!==cr&&(n=Error(l(422),{cause:c}),Jo(Ut(n,a)))):(c!==cr&&(o=Error(l(423),{cause:c}),Jo(Ut(o,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=Ut(c,a),d=zr(n.stateNode,c,d),Tr(n,d),$e!==4&&($e=2)),!1;var g=Error(l(520),{cause:c});if(g=Ut(g,a),ml===null?ml=[g]:ml.push(g),$e!==4&&($e=2),o===null)return!0;c=Ut(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=zr(a.stateNode,c,n),Tr(a,n),!1;case 1:if(o=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(On===null||!On.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Xd(d),Qd(d,n,a,c),Tr(a,d),!1}a=a.return}while(a!==null);return!1}var jd=Error(l(461)),ot=!1;function st(n,o,a,c){o.child=n===null?zd(o,null,a,c):Yi(o,n.child,a,c)}function Wd(n,o,a,c,d){a=a.render;var g=o.ref;if("ref"in c){var T={};for(var _ in c)_!=="ref"&&(T[_]=c[_])}else T=c;return si(o),c=Ar(n,o,a,T,g,d),_=br(),n!==null&&!ot?(Nr(n,o,d),dn(n,o,d)):(Ie&&_&&rr(o),o.flags|=1,st(n,o,c,d),o.child)}function em(n,o,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!lr(g)&&g.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=g,tm(n,o,g,c,d)):(n=ia(a.type,null,c,o,o.mode,d),n.ref=o.ref,n.return=o,o.child=n)}if(g=n.child,!Xr(n,d)){var T=g.memoizedProps;if(a=a.compare,a=a!==null?a:zo,a(T,c)&&n.ref===o.ref)return dn(n,o,d)}return o.flags|=1,n=ln(g,c),n.ref=o.ref,n.return=o,o.child=n}function tm(n,o,a,c,d){if(n!==null){var g=n.memoizedProps;if(zo(g,c)&&n.ref===o.ref)if(ot=!1,o.pendingProps=c=g,Xr(n,d))(n.flags&131072)!==0&&(ot=!0);else return o.lanes=n.lanes,dn(n,o,d)}return Hr(n,o,a,c,d)}function nm(n,o,a){var c=o.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((o.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,n!==null){for(d=o.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;o.childLanes=g&~c}else o.childLanes=0,o.child=null;return im(n,o,c,a)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&ra(o,g!==null?g.cachePool:null),g!==null?td(o,g):_r(),Hd(o);else return o.lanes=o.childLanes=536870912,im(n,o,g!==null?g.baseLanes|a:a,a)}else g!==null?(ra(o,g.cachePool),td(o,g),In(),o.memoizedState=null):(n!==null&&ra(o,null),_r(),In());return st(n,o,d,a),o.child}function im(n,o,a,c){var d=gr();return d=d===null?null:{parent:tt._currentValue,pool:d},o.memoizedState={baseLanes:a,cachePool:d},n!==null&&ra(o,null),_r(),Hd(o),n!==null&&Ko(n,o,c,!0),null}function Aa(n,o){var a=o.ref;if(a===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(n===null||n.ref!==a)&&(o.flags|=4194816)}}function Hr(n,o,a,c,d){return si(o),a=Ar(n,o,a,c,void 0,d),c=br(),n!==null&&!ot?(Nr(n,o,d),dn(n,o,d)):(Ie&&c&&rr(o),o.flags|=1,st(n,o,a,d),o.child)}function om(n,o,a,c,d,g){return si(o),o.updateQueue=null,a=id(o,c,a,d),nd(n),c=br(),n!==null&&!ot?(Nr(n,o,g),dn(n,o,g)):(Ie&&c&&rr(o),o.flags|=1,st(n,o,a,g),o.child)}function lm(n,o,a,c,d){if(si(o),o.stateNode===null){var g=Li,T=a.contextType;typeof T=="object"&&T!==null&&(g=ft(T)),g=new a(c,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Br,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=c,g.state=o.memoizedState,g.refs={},vr(o),T=a.contextType,g.context=typeof T=="object"&&T!==null?ft(T):Li,g.state=o.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Gr(o,a,T,c),g.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Br.enqueueReplaceState(g,g.state,null),el(o,c,g,d),Wo(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(n===null){g=o.stateNode;var _=o.memoizedProps,C=ci(a,_);g.props=C;var D=g.context,O=a.contextType;T=Li,typeof O=="object"&&O!==null&&(T=ft(O));var B=a.getDerivedStateFromProps;O=typeof B=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,O||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||D!==T)&&Yd(o,g,c,T),Nn=!1;var I=o.memoizedState;g.state=I,el(o,c,g,d),Wo(),D=o.memoizedState,_||I!==D||Nn?(typeof B=="function"&&(Gr(o,a,B,c),D=o.memoizedState),(C=Nn||Fd(o,a,C,c,I,D,T))?(O||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=D),g.props=c,g.state=D,g.context=T,c=C):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{g=o.stateNode,xr(n,o),T=o.memoizedProps,O=ci(a,T),g.props=O,B=o.pendingProps,I=g.context,D=a.contextType,C=Li,typeof D=="object"&&D!==null&&(C=ft(D)),_=a.getDerivedStateFromProps,(D=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==B||I!==C)&&Yd(o,g,c,C),Nn=!1,I=o.memoizedState,g.state=I,el(o,c,g,d),Wo();var U=o.memoizedState;T!==B||I!==U||Nn||n!==null&&n.dependencies!==null&&aa(n.dependencies)?(typeof _=="function"&&(Gr(o,a,_,c),U=o.memoizedState),(O=Nn||Fd(o,a,O,c,I,U,C)||n!==null&&n.dependencies!==null&&aa(n.dependencies))?(D||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,U,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,U,C)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=U),g.props=c,g.state=U,g.context=C,c=O):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(o.flags|=1024),c=!1)}return g=c,Aa(n,o),c=(o.flags&128)!==0,g||c?(g=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,n!==null&&c?(o.child=Yi(o,n.child,null,d),o.child=Yi(o,null,a,d)):st(n,o,a,d),o.memoizedState=g.state,n=o.child):n=dn(n,o,d),n}function am(n,o,a,c){return Yo(),o.flags|=256,st(n,o,a,c),o.child}var Fr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yr(n){return{baseLanes:n,cachePool:Kf()}}function Jr(n,o,a){return n=n!==null?n.childLanes&~a:0,o&&(n|=Ot),n}function sm(n,o,a){var c=o.pendingProps,d=!1,g=(o.flags&128)!==0,T;if((T=g)||(T=n!==null&&n.memoizedState===null?!1:(nt.current&2)!==0),T&&(d=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,n===null){if(Ie){if(d?Dn(o):In(),Ie){var _=Ze,C;if(C=_){e:{for(C=_,_=Kt;C.nodeType!==8;){if(!_){_=null;break e}if(C=Ft(C.nextSibling),C===null){_=null;break e}}_=C}_!==null?(o.memoizedState={dehydrated:_,treeContext:ni!==null?{id:an,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},C=Ct(18,null,null,0),C.stateNode=_,C.return=o,o.child=C,pt=o,Ze=null,C=!0):C=!1}C||li(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Ru(_)?o.lanes=32:o.lanes=536870912,null;fn(o)}return _=c.children,c=c.fallback,d?(In(),d=o.mode,_=ba({mode:"hidden",children:_},d),c=ti(c,d,a,null),_.return=o,c.return=o,_.sibling=c,o.child=_,d=o.child,d.memoizedState=Yr(a),d.childLanes=Jr(n,T,a),o.memoizedState=Fr,c):(Dn(o),Kr(o,_))}if(C=n.memoizedState,C!==null&&(_=C.dehydrated,_!==null)){if(g)o.flags&256?(Dn(o),o.flags&=-257,o=Zr(n,o,a)):o.memoizedState!==null?(In(),o.child=n.child,o.flags|=128,o=null):(In(),d=c.fallback,_=o.mode,c=ba({mode:"visible",children:c.children},_),d=ti(d,_,a,null),d.flags|=2,c.return=o,d.return=o,c.sibling=d,o.child=c,Yi(o,n.child,null,a),c=o.child,c.memoizedState=Yr(a),c.childLanes=Jr(n,T,a),o.memoizedState=Fr,o=d);else if(Dn(o),Ru(_)){if(T=_.nextSibling&&_.nextSibling.dataset,T)var D=T.dgst;T=D,c=Error(l(419)),c.stack="",c.digest=T,Jo({value:c,source:null,stack:null}),o=Zr(n,o,a)}else if(ot||Ko(n,o,a,!1),T=(a&n.childLanes)!==0,ot||T){if(T=ze,T!==null&&(c=a&-a,c=(c&42)!==0?1:ws(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==C.retryLane))throw C.retryLane=c,ki(n,c),Rt(T,n,c),jd;_.data==="$?"||du(),o=Zr(n,o,a)}else _.data==="$?"?(o.flags|=192,o.child=n.child,o=null):(n=C.treeContext,Ze=Ft(_.nextSibling),pt=o,Ie=!0,oi=null,Kt=!1,n!==null&&(Lt[Vt++]=an,Lt[Vt++]=sn,Lt[Vt++]=ni,an=n.id,sn=n.overflow,ni=o),o=Kr(o,c.children),o.flags|=4096);return o}return d?(In(),d=c.fallback,_=o.mode,C=n.child,D=C.sibling,c=ln(C,{mode:"hidden",children:c.children}),c.subtreeFlags=C.subtreeFlags&65011712,D!==null?d=ln(D,d):(d=ti(d,_,a,null),d.flags|=2),d.return=o,c.return=o,c.sibling=d,o.child=c,c=d,d=o.child,_=n.child.memoizedState,_===null?_=Yr(a):(C=_.cachePool,C!==null?(D=tt._currentValue,C=C.parent!==D?{parent:D,pool:D}:C):C=Kf(),_={baseLanes:_.baseLanes|a,cachePool:C}),d.memoizedState=_,d.childLanes=Jr(n,T,a),o.memoizedState=Fr,c):(Dn(o),a=n.child,n=a.sibling,a=ln(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,n!==null&&(T=o.deletions,T===null?(o.deletions=[n],o.flags|=16):T.push(n)),o.child=a,o.memoizedState=null,a)}function Kr(n,o){return o=ba({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function ba(n,o){return n=Ct(22,n,null,o),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Zr(n,o,a){return Yi(o,n.child,null,a),n=Kr(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function rm(n,o,a){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o),dr(n.return,o,a)}function $r(n,o,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function um(n,o,a){var c=o.pendingProps,d=c.revealOrder,g=c.tail;if(st(n,o,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rm(n,a,o);else if(n.tag===19)rm(n,a,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(J(nt,c),d){case"forwards":for(a=o.child,d=null;a!==null;)n=a.alternate,n!==null&&_a(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=o.child,o.child=null):(d=a.sibling,a.sibling=null),$r(o,!1,d,a,g);break;case"backwards":for(a=null,d=o.child,o.child=null;d!==null;){if(n=d.alternate,n!==null&&_a(n)===null){o.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}$r(o,!0,a,null,g);break;case"together":$r(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function dn(n,o,a){if(n!==null&&(o.dependencies=n.dependencies),Pn|=o.lanes,(a&o.childLanes)===0)if(n!==null){if(Ko(n,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(l(153));if(o.child!==null){for(n=o.child,a=ln(n,n.pendingProps),o.child=a,a.return=o;n.sibling!==null;)n=n.sibling,a=a.sibling=ln(n,n.pendingProps),a.return=o;a.sibling=null}return o.child}function Xr(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&aa(n)))}function Nx(n,o,a){switch(o.tag){case 3:Ve(o,o.stateNode.containerInfo),bn(o,tt,n.memoizedState.cache),Yo();break;case 27:case 5:As(o);break;case 4:Ve(o,o.stateNode.containerInfo);break;case 10:bn(o,o.type,o.memoizedProps.value);break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Dn(o),o.flags|=128,null):(a&o.child.childLanes)!==0?sm(n,o,a):(Dn(o),n=dn(n,o,a),n!==null?n.sibling:null);Dn(o);break;case 19:var d=(n.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(Ko(n,o,a,!1),c=(a&o.childLanes)!==0),d){if(c)return um(n,o,a);o.flags|=128}if(d=o.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),J(nt,nt.current),c)break;return null;case 22:case 23:return o.lanes=0,nm(n,o,a);case 24:bn(o,tt,n.memoizedState.cache)}return dn(n,o,a)}function cm(n,o,a){if(n!==null)if(n.memoizedProps!==o.pendingProps)ot=!0;else{if(!Xr(n,a)&&(o.flags&128)===0)return ot=!1,Nx(n,o,a);ot=(n.flags&131072)!==0}else ot=!1,Ie&&(o.flags&1048576)!==0&&Gf(o,la,o.index);switch(o.lanes=0,o.tag){case 16:e:{n=o.pendingProps;var c=o.elementType,d=c._init;if(c=d(c._payload),o.type=c,typeof c=="function")lr(c)?(n=ci(c,n),o.tag=1,o=lm(null,o,c,n,a)):(o.tag=0,o=Hr(null,o,c,n,a));else{if(c!=null){if(d=c.$$typeof,d===Q){o.tag=11,o=Wd(null,o,c,n,a);break e}else if(d===Z){o.tag=14,o=em(null,o,c,n,a);break e}}throw o=Ge(c)||c,Error(l(306,o,""))}}return o;case 0:return Hr(n,o,o.type,o.pendingProps,a);case 1:return c=o.type,d=ci(c,o.pendingProps),lm(n,o,c,d,a);case 3:e:{if(Ve(o,o.stateNode.containerInfo),n===null)throw Error(l(387));c=o.pendingProps;var g=o.memoizedState;d=g.element,xr(n,o),el(o,c,null,a);var T=o.memoizedState;if(c=T.cache,bn(o,tt,c),c!==g.cache&&mr(o,[tt],a,!0),Wo(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=am(n,o,c,a);break e}else if(c!==d){d=Ut(Error(l(424)),o),Jo(d),o=am(n,o,c,a);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ze=Ft(n.firstChild),pt=o,Ie=!0,oi=null,Kt=!0,a=zd(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yo(),c===d){o=dn(n,o,a);break e}st(n,o,c,a)}o=o.child}return o;case 26:return Aa(n,o),n===null?(a=pp(o.type,null,o.pendingProps,null))?o.memoizedState=a:Ie||(a=o.type,n=o.pendingProps,c=Ga(ae.current).createElement(a),c[ct]=o,c[gt]=n,ut(c,a,n),it(c),o.stateNode=c):o.memoizedState=pp(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return As(o),n===null&&Ie&&(c=o.stateNode=fp(o.type,o.pendingProps,ae.current),pt=o,Kt=!0,d=Ze,Bn(o.type)?(wu=d,Ze=Ft(c.firstChild)):Ze=d),st(n,o,o.pendingProps.children,a),Aa(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&Ie&&((d=c=Ze)&&(c=tT(c,o.type,o.pendingProps,Kt),c!==null?(o.stateNode=c,pt=o,Ze=Ft(c.firstChild),Kt=!1,d=!0):d=!1),d||li(o)),As(o),d=o.type,g=o.pendingProps,T=n!==null?n.memoizedProps:null,c=g.children,bu(d,g)?c=null:T!==null&&bu(d,T)&&(o.flags|=32),o.memoizedState!==null&&(d=Ar(n,o,xx,null,null,a),_l._currentValue=d),Aa(n,o),st(n,o,c,a),o.child;case 6:return n===null&&Ie&&((n=a=Ze)&&(a=nT(a,o.pendingProps,Kt),a!==null?(o.stateNode=a,pt=o,Ze=null,n=!0):n=!1),n||li(o)),null;case 13:return sm(n,o,a);case 4:return Ve(o,o.stateNode.containerInfo),c=o.pendingProps,n===null?o.child=Yi(o,null,c,a):st(n,o,c,a),o.child;case 11:return Wd(n,o,o.type,o.pendingProps,a);case 7:return st(n,o,o.pendingProps,a),o.child;case 8:return st(n,o,o.pendingProps.children,a),o.child;case 12:return st(n,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,bn(o,o.type,c.value),st(n,o,c.children,a),o.child;case 9:return d=o.type._context,c=o.pendingProps.children,si(o),d=ft(d),c=c(d),o.flags|=1,st(n,o,c,a),o.child;case 14:return em(n,o,o.type,o.pendingProps,a);case 15:return tm(n,o,o.type,o.pendingProps,a);case 19:return um(n,o,a);case 31:return c=o.pendingProps,a=o.mode,c={mode:c.mode,children:c.children},n===null?(a=ba(c,a),a.ref=o.ref,o.child=a,a.return=o,o=a):(a=ln(n.child,c),a.ref=o.ref,o.child=a,a.return=o,o=a),o;case 22:return nm(n,o,a);case 24:return si(o),c=ft(tt),n===null?(d=gr(),d===null&&(d=ze,g=pr(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),o.memoizedState={parent:c,cache:d},vr(o),bn(o,tt,d)):((n.lanes&a)!==0&&(xr(n,o),el(o,null,null,a),Wo()),d=n.memoizedState,g=o.memoizedState,d.parent!==c?(d={parent:c,cache:c},o.memoizedState=d,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=d),bn(o,tt,c)):(c=g.cache,bn(o,tt,c),c!==d.cache&&mr(o,[tt],a,!0))),st(n,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(l(156,o.tag))}function mn(n){n.flags|=4}function fm(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!xp(o)){if(o=Pt.current,o!==null&&((Ne&4194048)===Ne?Zt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||o!==Zt))throw Qo=yr,Zf;n.flags|=8192}}function Na(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?zc():536870912,n.lanes|=o,$i|=o)}function sl(n,o){if(!Ie)switch(n.tailMode){case"hidden":o=n.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ke(n){var o=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(o)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,o}function Mx(n,o,a){var c=o.pendingProps;switch(ur(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(o),null;case 1:return Ke(o),null;case 3:return a=o.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),un(tt),_n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Fo(o)?mn(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hf())),Ke(o),null;case 26:return a=o.memoizedState,n===null?(mn(o),a!==null?(Ke(o),fm(o,a)):(Ke(o),o.flags&=-16777217)):a?a!==n.memoizedState?(mn(o),Ke(o),fm(o,a)):(Ke(o),o.flags&=-16777217):(n.memoizedProps!==c&&mn(o),Ke(o),o.flags&=-16777217),null;case 27:Ol(o),a=ae.current;var d=o.type;if(n!==null&&o.stateNode!=null)n.memoizedProps!==c&&mn(o);else{if(!c){if(o.stateNode===null)throw Error(l(166));return Ke(o),null}n=ee.current,Fo(o)?Bf(o):(n=fp(d,c,a),o.stateNode=n,mn(o))}return Ke(o),null;case 5:if(Ol(o),a=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==c&&mn(o);else{if(!c){if(o.stateNode===null)throw Error(l(166));return Ke(o),null}if(n=ee.current,Fo(o))Bf(o);else{switch(d=Ga(ae.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?d.createElement(a,{is:c.is}):d.createElement(a)}}n[ct]=o,n[gt]=c;e:for(d=o.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break e;for(;d.sibling===null;){if(d.return===null||d.return===o)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o.stateNode=n;e:switch(ut(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&mn(o)}}return Ke(o),o.flags&=-16777217,null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==c&&mn(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(l(166));if(n=ae.current,Fo(o)){if(n=o.stateNode,a=o.memoizedProps,c=null,d=pt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[ct]=o,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||op(n.nodeValue,a)),n||li(o)}else n=Ga(n).createTextNode(c),n[ct]=o,o.stateNode=n}return Ke(o),null;case 13:if(c=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Fo(o),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(l(318));if(d=o.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[ct]=o}else Yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ke(o),d=!1}else d=Hf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return o.flags&256?(fn(o),o):(fn(o),null)}if(fn(o),(o.flags&128)!==0)return o.lanes=a,o;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=o.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return a!==n&&a&&(o.child.flags|=8192),Na(o,o.updateQueue),Ke(o),null;case 4:return _n(),n===null&&Su(o.stateNode.containerInfo),Ke(o),null;case 10:return un(o.type),Ke(o),null;case 19:if(K(nt),d=o.memoizedState,d===null)return Ke(o),null;if(c=(o.flags&128)!==0,g=d.rendering,g===null)if(c)sl(d,!1);else{if($e!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(g=_a(n),g!==null){for(o.flags|=128,sl(d,!1),n=g.updateQueue,o.updateQueue=n,Na(o,n),o.subtreeFlags=0,n=a,a=o.child;a!==null;)qf(a,n),a=a.sibling;return J(nt,nt.current&1|2),o.child}n=n.sibling}d.tail!==null&&Jt()>wa&&(o.flags|=128,c=!0,sl(d,!1),o.lanes=4194304)}else{if(!c)if(n=_a(g),n!==null){if(o.flags|=128,c=!0,n=n.updateQueue,o.updateQueue=n,Na(o,n),sl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Ie)return Ke(o),null}else 2*Jt()-d.renderingStartTime>wa&&a!==536870912&&(o.flags|=128,c=!0,sl(d,!1),o.lanes=4194304);d.isBackwards?(g.sibling=o.child,o.child=g):(n=d.last,n!==null?n.sibling=g:o.child=g,d.last=g)}return d.tail!==null?(o=d.tail,d.rendering=o,d.tail=o.sibling,d.renderingStartTime=Jt(),o.sibling=null,n=nt.current,J(nt,c?n&1|2:n&1),o):(Ke(o),null);case 22:case 23:return fn(o),Er(),c=o.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(Ke(o),o.subtreeFlags&6&&(o.flags|=8192)):Ke(o),a=o.updateQueue,a!==null&&Na(o,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),n!==null&&K(ri),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),un(tt),Ke(o),null;case 25:return null;case 30:return null}throw Error(l(156,o.tag))}function Rx(n,o){switch(ur(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return un(tt),_n(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return Ol(o),null;case 13:if(fn(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(l(340));Yo()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return K(nt),null;case 4:return _n(),null;case 10:return un(o.type),null;case 22:case 23:return fn(o),Er(),n!==null&&K(ri),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return un(tt),null;case 25:return null;default:return null}}function dm(n,o){switch(ur(o),o.tag){case 3:un(tt),_n();break;case 26:case 27:case 5:Ol(o);break;case 4:_n();break;case 13:fn(o);break;case 19:K(nt);break;case 10:un(o.type);break;case 22:case 23:fn(o),Er(),n!==null&&K(ri);break;case 24:un(tt)}}function rl(n,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&n)===n){c=void 0;var g=a.create,T=a.inst;c=g(),T.destroy=c}a=a.next}while(a!==d)}}catch(_){Be(o,o.return,_)}}function Un(n,o,a){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){var T=c.inst,_=T.destroy;if(_!==void 0){T.destroy=void 0,d=o;var C=a,D=_;try{D()}catch(O){Be(d,C,O)}}}c=c.next}while(c!==g)}}catch(O){Be(o,o.return,O)}}function mm(n){var o=n.updateQueue;if(o!==null){var a=n.stateNode;try{ed(o,a)}catch(c){Be(n,n.return,c)}}}function pm(n,o,a){a.props=ci(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){Be(n,o,c)}}function ul(n,o){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(d){Be(n,o,d)}}function $t(n,o){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(d){Be(n,o,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Be(n,o,d)}else a.current=null}function hm(n){var o=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(d){Be(n,n.return,d)}}function Qr(n,o,a){try{var c=n.stateNode;Xx(c,n.type,a,o),c[gt]=o}catch(d){Be(n,n.return,d)}}function gm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Bn(n.type)||n.tag===4}function jr(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Bn(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wr(n,o,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(n),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=qa));else if(c!==4&&(c===27&&Bn(n.type)&&(a=n.stateNode,o=null),n=n.child,n!==null))for(Wr(n,o,a),n=n.sibling;n!==null;)Wr(n,o,a),n=n.sibling}function Ma(n,o,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,o?a.insertBefore(n,o):a.appendChild(n);else if(c!==4&&(c===27&&Bn(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Ma(n,o,a),n=n.sibling;n!==null;)Ma(n,o,a),n=n.sibling}function ym(n){var o=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,d=o.attributes;d.length;)o.removeAttributeNode(d[0]);ut(o,c,a),o[ct]=n,o[gt]=a}catch(g){Be(n,n.return,g)}}var pn=!1,Qe=!1,eu=!1,vm=typeof WeakSet=="function"?WeakSet:Set,lt=null;function wx(n,o){if(n=n.containerInfo,Cu=Ja,n=Rf(n),js(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var T=0,_=-1,C=-1,D=0,O=0,B=n,I=null;t:for(;;){for(var U;B!==a||d!==0&&B.nodeType!==3||(_=T+d),B!==g||c!==0&&B.nodeType!==3||(C=T+c),B.nodeType===3&&(T+=B.nodeValue.length),(U=B.firstChild)!==null;)I=B,B=U;for(;;){if(B===n)break t;if(I===a&&++D===d&&(_=T),I===g&&++O===c&&(C=T),(U=B.nextSibling)!==null)break;B=I,I=B.parentNode}B=U}a=_===-1||C===-1?null:{start:_,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Au={focusedElem:n,selectionRange:a},Ja=!1,lt=o;lt!==null;)if(o=lt,n=o.child,(o.subtreeFlags&1024)!==0&&n!==null)n.return=o,lt=n;else for(;lt!==null;){switch(o=lt,g=o.alternate,n=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,a=o,d=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var pe=ci(a.type,d,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(pe,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(de){Be(a,a.return,de)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,a=n.nodeType,a===9)Mu(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Mu(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(l(163))}if(n=o.sibling,n!==null){n.return=o.return,lt=n;break}lt=o.return}}function xm(n,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:kn(n,a),c&4&&rl(5,a);break;case 1:if(kn(n,a),c&4)if(n=a.stateNode,o===null)try{n.componentDidMount()}catch(T){Be(a,a.return,T)}else{var d=ci(a.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(d,o,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Be(a,a.return,T)}}c&64&&mm(a),c&512&&ul(a,a.return);break;case 3:if(kn(n,a),c&64&&(n=a.updateQueue,n!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{ed(n,o)}catch(T){Be(a,a.return,T)}}break;case 27:o===null&&c&4&&ym(a);case 26:case 5:kn(n,a),o===null&&c&4&&hm(a),c&512&&ul(a,a.return);break;case 12:kn(n,a);break;case 13:kn(n,a),c&4&&_m(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=qx.bind(null,a),iT(n,a))));break;case 22:if(c=a.memoizedState!==null||pn,!c){o=o!==null&&o.memoizedState!==null||Qe,d=pn;var g=Qe;pn=c,(Qe=o)&&!g?Ln(n,a,(a.subtreeFlags&8772)!==0):kn(n,a),pn=d,Qe=g}break;case 30:break;default:kn(n,a)}}function Tm(n){var o=n.alternate;o!==null&&(n.alternate=null,Tm(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&Us(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Je=null,xt=!1;function hn(n,o,a){for(a=a.child;a!==null;)Sm(n,o,a),a=a.sibling}function Sm(n,o,a){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(wo,a)}catch{}switch(a.tag){case 26:Qe||$t(a,o),hn(n,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qe||$t(a,o);var c=Je,d=xt;Bn(a.type)&&(Je=a.stateNode,xt=!1),hn(n,o,a),vl(a.stateNode),Je=c,xt=d;break;case 5:Qe||$t(a,o);case 6:if(c=Je,d=xt,Je=null,hn(n,o,a),Je=c,xt=d,Je!==null)if(xt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(a.stateNode)}catch(g){Be(a,o,g)}else try{Je.removeChild(a.stateNode)}catch(g){Be(a,o,g)}break;case 18:Je!==null&&(xt?(n=Je,up(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),bl(n)):up(Je,a.stateNode));break;case 4:c=Je,d=xt,Je=a.stateNode.containerInfo,xt=!0,hn(n,o,a),Je=c,xt=d;break;case 0:case 11:case 14:case 15:Qe||Un(2,a,o),Qe||Un(4,a,o),hn(n,o,a);break;case 1:Qe||($t(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&pm(a,o,c)),hn(n,o,a);break;case 21:hn(n,o,a);break;case 22:Qe=(c=Qe)||a.memoizedState!==null,hn(n,o,a),Qe=c;break;default:hn(n,o,a)}}function _m(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bl(n)}catch(a){Be(o,o.return,a)}}function Dx(n){switch(n.tag){case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new vm),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new vm),o;default:throw Error(l(435,n.tag))}}function tu(n,o){var a=Dx(n);o.forEach(function(c){var d=Gx.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}function At(n,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c],g=n,T=o,_=T;e:for(;_!==null;){switch(_.tag){case 27:if(Bn(_.type)){Je=_.stateNode,xt=!1;break e}break;case 5:Je=_.stateNode,xt=!1;break e;case 3:case 4:Je=_.stateNode.containerInfo,xt=!0;break e}_=_.return}if(Je===null)throw Error(l(160));Sm(g,T,d),Je=null,xt=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Em(o,n),o=o.sibling}var Ht=null;function Em(n,o){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:At(o,n),bt(n),c&4&&(Un(3,n,n.return),rl(3,n),Un(5,n,n.return));break;case 1:At(o,n),bt(n),c&512&&(Qe||a===null||$t(a,a.return)),c&64&&pn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var d=Ht;if(At(o,n),bt(n),c&512&&(Qe||a===null||$t(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Uo]||g[ct]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),ut(g,c,a),g[ct]=n,it(g),c=g;break e;case"link":var T=yp("link","href",d).get(c+(a.href||""));if(T){for(var _=0;_<T.length;_++)if(g=T[_],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(_,1);break t}}g=d.createElement(c),ut(g,c,a),d.head.appendChild(g);break;case"meta":if(T=yp("meta","content",d).get(c+(a.content||""))){for(_=0;_<T.length;_++)if(g=T[_],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(_,1);break t}}g=d.createElement(c),ut(g,c,a),d.head.appendChild(g);break;default:throw Error(l(468,c))}g[ct]=n,it(g),c=g}n.stateNode=c}else vp(d,n.type,n.stateNode);else n.stateNode=gp(d,c,n.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?vp(d,n.type,n.stateNode):gp(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Qr(n,n.memoizedProps,a.memoizedProps)}break;case 27:At(o,n),bt(n),c&512&&(Qe||a===null||$t(a,a.return)),a!==null&&c&4&&Qr(n,n.memoizedProps,a.memoizedProps);break;case 5:if(At(o,n),bt(n),c&512&&(Qe||a===null||$t(a,a.return)),n.flags&32){d=n.stateNode;try{Ni(d,"")}catch(U){Be(n,n.return,U)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,Qr(n,d,a!==null?a.memoizedProps:d)),c&1024&&(eu=!0);break;case 6:if(At(o,n),bt(n),c&4){if(n.stateNode===null)throw Error(l(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(U){Be(n,n.return,U)}}break;case 3:if(Ha=null,d=Ht,Ht=Ba(o.containerInfo),At(o,n),Ht=d,bt(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{bl(o.containerInfo)}catch(U){Be(n,n.return,U)}eu&&(eu=!1,Cm(n));break;case 4:c=Ht,Ht=Ba(n.stateNode.containerInfo),At(o,n),bt(n),Ht=c;break;case 12:At(o,n),bt(n);break;case 13:At(o,n),bt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(su=Jt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,tu(n,c)));break;case 22:d=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,D=pn,O=Qe;if(pn=D||d,Qe=O||C,At(o,n),Qe=O,pn=D,bt(n),c&8192)e:for(o=n.stateNode,o._visibility=d?o._visibility&-2:o._visibility|1,d&&(a===null||C||pn||Qe||fi(n)),a=null,o=n;;){if(o.tag===5||o.tag===26){if(a===null){C=a=o;try{if(g=C.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{_=C.stateNode;var B=C.memoizedProps.style,I=B!=null&&B.hasOwnProperty("display")?B.display:null;_.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(U){Be(C,C.return,U)}}}else if(o.tag===6){if(a===null){C=o;try{C.stateNode.nodeValue=d?"":C.memoizedProps}catch(U){Be(C,C.return,U)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,tu(n,a))));break;case 19:At(o,n),bt(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,tu(n,c)));break;case 30:break;case 21:break;default:At(o,n),bt(n)}}function bt(n){var o=n.flags;if(o&2){try{for(var a,c=n.return;c!==null;){if(gm(c)){a=c;break}c=c.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var d=a.stateNode,g=jr(n);Ma(n,g,d);break;case 5:var T=a.stateNode;a.flags&32&&(Ni(T,""),a.flags&=-33);var _=jr(n);Ma(n,_,T);break;case 3:case 4:var C=a.stateNode.containerInfo,D=jr(n);Wr(n,D,C);break;default:throw Error(l(161))}}catch(O){Be(n,n.return,O)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Cm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;Cm(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function kn(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)xm(n,o.alternate,o),o=o.sibling}function fi(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:Un(4,o,o.return),fi(o);break;case 1:$t(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&pm(o,o.return,a),fi(o);break;case 27:vl(o.stateNode);case 26:case 5:$t(o,o.return),fi(o);break;case 22:o.memoizedState===null&&fi(o);break;case 30:fi(o);break;default:fi(o)}n=n.sibling}}function Ln(n,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,d=n,g=o,T=g.flags;switch(g.tag){case 0:case 11:case 15:Ln(d,g,a),rl(4,g);break;case 1:if(Ln(d,g,a),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(D){Be(c,c.return,D)}if(c=g,d=c.updateQueue,d!==null){var _=c.stateNode;try{var C=d.shared.hiddenCallbacks;if(C!==null)for(d.shared.hiddenCallbacks=null,d=0;d<C.length;d++)Wf(C[d],_)}catch(D){Be(c,c.return,D)}}a&&T&64&&mm(g),ul(g,g.return);break;case 27:ym(g);case 26:case 5:Ln(d,g,a),a&&c===null&&T&4&&hm(g),ul(g,g.return);break;case 12:Ln(d,g,a);break;case 13:Ln(d,g,a),a&&T&4&&_m(d,g);break;case 22:g.memoizedState===null&&Ln(d,g,a),ul(g,g.return);break;case 30:break;default:Ln(d,g,a)}o=o.sibling}}function nu(n,o){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Zo(a))}function iu(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Zo(n))}function Xt(n,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Am(n,o,a,c),o=o.sibling}function Am(n,o,a,c){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Xt(n,o,a,c),d&2048&&rl(9,o);break;case 1:Xt(n,o,a,c);break;case 3:Xt(n,o,a,c),d&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Zo(n)));break;case 12:if(d&2048){Xt(n,o,a,c),n=o.stateNode;try{var g=o.memoizedProps,T=g.id,_=g.onPostCommit;typeof _=="function"&&_(T,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){Be(o,o.return,C)}}else Xt(n,o,a,c);break;case 13:Xt(n,o,a,c);break;case 23:break;case 22:g=o.stateNode,T=o.alternate,o.memoizedState!==null?g._visibility&2?Xt(n,o,a,c):cl(n,o):g._visibility&2?Xt(n,o,a,c):(g._visibility|=2,Ji(n,o,a,c,(o.subtreeFlags&10256)!==0)),d&2048&&nu(T,o);break;case 24:Xt(n,o,a,c),d&2048&&iu(o.alternate,o);break;default:Xt(n,o,a,c)}}function Ji(n,o,a,c,d){for(d=d&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var g=n,T=o,_=a,C=c,D=T.flags;switch(T.tag){case 0:case 11:case 15:Ji(g,T,_,C,d),rl(8,T);break;case 23:break;case 22:var O=T.stateNode;T.memoizedState!==null?O._visibility&2?Ji(g,T,_,C,d):cl(g,T):(O._visibility|=2,Ji(g,T,_,C,d)),d&&D&2048&&nu(T.alternate,T);break;case 24:Ji(g,T,_,C,d),d&&D&2048&&iu(T.alternate,T);break;default:Ji(g,T,_,C,d)}o=o.sibling}}function cl(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=n,c=o,d=c.flags;switch(c.tag){case 22:cl(a,c),d&2048&&nu(c.alternate,c);break;case 24:cl(a,c),d&2048&&iu(c.alternate,c);break;default:cl(a,c)}o=o.sibling}}var fl=8192;function Ki(n){if(n.subtreeFlags&fl)for(n=n.child;n!==null;)bm(n),n=n.sibling}function bm(n){switch(n.tag){case 26:Ki(n),n.flags&fl&&n.memoizedState!==null&&gT(Ht,n.memoizedState,n.memoizedProps);break;case 5:Ki(n);break;case 3:case 4:var o=Ht;Ht=Ba(n.stateNode.containerInfo),Ki(n),Ht=o;break;case 22:n.memoizedState===null&&(o=n.alternate,o!==null&&o.memoizedState!==null?(o=fl,fl=16777216,Ki(n),fl=o):Ki(n));break;default:Ki(n)}}function Nm(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function dl(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];lt=c,Rm(c,n)}Nm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mm(n),n=n.sibling}function Mm(n){switch(n.tag){case 0:case 11:case 15:dl(n),n.flags&2048&&Un(9,n,n.return);break;case 3:dl(n);break;case 12:dl(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,Ra(n)):dl(n);break;default:dl(n)}}function Ra(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];lt=c,Rm(c,n)}Nm(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:Un(8,o,o.return),Ra(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Ra(o));break;default:Ra(o)}n=n.sibling}}function Rm(n,o){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:Un(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Zo(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,lt=c;else e:for(a=n;lt!==null;){c=lt;var d=c.sibling,g=c.return;if(Tm(c),c===a){lt=null;break e}if(d!==null){d.return=g,lt=d;break e}lt=g}}}var Ix={getCacheForType:function(n){var o=ft(tt),a=o.data.get(n);return a===void 0&&(a=n(),o.data.set(n,a)),a}},Ux=typeof WeakMap=="function"?WeakMap:Map,Ue=0,ze=null,Ce=null,Ne=0,ke=0,Nt=null,Vn=!1,Zi=!1,ou=!1,gn=0,$e=0,Pn=0,di=0,lu=0,Ot=0,$i=0,ml=null,Tt=null,au=!1,su=0,wa=1/0,Da=null,On=null,rt=0,qn=null,Xi=null,Qi=0,ru=0,uu=null,wm=null,pl=0,cu=null;function Mt(){if((Ue&2)!==0&&Ne!==0)return Ne&-Ne;if(P.T!==null){var n=Oi;return n!==0?n:yu()}return Yc()}function Dm(){Ot===0&&(Ot=(Ne&536870912)===0||Ie?Bc():536870912);var n=Pt.current;return n!==null&&(n.flags|=32),Ot}function Rt(n,o,a){(n===ze&&(ke===2||ke===9)||n.cancelPendingCommit!==null)&&(ji(n,0),Gn(n,Ne,Ot,!1)),Io(n,a),((Ue&2)===0||n!==ze)&&(n===ze&&((Ue&2)===0&&(di|=a),$e===4&&Gn(n,Ne,Ot,!1)),Qt(n))}function Im(n,o,a){if((Ue&6)!==0)throw Error(l(327));var c=!a&&(o&124)===0&&(o&n.expiredLanes)===0||Do(n,o),d=c?Vx(n,o):mu(n,o,!0),g=c;do{if(d===0){Zi&&!c&&Gn(n,o,0,!1);break}else{if(a=n.current.alternate,g&&!kx(a)){d=mu(n,o,!1),g=!1;continue}if(d===2){if(g=o,n.errorRecoveryDisabledLanes&g)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var _=n;d=ml;var C=_.current.memoizedState.isDehydrated;if(C&&(ji(_,T).flags|=256),T=mu(_,T,!1),T!==2){if(ou&&!C){_.errorRecoveryDisabledLanes|=g,di|=g,d=4;break e}g=Tt,Tt=d,g!==null&&(Tt===null?Tt=g:Tt.push.apply(Tt,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){ji(n,0),Gn(n,o,0,!0);break}e:{switch(c=n,g=d,g){case 0:case 1:throw Error(l(345));case 4:if((o&4194048)!==o)break;case 6:Gn(c,o,Ot,!Vn);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((o&62914560)===o&&(d=su+300-Jt(),10<d)){if(Gn(c,o,Ot,!Vn),zl(c,0,!0)!==0)break e;c.timeoutHandle=sp(Um.bind(null,c,a,Tt,Da,au,o,Ot,di,$i,Vn,g,2,-0,0),d);break e}Um(c,a,Tt,Da,au,o,Ot,di,$i,Vn,g,0,-0,0)}}break}while(!0);Qt(n)}function Um(n,o,a,c,d,g,T,_,C,D,O,B,I,U){if(n.timeoutHandle=-1,B=o.subtreeFlags,(B&8192||(B&16785408)===16785408)&&(Sl={stylesheets:null,count:0,unsuspend:hT},bm(o),B=yT(),B!==null)){n.cancelPendingCommit=B(Gm.bind(null,n,o,g,a,c,d,T,_,C,O,1,I,U)),Gn(n,g,T,!D);return}Gm(n,o,g,a,c,d,T,_,C)}function kx(n){for(var o=n;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Et(g(),d))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Gn(n,o,a,c){o&=~lu,o&=~di,n.suspendedLanes|=o,n.pingedLanes&=~o,c&&(n.warmLanes|=o),c=n.expirationTimes;for(var d=o;0<d;){var g=31-_t(d),T=1<<g;c[g]=-1,d&=~T}a!==0&&Hc(n,a,o)}function Ia(){return(Ue&6)===0?(hl(0),!1):!0}function fu(){if(Ce!==null){if(ke===0)var n=Ce.return;else n=Ce,rn=ai=null,Mr(n),Fi=null,ll=0,n=Ce;for(;n!==null;)dm(n.alternate,n),n=n.return;Ce=null}}function ji(n,o){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,jx(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),fu(),ze=n,Ce=a=ln(n.current,null),Ne=o,ke=0,Nt=null,Vn=!1,Zi=Do(n,o),ou=!1,$i=Ot=lu=di=Pn=$e=0,Tt=ml=null,au=!1,(o&8)!==0&&(o|=o&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=o;0<c;){var d=31-_t(c),g=1<<d;o|=n[d],c&=~g}return gn=o,ea(),a}function km(n,o){Se=null,P.H=xa,o===Xo||o===ua?(o=Qf(),ke=3):o===Zf?(o=Qf(),ke=4):ke=o===jd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Nt=o,Ce===null&&($e=1,Ca(n,Ut(o,n.current)))}function Lm(){var n=P.H;return P.H=xa,n===null?xa:n}function Vm(){var n=P.A;return P.A=Ix,n}function du(){$e=4,Vn||(Ne&4194048)!==Ne&&Pt.current!==null||(Zi=!0),(Pn&134217727)===0&&(di&134217727)===0||ze===null||Gn(ze,Ne,Ot,!1)}function mu(n,o,a){var c=Ue;Ue|=2;var d=Lm(),g=Vm();(ze!==n||Ne!==o)&&(Da=null,ji(n,o)),o=!1;var T=$e;e:do try{if(ke!==0&&Ce!==null){var _=Ce,C=Nt;switch(ke){case 8:fu(),T=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(o=!0);var D=ke;if(ke=0,Nt=null,Wi(n,_,C,D),a&&Zi){T=0;break e}break;default:D=ke,ke=0,Nt=null,Wi(n,_,C,D)}}Lx(),T=$e;break}catch(O){km(n,O)}while(!0);return o&&n.shellSuspendCounter++,rn=ai=null,Ue=c,P.H=d,P.A=g,Ce===null&&(ze=null,Ne=0,ea()),T}function Lx(){for(;Ce!==null;)Pm(Ce)}function Vx(n,o){var a=Ue;Ue|=2;var c=Lm(),d=Vm();ze!==n||Ne!==o?(Da=null,wa=Jt()+500,ji(n,o)):Zi=Do(n,o);e:do try{if(ke!==0&&Ce!==null){o=Ce;var g=Nt;t:switch(ke){case 1:ke=0,Nt=null,Wi(n,o,g,1);break;case 2:case 9:if($f(g)){ke=0,Nt=null,Om(o);break}o=function(){ke!==2&&ke!==9||ze!==n||(ke=7),Qt(n)},g.then(o,o);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:$f(g)?(ke=0,Nt=null,Om(o)):(ke=0,Nt=null,Wi(n,o,g,7));break;case 5:var T=null;switch(Ce.tag){case 26:T=Ce.memoizedState;case 5:case 27:var _=Ce;if(!T||xp(T)){ke=0,Nt=null;var C=_.sibling;if(C!==null)Ce=C;else{var D=_.return;D!==null?(Ce=D,Ua(D)):Ce=null}break t}}ke=0,Nt=null,Wi(n,o,g,5);break;case 6:ke=0,Nt=null,Wi(n,o,g,6);break;case 8:fu(),$e=6;break e;default:throw Error(l(462))}}Px();break}catch(O){km(n,O)}while(!0);return rn=ai=null,P.H=c,P.A=d,Ue=a,Ce!==null?0:(ze=null,Ne=0,ea(),$e)}function Px(){for(;Ce!==null&&!lv();)Pm(Ce)}function Pm(n){var o=cm(n.alternate,n,gn);n.memoizedProps=n.pendingProps,o===null?Ua(n):Ce=o}function Om(n){var o=n,a=o.alternate;switch(o.tag){case 15:case 0:o=om(a,o,o.pendingProps,o.type,void 0,Ne);break;case 11:o=om(a,o,o.pendingProps,o.type.render,o.ref,Ne);break;case 5:Mr(o);default:dm(a,o),o=Ce=qf(o,gn),o=cm(a,o,gn)}n.memoizedProps=n.pendingProps,o===null?Ua(n):Ce=o}function Wi(n,o,a,c){rn=ai=null,Mr(o),Fi=null,ll=0;var d=o.return;try{if(bx(n,d,o,a,Ne)){$e=1,Ca(n,Ut(a,n.current)),Ce=null;return}}catch(g){if(d!==null)throw Ce=d,g;$e=1,Ca(n,Ut(a,n.current)),Ce=null;return}o.flags&32768?(Ie||c===1?n=!0:Zi||(Ne&536870912)!==0?n=!1:(Vn=n=!0,(c===2||c===9||c===3||c===6)&&(c=Pt.current,c!==null&&c.tag===13&&(c.flags|=16384))),qm(o,n)):Ua(o)}function Ua(n){var o=n;do{if((o.flags&32768)!==0){qm(o,Vn);return}n=o.return;var a=Mx(o.alternate,o,gn);if(a!==null){Ce=a;return}if(o=o.sibling,o!==null){Ce=o;return}Ce=o=n}while(o!==null);$e===0&&($e=5)}function qm(n,o){do{var a=Rx(n.alternate,n);if(a!==null){a.flags&=32767,Ce=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(n=n.sibling,n!==null)){Ce=n;return}Ce=n=a}while(n!==null);$e=6,Ce=null}function Gm(n,o,a,c,d,g,T,_,C){n.cancelPendingCommit=null;do ka();while(rt!==0);if((Ue&6)!==0)throw Error(l(327));if(o!==null){if(o===n.current)throw Error(l(177));if(g=o.lanes|o.childLanes,g|=ir,hv(n,a,g,T,_,C),n===ze&&(Ce=ze=null,Ne=0),Xi=o,qn=n,Qi=a,ru=g,uu=d,wm=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Bx(ql,function(){return Ym(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null,d=j.p,j.p=2,T=Ue,Ue|=4;try{wx(n,o,a)}finally{Ue=T,j.p=d,P.T=c}}rt=1,Bm(),zm(),Hm()}}function Bm(){if(rt===1){rt=0;var n=qn,o=Xi,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var c=j.p;j.p=2;var d=Ue;Ue|=4;try{Em(o,n);var g=Au,T=Rf(n.containerInfo),_=g.focusedElem,C=g.selectionRange;if(T!==_&&_&&_.ownerDocument&&Mf(_.ownerDocument.documentElement,_)){if(C!==null&&js(_)){var D=C.start,O=C.end;if(O===void 0&&(O=D),"selectionStart"in _)_.selectionStart=D,_.selectionEnd=Math.min(O,_.value.length);else{var B=_.ownerDocument||document,I=B&&B.defaultView||window;if(I.getSelection){var U=I.getSelection(),pe=_.textContent.length,de=Math.min(C.start,pe),qe=C.end===void 0?de:Math.min(C.end,pe);!U.extend&&de>qe&&(T=qe,qe=de,de=T);var R=Nf(_,de),N=Nf(_,qe);if(R&&N&&(U.rangeCount!==1||U.anchorNode!==R.node||U.anchorOffset!==R.offset||U.focusNode!==N.node||U.focusOffset!==N.offset)){var w=B.createRange();w.setStart(R.node,R.offset),U.removeAllRanges(),de>qe?(U.addRange(w),U.extend(N.node,N.offset)):(w.setEnd(N.node,N.offset),U.addRange(w))}}}}for(B=[],U=_;U=U.parentNode;)U.nodeType===1&&B.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<B.length;_++){var q=B[_];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}Ja=!!Cu,Au=Cu=null}finally{Ue=d,j.p=c,P.T=a}}n.current=o,rt=2}}function zm(){if(rt===2){rt=0;var n=qn,o=Xi,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var c=j.p;j.p=2;var d=Ue;Ue|=4;try{xm(n,o.alternate,o)}finally{Ue=d,j.p=c,P.T=a}}rt=3}}function Hm(){if(rt===4||rt===3){rt=0,av();var n=qn,o=Xi,a=Qi,c=wm;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?rt=5:(rt=0,Xi=qn=null,Fm(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(On=null),Ds(a),o=o.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(wo,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=P.T,d=j.p,j.p=2,P.T=null;try{for(var g=n.onRecoverableError,T=0;T<c.length;T++){var _=c[T];g(_.value,{componentStack:_.stack})}}finally{P.T=o,j.p=d}}(Qi&3)!==0&&ka(),Qt(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===cu?pl++:(pl=0,cu=n):pl=0,hl(0)}}function Fm(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,Zo(o)))}function ka(n){return Bm(),zm(),Hm(),Ym()}function Ym(){if(rt!==5)return!1;var n=qn,o=ru;ru=0;var a=Ds(Qi),c=P.T,d=j.p;try{j.p=32>a?32:a,P.T=null,a=uu,uu=null;var g=qn,T=Qi;if(rt=0,Xi=qn=null,Qi=0,(Ue&6)!==0)throw Error(l(331));var _=Ue;if(Ue|=4,Mm(g.current),Am(g,g.current,T,a),Ue=_,hl(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(wo,g)}catch{}return!0}finally{j.p=d,P.T=c,Fm(n,o)}}function Jm(n,o,a){o=Ut(a,o),o=zr(n.stateNode,o,2),n=Rn(n,o,2),n!==null&&(Io(n,2),Qt(n))}function Be(n,o,a){if(n.tag===3)Jm(n,n,a);else for(;o!==null;){if(o.tag===3){Jm(o,n,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(On===null||!On.has(c))){n=Ut(a,n),a=Xd(2),c=Rn(o,a,2),c!==null&&(Qd(a,c,o,n),Io(c,2),Qt(c));break}}o=o.return}}function pu(n,o,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Ux;var d=new Set;c.set(o,d)}else d=c.get(o),d===void 0&&(d=new Set,c.set(o,d));d.has(a)||(ou=!0,d.add(a),n=Ox.bind(null,n,o,a),o.then(n,n))}function Ox(n,o,a){var c=n.pingCache;c!==null&&c.delete(o),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ze===n&&(Ne&a)===a&&($e===4||$e===3&&(Ne&62914560)===Ne&&300>Jt()-su?(Ue&2)===0&&ji(n,0):lu|=a,$i===Ne&&($i=0)),Qt(n)}function Km(n,o){o===0&&(o=zc()),n=ki(n,o),n!==null&&(Io(n,o),Qt(n))}function qx(n){var o=n.memoizedState,a=0;o!==null&&(a=o.retryLane),Km(n,a)}function Gx(n,o){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(l(314))}c!==null&&c.delete(o),Km(n,a)}function Bx(n,o){return Ns(n,o)}var La=null,eo=null,hu=!1,Va=!1,gu=!1,mi=0;function Qt(n){n!==eo&&n.next===null&&(eo===null?La=eo=n:eo=eo.next=n),Va=!0,hu||(hu=!0,Hx())}function hl(n,o){if(!gu&&Va){gu=!0;do for(var a=!1,c=La;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var T=c.suspendedLanes,_=c.pingedLanes;g=(1<<31-_t(42|n)+1)-1,g&=d&~(T&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Qm(c,g))}else g=Ne,g=zl(c,c===ze?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Do(c,g)||(a=!0,Qm(c,g));c=c.next}while(a);gu=!1}}function zx(){Zm()}function Zm(){Va=hu=!1;var n=0;mi!==0&&(Qx()&&(n=mi),mi=0);for(var o=Jt(),a=null,c=La;c!==null;){var d=c.next,g=$m(c,o);g===0?(c.next=null,a===null?La=d:a.next=d,d===null&&(eo=a)):(a=c,(n!==0||(g&3)!==0)&&(Va=!0)),c=d}hl(n)}function $m(n,o){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var T=31-_t(g),_=1<<T,C=d[T];C===-1?((_&a)===0||(_&c)!==0)&&(d[T]=pv(_,o)):C<=o&&(n.expiredLanes|=_),g&=~_}if(o=ze,a=Ne,a=zl(n,n===o?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===o&&(ke===2||ke===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ms(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Do(n,a)){if(o=a&-a,o===n.callbackPriority)return o;switch(c!==null&&Ms(c),Ds(a)){case 2:case 8:a=qc;break;case 32:a=ql;break;case 268435456:a=Gc;break;default:a=ql}return c=Xm.bind(null,n),a=Ns(a,c),n.callbackPriority=o,n.callbackNode=a,o}return c!==null&&c!==null&&Ms(c),n.callbackPriority=2,n.callbackNode=null,2}function Xm(n,o){if(rt!==0&&rt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ka()&&n.callbackNode!==a)return null;var c=Ne;return c=zl(n,n===ze?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Im(n,c,o),$m(n,Jt()),n.callbackNode!=null&&n.callbackNode===a?Xm.bind(null,n):null)}function Qm(n,o){if(ka())return null;Im(n,o,!0)}function Hx(){Wx(function(){(Ue&6)!==0?Ns(Oc,zx):Zm()})}function yu(){return mi===0&&(mi=Bc()),mi}function jm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Kl(""+n)}function Wm(n,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,n.id&&a.setAttribute("form",n.id),o.parentNode.insertBefore(a,o),n=new FormData(n),a.parentNode.removeChild(a),n}function Fx(n,o,a,c,d){if(o==="submit"&&a&&a.stateNode===d){var g=jm((d[gt]||null).action),T=c.submitter;T&&(o=(o=T[gt]||null)?jm(o.formAction):T.getAttribute("formAction"),o!==null&&(g=o,T=null));var _=new Ql("action","action",null,c,d);n.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(mi!==0){var C=T?Wm(d,T):new FormData(d);Pr(a,{pending:!0,data:C,method:d.method,action:g},null,C)}}else typeof g=="function"&&(_.preventDefault(),C=T?Wm(d,T):new FormData(d),Pr(a,{pending:!0,data:C,method:d.method,action:g},g,C))},currentTarget:d}]})}}for(var vu=0;vu<nr.length;vu++){var xu=nr[vu],Yx=xu.toLowerCase(),Jx=xu[0].toUpperCase()+xu.slice(1);zt(Yx,"on"+Jx)}zt(If,"onAnimationEnd"),zt(Uf,"onAnimationIteration"),zt(kf,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(ux,"onTransitionRun"),zt(cx,"onTransitionStart"),zt(fx,"onTransitionCancel"),zt(Lf,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function ep(n,o){o=(o&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(o)for(var T=c.length-1;0<=T;T--){var _=c[T],C=_.instance,D=_.currentTarget;if(_=_.listener,C!==g&&d.isPropagationStopped())break e;g=_,d.currentTarget=D;try{g(d)}catch(O){Ea(O)}d.currentTarget=null,g=C}else for(T=0;T<c.length;T++){if(_=c[T],C=_.instance,D=_.currentTarget,_=_.listener,C!==g&&d.isPropagationStopped())break e;g=_,d.currentTarget=D;try{g(d)}catch(O){Ea(O)}d.currentTarget=null,g=C}}}}function Ae(n,o){var a=o[Is];a===void 0&&(a=o[Is]=new Set);var c=n+"__bubble";a.has(c)||(tp(o,n,2,!1),a.add(c))}function Tu(n,o,a){var c=0;o&&(c|=4),tp(a,n,c,o)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function Su(n){if(!n[Pa]){n[Pa]=!0,Kc.forEach(function(a){a!=="selectionchange"&&(Kx.has(a)||Tu(a,!1,n),Tu(a,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Pa]||(o[Pa]=!0,Tu("selectionchange",!1,o))}}function tp(n,o,a,c){switch(Ap(o)){case 2:var d=TT;break;case 8:d=ST;break;default:d=Lu}a=d.bind(null,o,a,n),d=void 0,!Hs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(o,a,{capture:!0,passive:d}):n.addEventListener(o,a,!0):d!==void 0?n.addEventListener(o,a,{passive:d}):n.addEventListener(o,a,!1)}function _u(n,o,a,c,d){var g=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var _=c.stateNode.containerInfo;if(_===d)break;if(T===4)for(T=c.return;T!==null;){var C=T.tag;if((C===3||C===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;_!==null;){if(T=Si(_),T===null)return;if(C=T.tag,C===5||C===6||C===26||C===27){c=g=T;continue e}_=_.parentNode}}c=c.return}rf(function(){var D=g,O=Bs(a),B=[];e:{var I=Vf.get(n);if(I!==void 0){var U=Ql,pe=n;switch(n){case"keypress":if($l(a)===0)break e;case"keydown":case"keyup":U=Bv;break;case"focusin":pe="focus",U=Ks;break;case"focusout":pe="blur",U=Ks;break;case"beforeblur":case"afterblur":U=Ks;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Rv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Fv;break;case If:case Uf:case kf:U=Iv;break;case Lf:U=Jv;break;case"scroll":case"scrollend":U=Nv;break;case"wheel":U=Zv;break;case"copy":case"cut":case"paste":U=kv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=mf;break;case"toggle":case"beforetoggle":U=Xv}var de=(o&4)!==0,qe=!de&&(n==="scroll"||n==="scrollend"),R=de?I!==null?I+"Capture":null:I;de=[];for(var N=D,w;N!==null;){var q=N;if(w=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||w===null||R===null||(q=Lo(N,R),q!=null&&de.push(yl(N,q,w))),qe)break;N=N.return}0<de.length&&(I=new U(I,pe,null,a,O),B.push({event:I,listeners:de}))}}if((o&7)===0){e:{if(I=n==="mouseover"||n==="pointerover",U=n==="mouseout"||n==="pointerout",I&&a!==Gs&&(pe=a.relatedTarget||a.fromElement)&&(Si(pe)||pe[Ti]))break e;if((U||I)&&(I=O.window===O?O:(I=O.ownerDocument)?I.defaultView||I.parentWindow:window,U?(pe=a.relatedTarget||a.toElement,U=D,pe=pe?Si(pe):null,pe!==null&&(qe=f(pe),de=pe.tag,pe!==qe||de!==5&&de!==27&&de!==6)&&(pe=null)):(U=null,pe=D),U!==pe)){if(de=ff,q="onMouseLeave",R="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(de=mf,q="onPointerLeave",R="onPointerEnter",N="pointer"),qe=U==null?I:ko(U),w=pe==null?I:ko(pe),I=new de(q,N+"leave",U,a,O),I.target=qe,I.relatedTarget=w,q=null,Si(O)===D&&(de=new de(R,N+"enter",pe,a,O),de.target=w,de.relatedTarget=qe,q=de),qe=q,U&&pe)t:{for(de=U,R=pe,N=0,w=de;w;w=to(w))N++;for(w=0,q=R;q;q=to(q))w++;for(;0<N-w;)de=to(de),N--;for(;0<w-N;)R=to(R),w--;for(;N--;){if(de===R||R!==null&&de===R.alternate)break t;de=to(de),R=to(R)}de=null}else de=null;U!==null&&np(B,I,U,de,!1),pe!==null&&qe!==null&&np(B,qe,pe,de,!0)}}e:{if(I=D?ko(D):window,U=I.nodeName&&I.nodeName.toLowerCase(),U==="select"||U==="input"&&I.type==="file")var ne=Sf;else if(xf(I))if(_f)ne=ax;else{ne=ox;var _e=ix}else U=I.nodeName,!U||U.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?D&&qs(D.elementType)&&(ne=Sf):ne=lx;if(ne&&(ne=ne(n,D))){Tf(B,ne,a,O);break e}_e&&_e(n,I,D),n==="focusout"&&D&&I.type==="number"&&D.memoizedProps.value!=null&&Os(I,"number",I.value)}switch(_e=D?ko(D):window,n){case"focusin":(xf(_e)||_e.contentEditable==="true")&&(Di=_e,Ws=D,Ho=null);break;case"focusout":Ho=Ws=Di=null;break;case"mousedown":er=!0;break;case"contextmenu":case"mouseup":case"dragend":er=!1,wf(B,a,O);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":wf(B,a,O)}var ue;if($s)e:{switch(n){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else wi?yf(n,a)&&(me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(me="onCompositionStart");me&&(pf&&a.locale!=="ko"&&(wi||me!=="onCompositionStart"?me==="onCompositionEnd"&&wi&&(ue=uf()):(An=O,Fs="value"in An?An.value:An.textContent,wi=!0)),_e=Oa(D,me),0<_e.length&&(me=new df(me,n,null,a,O),B.push({event:me,listeners:_e}),ue?me.data=ue:(ue=vf(a),ue!==null&&(me.data=ue)))),(ue=jv?Wv(n,a):ex(n,a))&&(me=Oa(D,"onBeforeInput"),0<me.length&&(_e=new df("onBeforeInput","beforeinput",null,a,O),B.push({event:_e,listeners:me}),_e.data=ue)),Fx(B,n,D,a,O)}ep(B,o)})}function yl(n,o,a){return{instance:n,listener:o,currentTarget:a}}function Oa(n,o){for(var a=o+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Lo(n,a),d!=null&&c.unshift(yl(n,d,g)),d=Lo(n,o),d!=null&&c.push(yl(n,d,g))),n.tag===3)return c;n=n.return}return[]}function to(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function np(n,o,a,c,d){for(var g=o._reactName,T=[];a!==null&&a!==c;){var _=a,C=_.alternate,D=_.stateNode;if(_=_.tag,C!==null&&C===c)break;_!==5&&_!==26&&_!==27||D===null||(C=D,d?(D=Lo(a,g),D!=null&&T.unshift(yl(a,D,C))):d||(D=Lo(a,g),D!=null&&T.push(yl(a,D,C)))),a=a.return}T.length!==0&&n.push({event:o,listeners:T})}var Zx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function ip(n){return(typeof n=="string"?n:""+n).replace(Zx,`
`).replace($x,"")}function op(n,o){return o=ip(o),ip(n)===o}function qa(){}function Oe(n,o,a,c,d,g){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Ni(n,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Ni(n,""+c);break;case"className":Fl(n,"class",c);break;case"tabIndex":Fl(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Fl(n,a,c);break;case"style":af(n,c,g);break;case"data":if(o!=="object"){Fl(n,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Kl(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(o!=="input"&&Oe(n,o,"name",d.name,d,null),Oe(n,o,"formEncType",d.formEncType,d,null),Oe(n,o,"formMethod",d.formMethod,d,null),Oe(n,o,"formTarget",d.formTarget,d,null)):(Oe(n,o,"encType",d.encType,d,null),Oe(n,o,"method",d.method,d,null),Oe(n,o,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Kl(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=qa);break;case"onScroll":c!=null&&Ae("scroll",n);break;case"onScrollEnd":c!=null&&Ae("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(l(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Kl(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Ae("beforetoggle",n),Ae("toggle",n),Hl(n,"popover",c);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Hl(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Av.get(a)||a,Hl(n,a,c))}}function Eu(n,o,a,c,d,g){switch(a){case"style":af(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(l(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Ni(n,c):(typeof c=="number"||typeof c=="bigint")&&Ni(n,""+c);break;case"onScroll":c!=null&&Ae("scroll",n);break;case"onScrollEnd":c!=null&&Ae("scrollend",n);break;case"onClick":c!=null&&(n.onclick=qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),o=a.slice(2,d?a.length-7:void 0),g=n[gt]||null,g=g!=null?g[a]:null,typeof g=="function"&&n.removeEventListener(o,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(o,c,d);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Hl(n,a,c)}}}function ut(n,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",n),Ae("load",n);var c=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var T=a[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,o));default:Oe(n,o,g,T,a,null)}}d&&Oe(n,o,"srcSet",a.srcSet,a,null),c&&Oe(n,o,"src",a.src,a,null);return;case"input":Ae("invalid",n);var _=g=T=d=null,C=null,D=null;for(c in a)if(a.hasOwnProperty(c)){var O=a[c];if(O!=null)switch(c){case"name":d=O;break;case"type":T=O;break;case"checked":C=O;break;case"defaultChecked":D=O;break;case"value":g=O;break;case"defaultValue":_=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(l(137,o));break;default:Oe(n,o,c,O,a,null)}}tf(n,g,_,C,D,T,d,!1),Yl(n);return;case"select":Ae("invalid",n),c=T=g=null;for(d in a)if(a.hasOwnProperty(d)&&(_=a[d],_!=null))switch(d){case"value":g=_;break;case"defaultValue":T=_;break;case"multiple":c=_;default:Oe(n,o,d,_,a,null)}o=g,a=T,n.multiple=!!c,o!=null?bi(n,!!c,o,!1):a!=null&&bi(n,!!c,a,!0);return;case"textarea":Ae("invalid",n),g=d=c=null;for(T in a)if(a.hasOwnProperty(T)&&(_=a[T],_!=null))switch(T){case"value":c=_;break;case"defaultValue":d=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:Oe(n,o,T,_,a,null)}of(n,c,d,g),Yl(n);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(c=a[C],c!=null))switch(C){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Oe(n,o,C,c,a,null)}return;case"dialog":Ae("beforetoggle",n),Ae("toggle",n),Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":Ae("load",n);break;case"video":case"audio":for(c=0;c<gl.length;c++)Ae(gl[c],n);break;case"image":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"embed":case"source":case"link":Ae("error",n),Ae("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in a)if(a.hasOwnProperty(D)&&(c=a[D],c!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,o));default:Oe(n,o,D,c,a,null)}return;default:if(qs(o)){for(O in a)a.hasOwnProperty(O)&&(c=a[O],c!==void 0&&Eu(n,o,O,c,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(c=a[_],c!=null&&Oe(n,o,_,c,a,null))}function Xx(n,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,_=null,C=null,D=null,O=null;for(U in a){var B=a[U];if(a.hasOwnProperty(U)&&B!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":C=B;default:c.hasOwnProperty(U)||Oe(n,o,U,null,c,B)}}for(var I in c){var U=c[I];if(B=a[I],c.hasOwnProperty(I)&&(U!=null||B!=null))switch(I){case"type":g=U;break;case"name":d=U;break;case"checked":D=U;break;case"defaultChecked":O=U;break;case"value":T=U;break;case"defaultValue":_=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,o));break;default:U!==B&&Oe(n,o,I,U,c,B)}}Ps(n,T,_,C,D,O,g,d);return;case"select":U=T=_=I=null;for(g in a)if(C=a[g],a.hasOwnProperty(g)&&C!=null)switch(g){case"value":break;case"multiple":U=C;default:c.hasOwnProperty(g)||Oe(n,o,g,null,c,C)}for(d in c)if(g=c[d],C=a[d],c.hasOwnProperty(d)&&(g!=null||C!=null))switch(d){case"value":I=g;break;case"defaultValue":_=g;break;case"multiple":T=g;default:g!==C&&Oe(n,o,d,g,c,C)}o=_,a=T,c=U,I!=null?bi(n,!!a,I,!1):!!c!=!!a&&(o!=null?bi(n,!!a,o,!0):bi(n,!!a,a?[]:"",!1));return;case"textarea":U=I=null;for(_ in a)if(d=a[_],a.hasOwnProperty(_)&&d!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Oe(n,o,_,null,c,d)}for(T in c)if(d=c[T],g=a[T],c.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":I=d;break;case"defaultValue":U=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==g&&Oe(n,o,T,d,c,g)}nf(n,I,U);return;case"option":for(var pe in a)if(I=a[pe],a.hasOwnProperty(pe)&&I!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":n.selected=!1;break;default:Oe(n,o,pe,null,c,I)}for(C in c)if(I=c[C],U=a[C],c.hasOwnProperty(C)&&I!==U&&(I!=null||U!=null))switch(C){case"selected":n.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Oe(n,o,C,I,c,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in a)I=a[de],a.hasOwnProperty(de)&&I!=null&&!c.hasOwnProperty(de)&&Oe(n,o,de,null,c,I);for(D in c)if(I=c[D],U=a[D],c.hasOwnProperty(D)&&I!==U&&(I!=null||U!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(l(137,o));break;default:Oe(n,o,D,I,c,U)}return;default:if(qs(o)){for(var qe in a)I=a[qe],a.hasOwnProperty(qe)&&I!==void 0&&!c.hasOwnProperty(qe)&&Eu(n,o,qe,void 0,c,I);for(O in c)I=c[O],U=a[O],!c.hasOwnProperty(O)||I===U||I===void 0&&U===void 0||Eu(n,o,O,I,c,U);return}}for(var R in a)I=a[R],a.hasOwnProperty(R)&&I!=null&&!c.hasOwnProperty(R)&&Oe(n,o,R,null,c,I);for(B in c)I=c[B],U=a[B],!c.hasOwnProperty(B)||I===U||I==null&&U==null||Oe(n,o,B,I,c,U)}var Cu=null,Au=null;function Ga(n){return n.nodeType===9?n:n.ownerDocument}function lp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ap(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function bu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Nu=null;function Qx(){var n=window.event;return n&&n.type==="popstate"?n===Nu?!1:(Nu=n,!0):(Nu=null,!1)}var sp=typeof setTimeout=="function"?setTimeout:void 0,jx=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,Wx=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(n){return rp.resolve(null).then(n).catch(eT)}:sp;function eT(n){setTimeout(function(){throw n})}function Bn(n){return n==="head"}function up(n,o){var a=o,c=0,d=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var T=n.ownerDocument;if(a&1&&vl(T.documentElement),a&2&&vl(T.body),a&4)for(a=T.head,vl(a),T=a.firstChild;T;){var _=T.nextSibling,C=T.nodeName;T[Uo]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=_}}if(d===0){n.removeChild(g),bl(o);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);bl(o)}function Mu(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mu(a),Us(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function tT(n,o,a,c){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Uo])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Ft(n.nextSibling),n===null)break}return null}function nT(n,o,a){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ft(n.nextSibling),n===null))return null;return n}function Ru(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function iT(n,o){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ft(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return n}var wu=null;function cp(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return n;o--}else a==="/$"&&o++}n=n.previousSibling}return null}function fp(n,o,a){switch(o=Ga(a),n){case"html":if(n=o.documentElement,!n)throw Error(l(452));return n;case"head":if(n=o.head,!n)throw Error(l(453));return n;case"body":if(n=o.body,!n)throw Error(l(454));return n;default:throw Error(l(451))}}function vl(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);Us(n)}var qt=new Map,dp=new Set;function Ba(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var yn=j.d;j.d={f:oT,r:lT,D:aT,C:sT,L:rT,m:uT,X:fT,S:cT,M:dT};function oT(){var n=yn.f(),o=Ia();return n||o}function lT(n){var o=_i(n);o!==null&&o.tag===5&&o.type==="form"?Id(o):yn.r(n)}var no=typeof document>"u"?null:document;function mp(n,o,a){var c=no;if(c&&typeof o=="string"&&o){var d=It(o);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),dp.has(d)||(dp.add(d),n={rel:n,crossOrigin:a,href:o},c.querySelector(d)===null&&(o=c.createElement("link"),ut(o,"link",n),it(o),c.head.appendChild(o)))}}function aT(n){yn.D(n),mp("dns-prefetch",n,null)}function sT(n,o){yn.C(n,o),mp("preconnect",n,o)}function rT(n,o,a){yn.L(n,o,a);var c=no;if(c&&n&&o){var d='link[rel="preload"][as="'+It(o)+'"]';o==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+It(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+It(a.imageSizes)+'"]')):d+='[href="'+It(n)+'"]';var g=d;switch(o){case"style":g=io(n);break;case"script":g=oo(n)}qt.has(g)||(n=v({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:n,as:o},a),qt.set(g,n),c.querySelector(d)!==null||o==="style"&&c.querySelector(xl(g))||o==="script"&&c.querySelector(Tl(g))||(o=c.createElement("link"),ut(o,"link",n),it(o),c.head.appendChild(o)))}}function uT(n,o){yn.m(n,o);var a=no;if(a&&n){var c=o&&typeof o.as=="string"?o.as:"script",d='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(n)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=oo(n)}if(!qt.has(g)&&(n=v({rel:"modulepreload",href:n},o),qt.set(g,n),a.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Tl(g)))return}c=a.createElement("link"),ut(c,"link",n),it(c),a.head.appendChild(c)}}}function cT(n,o,a){yn.S(n,o,a);var c=no;if(c&&n){var d=Ei(c).hoistableStyles,g=io(n);o=o||"default";var T=d.get(g);if(!T){var _={loading:0,preload:null};if(T=c.querySelector(xl(g)))_.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":o},a),(a=qt.get(g))&&Du(n,a);var C=T=c.createElement("link");it(C),ut(C,"link",n),C._p=new Promise(function(D,O){C.onload=D,C.onerror=O}),C.addEventListener("load",function(){_.loading|=1}),C.addEventListener("error",function(){_.loading|=2}),_.loading|=4,za(T,o,c)}T={type:"stylesheet",instance:T,count:1,state:_},d.set(g,T)}}}function fT(n,o){yn.X(n,o);var a=no;if(a&&n){var c=Ei(a).hoistableScripts,d=oo(n),g=c.get(d);g||(g=a.querySelector(Tl(d)),g||(n=v({src:n,async:!0},o),(o=qt.get(d))&&Iu(n,o),g=a.createElement("script"),it(g),ut(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function dT(n,o){yn.M(n,o);var a=no;if(a&&n){var c=Ei(a).hoistableScripts,d=oo(n),g=c.get(d);g||(g=a.querySelector(Tl(d)),g||(n=v({src:n,async:!0,type:"module"},o),(o=qt.get(d))&&Iu(n,o),g=a.createElement("script"),it(g),ut(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function pp(n,o,a,c){var d=(d=ae.current)?Ba(d):null;if(!d)throw Error(l(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=io(a.href),a=Ei(d).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=io(a.href);var g=Ei(d).hoistableStyles,T=g.get(n);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,T),(g=d.querySelector(xl(n)))&&!g._p&&(T.instance=g,T.state.loading=5),qt.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qt.set(n,a),g||mT(d,n,a,T.state))),o&&c===null)throw Error(l(528,""));return T}if(o&&c!==null)throw Error(l(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=oo(a),a=Ei(d).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,n))}}function io(n){return'href="'+It(n)+'"'}function xl(n){return'link[rel="stylesheet"]['+n+"]"}function hp(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function mT(n,o,a,c){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=n.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),ut(o,"link",a),it(o),n.head.appendChild(o))}function oo(n){return'[src="'+It(n)+'"]'}function Tl(n){return"script[async]"+n}function gp(n,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=n.querySelector('style[data-href~="'+It(a.href)+'"]');if(c)return o.instance=c,it(c),c;var d=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),it(c),ut(c,"style",d),za(c,a.precedence,n),o.instance=c;case"stylesheet":d=io(a.href);var g=n.querySelector(xl(d));if(g)return o.state.loading|=4,o.instance=g,it(g),g;c=hp(a),(d=qt.get(d))&&Du(c,d),g=(n.ownerDocument||n).createElement("link"),it(g);var T=g;return T._p=new Promise(function(_,C){T.onload=_,T.onerror=C}),ut(g,"link",c),o.state.loading|=4,za(g,a.precedence,n),o.instance=g;case"script":return g=oo(a.src),(d=n.querySelector(Tl(g)))?(o.instance=d,it(d),d):(c=a,(d=qt.get(g))&&(c=v({},a),Iu(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),it(d),ut(d,"link",c),n.head.appendChild(d),o.instance=d);case"void":return null;default:throw Error(l(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,za(c,a.precedence,n));return o.instance}function za(n,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,T=0;T<c.length;T++){var _=c[T];if(_.dataset.precedence===o)g=_;else if(g!==d)break}g?g.parentNode.insertBefore(n,g.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(n,o.firstChild))}function Du(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function Iu(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Ha=null;function yp(n,o,a){if(Ha===null){var c=new Map,d=Ha=new Map;d.set(a,c)}else d=Ha,c=d.get(a),c||(c=new Map,d.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var g=a[d];if(!(g[Uo]||g[ct]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(o)||"";T=n+T;var _=c.get(T);_?_.push(g):c.set(T,[g])}}return c}function vp(n,o,a){n=n.ownerDocument||n,n.head.insertBefore(a,o==="title"?n.querySelector("head > title"):null)}function pT(n,o,a){if(a===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function xp(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Sl=null;function hT(){}function gT(n,o,a){if(Sl===null)throw Error(l(475));var c=Sl;if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=io(a.href),g=n.querySelector(xl(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Fa.bind(c),n.then(c,c)),o.state.loading|=4,o.instance=g,it(g);return}g=n.ownerDocument||n,a=hp(a),(d=qt.get(d))&&Du(a,d),g=g.createElement("link"),it(g);var T=g;T._p=new Promise(function(_,C){T.onload=_,T.onerror=C}),ut(g,"link",a),o.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(c.count++,o=Fa.bind(c),n.addEventListener("load",o),n.addEventListener("error",o))}}function yT(){if(Sl===null)throw Error(l(475));var n=Sl;return n.stylesheets&&n.count===0&&Uu(n,n.stylesheets),0<n.count?function(o){var a=setTimeout(function(){if(n.stylesheets&&Uu(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Fa(){if(this.count--,this.count===0){if(this.stylesheets)Uu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ya=null;function Uu(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ya=new Map,o.forEach(vT,n),Ya=null,Fa.call(n))}function vT(n,o){if(!(o.state.loading&4)){var a=Ya.get(n);if(a)var c=a.get(null);else{a=new Map,Ya.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}d=o.instance,T=d.getAttribute("data-precedence"),g=a.get(T)||c,g===c&&a.set(null,d),a.set(T,d),this.count++,c=Fa.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),o.state.loading|=4}}var _l={$$typeof:F,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function xT(n,o,a,c,d,g,T,_){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.hiddenUpdates=Rs(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Tp(n,o,a,c,d,g,T,_,C,D,O,B){return n=new xT(n,o,a,T,_,C,D,B),o=1,g===!0&&(o|=24),g=Ct(3,null,null,o),n.current=g,g.stateNode=n,o=pr(),o.refCount++,n.pooledCache=o,o.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:o},vr(g),n}function Sp(n){return n?(n=Li,n):Li}function _p(n,o,a,c,d,g){d=Sp(d),c.context===null?c.context=d:c.pendingContext=d,c=Mn(o),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Rn(n,c,o),a!==null&&(Rt(a,n,o),jo(a,n,o))}function Ep(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<o?a:o}}function ku(n,o){Ep(n,o),(n=n.alternate)&&Ep(n,o)}function Cp(n){if(n.tag===13){var o=ki(n,67108864);o!==null&&Rt(o,n,67108864),ku(n,67108864)}}var Ja=!0;function TT(n,o,a,c){var d=P.T;P.T=null;var g=j.p;try{j.p=2,Lu(n,o,a,c)}finally{j.p=g,P.T=d}}function ST(n,o,a,c){var d=P.T;P.T=null;var g=j.p;try{j.p=8,Lu(n,o,a,c)}finally{j.p=g,P.T=d}}function Lu(n,o,a,c){if(Ja){var d=Vu(c);if(d===null)_u(n,o,c,Ka,a),bp(n,c);else if(ET(d,n,o,a,c))c.stopPropagation();else if(bp(n,c),o&4&&-1<_T.indexOf(n)){for(;d!==null;){var g=_i(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Xn(g.pendingLanes);if(T!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;T;){var C=1<<31-_t(T);_.entanglements[1]|=C,T&=~C}Qt(g),(Ue&6)===0&&(wa=Jt()+500,hl(0))}}break;case 13:_=ki(g,2),_!==null&&Rt(_,g,2),Ia(),ku(g,2)}if(g=Vu(c),g===null&&_u(n,o,c,Ka,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else _u(n,o,c,null,a)}}function Vu(n){return n=Bs(n),Pu(n)}var Ka=null;function Pu(n){if(Ka=null,n=Si(n),n!==null){var o=f(n);if(o===null)n=null;else{var a=o.tag;if(a===13){if(n=m(o),n!==null)return n;n=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Ka=n,null}function Ap(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sv()){case Oc:return 2;case qc:return 8;case ql:case rv:return 32;case Gc:return 268435456;default:return 32}default:return 32}}var Ou=!1,zn=null,Hn=null,Fn=null,El=new Map,Cl=new Map,Yn=[],_T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bp(n,o){switch(n){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":El.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(o.pointerId)}}function Al(n,o,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},o!==null&&(o=_i(o),o!==null&&Cp(o)),n):(n.eventSystemFlags|=c,o=n.targetContainers,d!==null&&o.indexOf(d)===-1&&o.push(d),n)}function ET(n,o,a,c,d){switch(o){case"focusin":return zn=Al(zn,n,o,a,c,d),!0;case"dragenter":return Hn=Al(Hn,n,o,a,c,d),!0;case"mouseover":return Fn=Al(Fn,n,o,a,c,d),!0;case"pointerover":var g=d.pointerId;return El.set(g,Al(El.get(g)||null,n,o,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,Cl.set(g,Al(Cl.get(g)||null,n,o,a,c,d)),!0}return!1}function Np(n){var o=Si(n.target);if(o!==null){var a=f(o);if(a!==null){if(o=a.tag,o===13){if(o=m(a),o!==null){n.blockedOn=o,gv(n.priority,function(){if(a.tag===13){var c=Mt();c=ws(c);var d=ki(a,c);d!==null&&Rt(d,a,c),ku(a,c)}});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Za(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var a=Vu(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Gs=c,a.target.dispatchEvent(c),Gs=null}else return o=_i(a),o!==null&&Cp(o),n.blockedOn=a,!1;o.shift()}return!0}function Mp(n,o,a){Za(n)&&a.delete(o)}function CT(){Ou=!1,zn!==null&&Za(zn)&&(zn=null),Hn!==null&&Za(Hn)&&(Hn=null),Fn!==null&&Za(Fn)&&(Fn=null),El.forEach(Mp),Cl.forEach(Mp)}function $a(n,o){n.blockedOn===o&&(n.blockedOn=null,Ou||(Ou=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,CT)))}var Xa=null;function Rp(n){Xa!==n&&(Xa=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xa===n&&(Xa=null);for(var o=0;o<n.length;o+=3){var a=n[o],c=n[o+1],d=n[o+2];if(typeof c!="function"){if(Pu(c||a)===null)continue;break}var g=_i(a);g!==null&&(n.splice(o,3),o-=3,Pr(g,{pending:!0,data:d,method:a.method,action:c},c,d))}}))}function bl(n){function o(C){return $a(C,n)}zn!==null&&$a(zn,n),Hn!==null&&$a(Hn,n),Fn!==null&&$a(Fn,n),El.forEach(o),Cl.forEach(o);for(var a=0;a<Yn.length;a++){var c=Yn[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)Np(a),a.blockedOn===null&&Yn.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var d=a[c],g=a[c+1],T=d[gt]||null;if(typeof g=="function")T||Rp(a);else if(T){var _=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[gt]||null)_=T.formAction;else if(Pu(d)!==null)continue}else _=T.action;typeof _=="function"?a[c+1]=_:(a.splice(c,3),c-=3),Rp(a)}}}function qu(n){this._internalRoot=n}Qa.prototype.render=qu.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(l(409));var a=o.current,c=Mt();_p(a,c,n,o,null,null)},Qa.prototype.unmount=qu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;_p(n.current,2,null,n,null,null),Ia(),o[Ti]=null}};function Qa(n){this._internalRoot=n}Qa.prototype.unstable_scheduleHydration=function(n){if(n){var o=Yc();n={blockedOn:null,target:n,priority:o};for(var a=0;a<Yn.length&&o!==0&&o<Yn[a].priority;a++);Yn.splice(a,0,n),a===0&&Np(n)}};var wp=e.version;if(wp!=="19.1.0")throw Error(l(527,wp,"19.1.0"));j.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(l(188)):(n=Object.keys(n).join(","),Error(l(268,n)));return n=y(o),n=n!==null?h(n):null,n=n===null?null:n.stateNode,n};var AT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{wo=ja.inject(AT),St=ja}catch{}}return Ml.createRoot=function(n,o){if(!s(n))throw Error(l(299));var a=!1,c="",d=Jd,g=Kd,T=Zd,_=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=Tp(n,1,!1,null,null,a,c,d,g,T,_,null),n[Ti]=o.current,Su(n),new qu(o)},Ml.hydrateRoot=function(n,o,a){if(!s(n))throw Error(l(299));var c=!1,d="",g=Jd,T=Kd,_=Zd,C=null,D=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(D=a.formState)),o=Tp(n,1,!0,o,a??null,c,d,g,T,_,C,D),o.context=Sp(null),a=o.current,c=Mt(),c=ws(c),d=Mn(c),d.callback=null,Rn(a,d,c),a=c,o.current.lanes=a,Io(o,a),Qt(o),n[Ti]=o.current,Su(n),new Qa(o)},Ml.version="19.1.0",Ml}var Gp;function LT(){if(Gp)return Bu.exports;Gp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bu.exports=kT(),Bu.exports}var Og=LT(),G=_c();const So=NT(G),ec=[{label:"XX-Small",value:"0.75"},{label:"X-Small",value:"0.85"},{label:"Small",value:"1.0"},{label:"Medium",value:"1.15"},{label:"Large",value:"1.3"},{label:"X-Large",value:"1.5"}],qg=2,VT="JapaneseAnalyzerDB",PT=1,mo="text_entries",po="review_deck",ss="settings",rs="transient_state";let Wa=null;const Ec=()=>Wa||(Wa=new Promise((t,e)=>{const i=indexedDB.open(VT,PT);i.onupgradeneeded=l=>{const s=l.target.result;if(s.objectStoreNames.contains(mo)||s.createObjectStore(mo,{keyPath:"id"}).createIndex("updatedAt","updatedAt",{unique:!1}),!s.objectStoreNames.contains(po)){const f=s.createObjectStore(po,{keyPath:"id"});f.createIndex("nextReviewDate","nextReviewDate",{unique:!1}),f.createIndex("textEntryId","textEntryId",{unique:!1})}s.objectStoreNames.contains(ss)||s.createObjectStore(ss,{keyPath:"key"}),s.objectStoreNames.contains(rs)||s.createObjectStore(rs,{keyPath:"key"})},i.onsuccess=l=>{t(l.target.result)},i.onerror=l=>{console.error("IndexedDB error:",l.target.error),e("IndexedDB error")}}),Wa),_o=async(t,e)=>(await Ec()).transaction(t,e).objectStore(t),OT=async(t,e)=>{const i=await _o(t,"readonly");return new Promise((l,s)=>{const f=i.get(e);f.onsuccess=()=>l(f.result),f.onerror=()=>s(f.error)})},Cc=async t=>{const e=await _o(t,"readonly");return new Promise((i,l)=>{const s=e.getAll();s.onsuccess=()=>i(s.result),s.onerror=()=>l(s.error)})},Ac=async(t,e)=>{const i=await _o(t,"readwrite");return new Promise((l,s)=>{const f=i.put(e);f.onsuccess=()=>l(f.result),f.onerror=()=>s(f.error)})},Gg=async(t,e)=>{const i=await _o(t,"readwrite");return new Promise((l,s)=>{const f=i.delete(e);f.onsuccess=()=>l(f.result),f.onerror=()=>s(f.error)})},Bg=async t=>{const e=await _o(t,"readwrite");return new Promise((i,l)=>{const s=e.clear();s.onsuccess=()=>i(s.result),s.onerror=()=>l(s.error)})},zg=()=>Cc(mo).then(t=>t.sort((e,i)=>i.updatedAt-e.updatedAt)),ao=t=>Ac(mo,t),qT=t=>Gg(mo,t),tc=()=>Bg(mo),Hg=()=>Cc(po).then(t=>t.sort((e,i)=>e.addedAt-i.addedAt)),nc=t=>Ac(po,t),GT=t=>Gg(po,t),Fg=()=>Bg(po),bc=async()=>{const e=(await Cc(ss)).reduce((i,{key:l,value:s})=>(i[l]=s,i),{});return{theme:e.theme||"light",showFurigana:e.showFurigana!==!1,showColorCoding:e.showColorCoding!==!1,showPitchAccent:e.showPitchAccent!==!1,analysisDepth:e.analysisDepth||"medium",fontSizeIndex:e.fontSizeIndex??qg,newWordsPerDay:e.newWordsPerDay||10,userApiKey:e.userApiKey||null}},Yg=async t=>{const e=await _o(ss,"readwrite"),i=Object.entries(t).map(([l,s])=>new Promise((f,m)=>{const p=e.put({key:l,value:s});p.onsuccess=f,p.onerror=m}));return Promise.all(i)},Bp=t=>OT(rs,t).then(e=>e==null?void 0:e.value),us=(t,e)=>Ac(rs,{key:t,value:e});var Fe=(t=>(t.Editor="EDITOR",t.Reader="READER",t.ReadingMode="READING_MODE",t.Review="REVIEW",t))(Fe||{});const Jg={isLoading:!0,view:"EDITOR",currentTextEntryId:null,editingEntryId:null,selectedSentence:null,history:[],reviewDeck:[]},BT=(t,e)=>{switch(e.type){case"INITIALIZE_DATA_SUCCESS":return{...t,isLoading:!1,...e.payload};case"INITIALIZE_DATA_FAILURE":return{...t,isLoading:!1};case"SET_VIEW":return{...t,view:e.payload,selectedSentence:null};case"START_EDITING":return{...t,view:"EDITOR",editingEntryId:e.payload,currentTextEntryId:e.payload,selectedSentence:null};case"RESET_VIEW":return us("unsaved-title",""),us("unsaved-text",""),{...t,view:"EDITOR",currentTextEntryId:null,selectedSentence:null,editingEntryId:null};case"SET_CURRENT_TEXT_ENTRY_ID":return{...t,currentTextEntryId:e.payload,selectedSentence:null};case"SET_SELECTED_SENTENCE":return{...t,selectedSentence:e.payload};case"SET_HISTORY":{const i=e.payload;return tc().then(()=>{i.forEach(l=>ao(l))}),{...t,history:i}}case"ADD_OR_UPDATE_TEXT_ENTRY":{const i=e.payload;ao(i);const l=t.history.findIndex(f=>f.id===i.id);let s;return l>-1?(s=[...t.history],s[l]=i):s=[i,...t.history],s.sort((f,m)=>m.updatedAt-f.updatedAt),{...t,history:s,editingEntryId:null}}case"REMOVE_TEXT_ENTRY":{const i=e.payload;qT(i);const l=t.history.filter(f=>f.id!==i),s=t.currentTextEntryId===i;return{...t,history:l,currentTextEntryId:s?null:t.currentTextEntryId,view:s?"EDITOR":t.view,selectedSentence:s?null:t.selectedSentence}}case"CLEAR_HISTORY":return tc(),{...t,history:[],currentTextEntryId:null,view:"EDITOR",selectedSentence:null};case"SET_REVIEW_DECK":{const i=e.payload;return Fg().then(()=>{i.forEach(l=>nc(l))}),{...t,reviewDeck:i}}case"ADD_OR_UPDATE_REVIEW_ITEM":{const i=e.payload;nc(i);const l=t.reviewDeck.findIndex(f=>f.id===i.id);let s;return l>-1?(s=[...t.reviewDeck],s[l]=i):s=[...t.reviewDeck,i],s.sort((f,m)=>f.addedAt-m.addedAt),{...t,reviewDeck:s}}case"REMOVE_REVIEW_ITEM":{const i=e.payload;GT(i);const l=t.reviewDeck.filter(s=>s.id!==i);return{...t,reviewDeck:l}}case"NAVIGATE_SENTENCE":{if(!t.currentTextEntryId)return t;const i=t.history.findIndex(y=>y.id===t.currentTextEntryId);if(i===-1)return t;const l=[...t.history],s={...l[i]},f=s.text.split(`
`).flatMap(y=>{var h;return((h=y.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:h.filter(v=>v==null?void 0:v.trim()))||[]}),p=s.readingProgress+(e.payload.direction==="next"?1:-1);return p>=0&&p<f.length?(s.readingProgress=p,l[i]=s,ao(s),{...t,history:l}):t}case"JUMP_TO_SENTENCE":{if(!t.currentTextEntryId)return t;const i=t.history.findIndex(p=>p.id===t.currentTextEntryId);if(i===-1)return t;const l=[...t.history],s={...l[i]},f=s.text.split(`
`).flatMap(p=>{var y;return((y=p.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:y.filter(h=>h==null?void 0:h.trim()))||[]}),m=e.payload.index;return m>=0&&m<f.length?(s.readingProgress=m,l[i]=s,ao(s),{...t,history:l}):t}case"CACHE_ANALYSIS":{const{entryId:i,sentence:l,depth:s,analysis:f}=e.payload,m=t.history.findIndex(E=>E.id===i);if(m===-1)return t;const p=[...t.history],y=p[m],h={...y.analyzedSentences[l]||{},[s]:f},v={...y.analyzedSentences,[l]:h},S={...y,analyzedSentences:v};return p[m]=S,ao(S),{...t,history:p}}default:return t}},Kg=G.createContext({state:Jg,dispatch:()=>null});function Zg({children:t,_testDispatch:e,_testState:i}){const[l,s]=G.useReducer(BT,i||Jg),f=e||s;return G.useEffect(()=>{if(i)return;const m=async()=>{try{const p=await zg(),y=await Hg();s({type:"INITIALIZE_DATA_SUCCESS",payload:{history:p,reviewDeck:y}})}catch(p){console.error("Failed to load app data from IndexedDB",p),s({type:"INITIALIZE_DATA_FAILURE"})}};Ec().then(m).catch(p=>{console.error("DB Init failed",p),s({type:"INITIALIZE_DATA_FAILURE"})})},[i]),x.jsx(Kg.Provider,{value:{state:l,dispatch:f},children:t})}const wt=()=>G.useContext(Kg),zp=["low","medium","high"],$g={isLoading:!0,theme:"light",showFurigana:!0,showColorCoding:!0,showPitchAccent:!0,analysisDepth:"medium",fontSizeIndex:qg,newWordsPerDay:10,userApiKey:null},Hp=t=>{document.documentElement.classList.toggle("dark",t.theme==="dark"),document.documentElement.style.setProperty("--font-size-multiplier",ec[t.fontSizeIndex].value)},zT=(t,e)=>{switch(e.type){case"INITIALIZE_SETTINGS_SUCCESS":return Hp(e.payload),{...t,isLoading:!1,...e.payload};case"INITIALIZE_SETTINGS_FAILURE":return{...t,isLoading:!1};case"UPDATE_SETTINGS":{const i={...t,...e.payload},l={...e.payload};return Object.prototype.hasOwnProperty.call(l,"userApiKey")&&(typeof l.userApiKey=="string"&&l.userApiKey.trim().length>0?l.userApiKey=l.userApiKey.trim():l.userApiKey=null),Yg(l),Hp(i),i}default:return t}},Xg=G.createContext({state:$g,dispatch:()=>null});function Qg({children:t,_testState:e}){const[i,l]=G.useReducer(zT,e||$g);return G.useEffect(()=>{if(e)return;const s=async()=>{try{const f=await bc();l({type:"INITIALIZE_SETTINGS_SUCCESS",payload:f})}catch(f){console.error("Failed to load settings from IndexedDB",f),l({type:"INITIALIZE_SETTINGS_FAILURE"})}};Ec().then(s).catch(f=>{console.error("DB Init failed",f),l({type:"INITIALIZE_SETTINGS_FAILURE"})})},[e]),x.jsx(Xg.Provider,{value:{state:i,dispatch:l},children:t})}const Yt=()=>G.useContext(Xg),Il={isHistoryPanelOpen:!1,tooltip:{visible:!1,content:null,position:{top:0,left:0},pinned:!1,targetElement:null},bottomSheet:{visible:!1,content:{title:"",body:null},targetElement:null}},HT=(t,e)=>{switch(e.type){case"SET_HISTORY_PANEL_OPEN":return{...t,isHistoryPanelOpen:e.payload};case"SHOW_TOOLTIP":return t.tooltip.pinned?t:{...t,tooltip:{...t.tooltip,visible:!0,pinned:!1,...e.payload}};case"HIDE_TOOLTIP":return{...t,tooltip:{...Il.tooltip}};case"PIN_TOOLTIP":return t.tooltip.targetElement===e.payload.targetElement&&t.tooltip.pinned?{...t,tooltip:{...Il.tooltip}}:{...t,tooltip:{visible:!0,pinned:!0,...e.payload}};case"SHOW_BOTTOM_SHEET":return document.body.classList.add("overflow-hidden","md:overflow-auto"),{...t,bottomSheet:{visible:!0,...e.payload}};case"HIDE_BOTTOM_SHEET":return document.body.classList.remove("overflow-hidden","md:overflow-auto"),{...t,bottomSheet:{...Il.bottomSheet}};default:return t}},jg=G.createContext({state:Il,dispatch:()=>null});function Wg({children:t}){const[e,i]=G.useReducer(HT,Il);return x.jsx(jg.Provider,{value:{state:e,dispatch:i},children:t})}const xn=()=>G.useContext(jg);var xs=Pg();const ey=G.createContext(void 0);function ty({children:t}){const[e,i]=G.useState({isOpen:!1,message:""}),l=()=>{i({isOpen:!1,message:""})},s=()=>{var y;(y=e.onConfirm)==null||y.call(e),l()},f=()=>{var y;(y=e.onCancel)==null||y.call(e),l()},m=G.useCallback((y,h,v={})=>{i({isOpen:!0,message:y,onConfirm:h,onCancel:()=>{},confirmText:v.confirmText||"Confirm",confirmClass:v.confirmClass||"bg-destructive hover:bg-destructive-hover",cancelText:v.cancelText||"Cancel",isAlert:!1})},[]),p=G.useCallback((y,h={})=>{i({isOpen:!0,message:y,onConfirm:h.onOk,confirmText:"OK",confirmClass:"bg-accent hover:bg-accent/90",isAlert:!0})},[]);return x.jsxs(ey.Provider,{value:{showConfirmation:m,showAlert:p},children:[t,e.isOpen&&xs.createPortal(x.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 transition-opacity animate-fade-in",children:x.jsxs("div",{className:"glass-morphism rounded-2xl shadow-2xl p-8 w-full max-w-md transform transition-all animate-slide-in",children:[x.jsx("p",{className:"text-text-secondary text-lg mb-8",children:e.message}),x.jsxs("div",{className:"flex justify-end gap-4",children:[!e.isAlert&&x.jsx("button",{onClick:f,className:"px-5 py-3 rounded-xl text-base font-medium text-text-secondary bg-surface-subtle hover:bg-surface-hover transition-colors shadow-sm",children:e.cancelText}),x.jsx("button",{onClick:s,className:`px-5 py-3 rounded-xl text-base font-medium text-primary-text transition-colors shadow-lg ${e.confirmClass}`,children:e.confirmText})]})]})}),document.body)]})}const Eo=()=>{const t=G.useContext(ey);if(t===void 0)throw new Error("useModal must be used within a ModalProvider");return t};var De;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function i(s){throw new Error}t.assertNever=i,t.arrayToEnum=s=>{const f={};for(const m of s)f[m]=m;return f},t.getValidEnumValues=s=>{const f=t.objectKeys(s).filter(p=>typeof s[s[p]]!="number"),m={};for(const p of f)m[p]=s[p];return t.objectValues(m)},t.objectValues=s=>t.objectKeys(s).map(function(f){return s[f]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const f=[];for(const m in s)Object.prototype.hasOwnProperty.call(s,m)&&f.push(m);return f},t.find=(s,f)=>{for(const m of s)if(f(m))return m},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function l(s,f=" | "){return s.map(m=>typeof m=="string"?`'${m}'`:m).join(f)}t.joinValues=l,t.jsonStringifyReplacer=(s,f)=>typeof f=="bigint"?f.toString():f})(De||(De={}));var Fp;(function(t){t.mergeShapes=(e,i)=>({...e,...i})})(Fp||(Fp={}));const ie=De.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Kn=t=>{switch(typeof t){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return Number.isNaN(t)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(t)?ie.array:t===null?ie.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ie.promise:typeof Map<"u"&&t instanceof Map?ie.map:typeof Set<"u"&&t instanceof Set?ie.set:typeof Date<"u"&&t instanceof Date?ie.date:ie.object;default:return ie.unknown}},$=De.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class vn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=l=>{this.issues=[...this.issues,l]},this.addIssues=(l=[])=>{this.issues=[...this.issues,...l]};const i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=e}format(e){const i=e||function(f){return f.message},l={_errors:[]},s=f=>{for(const m of f.issues)if(m.code==="invalid_union")m.unionErrors.map(s);else if(m.code==="invalid_return_type")s(m.returnTypeError);else if(m.code==="invalid_arguments")s(m.argumentsError);else if(m.path.length===0)l._errors.push(i(m));else{let p=l,y=0;for(;y<m.path.length;){const h=m.path[y];y===m.path.length-1?(p[h]=p[h]||{_errors:[]},p[h]._errors.push(i(m))):p[h]=p[h]||{_errors:[]},p=p[h],y++}}};return s(this),l}static assert(e){if(!(e instanceof vn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,De.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=i=>i.message){const i={},l=[];for(const s of this.issues)if(s.path.length>0){const f=s.path[0];i[f]=i[f]||[],i[f].push(e(s))}else l.push(e(s));return{formErrors:l,fieldErrors:i}}get formErrors(){return this.flatten()}}vn.create=t=>new vn(t);const ic=(t,e)=>{let i;switch(t.code){case $.invalid_type:t.received===ie.undefined?i="Required":i=`Expected ${t.expected}, received ${t.received}`;break;case $.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(t.expected,De.jsonStringifyReplacer)}`;break;case $.unrecognized_keys:i=`Unrecognized key(s) in object: ${De.joinValues(t.keys,", ")}`;break;case $.invalid_union:i="Invalid input";break;case $.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${De.joinValues(t.options)}`;break;case $.invalid_enum_value:i=`Invalid enum value. Expected ${De.joinValues(t.options)}, received '${t.received}'`;break;case $.invalid_arguments:i="Invalid function arguments";break;case $.invalid_return_type:i="Invalid function return type";break;case $.invalid_date:i="Invalid date";break;case $.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(i=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(i=`${i} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?i=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?i=`Invalid input: must end with "${t.validation.endsWith}"`:De.assertNever(t.validation):t.validation!=="regex"?i=`Invalid ${t.validation}`:i="Invalid";break;case $.too_small:t.type==="array"?i=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?i=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?i=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?i=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?i=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:i="Invalid input";break;case $.too_big:t.type==="array"?i=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?i=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?i=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?i=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?i=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:i="Invalid input";break;case $.custom:i="Invalid input";break;case $.invalid_intersection_types:i="Intersection results could not be merged";break;case $.not_multiple_of:i=`Number must be a multiple of ${t.multipleOf}`;break;case $.not_finite:i="Number must be finite";break;default:i=e.defaultError,De.assertNever(t)}return{message:i}};let FT=ic;function YT(){return FT}const JT=t=>{const{data:e,path:i,errorMaps:l,issueData:s}=t,f=[...i,...s.path||[]],m={...s,path:f};if(s.message!==void 0)return{...s,path:f,message:s.message};let p="";const y=l.filter(h=>!!h).slice().reverse();for(const h of y)p=h(m,{data:e,defaultError:p}).message;return{...s,path:f,message:p}};function te(t,e){const i=YT(),l=JT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i,i===ic?void 0:ic].filter(s=>!!s)});t.common.issues.push(l)}class ht{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,i){const l=[];for(const s of i){if(s.status==="aborted")return ye;s.status==="dirty"&&e.dirty(),l.push(s.value)}return{status:e.value,value:l}}static async mergeObjectAsync(e,i){const l=[];for(const s of i){const f=await s.key,m=await s.value;l.push({key:f,value:m})}return ht.mergeObjectSync(e,l)}static mergeObjectSync(e,i){const l={};for(const s of i){const{key:f,value:m}=s;if(f.status==="aborted"||m.status==="aborted")return ye;f.status==="dirty"&&e.dirty(),m.status==="dirty"&&e.dirty(),f.value!=="__proto__"&&(typeof m.value<"u"||s.alwaysSet)&&(l[f.value]=m.value)}return{status:e.value,value:l}}}const ye=Object.freeze({status:"aborted"}),wl=t=>({status:"dirty",value:t}),Bt=t=>({status:"valid",value:t}),Yp=t=>t.status==="aborted",Jp=t=>t.status==="dirty",ho=t=>t.status==="valid",cs=t=>typeof Promise<"u"&&t instanceof Promise;var se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(se||(se={}));class tn{constructor(e,i,l,s){this._cachedPath=[],this.parent=e,this.data=i,this._path=l,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Kp=(t,e)=>{if(ho(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const i=new vn(t.common.issues);return this._error=i,this._error}}};function Te(t){if(!t)return{};const{errorMap:e,invalid_type_error:i,required_error:l,description:s}=t;if(e&&(i||l))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(m,p)=>{const{message:y}=t;return m.code==="invalid_enum_value"?{message:y??p.defaultError}:typeof p.data>"u"?{message:y??l??p.defaultError}:m.code!=="invalid_type"?{message:p.defaultError}:{message:y??i??p.defaultError}},description:s}}class be{get description(){return this._def.description}_getType(e){return Kn(e.data)}_getOrReturnCtx(e,i){return i||{common:e.parent.common,data:e.data,parsedType:Kn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ht,ctx:{common:e.parent.common,data:e.data,parsedType:Kn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const i=this._parse(e);if(cs(i))throw new Error("Synchronous parse encountered promise.");return i}_parseAsync(e){const i=this._parse(e);return Promise.resolve(i)}parse(e,i){const l=this.safeParse(e,i);if(l.success)return l.data;throw l.error}safeParse(e,i){const l={common:{issues:[],async:(i==null?void 0:i.async)??!1,contextualErrorMap:i==null?void 0:i.errorMap},path:(i==null?void 0:i.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kn(e)},s=this._parseSync({data:e,path:l.path,parent:l});return Kp(l,s)}"~validate"(e){var l,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kn(e)};if(!this["~standard"].async)try{const f=this._parseSync({data:e,path:[],parent:i});return ho(f)?{value:f.value}:{issues:i.common.issues}}catch(f){(s=(l=f==null?void 0:f.message)==null?void 0:l.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(f=>ho(f)?{value:f.value}:{issues:i.common.issues})}async parseAsync(e,i){const l=await this.safeParseAsync(e,i);if(l.success)return l.data;throw l.error}async safeParseAsync(e,i){const l={common:{issues:[],contextualErrorMap:i==null?void 0:i.errorMap,async:!0},path:(i==null?void 0:i.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kn(e)},s=this._parse({data:e,path:l.path,parent:l}),f=await(cs(s)?s:Promise.resolve(s));return Kp(l,f)}refine(e,i){const l=s=>typeof i=="string"||typeof i>"u"?{message:i}:typeof i=="function"?i(s):i;return this._refinement((s,f)=>{const m=e(s),p=()=>f.addIssue({code:$.custom,...l(s)});return typeof Promise<"u"&&m instanceof Promise?m.then(y=>y?!0:(p(),!1)):m?!0:(p(),!1)})}refinement(e,i){return this._refinement((l,s)=>e(l)?!0:(s.addIssue(typeof i=="function"?i(l,s):i),!1))}_refinement(e){return new vo({schema:this,typeName:he.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:i=>this["~validate"](i)}}optional(){return Zn.create(this,this._def)}nullable(){return xo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return en.create(this)}promise(){return hs.create(this,this._def)}or(e){return ds.create([this,e],this._def)}and(e){return ms.create(this,e,this._def)}transform(e){return new vo({...Te(this._def),schema:this,typeName:he.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const i=typeof e=="function"?e:()=>e;return new sc({...Te(this._def),innerType:this,defaultValue:i,typeName:he.ZodDefault})}brand(){return new hS({typeName:he.ZodBranded,type:this,...Te(this._def)})}catch(e){const i=typeof e=="function"?e:()=>e;return new rc({...Te(this._def),innerType:this,catchValue:i,typeName:he.ZodCatch})}describe(e){const i=this.constructor;return new i({...this._def,description:e})}pipe(e){return Nc.create(this,e)}readonly(){return uc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const KT=/^c[^\s-]{8,}$/i,ZT=/^[0-9a-z]+$/,$T=/^[0-9A-HJKMNP-TV-Z]{26}$/i,XT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QT=/^[a-z0-9_-]{21}$/i,jT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,WT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,eS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,tS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ju;const nS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,iS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ny="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rS=new RegExp(`^${ny}$`);function iy(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const i=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${i}`}function uS(t){return new RegExp(`^${iy(t)}$`)}function cS(t){let e=`${ny}T${iy(t)}`;const i=[];return i.push(t.local?"Z?":"Z"),t.offset&&i.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${i.join("|")})`,new RegExp(`^${e}$`)}function fS(t,e){return!!((e==="v4"||!e)&&nS.test(t)||(e==="v6"||!e)&&oS.test(t))}function dS(t,e){if(!jT.test(t))return!1;try{const[i]=t.split(".");if(!i)return!1;const l=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),s=JSON.parse(atob(l));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function mS(t,e){return!!((e==="v4"||!e)&&iS.test(t)||(e==="v6"||!e)&&lS.test(t))}class jt extends be{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){const f=this._getOrReturnCtx(e);return te(f,{code:$.invalid_type,expected:ie.string,received:f.parsedType}),ye}const l=new ht;let s;for(const f of this._def.checks)if(f.kind==="min")e.data.length<f.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:$.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),l.dirty());else if(f.kind==="max")e.data.length>f.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:$.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),l.dirty());else if(f.kind==="length"){const m=e.data.length>f.value,p=e.data.length<f.value;(m||p)&&(s=this._getOrReturnCtx(e,s),m?te(s,{code:$.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}):p&&te(s,{code:$.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}),l.dirty())}else if(f.kind==="email")eS.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"email",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="emoji")Ju||(Ju=new RegExp(tS,"u")),Ju.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"emoji",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="uuid")XT.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"uuid",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="nanoid")QT.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"nanoid",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="cuid")KT.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="cuid2")ZT.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid2",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="ulid")$T.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ulid",code:$.invalid_string,message:f.message}),l.dirty());else if(f.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),te(s,{validation:"url",code:$.invalid_string,message:f.message}),l.dirty()}else f.kind==="regex"?(f.regex.lastIndex=0,f.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"regex",code:$.invalid_string,message:f.message}),l.dirty())):f.kind==="trim"?e.data=e.data.trim():f.kind==="includes"?e.data.includes(f.value,f.position)||(s=this._getOrReturnCtx(e,s),te(s,{code:$.invalid_string,validation:{includes:f.value,position:f.position},message:f.message}),l.dirty()):f.kind==="toLowerCase"?e.data=e.data.toLowerCase():f.kind==="toUpperCase"?e.data=e.data.toUpperCase():f.kind==="startsWith"?e.data.startsWith(f.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:$.invalid_string,validation:{startsWith:f.value},message:f.message}),l.dirty()):f.kind==="endsWith"?e.data.endsWith(f.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:$.invalid_string,validation:{endsWith:f.value},message:f.message}),l.dirty()):f.kind==="datetime"?cS(f).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:$.invalid_string,validation:"datetime",message:f.message}),l.dirty()):f.kind==="date"?rS.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:$.invalid_string,validation:"date",message:f.message}),l.dirty()):f.kind==="time"?uS(f).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:$.invalid_string,validation:"time",message:f.message}),l.dirty()):f.kind==="duration"?WT.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"duration",code:$.invalid_string,message:f.message}),l.dirty()):f.kind==="ip"?fS(e.data,f.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ip",code:$.invalid_string,message:f.message}),l.dirty()):f.kind==="jwt"?dS(e.data,f.alg)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"jwt",code:$.invalid_string,message:f.message}),l.dirty()):f.kind==="cidr"?mS(e.data,f.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cidr",code:$.invalid_string,message:f.message}),l.dirty()):f.kind==="base64"?aS.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64",code:$.invalid_string,message:f.message}),l.dirty()):f.kind==="base64url"?sS.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64url",code:$.invalid_string,message:f.message}),l.dirty()):De.assertNever(f);return{status:l.value,value:e.data}}_regex(e,i,l){return this.refinement(s=>e.test(s),{validation:i,code:$.invalid_string,...se.errToObj(l)})}_addCheck(e){return new jt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...se.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...se.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...se.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,i){return this._addCheck({kind:"regex",regex:e,...se.errToObj(i)})}includes(e,i){return this._addCheck({kind:"includes",value:e,position:i==null?void 0:i.position,...se.errToObj(i==null?void 0:i.message)})}startsWith(e,i){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(i)})}endsWith(e,i){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(i)})}min(e,i){return this._addCheck({kind:"min",value:e,...se.errToObj(i)})}max(e,i){return this._addCheck({kind:"max",value:e,...se.errToObj(i)})}length(e,i){return this._addCheck({kind:"length",value:e,...se.errToObj(i)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new jt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxLength(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}}jt.create=t=>new jt({checks:[],typeName:he.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Te(t)});function pS(t,e){const i=(t.toString().split(".")[1]||"").length,l=(e.toString().split(".")[1]||"").length,s=i>l?i:l,f=Number.parseInt(t.toFixed(s).replace(".","")),m=Number.parseInt(e.toFixed(s).replace(".",""));return f%m/10**s}class hi extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){const f=this._getOrReturnCtx(e);return te(f,{code:$.invalid_type,expected:ie.number,received:f.parsedType}),ye}let l;const s=new ht;for(const f of this._def.checks)f.kind==="int"?De.isInteger(e.data)||(l=this._getOrReturnCtx(e,l),te(l,{code:$.invalid_type,expected:"integer",received:"float",message:f.message}),s.dirty()):f.kind==="min"?(f.inclusive?e.data<f.value:e.data<=f.value)&&(l=this._getOrReturnCtx(e,l),te(l,{code:$.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),s.dirty()):f.kind==="max"?(f.inclusive?e.data>f.value:e.data>=f.value)&&(l=this._getOrReturnCtx(e,l),te(l,{code:$.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),s.dirty()):f.kind==="multipleOf"?pS(e.data,f.value)!==0&&(l=this._getOrReturnCtx(e,l),te(l,{code:$.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):f.kind==="finite"?Number.isFinite(e.data)||(l=this._getOrReturnCtx(e,l),te(l,{code:$.not_finite,message:f.message}),s.dirty()):De.assertNever(f);return{status:s.value,value:e.data}}gte(e,i){return this.setLimit("min",e,!0,se.toString(i))}gt(e,i){return this.setLimit("min",e,!1,se.toString(i))}lte(e,i){return this.setLimit("max",e,!0,se.toString(i))}lt(e,i){return this.setLimit("max",e,!1,se.toString(i))}setLimit(e,i,l,s){return new hi({...this._def,checks:[...this._def.checks,{kind:e,value:i,inclusive:l,message:se.toString(s)}]})}_addCheck(e){return new hi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,i){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(i)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxValue(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&De.isInteger(e.value))}get isFinite(){let e=null,i=null;for(const l of this._def.checks){if(l.kind==="finite"||l.kind==="int"||l.kind==="multipleOf")return!0;l.kind==="min"?(i===null||l.value>i)&&(i=l.value):l.kind==="max"&&(e===null||l.value<e)&&(e=l.value)}return Number.isFinite(i)&&Number.isFinite(e)}}hi.create=t=>new hi({checks:[],typeName:he.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class gi extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ie.bigint)return this._getInvalidInput(e);let l;const s=new ht;for(const f of this._def.checks)f.kind==="min"?(f.inclusive?e.data<f.value:e.data<=f.value)&&(l=this._getOrReturnCtx(e,l),te(l,{code:$.too_small,type:"bigint",minimum:f.value,inclusive:f.inclusive,message:f.message}),s.dirty()):f.kind==="max"?(f.inclusive?e.data>f.value:e.data>=f.value)&&(l=this._getOrReturnCtx(e,l),te(l,{code:$.too_big,type:"bigint",maximum:f.value,inclusive:f.inclusive,message:f.message}),s.dirty()):f.kind==="multipleOf"?e.data%f.value!==BigInt(0)&&(l=this._getOrReturnCtx(e,l),te(l,{code:$.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):De.assertNever(f);return{status:s.value,value:e.data}}_getInvalidInput(e){const i=this._getOrReturnCtx(e);return te(i,{code:$.invalid_type,expected:ie.bigint,received:i.parsedType}),ye}gte(e,i){return this.setLimit("min",e,!0,se.toString(i))}gt(e,i){return this.setLimit("min",e,!1,se.toString(i))}lte(e,i){return this.setLimit("max",e,!0,se.toString(i))}lt(e,i){return this.setLimit("max",e,!1,se.toString(i))}setLimit(e,i,l,s){return new gi({...this._def,checks:[...this._def.checks,{kind:e,value:i,inclusive:l,message:se.toString(s)}]})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,i){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(i)})}get minValue(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxValue(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}}gi.create=t=>new gi({checks:[],typeName:he.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Te(t)});class fs extends be{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){const l=this._getOrReturnCtx(e);return te(l,{code:$.invalid_type,expected:ie.boolean,received:l.parsedType}),ye}return Bt(e.data)}}fs.create=t=>new fs({typeName:he.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class go extends be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){const f=this._getOrReturnCtx(e);return te(f,{code:$.invalid_type,expected:ie.date,received:f.parsedType}),ye}if(Number.isNaN(e.data.getTime())){const f=this._getOrReturnCtx(e);return te(f,{code:$.invalid_date}),ye}const l=new ht;let s;for(const f of this._def.checks)f.kind==="min"?e.data.getTime()<f.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:$.too_small,message:f.message,inclusive:!0,exact:!1,minimum:f.value,type:"date"}),l.dirty()):f.kind==="max"?e.data.getTime()>f.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:$.too_big,message:f.message,inclusive:!0,exact:!1,maximum:f.value,type:"date"}),l.dirty()):De.assertNever(f);return{status:l.value,value:new Date(e.data.getTime())}}_addCheck(e){return new go({...this._def,checks:[...this._def.checks,e]})}min(e,i){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(i)})}max(e,i){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(i)})}get minDate(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e!=null?new Date(e):null}}go.create=t=>new go({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:he.ZodDate,...Te(t)});class Zp extends be{_parse(e){if(this._getType(e)!==ie.symbol){const l=this._getOrReturnCtx(e);return te(l,{code:$.invalid_type,expected:ie.symbol,received:l.parsedType}),ye}return Bt(e.data)}}Zp.create=t=>new Zp({typeName:he.ZodSymbol,...Te(t)});class $p extends be{_parse(e){if(this._getType(e)!==ie.undefined){const l=this._getOrReturnCtx(e);return te(l,{code:$.invalid_type,expected:ie.undefined,received:l.parsedType}),ye}return Bt(e.data)}}$p.create=t=>new $p({typeName:he.ZodUndefined,...Te(t)});class Xp extends be{_parse(e){if(this._getType(e)!==ie.null){const l=this._getOrReturnCtx(e);return te(l,{code:$.invalid_type,expected:ie.null,received:l.parsedType}),ye}return Bt(e.data)}}Xp.create=t=>new Xp({typeName:he.ZodNull,...Te(t)});class Qp extends be{constructor(){super(...arguments),this._any=!0}_parse(e){return Bt(e.data)}}Qp.create=t=>new Qp({typeName:he.ZodAny,...Te(t)});class oc extends be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bt(e.data)}}oc.create=t=>new oc({typeName:he.ZodUnknown,...Te(t)});class $n extends be{_parse(e){const i=this._getOrReturnCtx(e);return te(i,{code:$.invalid_type,expected:ie.never,received:i.parsedType}),ye}}$n.create=t=>new $n({typeName:he.ZodNever,...Te(t)});class jp extends be{_parse(e){if(this._getType(e)!==ie.undefined){const l=this._getOrReturnCtx(e);return te(l,{code:$.invalid_type,expected:ie.void,received:l.parsedType}),ye}return Bt(e.data)}}jp.create=t=>new jp({typeName:he.ZodVoid,...Te(t)});class en extends be{_parse(e){const{ctx:i,status:l}=this._processInputParams(e),s=this._def;if(i.parsedType!==ie.array)return te(i,{code:$.invalid_type,expected:ie.array,received:i.parsedType}),ye;if(s.exactLength!==null){const m=i.data.length>s.exactLength.value,p=i.data.length<s.exactLength.value;(m||p)&&(te(i,{code:m?$.too_big:$.too_small,minimum:p?s.exactLength.value:void 0,maximum:m?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),l.dirty())}if(s.minLength!==null&&i.data.length<s.minLength.value&&(te(i,{code:$.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),l.dirty()),s.maxLength!==null&&i.data.length>s.maxLength.value&&(te(i,{code:$.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),l.dirty()),i.common.async)return Promise.all([...i.data].map((m,p)=>s.type._parseAsync(new tn(i,m,i.path,p)))).then(m=>ht.mergeArray(l,m));const f=[...i.data].map((m,p)=>s.type._parseSync(new tn(i,m,i.path,p)));return ht.mergeArray(l,f)}get element(){return this._def.type}min(e,i){return new en({...this._def,minLength:{value:e,message:se.toString(i)}})}max(e,i){return new en({...this._def,maxLength:{value:e,message:se.toString(i)}})}length(e,i){return new en({...this._def,exactLength:{value:e,message:se.toString(i)}})}nonempty(e){return this.min(1,e)}}en.create=(t,e)=>new en({type:t,minLength:null,maxLength:null,exactLength:null,typeName:he.ZodArray,...Te(e)});function so(t){if(t instanceof et){const e={};for(const i in t.shape){const l=t.shape[i];e[i]=Zn.create(so(l))}return new et({...t._def,shape:()=>e})}else return t instanceof en?new en({...t._def,type:so(t.element)}):t instanceof Zn?Zn.create(so(t.unwrap())):t instanceof xo?xo.create(so(t.unwrap())):t instanceof yi?yi.create(t.items.map(e=>so(e))):t}class et extends be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),i=De.objectKeys(e);return this._cached={shape:e,keys:i},this._cached}_parse(e){if(this._getType(e)!==ie.object){const h=this._getOrReturnCtx(e);return te(h,{code:$.invalid_type,expected:ie.object,received:h.parsedType}),ye}const{status:l,ctx:s}=this._processInputParams(e),{shape:f,keys:m}=this._getCached(),p=[];if(!(this._def.catchall instanceof $n&&this._def.unknownKeys==="strip"))for(const h in s.data)m.includes(h)||p.push(h);const y=[];for(const h of m){const v=f[h],S=s.data[h];y.push({key:{status:"valid",value:h},value:v._parse(new tn(s,S,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof $n){const h=this._def.unknownKeys;if(h==="passthrough")for(const v of p)y.push({key:{status:"valid",value:v},value:{status:"valid",value:s.data[v]}});else if(h==="strict")p.length>0&&(te(s,{code:$.unrecognized_keys,keys:p}),l.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const v of p){const S=s.data[v];y.push({key:{status:"valid",value:v},value:h._parse(new tn(s,S,s.path,v)),alwaysSet:v in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const v of y){const S=await v.key,E=await v.value;h.push({key:S,value:E,alwaysSet:v.alwaysSet})}return h}).then(h=>ht.mergeObjectSync(l,h)):ht.mergeObjectSync(l,y)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new et({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(i,l)=>{var f,m;const s=((m=(f=this._def).errorMap)==null?void 0:m.call(f,i,l).message)??l.defaultError;return i.code==="unrecognized_keys"?{message:se.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new et({...this._def,unknownKeys:"strip"})}passthrough(){return new et({...this._def,unknownKeys:"passthrough"})}extend(e){return new et({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new et({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:he.ZodObject})}setKey(e,i){return this.augment({[e]:i})}catchall(e){return new et({...this._def,catchall:e})}pick(e){const i={};for(const l of De.objectKeys(e))e[l]&&this.shape[l]&&(i[l]=this.shape[l]);return new et({...this._def,shape:()=>i})}omit(e){const i={};for(const l of De.objectKeys(this.shape))e[l]||(i[l]=this.shape[l]);return new et({...this._def,shape:()=>i})}deepPartial(){return so(this)}partial(e){const i={};for(const l of De.objectKeys(this.shape)){const s=this.shape[l];e&&!e[l]?i[l]=s:i[l]=s.optional()}return new et({...this._def,shape:()=>i})}required(e){const i={};for(const l of De.objectKeys(this.shape))if(e&&!e[l])i[l]=this.shape[l];else{let f=this.shape[l];for(;f instanceof Zn;)f=f._def.innerType;i[l]=f}return new et({...this._def,shape:()=>i})}keyof(){return oy(De.objectKeys(this.shape))}}et.create=(t,e)=>new et({shape:()=>t,unknownKeys:"strip",catchall:$n.create(),typeName:he.ZodObject,...Te(e)});et.strictCreate=(t,e)=>new et({shape:()=>t,unknownKeys:"strict",catchall:$n.create(),typeName:he.ZodObject,...Te(e)});et.lazycreate=(t,e)=>new et({shape:t,unknownKeys:"strip",catchall:$n.create(),typeName:he.ZodObject,...Te(e)});class ds extends be{_parse(e){const{ctx:i}=this._processInputParams(e),l=this._def.options;function s(f){for(const p of f)if(p.result.status==="valid")return p.result;for(const p of f)if(p.result.status==="dirty")return i.common.issues.push(...p.ctx.common.issues),p.result;const m=f.map(p=>new vn(p.ctx.common.issues));return te(i,{code:$.invalid_union,unionErrors:m}),ye}if(i.common.async)return Promise.all(l.map(async f=>{const m={...i,common:{...i.common,issues:[]},parent:null};return{result:await f._parseAsync({data:i.data,path:i.path,parent:m}),ctx:m}})).then(s);{let f;const m=[];for(const y of l){const h={...i,common:{...i.common,issues:[]},parent:null},v=y._parseSync({data:i.data,path:i.path,parent:h});if(v.status==="valid")return v;v.status==="dirty"&&!f&&(f={result:v,ctx:h}),h.common.issues.length&&m.push(h.common.issues)}if(f)return i.common.issues.push(...f.ctx.common.issues),f.result;const p=m.map(y=>new vn(y));return te(i,{code:$.invalid_union,unionErrors:p}),ye}}get options(){return this._def.options}}ds.create=(t,e)=>new ds({options:t,typeName:he.ZodUnion,...Te(e)});function lc(t,e){const i=Kn(t),l=Kn(e);if(t===e)return{valid:!0,data:t};if(i===ie.object&&l===ie.object){const s=De.objectKeys(e),f=De.objectKeys(t).filter(p=>s.indexOf(p)!==-1),m={...t,...e};for(const p of f){const y=lc(t[p],e[p]);if(!y.valid)return{valid:!1};m[p]=y.data}return{valid:!0,data:m}}else if(i===ie.array&&l===ie.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let f=0;f<t.length;f++){const m=t[f],p=e[f],y=lc(m,p);if(!y.valid)return{valid:!1};s.push(y.data)}return{valid:!0,data:s}}else return i===ie.date&&l===ie.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ms extends be{_parse(e){const{status:i,ctx:l}=this._processInputParams(e),s=(f,m)=>{if(Yp(f)||Yp(m))return ye;const p=lc(f.value,m.value);return p.valid?((Jp(f)||Jp(m))&&i.dirty(),{status:i.value,value:p.data}):(te(l,{code:$.invalid_intersection_types}),ye)};return l.common.async?Promise.all([this._def.left._parseAsync({data:l.data,path:l.path,parent:l}),this._def.right._parseAsync({data:l.data,path:l.path,parent:l})]).then(([f,m])=>s(f,m)):s(this._def.left._parseSync({data:l.data,path:l.path,parent:l}),this._def.right._parseSync({data:l.data,path:l.path,parent:l}))}}ms.create=(t,e,i)=>new ms({left:t,right:e,typeName:he.ZodIntersection,...Te(i)});class yi extends be{_parse(e){const{status:i,ctx:l}=this._processInputParams(e);if(l.parsedType!==ie.array)return te(l,{code:$.invalid_type,expected:ie.array,received:l.parsedType}),ye;if(l.data.length<this._def.items.length)return te(l,{code:$.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&l.data.length>this._def.items.length&&(te(l,{code:$.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.dirty());const f=[...l.data].map((m,p)=>{const y=this._def.items[p]||this._def.rest;return y?y._parse(new tn(l,m,l.path,p)):null}).filter(m=>!!m);return l.common.async?Promise.all(f).then(m=>ht.mergeArray(i,m)):ht.mergeArray(i,f)}get items(){return this._def.items}rest(e){return new yi({...this._def,rest:e})}}yi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new yi({items:t,typeName:he.ZodTuple,rest:null,...Te(e)})};class ps extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:i,ctx:l}=this._processInputParams(e);if(l.parsedType!==ie.object)return te(l,{code:$.invalid_type,expected:ie.object,received:l.parsedType}),ye;const s=[],f=this._def.keyType,m=this._def.valueType;for(const p in l.data)s.push({key:f._parse(new tn(l,p,l.path,p)),value:m._parse(new tn(l,l.data[p],l.path,p)),alwaysSet:p in l.data});return l.common.async?ht.mergeObjectAsync(i,s):ht.mergeObjectSync(i,s)}get element(){return this._def.valueType}static create(e,i,l){return i instanceof be?new ps({keyType:e,valueType:i,typeName:he.ZodRecord,...Te(l)}):new ps({keyType:jt.create(),valueType:e,typeName:he.ZodRecord,...Te(i)})}}class Wp extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:i,ctx:l}=this._processInputParams(e);if(l.parsedType!==ie.map)return te(l,{code:$.invalid_type,expected:ie.map,received:l.parsedType}),ye;const s=this._def.keyType,f=this._def.valueType,m=[...l.data.entries()].map(([p,y],h)=>({key:s._parse(new tn(l,p,l.path,[h,"key"])),value:f._parse(new tn(l,y,l.path,[h,"value"]))}));if(l.common.async){const p=new Map;return Promise.resolve().then(async()=>{for(const y of m){const h=await y.key,v=await y.value;if(h.status==="aborted"||v.status==="aborted")return ye;(h.status==="dirty"||v.status==="dirty")&&i.dirty(),p.set(h.value,v.value)}return{status:i.value,value:p}})}else{const p=new Map;for(const y of m){const h=y.key,v=y.value;if(h.status==="aborted"||v.status==="aborted")return ye;(h.status==="dirty"||v.status==="dirty")&&i.dirty(),p.set(h.value,v.value)}return{status:i.value,value:p}}}}Wp.create=(t,e,i)=>new Wp({valueType:e,keyType:t,typeName:he.ZodMap,...Te(i)});class kl extends be{_parse(e){const{status:i,ctx:l}=this._processInputParams(e);if(l.parsedType!==ie.set)return te(l,{code:$.invalid_type,expected:ie.set,received:l.parsedType}),ye;const s=this._def;s.minSize!==null&&l.data.size<s.minSize.value&&(te(l,{code:$.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),i.dirty()),s.maxSize!==null&&l.data.size>s.maxSize.value&&(te(l,{code:$.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),i.dirty());const f=this._def.valueType;function m(y){const h=new Set;for(const v of y){if(v.status==="aborted")return ye;v.status==="dirty"&&i.dirty(),h.add(v.value)}return{status:i.value,value:h}}const p=[...l.data.values()].map((y,h)=>f._parse(new tn(l,y,l.path,h)));return l.common.async?Promise.all(p).then(y=>m(y)):m(p)}min(e,i){return new kl({...this._def,minSize:{value:e,message:se.toString(i)}})}max(e,i){return new kl({...this._def,maxSize:{value:e,message:se.toString(i)}})}size(e,i){return this.min(e,i).max(e,i)}nonempty(e){return this.min(1,e)}}kl.create=(t,e)=>new kl({valueType:t,minSize:null,maxSize:null,typeName:he.ZodSet,...Te(e)});class ac extends be{get schema(){return this._def.getter()}_parse(e){const{ctx:i}=this._processInputParams(e);return this._def.getter()._parse({data:i.data,path:i.path,parent:i})}}ac.create=(t,e)=>new ac({getter:t,typeName:he.ZodLazy,...Te(e)});class eh extends be{_parse(e){if(e.data!==this._def.value){const i=this._getOrReturnCtx(e);return te(i,{received:i.data,code:$.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}eh.create=(t,e)=>new eh({value:t,typeName:he.ZodLiteral,...Te(e)});function oy(t,e){return new yo({values:t,typeName:he.ZodEnum,...Te(e)})}class yo extends be{_parse(e){if(typeof e.data!="string"){const i=this._getOrReturnCtx(e),l=this._def.values;return te(i,{expected:De.joinValues(l),received:i.parsedType,code:$.invalid_type}),ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const i=this._getOrReturnCtx(e),l=this._def.values;return te(i,{received:i.data,code:$.invalid_enum_value,options:l}),ye}return Bt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const i of this._def.values)e[i]=i;return e}get Values(){const e={};for(const i of this._def.values)e[i]=i;return e}get Enum(){const e={};for(const i of this._def.values)e[i]=i;return e}extract(e,i=this._def){return yo.create(e,{...this._def,...i})}exclude(e,i=this._def){return yo.create(this.options.filter(l=>!e.includes(l)),{...this._def,...i})}}yo.create=oy;class th extends be{_parse(e){const i=De.getValidEnumValues(this._def.values),l=this._getOrReturnCtx(e);if(l.parsedType!==ie.string&&l.parsedType!==ie.number){const s=De.objectValues(i);return te(l,{expected:De.joinValues(s),received:l.parsedType,code:$.invalid_type}),ye}if(this._cache||(this._cache=new Set(De.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=De.objectValues(i);return te(l,{received:l.data,code:$.invalid_enum_value,options:s}),ye}return Bt(e.data)}get enum(){return this._def.values}}th.create=(t,e)=>new th({values:t,typeName:he.ZodNativeEnum,...Te(e)});class hs extends be{unwrap(){return this._def.type}_parse(e){const{ctx:i}=this._processInputParams(e);if(i.parsedType!==ie.promise&&i.common.async===!1)return te(i,{code:$.invalid_type,expected:ie.promise,received:i.parsedType}),ye;const l=i.parsedType===ie.promise?i.data:Promise.resolve(i.data);return Bt(l.then(s=>this._def.type.parseAsync(s,{path:i.path,errorMap:i.common.contextualErrorMap})))}}hs.create=(t,e)=>new hs({type:t,typeName:he.ZodPromise,...Te(e)});class vo extends be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===he.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:i,ctx:l}=this._processInputParams(e),s=this._def.effect||null,f={addIssue:m=>{te(l,m),m.fatal?i.abort():i.dirty()},get path(){return l.path}};if(f.addIssue=f.addIssue.bind(f),s.type==="preprocess"){const m=s.transform(l.data,f);if(l.common.async)return Promise.resolve(m).then(async p=>{if(i.value==="aborted")return ye;const y=await this._def.schema._parseAsync({data:p,path:l.path,parent:l});return y.status==="aborted"?ye:y.status==="dirty"||i.value==="dirty"?wl(y.value):y});{if(i.value==="aborted")return ye;const p=this._def.schema._parseSync({data:m,path:l.path,parent:l});return p.status==="aborted"?ye:p.status==="dirty"||i.value==="dirty"?wl(p.value):p}}if(s.type==="refinement"){const m=p=>{const y=s.refinement(p,f);if(l.common.async)return Promise.resolve(y);if(y instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return p};if(l.common.async===!1){const p=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});return p.status==="aborted"?ye:(p.status==="dirty"&&i.dirty(),m(p.value),{status:i.value,value:p.value})}else return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(p=>p.status==="aborted"?ye:(p.status==="dirty"&&i.dirty(),m(p.value).then(()=>({status:i.value,value:p.value}))))}if(s.type==="transform")if(l.common.async===!1){const m=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});if(!ho(m))return ye;const p=s.transform(m.value,f);if(p instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:p}}else return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(m=>ho(m)?Promise.resolve(s.transform(m.value,f)).then(p=>({status:i.value,value:p})):ye);De.assertNever(s)}}vo.create=(t,e,i)=>new vo({schema:t,typeName:he.ZodEffects,effect:e,...Te(i)});vo.createWithPreprocess=(t,e,i)=>new vo({schema:e,effect:{type:"preprocess",transform:t},typeName:he.ZodEffects,...Te(i)});class Zn extends be{_parse(e){return this._getType(e)===ie.undefined?Bt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zn.create=(t,e)=>new Zn({innerType:t,typeName:he.ZodOptional,...Te(e)});class xo extends be{_parse(e){return this._getType(e)===ie.null?Bt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xo.create=(t,e)=>new xo({innerType:t,typeName:he.ZodNullable,...Te(e)});class sc extends be{_parse(e){const{ctx:i}=this._processInputParams(e);let l=i.data;return i.parsedType===ie.undefined&&(l=this._def.defaultValue()),this._def.innerType._parse({data:l,path:i.path,parent:i})}removeDefault(){return this._def.innerType}}sc.create=(t,e)=>new sc({innerType:t,typeName:he.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});class rc extends be{_parse(e){const{ctx:i}=this._processInputParams(e),l={...i,common:{...i.common,issues:[]}},s=this._def.innerType._parse({data:l.data,path:l.path,parent:{...l}});return cs(s)?s.then(f=>({status:"valid",value:f.status==="valid"?f.value:this._def.catchValue({get error(){return new vn(l.common.issues)},input:l.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new vn(l.common.issues)},input:l.data})}}removeCatch(){return this._def.innerType}}rc.create=(t,e)=>new rc({innerType:t,typeName:he.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});class nh extends be{_parse(e){if(this._getType(e)!==ie.nan){const l=this._getOrReturnCtx(e);return te(l,{code:$.invalid_type,expected:ie.nan,received:l.parsedType}),ye}return{status:"valid",value:e.data}}}nh.create=t=>new nh({typeName:he.ZodNaN,...Te(t)});class hS extends be{_parse(e){const{ctx:i}=this._processInputParams(e),l=i.data;return this._def.type._parse({data:l,path:i.path,parent:i})}unwrap(){return this._def.type}}class Nc extends be{_parse(e){const{status:i,ctx:l}=this._processInputParams(e);if(l.common.async)return(async()=>{const f=await this._def.in._parseAsync({data:l.data,path:l.path,parent:l});return f.status==="aborted"?ye:f.status==="dirty"?(i.dirty(),wl(f.value)):this._def.out._parseAsync({data:f.value,path:l.path,parent:l})})();{const s=this._def.in._parseSync({data:l.data,path:l.path,parent:l});return s.status==="aborted"?ye:s.status==="dirty"?(i.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:l.path,parent:l})}}static create(e,i){return new Nc({in:e,out:i,typeName:he.ZodPipeline})}}class uc extends be{_parse(e){const i=this._def.innerType._parse(e),l=s=>(ho(s)&&(s.value=Object.freeze(s.value)),s);return cs(i)?i.then(s=>l(s)):l(i)}unwrap(){return this._def.innerType}}uc.create=(t,e)=>new uc({innerType:t,typeName:he.ZodReadonly,...Te(e)});var he;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(he||(he={}));const pi=jt.create,ih=hi.create;gi.create;const gS=fs.create;go.create;const oh=oc.create;$n.create;const Dl=en.create,yS=et.create,vS=ds.create;ms.create;yi.create;const xS=ps.create,TS=ac.create,SS=yo.create;hs.create;Zn.create;xo.create;const lo={string:t=>jt.create({...t,coerce:!0}),number:t=>hi.create({...t,coerce:!0}),boolean:t=>fs.create({...t,coerce:!0}),bigint:t=>gi.create({...t,coerce:!0}),date:t=>go.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _S,ES;function CS(){return{geminiUrl:_S,vertexUrl:ES}}function AS(t,e,i){var l,s,f;if(!(!((l=t.httpOptions)===null||l===void 0)&&l.baseUrl)){const m=CS();return t.vertexai?(s=m.vertexUrl)!==null&&s!==void 0?s:e:(f=m.geminiUrl)!==null&&f!==void 0?f:i}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xi{}function re(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(l,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const f=e[s];return f!=null?String(f):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function u(t,e,i){for(let f=0;f<e.length-1;f++){const m=e[f];if(m.endsWith("[]")){const p=m.slice(0,-2);if(!(p in t))if(Array.isArray(i))t[p]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(t[p])){const y=t[p];if(Array.isArray(i))for(let h=0;h<y.length;h++){const v=y[h];u(v,e.slice(f+1),i[h])}else for(const h of y)u(h,e.slice(f+1),i)}return}else if(m.endsWith("[0]")){const p=m.slice(0,-3);p in t||(t[p]=[{}]);const y=t[p];u(y[0],e.slice(f+1),i);return}(!t[m]||typeof t[m]!="object")&&(t[m]={}),t=t[m]}const l=e[e.length-1],s=t[l];if(s!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===s)return;if(typeof s=="object"&&typeof i=="object"&&s!==null&&i!==null)Object.assign(s,i);else throw new Error(`Cannot set value for an existing key. Key: ${l}`)}else t[l]=i}function r(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return;const l=e[i];if(l.endsWith("[]")){const s=l.slice(0,-2);if(s in t){const f=t[s];return Array.isArray(f)?f.map(m=>r(m,e.slice(i+1))):void 0}else return}else t=t[l]}return t}catch(i){if(i instanceof TypeError)return;throw i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lh;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lh||(lh={}));var ah;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ah||(ah={}));var Wt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Wt||(Wt={}));var sh;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(sh||(sh={}));var rh;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(rh||(rh={}));var uh;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(uh||(uh={}));var ch;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ch||(ch={}));var fh;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(fh||(fh={}));var dh;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dh||(dh={}));var mh;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mh||(mh={}));var ph;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(ph||(ph={}));var hh;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(hh||(hh={}));var gh;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(gh||(gh={}));var yh;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yh||(yh={}));var vh;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(vh||(vh={}));var xh;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xh||(xh={}));var gs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(gs||(gs={}));var Th;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Th||(Th={}));var cc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cc||(cc={}));var Sh;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Sh||(Sh={}));var _h;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(_h||(_h={}));var Eh;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Eh||(Eh={}));var Ch;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ch||(Ch={}));var Ah;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Ah||(Ah={}));var bh;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(bh||(bh={}));var Nh;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Nh||(Nh={}));var Mh;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(Mh||(Mh={}));var Rh;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Rh||(Rh={}));var wh;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wh||(wh={}));var Dh;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Dh||(Dh={}));var Ih;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ih||(Ih={}));var Uh;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Uh||(Uh={}));var kh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(kh||(kh={}));var Lh;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Lh||(Lh={}));var Vh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Vh||(Vh={}));var Ph;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ph||(Ph={}));var Oh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Oh||(Oh={}));var qh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(qh||(qh={}));var Gh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Gh||(Gh={}));var Bh;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Bh||(Bh={}));var zh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zh||(zh={}));var ro;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ro||(ro={}));class fc{constructor(e){const i={};for(const l of e.headers.entries())i[l[0]]=l[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rl{get text(){var e,i,l,s,f,m,p,y;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const S=[];for(const E of(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[A,M]of Object.entries(E))A!=="text"&&A!=="thought"&&(M!==null||M!==void 0)&&S.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,h+=E.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,i,l,s,f,m,p,y;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const S of(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[E,A]of Object.entries(S))E!=="inlineData"&&(A!==null||A!==void 0)&&v.push(E);S.inlineData&&typeof S.inlineData.data=="string"&&(h+=atob(S.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,l,s,f,m,p,y;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,i,l,s,f,m,p,y,h;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,l,s,f,m,p,y,h;if(((s=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class Hh{}class Fh{}class bS{}class NS{}class Yh{}class Jh{}class Kh{}class MS{}class Zh{}class $h{}class Xh{}class RS{}class wS{}class DS{}class Qh{}class IS{get text(){var e,i,l;let s="",f=!1;const m=[];for(const p of(l=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&l!==void 0?l:[]){for(const[y,h]of Object.entries(p))y!=="text"&&y!=="thought"&&h!==null&&m.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,s+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?s:void 0}get data(){var e,i,l;let s="";const f=[];for(const m of(l=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&l!==void 0?l:[]){for(const[p,y]of Object.entries(m))p!=="inlineData"&&y!==null&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(s+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class US{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ly(t,e){const i=Le(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function ay(t){return Array.isArray(t)?t.map(e=>ys(e)):[ys(t)]}function ys(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function sy(t){const e=ys(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ry(t){const e=ys(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function uy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>jh(e)):[jh(t)]}function dc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Wh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function mt(t){if(t==null)throw new Error("ContentUnion is required");return dc(t)?t:{role:"user",parts:uy(t)}}function cy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const l=mt(i);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]});if(t.isVertexAI()){const i=mt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>mt(i)):[mt(e)]}function Gt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Wh(t)||eg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mt(t)]}const e=[],i=[],l=dc(t[0]);for(const s of t){const f=dc(s);if(f!=l)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(s);else{if(Wh(s)||eg(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(s)}}return l||e.push({role:"user",parts:uy(i)}),e}const kS=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),tg=SS(["string","number","integer","object","array","boolean","null"]),LS=vS([tg,Dl(tg)]);function VS(t=!0){const e=TS(()=>{const i=yS({type:LS.optional(),format:pi().optional(),title:pi().optional(),description:pi().optional(),default:oh().optional(),items:e.optional(),minItems:lo.string().optional(),maxItems:lo.string().optional(),enum:Dl(oh()).optional(),properties:xS(pi(),e).optional(),required:Dl(pi()).optional(),minProperties:lo.string().optional(),maxProperties:lo.string().optional(),propertyOrdering:Dl(pi()).optional(),minimum:ih().optional(),maximum:ih().optional(),minLength:lo.string().optional(),maxLength:lo.string().optional(),pattern:pi().optional(),anyOf:Dl(e).optional(),additionalProperties:gS().optional()});return t?i.strict():i});return e}function PS(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(l=>l!=="null");if(i.length===1)e.type=Object.values(Wt).includes(i[0].toUpperCase())?i[0].toUpperCase():Wt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const l of i)e.anyOf.push({type:Object.values(Wt).includes(l.toUpperCase())?l.toUpperCase():Wt.TYPE_UNSPECIFIED})}}function uo(t){const e={},i=["items"],l=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=t.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,t=f[1]):f[1].type==="null"&&(e.nullable=!0,t=f[0])),t.type instanceof Array&&PS(t.type,e);for(const[m,p]of Object.entries(t))if(p!=null)if(m=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(Wt).includes(p.toUpperCase())?p.toUpperCase():Wt.TYPE_UNSPECIFIED}else if(i.includes(m))e[m]=uo(p);else if(l.includes(m)){const y=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}y.push(uo(h))}e[m]=y}else if(s.includes(m)){const y={};for(const[h,v]of Object.entries(p))y[h]=uo(v);e[m]=y}else{if(m==="additionalProperties")continue;e[m]=p}return e}function Ll(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=VS().parse(t);return uo(e)}else return uo(t)}function Mc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Rc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Co(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Ll(e.parameters)),e.response&&(e.response=Ll(e.response));return t}function Ao(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function OS(t,e,i,l=1){const s=!e.startsWith(`${i}/`)&&e.split("/").length===l;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:s?`${i}/${e}`:e}function Tn(t,e){if(typeof e!="string")throw new Error("name must be a string");return OS(t,e,"cachedContents")}function fy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Sn(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function qS(t){return t!=null&&typeof t=="object"&&"name"in t}function GS(t){return t!=null&&typeof t=="object"&&"video"in t}function BS(t){return t!=null&&typeof t=="object"&&"uri"in t}function dy(t){var e;let i;if(qS(t)&&(i=t.name),!(BS(t)&&(i=t.uri,i===void 0))&&!(GS(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const s=i.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${i}`);i=s[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function my(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function py(t){for(const e of["models","tunedModels","publisherModels"])if(zS(t,e))return t[e];return[]}function zS(t,e){return t!==null&&typeof t=="object"&&e in t}function HS(t,e={}){const i=t,l={name:i.name,description:i.description,parameters:uo(Ts(i.inputSchema))};return e.behavior&&(l.behavior=e.behavior),{functionDeclarations:[l]}}function FS(t,e={}){const i=[],l=new Set;for(const s of t){const f=s.name;if(l.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);l.add(f);const m=HS(s,e);m.functionDeclarations&&i.push(...m.functionDeclarations)}return{functionDeclarations:i}}function YS(t){const e=[];for(const i of t)e.push(Ts(i));return e}function JS(t){const e={};for(const[i,l]of Object.entries(t)){const s=l;e[i]=Ts(s)}return e}function Ts(t){const e=new Set(["items"]),i=new Set(["anyOf"]),l=new Set(["properties"]),s={};for(const[f,m]of Object.entries(t))if(e.has(f))s[f]=Ts(m);else if(i.has(f))s[f]=YS(m);else if(l.has(f))s[f]=JS(m);else if(f==="type"){const p=m.toUpperCase();s[f]=Object.values(Wt).includes(p)?p:Wt.TYPE_UNSPECIFIED}else kS.has(f)&&(s[f]=m);return s}function hy(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function KS(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bo(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function gy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZS(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function $S(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function XS(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function QS(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],ZS(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],$S(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],XS(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function yy(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>QS(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function jS(t){const e={},i=r(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const l=r(t,["default"]);l!=null&&u(e,["default"],l);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const p=r(t,["format"]);p!=null&&u(e,["format"],p);const y=r(t,["items"]);y!=null&&u(e,["items"],y);const h=r(t,["maxItems"]);h!=null&&u(e,["maxItems"],h);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const S=r(t,["maxProperties"]);S!=null&&u(e,["maxProperties"],S);const E=r(t,["maximum"]);E!=null&&u(e,["maximum"],E);const A=r(t,["minItems"]);A!=null&&u(e,["minItems"],A);const M=r(t,["minLength"]);M!=null&&u(e,["minLength"],M);const k=r(t,["minProperties"]);k!=null&&u(e,["minProperties"],k);const L=r(t,["minimum"]);L!=null&&u(e,["minimum"],L);const H=r(t,["nullable"]);H!=null&&u(e,["nullable"],H);const Y=r(t,["pattern"]);Y!=null&&u(e,["pattern"],Y);const F=r(t,["properties"]);F!=null&&u(e,["properties"],F);const Q=r(t,["propertyOrdering"]);Q!=null&&u(e,["propertyOrdering"],Q);const z=r(t,["required"]);z!=null&&u(e,["required"],z);const W=r(t,["title"]);W!=null&&u(e,["title"],W);const Z=r(t,["type"]);return Z!=null&&u(e,["type"],Z),e}function WS(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(t,["category"]);i!=null&&u(e,["category"],i);const l=r(t,["threshold"]);return l!=null&&u(e,["threshold"],l),e}function e_(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const l=r(t,["description"]);l!=null&&u(e,["description"],l);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const p=r(t,["response"]);p!=null&&u(e,["response"],p);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function t_(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function n_(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],t_(i)),e}function i_(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function o_(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],i_(i)),e}function l_(){return{}}function a_(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>e_(h))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],n_(l));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],o_(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],l_());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const p=r(t,["computerUse"]);return p!=null&&u(e,["computerUse"],p),e}function s_(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["allowedFunctionNames"]);return l!=null&&u(e,["allowedFunctionNames"],l),e}function r_(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const l=r(t,["longitude"]);return l!=null&&u(e,["longitude"],l),e}function u_(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],r_(i));const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function c_(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],s_(i));const l=r(t,["retrievalConfig"]);return l!=null&&u(e,["retrievalConfig"],u_(l)),e}function f_(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function vy(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],f_(i)),e}function d_(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const l=r(t,["voiceConfig"]);return l!=null&&u(e,["voiceConfig"],vy(l)),e}function m_(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>d_(s))),u(e,["speakerVoiceConfigs"],l)}return e}function p_(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],vy(i));const l=r(t,["multiSpeakerVoiceConfig"]);l!=null&&u(e,["multiSpeakerVoiceConfig"],m_(l));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function h_(t){const e={},i=r(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const l=r(t,["thinkingBudget"]);return l!=null&&u(e,["thinkingBudget"],l),e}function g_(t,e,i){const l={},s=r(e,["systemInstruction"]);i!==void 0&&s!=null&&u(i,["systemInstruction"],yy(mt(s)));const f=r(e,["temperature"]);f!=null&&u(l,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(l,["topP"],m);const p=r(e,["topK"]);p!=null&&u(l,["topK"],p);const y=r(e,["candidateCount"]);y!=null&&u(l,["candidateCount"],y);const h=r(e,["maxOutputTokens"]);h!=null&&u(l,["maxOutputTokens"],h);const v=r(e,["stopSequences"]);v!=null&&u(l,["stopSequences"],v);const S=r(e,["responseLogprobs"]);S!=null&&u(l,["responseLogprobs"],S);const E=r(e,["logprobs"]);E!=null&&u(l,["logprobs"],E);const A=r(e,["presencePenalty"]);A!=null&&u(l,["presencePenalty"],A);const M=r(e,["frequencyPenalty"]);M!=null&&u(l,["frequencyPenalty"],M);const k=r(e,["seed"]);k!=null&&u(l,["seed"],k);const L=r(e,["responseMimeType"]);L!=null&&u(l,["responseMimeType"],L);const H=r(e,["responseSchema"]);H!=null&&u(l,["responseSchema"],jS(Ll(H)));const Y=r(e,["responseJsonSchema"]);if(Y!=null&&u(l,["responseJsonSchema"],Y),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=r(e,["safetySettings"]);if(i!==void 0&&F!=null){let oe=F;Array.isArray(oe)&&(oe=oe.map(le=>WS(le))),u(i,["safetySettings"],oe)}const Q=r(e,["tools"]);if(i!==void 0&&Q!=null){let oe=Ao(Q);Array.isArray(oe)&&(oe=oe.map(le=>a_(Co(le)))),u(i,["tools"],oe)}const z=r(e,["toolConfig"]);if(i!==void 0&&z!=null&&u(i,["toolConfig"],c_(z)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=r(e,["cachedContent"]);i!==void 0&&W!=null&&u(i,["cachedContent"],Tn(t,W));const Z=r(e,["responseModalities"]);Z!=null&&u(l,["responseModalities"],Z);const ge=r(e,["mediaResolution"]);ge!=null&&u(l,["mediaResolution"],ge);const X=r(e,["speechConfig"]);if(X!=null&&u(l,["speechConfig"],p_(Mc(X))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ve=r(e,["thinkingConfig"]);return ve!=null&&u(l,["thinkingConfig"],h_(ve)),l}function y_(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["request","model"],Le(t,l));const s=r(e,["contents"]);if(s!=null){let m=Gt(s);Array.isArray(m)&&(m=m.map(p=>yy(p))),u(i,["request","contents"],m)}const f=r(e,["config"]);return f!=null&&u(i,["request","generationConfig"],g_(t,f,i)),i}function v_(t,e){const i={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const l=r(e,["fileName"]);l!=null&&u(i,["fileName"],l);const s=r(e,["inlinedRequests"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>y_(t,m))),u(i,["requests","requests"],f)}return i}function x_(t,e){const i={},l=r(t,["displayName"]);if(e!==void 0&&l!=null&&u(e,["batch","displayName"],l),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function T_(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["src"]);s!=null&&u(i,["batch","inputConfig"],v_(t,hy(t,s)));const f=r(e,["config"]);return f!=null&&u(i,["config"],x_(f,i)),i}function S_(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],bo(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function __(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],bo(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function E_(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);if(e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function C_(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],E_(i,e)),e}function A_(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],bo(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function b_(t){const e={},i=r(t,["format"]);i!=null&&u(e,["instancesFormat"],i);const l=r(t,["gcsUri"]);l!=null&&u(e,["gcsSource","uris"],l);const s=r(t,["bigqueryUri"]);if(s!=null&&u(e,["bigquerySource","inputUri"],s),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function N_(t){const e={},i=r(t,["format"]);i!=null&&u(e,["predictionsFormat"],i);const l=r(t,["gcsUri"]);l!=null&&u(e,["gcsDestination","outputUriPrefix"],l);const s=r(t,["bigqueryUri"]);if(s!=null&&u(e,["bigqueryDestination","outputUri"],s),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function M_(t,e){const i={},l=r(t,["displayName"]);e!==void 0&&l!=null&&u(e,["displayName"],l);const s=r(t,["dest"]);return e!==void 0&&s!=null&&u(e,["outputConfig"],N_(KS(s))),i}function R_(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["model"],Le(t,l));const s=r(e,["src"]);s!=null&&u(i,["inputConfig"],b_(hy(t,s)));const f=r(e,["config"]);return f!=null&&u(i,["config"],M_(f,i)),i}function w_(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],bo(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function D_(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],bo(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function I_(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function U_(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],I_(i,e)),e}function k_(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],bo(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function xy(){return{}}function L_(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function V_(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function P_(t){const e={},i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function O_(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],L_(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],V_(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],P_(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function q_(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>O_(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function G_(t){const e={},i=r(t,["citationSources"]);return i!=null&&u(e,["citations"],i),e}function B_(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const l=r(t,["urlRetrievalStatus"]);return l!=null&&u(e,["urlRetrievalStatus"],l),e}function z_(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>B_(s))),u(e,["urlMetadata"],l)}return e}function H_(t){const e={},i=r(t,["content"]);i!=null&&u(e,["content"],q_(i));const l=r(t,["citationMetadata"]);l!=null&&u(e,["citationMetadata"],G_(l));const s=r(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],z_(m));const p=r(t,["avgLogprobs"]);p!=null&&u(e,["avgLogprobs"],p);const y=r(t,["groundingMetadata"]);y!=null&&u(e,["groundingMetadata"],y);const h=r(t,["index"]);h!=null&&u(e,["index"],h);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const S=r(t,["safetyRatings"]);return S!=null&&u(e,["safetyRatings"],S),e}function F_(t){const e={},i=r(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>H_(p))),u(e,["candidates"],m)}const l=r(t,["modelVersion"]);l!=null&&u(e,["modelVersion"],l);const s=r(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const f=r(t,["usageMetadata"]);return f!=null&&u(e,["usageMetadata"],f),e}function Y_(t){const e={},i=r(t,["response"]);return i!=null&&u(e,["response"],F_(i)),r(t,["error"])!=null&&u(e,["error"],xy()),e}function J_(t){const e={},i=r(t,["responsesFile"]);i!=null&&u(e,["fileName"],i);const l=r(t,["inlinedResponses","inlinedResponses"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>Y_(f))),u(e,["inlinedResponses"],s)}return e}function mc(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["metadata","displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["metadata","state"]);s!=null&&u(e,["state"],gy(s));const f=r(t,["metadata","createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["metadata","endTime"]);m!=null&&u(e,["endTime"],m);const p=r(t,["metadata","updateTime"]);p!=null&&u(e,["updateTime"],p);const y=r(t,["metadata","model"]);y!=null&&u(e,["model"],y);const h=r(t,["metadata","output"]);return h!=null&&u(e,["dest"],J_(h)),e}function K_(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["operations"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>mc(f))),u(e,["batchJobs"],s)}return e}function Z_(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["done"]);return l!=null&&u(e,["done"],l),r(t,["error"])!=null&&u(e,["error"],xy()),e}function Ty(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const l=r(t,["code"]);l!=null&&u(e,["code"],l);const s=r(t,["message"]);return s!=null&&u(e,["message"],s),e}function $_(t){const e={},i=r(t,["instancesFormat"]);i!=null&&u(e,["format"],i);const l=r(t,["gcsSource","uris"]);l!=null&&u(e,["gcsUri"],l);const s=r(t,["bigquerySource","inputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function X_(t){const e={},i=r(t,["predictionsFormat"]);i!=null&&u(e,["format"],i);const l=r(t,["gcsDestination","outputUriPrefix"]);l!=null&&u(e,["gcsUri"],l);const s=r(t,["bigqueryDestination","outputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function pc(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["state"]);s!=null&&u(e,["state"],gy(s));const f=r(t,["error"]);f!=null&&u(e,["error"],Ty(f));const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const p=r(t,["startTime"]);p!=null&&u(e,["startTime"],p);const y=r(t,["endTime"]);y!=null&&u(e,["endTime"],y);const h=r(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const v=r(t,["model"]);v!=null&&u(e,["model"],v);const S=r(t,["inputConfig"]);S!=null&&u(e,["src"],$_(S));const E=r(t,["outputConfig"]);return E!=null&&u(e,["dest"],X_(E)),e}function Q_(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["batchPredictionJobs"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>pc(f))),u(e,["batchJobs"],s)}return e}function j_(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["done"]);l!=null&&u(e,["done"],l);const s=r(t,["error"]);return s!=null&&u(e,["error"],Ty(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(vi||(vi={}));class Pl{constructor(e,i,l,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,l,s)}init(e,i,l){var s,f;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.idxInternal=0;let m={config:{}};l?typeof l=="object"?m=Object.assign({},l):m=l:m={config:{}},m.config&&(m.config.pageToken=i.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(f=(s=m.config)===null||s===void 0?void 0:s.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W_ extends xi{constructor(e){super(),this.apiClient=e,this.create=async i=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(i.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(i.config=i.config||{},i.config.displayName===void 0&&(i.config.displayName="genaiBatchJob_${timestampStr}"),i.config.dest===void 0&&typeof i.src=="string")if(i.src.startsWith("gs://")&&i.src.endsWith(".jsonl"))i.config.dest=`${i.src.slice(0,-6)}/dest`;else if(i.src.startsWith("bq://"))i.config.dest=`${i.src}_dest_${s}`;else throw new Error("Unsupported source:"+i.src)}return await this.createInternal(i)},this.list=async(i={})=>new Pl(vi.PAGED_ITEM_BATCH_JOBS,l=>this.listInternal(l),await this.listInternal(i),i)}async createInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=R_(this.apiClient,e);return p=re("batchPredictionJobs",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>pc(v))}else{const h=T_(this.apiClient,e);return p=re("{model}:batchGenerateContent",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>mc(v))}}async get(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=w_(this.apiClient,e);return p=re("batchPredictionJobs/{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>pc(v))}else{const h=S_(this.apiClient,e);return p=re("batches/{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>mc(v))}}async cancel(e){var i,l,s,f;let m="",p={};if(this.apiClient.isVertexAI()){const y=D_(this.apiClient,e);m=re("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const y=__(this.apiClient,e);m=re("batches/{name}:cancel",y._url),p=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=U_(e);return p=re("batchPredictionJobs",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=Q_(v),E=new Qh;return Object.assign(E,S),E})}else{const h=C_(e);return p=re("batches",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=K_(v),E=new Qh;return Object.assign(E,S),E})}}async delete(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=k_(this.apiClient,e);return p=re("batchPredictionJobs/{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>j_(v))}else{const h=A_(this.apiClient,e);return p=re("batches/{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Z_(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eE(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function tE(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function nE(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function iE(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],eE(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],tE(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],nE(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function ng(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>iE(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function oE(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const l=r(t,["description"]);l!=null&&u(e,["description"],l);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const p=r(t,["response"]);p!=null&&u(e,["response"],p);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function lE(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function aE(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],lE(i)),e}function sE(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function rE(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],sE(i)),e}function uE(){return{}}function cE(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>oE(h))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],aE(l));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],rE(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],uE());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const p=r(t,["computerUse"]);return p!=null&&u(e,["computerUse"],p),e}function fE(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["allowedFunctionNames"]);return l!=null&&u(e,["allowedFunctionNames"],l),e}function dE(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const l=r(t,["longitude"]);return l!=null&&u(e,["longitude"],l),e}function mE(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],dE(i));const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function pE(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],fE(i));const l=r(t,["retrievalConfig"]);return l!=null&&u(e,["retrievalConfig"],mE(l)),e}function hE(t,e){const i={},l=r(t,["ttl"]);e!==void 0&&l!=null&&u(e,["ttl"],l);const s=r(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const m=r(t,["contents"]);if(e!==void 0&&m!=null){let v=Gt(m);Array.isArray(v)&&(v=v.map(S=>ng(S))),u(e,["contents"],v)}const p=r(t,["systemInstruction"]);e!==void 0&&p!=null&&u(e,["systemInstruction"],ng(mt(p)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>cE(S))),u(e,["tools"],v)}const h=r(t,["toolConfig"]);if(e!==void 0&&h!=null&&u(e,["toolConfig"],pE(h)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function gE(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["model"],ly(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],hE(s,i)),i}function yE(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],Tn(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function vE(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],Tn(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function xE(t,e){const i={},l=r(t,["ttl"]);e!==void 0&&l!=null&&u(e,["ttl"],l);const s=r(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),i}function TE(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],Tn(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],xE(s,i)),i}function SE(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),i}function _E(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],SE(i,e)),e}function EE(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function CE(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["data"]);l!=null&&u(e,["data"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function AE(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function bE(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],EE(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],CE(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],AE(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function ig(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>bE(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function NE(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=r(t,["description"]);i!=null&&u(e,["description"],i);const l=r(t,["name"]);l!=null&&u(e,["name"],l);const s=r(t,["parameters"]);s!=null&&u(e,["parameters"],s);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function ME(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function RE(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],ME(i)),e}function wE(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function DE(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],wE(i)),e}function IE(){return{}}function UE(t){const e={},i=r(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function kE(t){const e={},i=r(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],UE(i));const l=r(t,["authType"]);l!=null&&u(e,["authType"],l);const s=r(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const p=r(t,["oidcConfig"]);return p!=null&&u(e,["oidcConfig"],p),e}function LE(t){const e={},i=r(t,["authConfig"]);return i!=null&&u(e,["authConfig"],kE(i)),e}function VE(){return{}}function PE(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let S=i;Array.isArray(S)&&(S=S.map(E=>NE(E))),u(e,["functionDeclarations"],S)}const l=r(t,["retrieval"]);l!=null&&u(e,["retrieval"],l);const s=r(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],RE(s));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],DE(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],IE());const p=r(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],LE(p)),r(t,["urlContext"])!=null&&u(e,["urlContext"],VE());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function OE(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["allowedFunctionNames"]);return l!=null&&u(e,["allowedFunctionNames"],l),e}function qE(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const l=r(t,["longitude"]);return l!=null&&u(e,["longitude"],l),e}function GE(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],qE(i));const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function BE(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],OE(i));const l=r(t,["retrievalConfig"]);return l!=null&&u(e,["retrievalConfig"],GE(l)),e}function zE(t,e){const i={},l=r(t,["ttl"]);e!==void 0&&l!=null&&u(e,["ttl"],l);const s=r(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const m=r(t,["contents"]);if(e!==void 0&&m!=null){let S=Gt(m);Array.isArray(S)&&(S=S.map(E=>ig(E))),u(e,["contents"],S)}const p=r(t,["systemInstruction"]);e!==void 0&&p!=null&&u(e,["systemInstruction"],ig(mt(p)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>PE(E))),u(e,["tools"],S)}const h=r(t,["toolConfig"]);e!==void 0&&h!=null&&u(e,["toolConfig"],BE(h));const v=r(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),i}function HE(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["model"],ly(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],zE(s,i)),i}function FE(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],Tn(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function YE(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],Tn(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function JE(t,e){const i={},l=r(t,["ttl"]);e!==void 0&&l!=null&&u(e,["ttl"],l);const s=r(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),i}function KE(t,e){const i={},l=r(e,["name"]);l!=null&&u(i,["_url","name"],Tn(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],JE(s,i)),i}function ZE(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),i}function $E(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],ZE(i,e)),e}function os(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["model"]);s!=null&&u(e,["model"],s);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const p=r(t,["expireTime"]);p!=null&&u(e,["expireTime"],p);const y=r(t,["usageMetadata"]);return y!=null&&u(e,["usageMetadata"],y),e}function XE(){return{}}function QE(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["cachedContents"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>os(f))),u(e,["cachedContents"],s)}return e}function ls(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["model"]);s!=null&&u(e,["model"],s);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const p=r(t,["expireTime"]);p!=null&&u(e,["expireTime"],p);const y=r(t,["usageMetadata"]);return y!=null&&u(e,["usageMetadata"],y),e}function jE(){return{}}function WE(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["cachedContents"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>ls(f))),u(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eC extends xi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Pl(vi.PAGED_ITEM_CACHED_CONTENTS,l=>this.listInternal(l),await this.listInternal(i),i)}async create(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=HE(this.apiClient,e);return p=re("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>ls(v))}else{const h=gE(this.apiClient,e);return p=re("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>os(v))}}async get(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=FE(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>ls(v))}else{const h=yE(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>os(v))}}async delete(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=YE(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(()=>{const v=jE(),S=new $h;return Object.assign(S,v),S})}else{const h=vE(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(()=>{const v=XE(),S=new $h;return Object.assign(S,v),S})}}async update(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=KE(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>ls(v))}else{const h=TE(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>os(v))}}async listInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=$E(e);return p=re("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=WE(v),E=new Xh;return Object.assign(E,S),E})}else{const h=_E(e);return p=re("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=QE(v),E=new Xh;return Object.assign(E,S),E})}}}function og(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],l=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&l>=t.length&&(t=void 0),{value:t&&t[l++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(t){return this instanceof He?(this.v=t,this):new He(t)}function co(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=i.apply(t,e||[]),s,f=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",m),s[Symbol.asyncIterator]=function(){return this},s;function m(A){return function(M){return Promise.resolve(M).then(A,S)}}function p(A,M){l[A]&&(s[A]=function(k){return new Promise(function(L,H){f.push([A,k,L,H])>1||y(A,k)})},M&&(s[A]=M(s[A])))}function y(A,M){try{h(l[A](M))}catch(k){E(f[0][3],k)}}function h(A){A.value instanceof He?Promise.resolve(A.value.v).then(v,S):E(f[0][2],A)}function v(A){y("next",A)}function S(A){y("throw",A)}function E(A,M){A(M),f.shift(),f.length&&y(f[0][0],f[0][1])}}function Ul(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof og=="function"?og(t):t[Symbol.iterator](),i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i);function l(f){i[f]=t[f]&&function(m){return new Promise(function(p,y){m=t[f](m),s(p,y,m.done,m.value)})}}function s(f,m,p,y){Promise.resolve(y).then(function(h){f({value:h,done:p})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Sy(i)}function Sy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function nC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lg(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let l=0;for(;l<i;)if(t[l].role==="user")e.push(t[l]),l++;else{const s=[];let f=!0;for(;l<i&&t[l].role==="model";)s.push(t[l]),f&&!Sy(t[l])&&(f=!1),l++;f?e.push(...s):e.pop()}return e}class iC{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new oC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class oC{constructor(e,i,l,s={},f=[]){this.apiClient=e,this.modelsModule=i,this.model=l,this.config=s,this.history=f,this.sendPromise=Promise.resolve(),nC(f)}async sendMessage(e){var i;await this.sendPromise;const l=mt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(l),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var f,m,p;const y=await s,h=(m=(f=y.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content,v=y.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let E=[];v!=null&&(E=(p=v.slice(S))!==null&&p!==void 0?p:[]);const A=h?[h]:[];this.recordHistory(l,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var i;await this.sendPromise;const l=mt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(l),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const f=await s;return this.processStreamResponse(f,l)}getHistory(e=!1){const i=e?lg(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var l,s;return co(this,arguments,function*(){var m,p,y,h;const v=[];try{for(var S=!0,E=Ul(e),A;A=yield He(E.next()),m=A.done,!m;S=!0){h=A.value,S=!1;const M=h;if(tC(M)){const k=(s=(l=M.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content;k!==void 0&&v.push(k)}yield yield He(M)}}catch(M){p={error:M}}finally{try{!S&&!m&&(y=E.return)&&(yield He(y.call(E)))}finally{if(p)throw p.error}}this.recordHistory(i,v)})}recordHistory(e,i,l){let s=[];i.length>0&&i.every(f=>f.role!==void 0)?s=i:s.push({role:"model",parts:[]}),l&&l.length>0?this.history.push(...lg(l)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ss.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lC(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),i}function aC(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],lC(i,e)),e}function sC(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const l=r(t,["message"]);l!=null&&u(e,["message"],l);const s=r(t,["code"]);return s!=null&&u(e,["code"],s),e}function rC(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["mimeType"]);s!=null&&u(e,["mimeType"],s);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const p=r(t,["expirationTime"]);p!=null&&u(e,["expirationTime"],p);const y=r(t,["updateTime"]);y!=null&&u(e,["updateTime"],y);const h=r(t,["sha256Hash"]);h!=null&&u(e,["sha256Hash"],h);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const S=r(t,["downloadUri"]);S!=null&&u(e,["downloadUri"],S);const E=r(t,["state"]);E!=null&&u(e,["state"],E);const A=r(t,["source"]);A!=null&&u(e,["source"],A);const M=r(t,["videoMetadata"]);M!=null&&u(e,["videoMetadata"],M);const k=r(t,["error"]);return k!=null&&u(e,["error"],sC(k)),e}function uC(t){const e={},i=r(t,["file"]);i!=null&&u(e,["file"],rC(i));const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function cC(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","file"],dy(i));const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function fC(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","file"],dy(i));const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function dC(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const l=r(t,["message"]);l!=null&&u(e,["message"],l);const s=r(t,["code"]);return s!=null&&u(e,["code"],s),e}function hc(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["mimeType"]);s!=null&&u(e,["mimeType"],s);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const p=r(t,["expirationTime"]);p!=null&&u(e,["expirationTime"],p);const y=r(t,["updateTime"]);y!=null&&u(e,["updateTime"],y);const h=r(t,["sha256Hash"]);h!=null&&u(e,["sha256Hash"],h);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const S=r(t,["downloadUri"]);S!=null&&u(e,["downloadUri"],S);const E=r(t,["state"]);E!=null&&u(e,["state"],E);const A=r(t,["source"]);A!=null&&u(e,["source"],A);const M=r(t,["videoMetadata"]);M!=null&&u(e,["videoMetadata"],M);const k=r(t,["error"]);return k!=null&&u(e,["error"],dC(k)),e}function mC(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["files"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>hc(f))),u(e,["files"],s)}return e}function pC(){return{}}function hC(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gC extends xi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Pl(vi.PAGED_ITEM_FILES,l=>this.listInternal(l),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>hc(i))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aC(e);return f=re("files",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>{const h=mC(y),v=new RS;return Object.assign(v,h),v})}}async createInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uC(e);return f=re("upload/v1beta/files",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(()=>{const y=pC(),h=new wS;return Object.assign(h,y),h})}}async get(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=cC(e);return f=re("files/{file}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>hc(y))}}async delete(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=fC(e);return f=re("files/{file}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(()=>{const y=hC(),h=new DS;return Object.assign(h,y),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yC(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function vC(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function _y(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],yC(i)),e}function xC(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],vC(i)),e}function TC(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const l=r(t,["voiceConfig"]);return l!=null&&u(e,["voiceConfig"],_y(l)),e}function SC(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>TC(s))),u(e,["speakerVoiceConfigs"],l)}return e}function _C(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],_y(i));const l=r(t,["multiSpeakerVoiceConfig"]);l!=null&&u(e,["multiSpeakerVoiceConfig"],SC(l));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function EC(t){const e={},i=r(t,["voiceConfig"]);if(i!=null&&u(e,["voiceConfig"],xC(i)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function CC(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function AC(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function bC(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function NC(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["data"]);l!=null&&u(e,["data"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function MC(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function RC(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function wC(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],CC(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],bC(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],MC(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function DC(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],AC(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],NC(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],RC(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function IC(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>wC(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function UC(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>DC(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function kC(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const l=r(t,["description"]);l!=null&&u(e,["description"],l);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const p=r(t,["response"]);p!=null&&u(e,["response"],p);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function LC(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=r(t,["description"]);i!=null&&u(e,["description"],i);const l=r(t,["name"]);l!=null&&u(e,["name"],l);const s=r(t,["parameters"]);s!=null&&u(e,["parameters"],s);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function VC(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function PC(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function OC(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],VC(i)),e}function qC(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],PC(i)),e}function GC(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function BC(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function zC(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],GC(i)),e}function HC(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],BC(i)),e}function FC(){return{}}function YC(t){const e={},i=r(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function JC(t){const e={},i=r(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],YC(i));const l=r(t,["authType"]);l!=null&&u(e,["authType"],l);const s=r(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const p=r(t,["oidcConfig"]);return p!=null&&u(e,["oidcConfig"],p),e}function KC(t){const e={},i=r(t,["authConfig"]);return i!=null&&u(e,["authConfig"],JC(i)),e}function ZC(){return{}}function $C(){return{}}function XC(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>kC(h))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],OC(l));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],zC(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],ZC());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const p=r(t,["computerUse"]);return p!=null&&u(e,["computerUse"],p),e}function QC(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let S=i;Array.isArray(S)&&(S=S.map(E=>LC(E))),u(e,["functionDeclarations"],S)}const l=r(t,["retrieval"]);l!=null&&u(e,["retrieval"],l);const s=r(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],qC(s));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],HC(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],FC());const p=r(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],KC(p)),r(t,["urlContext"])!=null&&u(e,["urlContext"],$C());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function jC(t){const e={},i=r(t,["handle"]);if(i!=null&&u(e,["handle"],i),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function WC(t){const e={},i=r(t,["handle"]);i!=null&&u(e,["handle"],i);const l=r(t,["transparent"]);return l!=null&&u(e,["transparent"],l),e}function ag(){return{}}function sg(){return{}}function e0(t){const e={},i=r(t,["disabled"]);i!=null&&u(e,["disabled"],i);const l=r(t,["startOfSpeechSensitivity"]);l!=null&&u(e,["startOfSpeechSensitivity"],l);const s=r(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function t0(t){const e={},i=r(t,["disabled"]);i!=null&&u(e,["disabled"],i);const l=r(t,["startOfSpeechSensitivity"]);l!=null&&u(e,["startOfSpeechSensitivity"],l);const s=r(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function n0(t){const e={},i=r(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],e0(i));const l=r(t,["activityHandling"]);l!=null&&u(e,["activityHandling"],l);const s=r(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function i0(t){const e={},i=r(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],t0(i));const l=r(t,["activityHandling"]);l!=null&&u(e,["activityHandling"],l);const s=r(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function o0(t){const e={},i=r(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function l0(t){const e={},i=r(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function a0(t){const e={},i=r(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const l=r(t,["slidingWindow"]);return l!=null&&u(e,["slidingWindow"],o0(l)),e}function s0(t){const e={},i=r(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const l=r(t,["slidingWindow"]);return l!=null&&u(e,["slidingWindow"],l0(l)),e}function r0(t){const e={},i=r(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function u0(t){const e={},i=r(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function c0(t,e){const i={},l=r(t,["generationConfig"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig"],l);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const p=r(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const y=r(t,["maxOutputTokens"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","maxOutputTokens"],y);const h=r(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const S=r(t,["speechConfig"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","speechConfig"],_C(Rc(S)));const E=r(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=r(t,["systemInstruction"]);e!==void 0&&A!=null&&u(e,["setup","systemInstruction"],IC(mt(A)));const M=r(t,["tools"]);if(e!==void 0&&M!=null){let z=Ao(M);Array.isArray(z)&&(z=z.map(W=>XC(Co(W)))),u(e,["setup","tools"],z)}const k=r(t,["sessionResumption"]);e!==void 0&&k!=null&&u(e,["setup","sessionResumption"],jC(k));const L=r(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],ag());const H=r(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&u(e,["setup","outputAudioTranscription"],ag());const Y=r(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&u(e,["setup","realtimeInputConfig"],n0(Y));const F=r(t,["contextWindowCompression"]);e!==void 0&&F!=null&&u(e,["setup","contextWindowCompression"],a0(F));const Q=r(t,["proactivity"]);return e!==void 0&&Q!=null&&u(e,["setup","proactivity"],r0(Q)),i}function f0(t,e){const i={},l=r(t,["generationConfig"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig"],l);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const p=r(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const y=r(t,["maxOutputTokens"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","maxOutputTokens"],y);const h=r(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const S=r(t,["speechConfig"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","speechConfig"],EC(Rc(S)));const E=r(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=r(t,["systemInstruction"]);e!==void 0&&A!=null&&u(e,["setup","systemInstruction"],UC(mt(A)));const M=r(t,["tools"]);if(e!==void 0&&M!=null){let z=Ao(M);Array.isArray(z)&&(z=z.map(W=>QC(Co(W)))),u(e,["setup","tools"],z)}const k=r(t,["sessionResumption"]);e!==void 0&&k!=null&&u(e,["setup","sessionResumption"],WC(k));const L=r(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],sg());const H=r(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&u(e,["setup","outputAudioTranscription"],sg());const Y=r(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&u(e,["setup","realtimeInputConfig"],i0(Y));const F=r(t,["contextWindowCompression"]);e!==void 0&&F!=null&&u(e,["setup","contextWindowCompression"],s0(F));const Q=r(t,["proactivity"]);return e!==void 0&&Q!=null&&u(e,["setup","proactivity"],u0(Q)),i}function d0(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["setup","model"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],c0(s,i)),i}function m0(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["setup","model"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],f0(s,i)),i}function p0(){return{}}function h0(){return{}}function g0(){return{}}function y0(){return{}}function v0(t){const e={},i=r(t,["media"]);i!=null&&u(e,["mediaChunks"],ay(i));const l=r(t,["audio"]);l!=null&&u(e,["audio"],ry(l));const s=r(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const f=r(t,["video"]);f!=null&&u(e,["video"],sy(f));const m=r(t,["text"]);return m!=null&&u(e,["text"],m),r(t,["activityStart"])!=null&&u(e,["activityStart"],p0()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],g0()),e}function x0(t){const e={},i=r(t,["media"]);i!=null&&u(e,["mediaChunks"],ay(i));const l=r(t,["audio"]);l!=null&&u(e,["audio"],ry(l));const s=r(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const f=r(t,["video"]);f!=null&&u(e,["video"],sy(f));const m=r(t,["text"]);return m!=null&&u(e,["text"],m),r(t,["activityStart"])!=null&&u(e,["activityStart"],h0()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],y0()),e}function Ey(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const l=r(t,["weight"]);return l!=null&&u(e,["weight"],l),e}function T0(t){const e={},i=r(t,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>Ey(s))),u(e,["weightedPrompts"],l)}return e}function Cy(t){const e={},i=r(t,["temperature"]);i!=null&&u(e,["temperature"],i);const l=r(t,["topK"]);l!=null&&u(e,["topK"],l);const s=r(t,["seed"]);s!=null&&u(e,["seed"],s);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const m=r(t,["bpm"]);m!=null&&u(e,["bpm"],m);const p=r(t,["density"]);p!=null&&u(e,["density"],p);const y=r(t,["brightness"]);y!=null&&u(e,["brightness"],y);const h=r(t,["scale"]);h!=null&&u(e,["scale"],h);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const S=r(t,["muteDrums"]);S!=null&&u(e,["muteDrums"],S);const E=r(t,["onlyBassAndDrums"]);return E!=null&&u(e,["onlyBassAndDrums"],E),e}function S0(t){const e={},i=r(t,["musicGenerationConfig"]);return i!=null&&u(e,["musicGenerationConfig"],Cy(i)),e}function Ay(t){const e={},i=r(t,["model"]);return i!=null&&u(e,["model"],i),e}function by(t){const e={},i=r(t,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>Ey(s))),u(e,["weightedPrompts"],l)}return e}function gc(t){const e={},i=r(t,["setup"]);i!=null&&u(e,["setup"],Ay(i));const l=r(t,["clientContent"]);l!=null&&u(e,["clientContent"],by(l));const s=r(t,["musicGenerationConfig"]);s!=null&&u(e,["musicGenerationConfig"],Cy(s));const f=r(t,["playbackControl"]);return f!=null&&u(e,["playbackControl"],f),e}function _0(){return{}}function E0(t){const e={},i=r(t,["sessionId"]);return i!=null&&u(e,["sessionId"],i),e}function C0(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function A0(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function b0(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function N0(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["data"]);l!=null&&u(e,["data"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function M0(t){const e={},i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function R0(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function w0(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],C0(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],b0(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],M0(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function D0(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],A0(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],N0(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],R0(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function I0(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>w0(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function U0(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>D0(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function rg(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const l=r(t,["finished"]);return l!=null&&u(e,["finished"],l),e}function ug(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const l=r(t,["finished"]);return l!=null&&u(e,["finished"],l),e}function k0(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const l=r(t,["urlRetrievalStatus"]);return l!=null&&u(e,["urlRetrievalStatus"],l),e}function L0(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>k0(s))),u(e,["urlMetadata"],l)}return e}function V0(t){const e={},i=r(t,["modelTurn"]);i!=null&&u(e,["modelTurn"],I0(i));const l=r(t,["turnComplete"]);l!=null&&u(e,["turnComplete"],l);const s=r(t,["interrupted"]);s!=null&&u(e,["interrupted"],s);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const m=r(t,["generationComplete"]);m!=null&&u(e,["generationComplete"],m);const p=r(t,["inputTranscription"]);p!=null&&u(e,["inputTranscription"],rg(p));const y=r(t,["outputTranscription"]);y!=null&&u(e,["outputTranscription"],rg(y));const h=r(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],L0(h)),e}function P0(t){const e={},i=r(t,["modelTurn"]);i!=null&&u(e,["modelTurn"],U0(i));const l=r(t,["turnComplete"]);l!=null&&u(e,["turnComplete"],l);const s=r(t,["interrupted"]);s!=null&&u(e,["interrupted"],s);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const m=r(t,["generationComplete"]);m!=null&&u(e,["generationComplete"],m);const p=r(t,["inputTranscription"]);p!=null&&u(e,["inputTranscription"],ug(p));const y=r(t,["outputTranscription"]);return y!=null&&u(e,["outputTranscription"],ug(y)),e}function O0(t){const e={},i=r(t,["id"]);i!=null&&u(e,["id"],i);const l=r(t,["args"]);l!=null&&u(e,["args"],l);const s=r(t,["name"]);return s!=null&&u(e,["name"],s),e}function q0(t){const e={},i=r(t,["args"]);i!=null&&u(e,["args"],i);const l=r(t,["name"]);return l!=null&&u(e,["name"],l),e}function G0(t){const e={},i=r(t,["functionCalls"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>O0(s))),u(e,["functionCalls"],l)}return e}function B0(t){const e={},i=r(t,["functionCalls"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>q0(s))),u(e,["functionCalls"],l)}return e}function z0(t){const e={},i=r(t,["ids"]);return i!=null&&u(e,["ids"],i),e}function H0(t){const e={},i=r(t,["ids"]);return i!=null&&u(e,["ids"],i),e}function es(t){const e={},i=r(t,["modality"]);i!=null&&u(e,["modality"],i);const l=r(t,["tokenCount"]);return l!=null&&u(e,["tokenCount"],l),e}function ts(t){const e={},i=r(t,["modality"]);i!=null&&u(e,["modality"],i);const l=r(t,["tokenCount"]);return l!=null&&u(e,["tokenCount"],l),e}function F0(t){const e={},i=r(t,["promptTokenCount"]);i!=null&&u(e,["promptTokenCount"],i);const l=r(t,["cachedContentTokenCount"]);l!=null&&u(e,["cachedContentTokenCount"],l);const s=r(t,["responseTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const m=r(t,["thoughtsTokenCount"]);m!=null&&u(e,["thoughtsTokenCount"],m);const p=r(t,["totalTokenCount"]);p!=null&&u(e,["totalTokenCount"],p);const y=r(t,["promptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(A=>es(A))),u(e,["promptTokensDetails"],E)}const h=r(t,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(A=>es(A))),u(e,["cacheTokensDetails"],E)}const v=r(t,["responseTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>es(A))),u(e,["responseTokensDetails"],E)}const S=r(t,["toolUsePromptTokensDetails"]);if(S!=null){let E=S;Array.isArray(E)&&(E=E.map(A=>es(A))),u(e,["toolUsePromptTokensDetails"],E)}return e}function Y0(t){const e={},i=r(t,["promptTokenCount"]);i!=null&&u(e,["promptTokenCount"],i);const l=r(t,["cachedContentTokenCount"]);l!=null&&u(e,["cachedContentTokenCount"],l);const s=r(t,["candidatesTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const m=r(t,["thoughtsTokenCount"]);m!=null&&u(e,["thoughtsTokenCount"],m);const p=r(t,["totalTokenCount"]);p!=null&&u(e,["totalTokenCount"],p);const y=r(t,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(M=>ts(M))),u(e,["promptTokensDetails"],A)}const h=r(t,["cacheTokensDetails"]);if(h!=null){let A=h;Array.isArray(A)&&(A=A.map(M=>ts(M))),u(e,["cacheTokensDetails"],A)}const v=r(t,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(M=>ts(M))),u(e,["responseTokensDetails"],A)}const S=r(t,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(M=>ts(M))),u(e,["toolUsePromptTokensDetails"],A)}const E=r(t,["trafficType"]);return E!=null&&u(e,["trafficType"],E),e}function J0(t){const e={},i=r(t,["timeLeft"]);return i!=null&&u(e,["timeLeft"],i),e}function K0(t){const e={},i=r(t,["timeLeft"]);return i!=null&&u(e,["timeLeft"],i),e}function Z0(t){const e={},i=r(t,["newHandle"]);i!=null&&u(e,["newHandle"],i);const l=r(t,["resumable"]);l!=null&&u(e,["resumable"],l);const s=r(t,["lastConsumedClientMessageIndex"]);return s!=null&&u(e,["lastConsumedClientMessageIndex"],s),e}function $0(t){const e={},i=r(t,["newHandle"]);i!=null&&u(e,["newHandle"],i);const l=r(t,["resumable"]);l!=null&&u(e,["resumable"],l);const s=r(t,["lastConsumedClientMessageIndex"]);return s!=null&&u(e,["lastConsumedClientMessageIndex"],s),e}function X0(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],_0());const l=r(t,["serverContent"]);l!=null&&u(e,["serverContent"],V0(l));const s=r(t,["toolCall"]);s!=null&&u(e,["toolCall"],G0(s));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],z0(f));const m=r(t,["usageMetadata"]);m!=null&&u(e,["usageMetadata"],F0(m));const p=r(t,["goAway"]);p!=null&&u(e,["goAway"],J0(p));const y=r(t,["sessionResumptionUpdate"]);return y!=null&&u(e,["sessionResumptionUpdate"],Z0(y)),e}function Q0(t){const e={},i=r(t,["setupComplete"]);i!=null&&u(e,["setupComplete"],E0(i));const l=r(t,["serverContent"]);l!=null&&u(e,["serverContent"],P0(l));const s=r(t,["toolCall"]);s!=null&&u(e,["toolCall"],B0(s));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],H0(f));const m=r(t,["usageMetadata"]);m!=null&&u(e,["usageMetadata"],Y0(m));const p=r(t,["goAway"]);p!=null&&u(e,["goAway"],K0(p));const y=r(t,["sessionResumptionUpdate"]);return y!=null&&u(e,["sessionResumptionUpdate"],$0(y)),e}function j0(){return{}}function W0(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const l=r(t,["weight"]);return l!=null&&u(e,["weight"],l),e}function eA(t){const e={},i=r(t,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>W0(s))),u(e,["weightedPrompts"],l)}return e}function tA(t){const e={},i=r(t,["temperature"]);i!=null&&u(e,["temperature"],i);const l=r(t,["topK"]);l!=null&&u(e,["topK"],l);const s=r(t,["seed"]);s!=null&&u(e,["seed"],s);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const m=r(t,["bpm"]);m!=null&&u(e,["bpm"],m);const p=r(t,["density"]);p!=null&&u(e,["density"],p);const y=r(t,["brightness"]);y!=null&&u(e,["brightness"],y);const h=r(t,["scale"]);h!=null&&u(e,["scale"],h);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const S=r(t,["muteDrums"]);S!=null&&u(e,["muteDrums"],S);const E=r(t,["onlyBassAndDrums"]);return E!=null&&u(e,["onlyBassAndDrums"],E),e}function nA(t){const e={},i=r(t,["clientContent"]);i!=null&&u(e,["clientContent"],eA(i));const l=r(t,["musicGenerationConfig"]);return l!=null&&u(e,["musicGenerationConfig"],tA(l)),e}function iA(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);l!=null&&u(e,["mimeType"],l);const s=r(t,["sourceMetadata"]);return s!=null&&u(e,["sourceMetadata"],nA(s)),e}function oA(t){const e={},i=r(t,["audioChunks"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>iA(s))),u(e,["audioChunks"],l)}return e}function lA(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const l=r(t,["filteredReason"]);return l!=null&&u(e,["filteredReason"],l),e}function aA(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],j0());const l=r(t,["serverContent"]);l!=null&&u(e,["serverContent"],oA(l));const s=r(t,["filteredPrompt"]);return s!=null&&u(e,["filteredPrompt"],lA(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function rA(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function uA(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function cA(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],sA(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],rA(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],uA(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function _s(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>cA(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function fA(t){const e={},i=r(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const l=r(t,["default"]);l!=null&&u(e,["default"],l);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const p=r(t,["format"]);p!=null&&u(e,["format"],p);const y=r(t,["items"]);y!=null&&u(e,["items"],y);const h=r(t,["maxItems"]);h!=null&&u(e,["maxItems"],h);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const S=r(t,["maxProperties"]);S!=null&&u(e,["maxProperties"],S);const E=r(t,["maximum"]);E!=null&&u(e,["maximum"],E);const A=r(t,["minItems"]);A!=null&&u(e,["minItems"],A);const M=r(t,["minLength"]);M!=null&&u(e,["minLength"],M);const k=r(t,["minProperties"]);k!=null&&u(e,["minProperties"],k);const L=r(t,["minimum"]);L!=null&&u(e,["minimum"],L);const H=r(t,["nullable"]);H!=null&&u(e,["nullable"],H);const Y=r(t,["pattern"]);Y!=null&&u(e,["pattern"],Y);const F=r(t,["properties"]);F!=null&&u(e,["properties"],F);const Q=r(t,["propertyOrdering"]);Q!=null&&u(e,["propertyOrdering"],Q);const z=r(t,["required"]);z!=null&&u(e,["required"],z);const W=r(t,["title"]);W!=null&&u(e,["title"],W);const Z=r(t,["type"]);return Z!=null&&u(e,["type"],Z),e}function dA(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(t,["category"]);i!=null&&u(e,["category"],i);const l=r(t,["threshold"]);return l!=null&&u(e,["threshold"],l),e}function mA(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const l=r(t,["description"]);l!=null&&u(e,["description"],l);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const p=r(t,["response"]);p!=null&&u(e,["response"],p);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function pA(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function hA(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],pA(i)),e}function gA(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function yA(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],gA(i)),e}function vA(){return{}}function xA(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>mA(h))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],hA(l));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],yA(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],vA());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const p=r(t,["computerUse"]);return p!=null&&u(e,["computerUse"],p),e}function TA(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["allowedFunctionNames"]);return l!=null&&u(e,["allowedFunctionNames"],l),e}function SA(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const l=r(t,["longitude"]);return l!=null&&u(e,["longitude"],l),e}function _A(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],SA(i));const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function EA(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],TA(i));const l=r(t,["retrievalConfig"]);return l!=null&&u(e,["retrievalConfig"],_A(l)),e}function CA(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Ny(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],CA(i)),e}function AA(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const l=r(t,["voiceConfig"]);return l!=null&&u(e,["voiceConfig"],Ny(l)),e}function bA(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>AA(s))),u(e,["speakerVoiceConfigs"],l)}return e}function NA(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Ny(i));const l=r(t,["multiSpeakerVoiceConfig"]);l!=null&&u(e,["multiSpeakerVoiceConfig"],bA(l));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function MA(t){const e={},i=r(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const l=r(t,["thinkingBudget"]);return l!=null&&u(e,["thinkingBudget"],l),e}function RA(t,e,i){const l={},s=r(e,["systemInstruction"]);i!==void 0&&s!=null&&u(i,["systemInstruction"],_s(mt(s)));const f=r(e,["temperature"]);f!=null&&u(l,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(l,["topP"],m);const p=r(e,["topK"]);p!=null&&u(l,["topK"],p);const y=r(e,["candidateCount"]);y!=null&&u(l,["candidateCount"],y);const h=r(e,["maxOutputTokens"]);h!=null&&u(l,["maxOutputTokens"],h);const v=r(e,["stopSequences"]);v!=null&&u(l,["stopSequences"],v);const S=r(e,["responseLogprobs"]);S!=null&&u(l,["responseLogprobs"],S);const E=r(e,["logprobs"]);E!=null&&u(l,["logprobs"],E);const A=r(e,["presencePenalty"]);A!=null&&u(l,["presencePenalty"],A);const M=r(e,["frequencyPenalty"]);M!=null&&u(l,["frequencyPenalty"],M);const k=r(e,["seed"]);k!=null&&u(l,["seed"],k);const L=r(e,["responseMimeType"]);L!=null&&u(l,["responseMimeType"],L);const H=r(e,["responseSchema"]);H!=null&&u(l,["responseSchema"],fA(Ll(H)));const Y=r(e,["responseJsonSchema"]);if(Y!=null&&u(l,["responseJsonSchema"],Y),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=r(e,["safetySettings"]);if(i!==void 0&&F!=null){let oe=F;Array.isArray(oe)&&(oe=oe.map(le=>dA(le))),u(i,["safetySettings"],oe)}const Q=r(e,["tools"]);if(i!==void 0&&Q!=null){let oe=Ao(Q);Array.isArray(oe)&&(oe=oe.map(le=>xA(Co(le)))),u(i,["tools"],oe)}const z=r(e,["toolConfig"]);if(i!==void 0&&z!=null&&u(i,["toolConfig"],EA(z)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=r(e,["cachedContent"]);i!==void 0&&W!=null&&u(i,["cachedContent"],Tn(t,W));const Z=r(e,["responseModalities"]);Z!=null&&u(l,["responseModalities"],Z);const ge=r(e,["mediaResolution"]);ge!=null&&u(l,["mediaResolution"],ge);const X=r(e,["speechConfig"]);if(X!=null&&u(l,["speechConfig"],NA(Mc(X))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ve=r(e,["thinkingConfig"]);return ve!=null&&u(l,["thinkingConfig"],MA(ve)),l}function cg(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);if(s!=null){let m=Gt(s);Array.isArray(m)&&(m=m.map(p=>_s(p))),u(i,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(i,["generationConfig"],RA(t,f,i)),i}function wA(t,e){const i={},l=r(t,["taskType"]);e!==void 0&&l!=null&&u(e,["requests[]","taskType"],l);const s=r(t,["title"]);e!==void 0&&s!=null&&u(e,["requests[]","title"],s);const f=r(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function DA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);s!=null&&u(i,["requests[]","content"],cy(t,s));const f=r(e,["config"]);f!=null&&u(i,["config"],wA(f,i));const m=r(e,["model"]);return m!==void 0&&u(i,["requests[]","model"],Le(t,m)),i}function IA(t,e){const i={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const l=r(t,["numberOfImages"]);e!==void 0&&l!=null&&u(e,["parameters","sampleCount"],l);const s=r(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const f=r(t,["guidanceScale"]);if(e!==void 0&&f!=null&&u(e,["parameters","guidanceScale"],f),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=r(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&u(e,["parameters","safetySetting"],m);const p=r(t,["personGeneration"]);e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p);const y=r(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&u(e,["parameters","includeSafetyAttributes"],y);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);const v=r(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const S=r(t,["outputMimeType"]);e!==void 0&&S!=null&&u(e,["parameters","outputOptions","mimeType"],S);const E=r(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&u(e,["parameters","outputOptions","compressionQuality"],E),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function UA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["prompt"]);s!=null&&u(i,["instances[0]","prompt"],s);const f=r(e,["config"]);return f!=null&&u(i,["config"],IA(f,i)),i}function kA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","name"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function LA(t,e,i){const l={},s=r(e,["pageSize"]);i!==void 0&&s!=null&&u(i,["_query","pageSize"],s);const f=r(e,["pageToken"]);i!==void 0&&f!=null&&u(i,["_query","pageToken"],f);const m=r(e,["filter"]);i!==void 0&&m!=null&&u(i,["_query","filter"],m);const p=r(e,["queryBase"]);return i!==void 0&&p!=null&&u(i,["_url","models_url"],my(t,p)),l}function VA(t,e){const i={},l=r(e,["config"]);return l!=null&&u(i,["config"],LA(t,l,i)),i}function PA(t,e){const i={},l=r(t,["displayName"]);e!==void 0&&l!=null&&u(e,["displayName"],l);const s=r(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),i}function OA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","name"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],PA(s,i)),i}function qA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","name"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function GA(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function BA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);if(s!=null){let m=Gt(s);Array.isArray(m)&&(m=m.map(p=>_s(p))),u(i,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(i,["config"],GA(f)),i}function zA(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=r(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],Sn(i));const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function HA(t,e){const i={},l=r(t,["numberOfVideos"]);if(e!==void 0&&l!=null&&u(e,["parameters","sampleCount"],l),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=r(t,["durationSeconds"]);if(e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=r(t,["aspectRatio"]);if(e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f),r(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const m=r(t,["personGeneration"]);if(e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=r(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const y=r(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&u(e,["parameters","enhancePrompt"],y),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function FA(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["prompt"]);s!=null&&u(i,["instances[0]","prompt"],s);const f=r(e,["image"]);if(f!=null&&u(i,["instances[0]","image"],zA(f)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const m=r(e,["config"]);return m!=null&&u(i,["config"],HA(m,i)),i}function YA(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function JA(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["data"]);l!=null&&u(e,["data"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function KA(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function ZA(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],YA(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],JA(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],KA(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function No(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>ZA(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function $A(t){const e={},i=r(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const l=r(t,["default"]);l!=null&&u(e,["default"],l);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const p=r(t,["format"]);p!=null&&u(e,["format"],p);const y=r(t,["items"]);y!=null&&u(e,["items"],y);const h=r(t,["maxItems"]);h!=null&&u(e,["maxItems"],h);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const S=r(t,["maxProperties"]);S!=null&&u(e,["maxProperties"],S);const E=r(t,["maximum"]);E!=null&&u(e,["maximum"],E);const A=r(t,["minItems"]);A!=null&&u(e,["minItems"],A);const M=r(t,["minLength"]);M!=null&&u(e,["minLength"],M);const k=r(t,["minProperties"]);k!=null&&u(e,["minProperties"],k);const L=r(t,["minimum"]);L!=null&&u(e,["minimum"],L);const H=r(t,["nullable"]);H!=null&&u(e,["nullable"],H);const Y=r(t,["pattern"]);Y!=null&&u(e,["pattern"],Y);const F=r(t,["properties"]);F!=null&&u(e,["properties"],F);const Q=r(t,["propertyOrdering"]);Q!=null&&u(e,["propertyOrdering"],Q);const z=r(t,["required"]);z!=null&&u(e,["required"],z);const W=r(t,["title"]);W!=null&&u(e,["title"],W);const Z=r(t,["type"]);return Z!=null&&u(e,["type"],Z),e}function XA(t){const e={},i=r(t,["featureSelectionPreference"]);return i!=null&&u(e,["featureSelectionPreference"],i),e}function QA(t){const e={},i=r(t,["method"]);i!=null&&u(e,["method"],i);const l=r(t,["category"]);l!=null&&u(e,["category"],l);const s=r(t,["threshold"]);return s!=null&&u(e,["threshold"],s),e}function jA(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=r(t,["description"]);i!=null&&u(e,["description"],i);const l=r(t,["name"]);l!=null&&u(e,["name"],l);const s=r(t,["parameters"]);s!=null&&u(e,["parameters"],s);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function WA(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function eb(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],WA(i)),e}function tb(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function nb(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],tb(i)),e}function ib(){return{}}function ob(t){const e={},i=r(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function lb(t){const e={},i=r(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],ob(i));const l=r(t,["authType"]);l!=null&&u(e,["authType"],l);const s=r(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const p=r(t,["oidcConfig"]);return p!=null&&u(e,["oidcConfig"],p),e}function ab(t){const e={},i=r(t,["authConfig"]);return i!=null&&u(e,["authConfig"],lb(i)),e}function sb(){return{}}function My(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let S=i;Array.isArray(S)&&(S=S.map(E=>jA(E))),u(e,["functionDeclarations"],S)}const l=r(t,["retrieval"]);l!=null&&u(e,["retrieval"],l);const s=r(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],eb(s));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],nb(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],ib());const p=r(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],ab(p)),r(t,["urlContext"])!=null&&u(e,["urlContext"],sb());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function rb(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["allowedFunctionNames"]);return l!=null&&u(e,["allowedFunctionNames"],l),e}function ub(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const l=r(t,["longitude"]);return l!=null&&u(e,["longitude"],l),e}function cb(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],ub(i));const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function fb(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],rb(i));const l=r(t,["retrievalConfig"]);return l!=null&&u(e,["retrievalConfig"],cb(l)),e}function db(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function mb(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],db(i)),e}function pb(t){const e={},i=r(t,["voiceConfig"]);if(i!=null&&u(e,["voiceConfig"],mb(i)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const l=r(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function hb(t){const e={},i=r(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const l=r(t,["thinkingBudget"]);return l!=null&&u(e,["thinkingBudget"],l),e}function gb(t,e,i){const l={},s=r(e,["systemInstruction"]);i!==void 0&&s!=null&&u(i,["systemInstruction"],No(mt(s)));const f=r(e,["temperature"]);f!=null&&u(l,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(l,["topP"],m);const p=r(e,["topK"]);p!=null&&u(l,["topK"],p);const y=r(e,["candidateCount"]);y!=null&&u(l,["candidateCount"],y);const h=r(e,["maxOutputTokens"]);h!=null&&u(l,["maxOutputTokens"],h);const v=r(e,["stopSequences"]);v!=null&&u(l,["stopSequences"],v);const S=r(e,["responseLogprobs"]);S!=null&&u(l,["responseLogprobs"],S);const E=r(e,["logprobs"]);E!=null&&u(l,["logprobs"],E);const A=r(e,["presencePenalty"]);A!=null&&u(l,["presencePenalty"],A);const M=r(e,["frequencyPenalty"]);M!=null&&u(l,["frequencyPenalty"],M);const k=r(e,["seed"]);k!=null&&u(l,["seed"],k);const L=r(e,["responseMimeType"]);L!=null&&u(l,["responseMimeType"],L);const H=r(e,["responseSchema"]);H!=null&&u(l,["responseSchema"],$A(Ll(H)));const Y=r(e,["responseJsonSchema"]);Y!=null&&u(l,["responseJsonSchema"],Y);const F=r(e,["routingConfig"]);F!=null&&u(l,["routingConfig"],F);const Q=r(e,["modelSelectionConfig"]);Q!=null&&u(l,["modelConfig"],XA(Q));const z=r(e,["safetySettings"]);if(i!==void 0&&z!=null){let Ee=z;Array.isArray(Ee)&&(Ee=Ee.map(P=>QA(P))),u(i,["safetySettings"],Ee)}const W=r(e,["tools"]);if(i!==void 0&&W!=null){let Ee=Ao(W);Array.isArray(Ee)&&(Ee=Ee.map(P=>My(Co(P)))),u(i,["tools"],Ee)}const Z=r(e,["toolConfig"]);i!==void 0&&Z!=null&&u(i,["toolConfig"],fb(Z));const ge=r(e,["labels"]);i!==void 0&&ge!=null&&u(i,["labels"],ge);const X=r(e,["cachedContent"]);i!==void 0&&X!=null&&u(i,["cachedContent"],Tn(t,X));const ve=r(e,["responseModalities"]);ve!=null&&u(l,["responseModalities"],ve);const oe=r(e,["mediaResolution"]);oe!=null&&u(l,["mediaResolution"],oe);const le=r(e,["speechConfig"]);le!=null&&u(l,["speechConfig"],pb(Mc(le)));const Ye=r(e,["audioTimestamp"]);Ye!=null&&u(l,["audioTimestamp"],Ye);const Ge=r(e,["thinkingConfig"]);return Ge!=null&&u(l,["thinkingConfig"],hb(Ge)),l}function fg(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);if(s!=null){let m=Gt(s);Array.isArray(m)&&(m=m.map(p=>No(p))),u(i,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(i,["generationConfig"],gb(t,f,i)),i}function yb(t,e){const i={},l=r(t,["taskType"]);e!==void 0&&l!=null&&u(e,["instances[]","task_type"],l);const s=r(t,["title"]);e!==void 0&&s!=null&&u(e,["instances[]","title"],s);const f=r(t,["outputDimensionality"]);e!==void 0&&f!=null&&u(e,["parameters","outputDimensionality"],f);const m=r(t,["mimeType"]);e!==void 0&&m!=null&&u(e,["instances[]","mimeType"],m);const p=r(t,["autoTruncate"]);return e!==void 0&&p!=null&&u(e,["parameters","autoTruncate"],p),i}function vb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);s!=null&&u(i,["instances[]","content"],cy(t,s));const f=r(e,["config"]);return f!=null&&u(i,["config"],yb(f,i)),i}function xb(t,e){const i={},l=r(t,["outputGcsUri"]);e!==void 0&&l!=null&&u(e,["parameters","storageUri"],l);const s=r(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const m=r(t,["aspectRatio"]);e!==void 0&&m!=null&&u(e,["parameters","aspectRatio"],m);const p=r(t,["guidanceScale"]);e!==void 0&&p!=null&&u(e,["parameters","guidanceScale"],p);const y=r(t,["seed"]);e!==void 0&&y!=null&&u(e,["parameters","seed"],y);const h=r(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const S=r(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&u(e,["parameters","includeSafetyAttributes"],S);const E=r(t,["includeRaiReason"]);e!==void 0&&E!=null&&u(e,["parameters","includeRaiReason"],E);const A=r(t,["language"]);e!==void 0&&A!=null&&u(e,["parameters","language"],A);const M=r(t,["outputMimeType"]);e!==void 0&&M!=null&&u(e,["parameters","outputOptions","mimeType"],M);const k=r(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&u(e,["parameters","outputOptions","compressionQuality"],k);const L=r(t,["addWatermark"]);e!==void 0&&L!=null&&u(e,["parameters","addWatermark"],L);const H=r(t,["enhancePrompt"]);return e!==void 0&&H!=null&&u(e,["parameters","enhancePrompt"],H),i}function Tb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["prompt"]);s!=null&&u(i,["instances[0]","prompt"],s);const f=r(e,["config"]);return f!=null&&u(i,["config"],xb(f,i)),i}function Es(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["gcsUri"],i);const l=r(t,["imageBytes"]);l!=null&&u(e,["bytesBase64Encoded"],Sn(l));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function Sb(t){const e={},i=r(t,["maskMode"]);i!=null&&u(e,["maskMode"],i);const l=r(t,["segmentationClasses"]);l!=null&&u(e,["maskClasses"],l);const s=r(t,["maskDilation"]);return s!=null&&u(e,["dilation"],s),e}function _b(t){const e={},i=r(t,["controlType"]);i!=null&&u(e,["controlType"],i);const l=r(t,["enableControlImageComputation"]);return l!=null&&u(e,["computeControl"],l),e}function Eb(t){const e={},i=r(t,["styleDescription"]);return i!=null&&u(e,["styleDescription"],i),e}function Cb(t){const e={},i=r(t,["subjectType"]);i!=null&&u(e,["subjectType"],i);const l=r(t,["subjectDescription"]);return l!=null&&u(e,["subjectDescription"],l),e}function Ab(t){const e={},i=r(t,["referenceImage"]);i!=null&&u(e,["referenceImage"],Es(i));const l=r(t,["referenceId"]);l!=null&&u(e,["referenceId"],l);const s=r(t,["referenceType"]);s!=null&&u(e,["referenceType"],s);const f=r(t,["maskImageConfig"]);f!=null&&u(e,["maskImageConfig"],Sb(f));const m=r(t,["controlImageConfig"]);m!=null&&u(e,["controlImageConfig"],_b(m));const p=r(t,["styleImageConfig"]);p!=null&&u(e,["styleImageConfig"],Eb(p));const y=r(t,["subjectImageConfig"]);return y!=null&&u(e,["subjectImageConfig"],Cb(y)),e}function bb(t,e){const i={},l=r(t,["outputGcsUri"]);e!==void 0&&l!=null&&u(e,["parameters","storageUri"],l);const s=r(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const m=r(t,["aspectRatio"]);e!==void 0&&m!=null&&u(e,["parameters","aspectRatio"],m);const p=r(t,["guidanceScale"]);e!==void 0&&p!=null&&u(e,["parameters","guidanceScale"],p);const y=r(t,["seed"]);e!==void 0&&y!=null&&u(e,["parameters","seed"],y);const h=r(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const S=r(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&u(e,["parameters","includeSafetyAttributes"],S);const E=r(t,["includeRaiReason"]);e!==void 0&&E!=null&&u(e,["parameters","includeRaiReason"],E);const A=r(t,["language"]);e!==void 0&&A!=null&&u(e,["parameters","language"],A);const M=r(t,["outputMimeType"]);e!==void 0&&M!=null&&u(e,["parameters","outputOptions","mimeType"],M);const k=r(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&u(e,["parameters","outputOptions","compressionQuality"],k);const L=r(t,["editMode"]);e!==void 0&&L!=null&&u(e,["parameters","editMode"],L);const H=r(t,["baseSteps"]);return e!==void 0&&H!=null&&u(e,["parameters","editConfig","baseSteps"],H),i}function Nb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["prompt"]);s!=null&&u(i,["instances[0]","prompt"],s);const f=r(e,["referenceImages"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(y=>Ab(y))),u(i,["instances[0]","referenceImages"],p)}const m=r(e,["config"]);return m!=null&&u(i,["config"],bb(m,i)),i}function Mb(t,e){const i={},l=r(t,["includeRaiReason"]);e!==void 0&&l!=null&&u(e,["parameters","includeRaiReason"],l);const s=r(t,["outputMimeType"]);e!==void 0&&s!=null&&u(e,["parameters","outputOptions","mimeType"],s);const f=r(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","compressionQuality"],f);const m=r(t,["enhanceInputImage"]);e!==void 0&&m!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],m);const p=r(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const y=r(t,["numberOfImages"]);e!==void 0&&y!=null&&u(e,["parameters","sampleCount"],y);const h=r(t,["mode"]);return e!==void 0&&h!=null&&u(e,["parameters","mode"],h),i}function Rb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["image"]);s!=null&&u(i,["instances[0]","image"],Es(s));const f=r(e,["upscaleFactor"]);f!=null&&u(i,["parameters","upscaleConfig","upscaleFactor"],f);const m=r(e,["config"]);return m!=null&&u(i,["config"],Mb(m,i)),i}function wb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","name"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function Db(t,e,i){const l={},s=r(e,["pageSize"]);i!==void 0&&s!=null&&u(i,["_query","pageSize"],s);const f=r(e,["pageToken"]);i!==void 0&&f!=null&&u(i,["_query","pageToken"],f);const m=r(e,["filter"]);i!==void 0&&m!=null&&u(i,["_query","filter"],m);const p=r(e,["queryBase"]);return i!==void 0&&p!=null&&u(i,["_url","models_url"],my(t,p)),l}function Ib(t,e){const i={},l=r(e,["config"]);return l!=null&&u(i,["config"],Db(t,l,i)),i}function Ub(t,e){const i={},l=r(t,["displayName"]);e!==void 0&&l!=null&&u(e,["displayName"],l);const s=r(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),i}function kb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],Ub(s,i)),i}function Lb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","name"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],s),i}function Vb(t,e){const i={},l=r(t,["systemInstruction"]);e!==void 0&&l!=null&&u(e,["systemInstruction"],No(mt(l)));const s=r(t,["tools"]);if(e!==void 0&&s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>My(p))),u(e,["tools"],m)}const f=r(t,["generationConfig"]);return e!==void 0&&f!=null&&u(e,["generationConfig"],f),i}function Pb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);if(s!=null){let m=Gt(s);Array.isArray(m)&&(m=m.map(p=>No(p))),u(i,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(i,["config"],Vb(f,i)),i}function Ob(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["contents"]);if(s!=null){let m=Gt(s);Array.isArray(m)&&(m=m.map(p=>No(p))),u(i,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(i,["config"],f),i}function qb(t){const e={},i=r(t,["uri"]);i!=null&&u(e,["gcsUri"],i);const l=r(t,["videoBytes"]);l!=null&&u(e,["bytesBase64Encoded"],Sn(l));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function Gb(t,e){const i={},l=r(t,["numberOfVideos"]);e!==void 0&&l!=null&&u(e,["parameters","sampleCount"],l);const s=r(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const f=r(t,["fps"]);e!==void 0&&f!=null&&u(e,["parameters","fps"],f);const m=r(t,["durationSeconds"]);e!==void 0&&m!=null&&u(e,["parameters","durationSeconds"],m);const p=r(t,["seed"]);e!==void 0&&p!=null&&u(e,["parameters","seed"],p);const y=r(t,["aspectRatio"]);e!==void 0&&y!=null&&u(e,["parameters","aspectRatio"],y);const h=r(t,["resolution"]);e!==void 0&&h!=null&&u(e,["parameters","resolution"],h);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const S=r(t,["pubsubTopic"]);e!==void 0&&S!=null&&u(e,["parameters","pubsubTopic"],S);const E=r(t,["negativePrompt"]);e!==void 0&&E!=null&&u(e,["parameters","negativePrompt"],E);const A=r(t,["enhancePrompt"]);e!==void 0&&A!=null&&u(e,["parameters","enhancePrompt"],A);const M=r(t,["generateAudio"]);e!==void 0&&M!=null&&u(e,["parameters","generateAudio"],M);const k=r(t,["lastFrame"]);e!==void 0&&k!=null&&u(e,["instances[0]","lastFrame"],Es(k));const L=r(t,["compressionQuality"]);return e!==void 0&&L!=null&&u(e,["parameters","compressionQuality"],L),i}function Bb(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["_url","model"],Le(t,l));const s=r(e,["prompt"]);s!=null&&u(i,["instances[0]","prompt"],s);const f=r(e,["image"]);f!=null&&u(i,["instances[0]","image"],Es(f));const m=r(e,["video"]);m!=null&&u(i,["instances[0]","video"],qb(m));const p=r(e,["config"]);return p!=null&&u(i,["config"],Gb(p,i)),i}function zb(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function Hb(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Fb(t){const e={},i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Yb(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],zb(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],Hb(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],Fb(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function Jb(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>Yb(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function Kb(t){const e={},i=r(t,["citationSources"]);return i!=null&&u(e,["citations"],i),e}function Zb(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const l=r(t,["urlRetrievalStatus"]);return l!=null&&u(e,["urlRetrievalStatus"],l),e}function $b(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>Zb(s))),u(e,["urlMetadata"],l)}return e}function Xb(t){const e={},i=r(t,["content"]);i!=null&&u(e,["content"],Jb(i));const l=r(t,["citationMetadata"]);l!=null&&u(e,["citationMetadata"],Kb(l));const s=r(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],$b(m));const p=r(t,["avgLogprobs"]);p!=null&&u(e,["avgLogprobs"],p);const y=r(t,["groundingMetadata"]);y!=null&&u(e,["groundingMetadata"],y);const h=r(t,["index"]);h!=null&&u(e,["index"],h);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const S=r(t,["safetyRatings"]);return S!=null&&u(e,["safetyRatings"],S),e}function dg(t){const e={},i=r(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>Xb(p))),u(e,["candidates"],m)}const l=r(t,["modelVersion"]);l!=null&&u(e,["modelVersion"],l);const s=r(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const f=r(t,["usageMetadata"]);return f!=null&&u(e,["usageMetadata"],f),e}function Qb(t){const e={},i=r(t,["values"]);return i!=null&&u(e,["values"],i),e}function jb(){return{}}function Wb(t){const e={},i=r(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>Qb(f))),u(e,["embeddings"],s)}return r(t,["metadata"])!=null&&u(e,["metadata"],jb()),e}function eN(t){const e={},i=r(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],Sn(i));const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Ry(t){const e={},i=r(t,["safetyAttributes","categories"]);i!=null&&u(e,["categories"],i);const l=r(t,["safetyAttributes","scores"]);l!=null&&u(e,["scores"],l);const s=r(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function tN(t){const e={},i=r(t,["_self"]);i!=null&&u(e,["image"],eN(i));const l=r(t,["raiFilteredReason"]);l!=null&&u(e,["raiFilteredReason"],l);const s=r(t,["_self"]);return s!=null&&u(e,["safetyAttributes"],Ry(s)),e}function nN(t){const e={},i=r(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>tN(f))),u(e,["generatedImages"],s)}const l=r(t,["positivePromptSafetyAttributes"]);return l!=null&&u(e,["positivePromptSafetyAttributes"],Ry(l)),e}function iN(t){const e={},i=r(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const l=r(t,["createTime"]);l!=null&&u(e,["createTime"],l);const s=r(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function yc(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["version"]);f!=null&&u(e,["version"],f);const m=r(t,["_self"]);m!=null&&u(e,["tunedModelInfo"],iN(m));const p=r(t,["inputTokenLimit"]);p!=null&&u(e,["inputTokenLimit"],p);const y=r(t,["outputTokenLimit"]);y!=null&&u(e,["outputTokenLimit"],y);const h=r(t,["supportedGenerationMethods"]);return h!=null&&u(e,["supportedActions"],h),e}function oN(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["_self"]);if(l!=null){let s=py(l);Array.isArray(s)&&(s=s.map(f=>yc(f))),u(e,["models"],s)}return e}function lN(){return{}}function aN(t){const e={},i=r(t,["totalTokens"]);i!=null&&u(e,["totalTokens"],i);const l=r(t,["cachedContentTokenCount"]);return l!=null&&u(e,["cachedContentTokenCount"],l),e}function sN(t){const e={},i=r(t,["video","uri"]);i!=null&&u(e,["uri"],i);const l=r(t,["video","encodedVideo"]);l!=null&&u(e,["videoBytes"],Sn(l));const s=r(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function rN(t){const e={},i=r(t,["_self"]);return i!=null&&u(e,["video"],sN(i)),e}function uN(t){const e={},i=r(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>rN(m))),u(e,["generatedVideos"],f)}const l=r(t,["raiMediaFilteredCount"]);l!=null&&u(e,["raiMediaFilteredCount"],l);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function cN(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["metadata"]);l!=null&&u(e,["metadata"],l);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response","generateVideoResponse"]);return m!=null&&u(e,["response"],uN(m)),e}function fN(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function dN(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["data"]);l!=null&&u(e,["data"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function mN(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function pN(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],fN(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],dN(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],mN(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function hN(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>pN(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function gN(t){const e={},i=r(t,["citations"]);return i!=null&&u(e,["citations"],i),e}function yN(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const l=r(t,["urlRetrievalStatus"]);return l!=null&&u(e,["urlRetrievalStatus"],l),e}function vN(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>yN(s))),u(e,["urlMetadata"],l)}return e}function xN(t){const e={},i=r(t,["content"]);i!=null&&u(e,["content"],hN(i));const l=r(t,["citationMetadata"]);l!=null&&u(e,["citationMetadata"],gN(l));const s=r(t,["finishMessage"]);s!=null&&u(e,["finishMessage"],s);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],vN(m));const p=r(t,["avgLogprobs"]);p!=null&&u(e,["avgLogprobs"],p);const y=r(t,["groundingMetadata"]);y!=null&&u(e,["groundingMetadata"],y);const h=r(t,["index"]);h!=null&&u(e,["index"],h);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const S=r(t,["safetyRatings"]);return S!=null&&u(e,["safetyRatings"],S),e}function mg(t){const e={},i=r(t,["candidates"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>xN(h))),u(e,["candidates"],y)}const l=r(t,["createTime"]);l!=null&&u(e,["createTime"],l);const s=r(t,["responseId"]);s!=null&&u(e,["responseId"],s);const f=r(t,["modelVersion"]);f!=null&&u(e,["modelVersion"],f);const m=r(t,["promptFeedback"]);m!=null&&u(e,["promptFeedback"],m);const p=r(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function TN(t){const e={},i=r(t,["truncated"]);i!=null&&u(e,["truncated"],i);const l=r(t,["token_count"]);return l!=null&&u(e,["tokenCount"],l),e}function SN(t){const e={},i=r(t,["values"]);i!=null&&u(e,["values"],i);const l=r(t,["statistics"]);return l!=null&&u(e,["statistics"],TN(l)),e}function _N(t){const e={},i=r(t,["billableCharacterCount"]);return i!=null&&u(e,["billableCharacterCount"],i),e}function EN(t){const e={},i=r(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>SN(f))),u(e,["embeddings"],s)}const l=r(t,["metadata"]);return l!=null&&u(e,["metadata"],_N(l)),e}function CN(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["gcsUri"],i);const l=r(t,["bytesBase64Encoded"]);l!=null&&u(e,["imageBytes"],Sn(l));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function wy(t){const e={},i=r(t,["safetyAttributes","categories"]);i!=null&&u(e,["categories"],i);const l=r(t,["safetyAttributes","scores"]);l!=null&&u(e,["scores"],l);const s=r(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function wc(t){const e={},i=r(t,["_self"]);i!=null&&u(e,["image"],CN(i));const l=r(t,["raiFilteredReason"]);l!=null&&u(e,["raiFilteredReason"],l);const s=r(t,["_self"]);s!=null&&u(e,["safetyAttributes"],wy(s));const f=r(t,["prompt"]);return f!=null&&u(e,["enhancedPrompt"],f),e}function AN(t){const e={},i=r(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>wc(f))),u(e,["generatedImages"],s)}const l=r(t,["positivePromptSafetyAttributes"]);return l!=null&&u(e,["positivePromptSafetyAttributes"],wy(l)),e}function bN(t){const e={},i=r(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>wc(s))),u(e,["generatedImages"],l)}return e}function NN(t){const e={},i=r(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>wc(s))),u(e,["generatedImages"],l)}return e}function MN(t){const e={},i=r(t,["endpoint"]);i!=null&&u(e,["name"],i);const l=r(t,["deployedModelId"]);return l!=null&&u(e,["deployedModelId"],l),e}function RN(t){const e={},i=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&u(e,["baseModel"],i);const l=r(t,["createTime"]);l!=null&&u(e,["createTime"],l);const s=r(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function wN(t){const e={},i=r(t,["checkpointId"]);i!=null&&u(e,["checkpointId"],i);const l=r(t,["epoch"]);l!=null&&u(e,["epoch"],l);const s=r(t,["step"]);return s!=null&&u(e,["step"],s),e}function vc(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["versionId"]);f!=null&&u(e,["version"],f);const m=r(t,["deployedModels"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(E=>MN(E))),u(e,["endpoints"],S)}const p=r(t,["labels"]);p!=null&&u(e,["labels"],p);const y=r(t,["_self"]);y!=null&&u(e,["tunedModelInfo"],RN(y));const h=r(t,["defaultCheckpointId"]);h!=null&&u(e,["defaultCheckpointId"],h);const v=r(t,["checkpoints"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>wN(E))),u(e,["checkpoints"],S)}return e}function DN(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["_self"]);if(l!=null){let s=py(l);Array.isArray(s)&&(s=s.map(f=>vc(f))),u(e,["models"],s)}return e}function IN(){return{}}function UN(t){const e={},i=r(t,["totalTokens"]);return i!=null&&u(e,["totalTokens"],i),e}function kN(t){const e={},i=r(t,["tokensInfo"]);return i!=null&&u(e,["tokensInfo"],i),e}function LN(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["uri"],i);const l=r(t,["bytesBase64Encoded"]);l!=null&&u(e,["videoBytes"],Sn(l));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function VN(t){const e={},i=r(t,["_self"]);return i!=null&&u(e,["video"],LN(i)),e}function PN(t){const e={},i=r(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>VN(m))),u(e,["generatedVideos"],f)}const l=r(t,["raiMediaFilteredCount"]);l!=null&&u(e,["raiMediaFilteredCount"],l);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function ON(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["metadata"]);l!=null&&u(e,["metadata"],l);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response"]);return m!=null&&u(e,["response"],PN(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN="Content-Type",GN="X-Server-Timeout",BN="User-Agent",xc="x-goog-api-client",zN="1.8.0",HN=`google-genai-sdk/${zN}`,FN="v1beta1",YN="v1beta",pg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class JN{constructor(e){var i,l;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:FN,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:YN,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const l=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&l.push(e.apiVersion),l.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,l){const s=[this.getRequestUrlInternal(i)];return l&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,i,l);if(e.queryParams)for(const[m,p]of Object.entries(e.queryParams))s.searchParams.append(m,String(p));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.unaryApiCall(s,f,e.httpMethod)}patchHttpOptions(e,i){const l=JSON.parse(JSON.stringify(e));for(const[s,f]of Object.entries(i))typeof f=="object"?l[s]=Object.assign(Object.assign({},l[s]),f):f!==void 0&&(l[s]=f);return l}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,i,l);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.streamApiCall(s,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,l){if(i&&i.timeout||l){const s=new AbortController,f=s.signal;i.timeout&&(i==null?void 0:i.timeout)>0&&setTimeout(()=>s.abort(),i.timeout),l&&l.addEventListener("abort",()=>{s.abort()}),e.signal=f}return i&&i.extraBody!==null&&KN(e,i.extraBody),e.headers=await this.getHeadersInternal(i),e}async unaryApiCall(e,i,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:l})).then(async s=>(await hg(s),new fc(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,i,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:l})).then(async s=>(await hg(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var i;return co(this,arguments,function*(){const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),f=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let m="";for(;;){const{done:p,value:y}=yield He(s.read());if(p){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=f.decode(y);try{const S=JSON.parse(h);if("error"in S){const E=JSON.parse(JSON.stringify(S.error)),A=E.status,M=E.code,k=`got status: ${A}. ${JSON.stringify(S)}`;if(M>=400&&M<600)throw new Ss({message:k,status:M})}}catch(S){if(S.name==="ApiError")throw S}m+=h;let v=m.match(pg);for(;v;){const S=v[1];try{const E=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield He(new fc(E)),m=m.slice(v[0].length),v=m.match(pg)}catch(E){throw new Error(`exception parsing stream chunk ${S}. ${E}`)}}}}finally{s.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(l=>{throw new Error(`exception ${l} sending request`)})}getDefaultHeaders(){const e={},i=HN+" "+this.clientOptions.userAgentExtra;return e[BN]=i,e[xc]=i,e[qN]="application/json",e}async getHeadersInternal(e){const i=new Headers;if(e&&e.headers){for(const[l,s]of Object.entries(e.headers))i.append(l,s);e.timeout&&e.timeout>0&&i.append(GN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i),i}async uploadFile(e,i){var l;const s={};i!=null&&(s.mimeType=i.mimeType,s.name=i.name,s.displayName=i.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const f=this.clientOptions.uploader,m=await f.stat(e);s.sizeBytes=String(m.size);const p=(l=i==null?void 0:i.mimeType)!==null&&l!==void 0?l:m.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=p;const y=await this.fetchUploadUrl(s,i);return f.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i){var l;let s={};i!=null&&i.httpOptions?s=i.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},m=await this.request({path:re("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:s});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(l=m==null?void 0:m.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function hg(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let l;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?l=await t.json():l={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(l);throw i>=400&&i<600?new Ss({message:s,status:i}):new Error(s)}}function KN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const f=JSON.parse(t.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))i=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function l(f,m){const p=Object.assign({},f);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const h=m[y],v=p[y];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=l(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),p[y]=h)}return p}const s=l(i,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZN="mcp_used/unknown";function Dy(t){for(const e of t)if(Dc(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Iy(t){var e;const i=(e=t[xc])!==null&&e!==void 0?e:"";t[xc]=(i+` ${ZN}`).trimStart()}function $N(t){var e,i,l;return(l=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(s=>Dc(s)))!==null&&l!==void 0?l:!1}function XN(t){var e,i,l;return(l=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(s=>!Dc(s)))!==null&&l!==void 0?l:!1}function Dc(t){return t!==null&&typeof t=="object"&&t instanceof Ic}function QN(t,e=100){return co(this,arguments,function*(){let l,s=0;for(;s<e;){const f=yield He(t.listTools({cursor:l}));for(const m of f.tools)yield yield He(m),s++;if(!f.nextCursor)break;l=f.nextCursor}})}class Ic{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Ic(e,i)}async initialize(){var e,i,l,s;if(this.mcpTools.length>0)return;const f={},m=[];for(const v of this.mcpClients)try{for(var p=!0,y=(i=void 0,Ul(QN(v))),h;h=await y.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const S=s;m.push(S);const E=S.name;if(f[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);f[E]=v}}catch(S){i={error:S}}finally{try{!p&&!e&&(l=y.return)&&await l.call(y)}finally{if(i)throw i.error}}this.mcpTools=m,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),FS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const l of e)if(l.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[l.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const m=await s.callTool({name:l.name,arguments:l.args},void 0,f);i.push({functionResponse:{name:l.name,response:m.isError?{error:m}:m}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jN(t,e,i){const l=new US;let s;i.data instanceof Blob?s=JSON.parse(await i.data.text()):s=JSON.parse(i.data);const f=aA(s);Object.assign(l,f),e(l)}class WN{constructor(e,i,l){this.apiClient=e,this.auth=i,this.webSocketFactory=l}async connect(e){var i,l;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m=nM(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${s}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const v=new Promise(F=>{h=F}),S=e.callbacks,E=function(){h({})},A=this.apiClient,M={onopen:E,onmessage:F=>{jN(A,S.onmessage,F)},onerror:(i=S==null?void 0:S.onerror)!==null&&i!==void 0?i:function(F){},onclose:(l=S==null?void 0:S.onclose)!==null&&l!==void 0?l:function(F){}},k=this.webSocketFactory.create(y,tM(m),M);k.connect(),await v;const L=Le(this.apiClient,e.model),H=Ay({model:L}),Y=gc({setup:H});return k.send(JSON.stringify(Y)),new eM(k,this.apiClient)}}class eM{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=T0(e),l=by(i);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=S0(e),l=gc(i);this.conn.send(JSON.stringify(l))}sendPlaybackControl(e){const i=gc({playbackControl:e});this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(ro.PLAY)}pause(){this.sendPlaybackControl(ro.PAUSE)}stop(){this.sendPlaybackControl(ro.STOP)}resetContext(){this.sendPlaybackControl(ro.RESET_CONTEXT)}close(){this.conn.close()}}function tM(t){const e={};return t.forEach((i,l)=>{e[l]=i}),e}function nM(t){const e=new Headers;for(const[i,l]of Object.entries(t))e.append(i,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oM(t,e,i){const l=new IS;let s;i.data instanceof Blob?s=await i.data.text():i.data instanceof ArrayBuffer?s=new TextDecoder().decode(i.data):s=i.data;const f=JSON.parse(s);if(t.isVertexAI()){const m=Q0(f);Object.assign(l,m)}else{const m=X0(f);Object.assign(l,m)}e(l)}class lM{constructor(e,i,l){this.apiClient=e,this.auth=i,this.webSocketFactory=l,this.music=new WN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,l,s,f,m,p;const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const S=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Dy(e.config.tools)&&Iy(S);const E=uM(S);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E);else{const X=this.apiClient.getApiKey();let ve="BidiGenerateContent",oe="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),ve="BidiGenerateContentConstrained",oe="access_token"),v=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ve}?${oe}=${X}`}let A=()=>{};const M=new Promise(X=>{A=X}),k=e.callbacks,L=function(){var X;(X=k==null?void 0:k.onopen)===null||X===void 0||X.call(k),A({})},H=this.apiClient,Y={onopen:L,onmessage:X=>{oM(H,k.onmessage,X)},onerror:(i=k==null?void 0:k.onerror)!==null&&i!==void 0?i:function(X){},onclose:(l=k==null?void 0:k.onclose)!==null&&l!==void 0?l:function(X){}},F=this.webSocketFactory.create(v,rM(E),Y);F.connect(),await M;let Q=Le(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const X=this.apiClient.getProject(),ve=this.apiClient.getLocation();Q=`projects/${X}/locations/${ve}/`+Q}let z={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gs.AUDIO]}:e.config.responseModalities=[gs.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(p=(m=e.config)===null||m===void 0?void 0:m.tools)!==null&&p!==void 0?p:[],Z=[];for(const X of W)if(this.isCallableTool(X)){const ve=X;Z.push(await ve.tool())}else Z.push(X);Z.length>0&&(e.config.tools=Z);const ge={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=m0(this.apiClient,ge):z=d0(this.apiClient,ge),delete z.config,F.send(JSON.stringify(z)),new sM(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const aM={turnComplete:!0};class sM{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let l=[];try{l=Gt(i.turns),e.isVertexAI()?l=l.map(s=>No(s)):l=l.map(s=>_s(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:l,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let l=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?l=i.functionResponses:l=[i.functionResponses],l.length===0)throw new Error("functionResponses is required.");for(const f of l){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(iM)}return{toolResponse:{functionResponses:l}}}sendClientContent(e){e=Object.assign(Object.assign({},aM),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:x0(e)}:i={realtimeInput:v0(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function rM(t){const e={};return t.forEach((i,l)=>{e[l]=i}),e}function uM(t){const e=new Headers;for(const[i,l]of Object.entries(t))e.append(i,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gg=10;function yg(t){var e,i,l;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const m of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(as(m)){s=!0;break}if(!s)return!0;const f=(l=t==null?void 0:t.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function as(t){return"callTool"in t&&typeof t.callTool=="function"}function vg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM extends xi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var l,s,f,m,p;const y=await this.processParamsForMcpUsage(i);if(!$N(i)||yg(i.config))return await this.generateContentInternal(y);if(XN(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const S=Gt(y.contents),E=(f=(s=(l=y.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&f!==void 0?f:gg;let A=0;for(;A<E&&(h=await this.generateContentInternal(y),!(!h.functionCalls||h.functionCalls.length===0));){const M=h.candidates[0].content,k=[];for(const L of(p=(m=i.config)===null||m===void 0?void 0:m.tools)!==null&&p!==void 0?p:[])if(as(L)){const Y=await L.callTool(h.functionCalls);k.push(...Y)}A++,v={role:"user",parts:k},y.contents=Gt(y.contents),y.contents.push(M),y.contents.push(v),vg(y.config)&&(S.push(M),S.push(v))}return vg(y.config)&&(h.automaticFunctionCallingHistory=S),h},this.generateContentStream=async i=>{if(yg(i.config)){const l=await this.processParamsForMcpUsage(i);return await this.generateContentStreamInternal(l)}else return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(l=>{var s;let f;const m=[];if(l!=null&&l.generatedImages)for(const y of l.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((s=y==null?void 0:y.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?f=y==null?void 0:y.safetyAttributes:m.push(y);let p;return f?p={generatedImages:m,positivePromptSafetyAttributes:f}:p={generatedImages:m},p}),this.list=async i=>{var l;const m={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((l=m.config)===null||l===void 0)&&l.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Pl(vi.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(m),m)},this.editImage=async i=>{const l={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(l.referenceImages=i.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(l)},this.upscaleImage=async i=>{let l={numberOfImages:1,mode:"upscale"};i.config&&(l=Object.assign(Object.assign({},l),i.config));const s={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:l};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var i,l,s;const f=(i=e.config)===null||i===void 0?void 0:i.tools;if(!f)return e;const m=await Promise.all(f.map(async y=>as(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:m})};if(p.config.tools=m,e.config&&e.config.tools&&Dy(e.config.tools)){const y=(s=(l=e.config.httpOptions)===null||l===void 0?void 0:l.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Iy(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var i,l,s;const f=new Map;for(const m of(l=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&l!==void 0?l:[])if(as(m)){const p=m,y=await p.tool();for(const h of(s=y.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(f.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);f.set(h.name,p)}}return f}async processAfcStream(e){var i,l,s;const f=(s=(l=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&s!==void 0?s:gg;let m=!1,p=0;const y=await this.initAfcToolsMap(e);return function(h,v,S){var E,A;return co(this,arguments,function*(){for(var M,k,L,H;p<f;){m&&(p++,m=!1);const z=yield He(h.processParamsForMcpUsage(S)),W=yield He(h.generateContentStreamInternal(z)),Z=[],ge=[];try{for(var Y=!0,F=(k=void 0,Ul(W)),Q;Q=yield He(F.next()),M=Q.done,!M;Y=!0){H=Q.value,Y=!1;const X=H;if(yield yield He(X),X.candidates&&(!((E=X.candidates[0])===null||E===void 0)&&E.content)){ge.push(X.candidates[0].content);for(const ve of(A=X.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(p<f&&ve.functionCall){if(!ve.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ve.functionCall.name)){const oe=yield He(v.get(ve.functionCall.name).callTool([ve.functionCall]));Z.push(...oe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ve.functionCall.name}`)}}}}catch(X){k={error:X}}finally{try{!Y&&!M&&(L=F.return)&&(yield He(L.call(F)))}finally{if(k)throw k.error}}if(Z.length>0){m=!0;const X=new Rl;X.candidates=[{content:{role:"user",parts:Z}}],yield yield He(X);const ve=[];ve.push(...ge),ve.push({role:"user",parts:Z});const oe=Gt(S.contents).concat(ve);S.contents=oe}else break}})}(this,y,e)}async generateContentInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=fg(this.apiClient,e);return p=re("{model}:generateContent",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=mg(v),E=new Rl;return Object.assign(E,S),E})}else{const h=cg(this.apiClient,e);return p=re("{model}:generateContent",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=dg(v),E=new Rl;return Object.assign(E,S),E})}}async generateContentStreamInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=fg(this.apiClient,e);return p=re("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),m.then(function(S){return co(this,arguments,function*(){var E,A,M,k;try{for(var L=!0,H=Ul(S),Y;Y=yield He(H.next()),E=Y.done,!E;L=!0){k=Y.value,L=!1;const Q=mg(yield He(k.json())),z=new Rl;Object.assign(z,Q),yield yield He(z)}}catch(F){A={error:F}}finally{try{!L&&!E&&(M=H.return)&&(yield He(M.call(H)))}finally{if(A)throw A.error}}})})}else{const h=cg(this.apiClient,e);return p=re("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),m.then(function(S){return co(this,arguments,function*(){var E,A,M,k;try{for(var L=!0,H=Ul(S),Y;Y=yield He(H.next()),E=Y.done,!E;L=!0){k=Y.value,L=!1;const Q=dg(yield He(k.json())),z=new Rl;Object.assign(z,Q),yield yield He(z)}}catch(F){A={error:F}}finally{try{!L&&!E&&(M=H.return)&&(yield He(M.call(H)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=vb(this.apiClient,e);return p=re("{model}:predict",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=EN(v),E=new Hh;return Object.assign(E,S),E})}else{const h=DA(this.apiClient,e);return p=re("{model}:batchEmbedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=Wb(v),E=new Hh;return Object.assign(E,S),E})}}async generateImagesInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=Tb(this.apiClient,e);return p=re("{model}:predict",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=AN(v),E=new Fh;return Object.assign(E,S),E})}else{const h=UA(this.apiClient,e);return p=re("{model}:predict",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=nN(v),E=new Fh;return Object.assign(E,S),E})}}async editImageInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=Nb(this.apiClient,e);return f=re("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>{const h=bN(y),v=new bS;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=Rb(this.apiClient,e);return f=re("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>{const h=NN(y),v=new NS;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=wb(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>vc(v))}else{const h=kA(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>yc(v))}}async listInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=Ib(this.apiClient,e);return p=re("{models_url}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=DN(v),E=new Yh;return Object.assign(E,S),E})}else{const h=VA(this.apiClient,e);return p=re("{models_url}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=oN(v),E=new Yh;return Object.assign(E,S),E})}}async update(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=kb(this.apiClient,e);return p=re("{model}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>vc(v))}else{const h=OA(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>yc(v))}}async delete(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=Lb(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(()=>{const v=IN(),S=new Jh;return Object.assign(S,v),S})}else{const h=qA(this.apiClient,e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(()=>{const v=lN(),S=new Jh;return Object.assign(S,v),S})}}async countTokens(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=Pb(this.apiClient,e);return p=re("{model}:countTokens",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=UN(v),E=new Kh;return Object.assign(E,S),E})}else{const h=BA(this.apiClient,e);return p=re("{model}:countTokens",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=aN(v),E=new Kh;return Object.assign(E,S),E})}}async computeTokens(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=Ob(this.apiClient,e);return f=re("{model}:computeTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>{const h=kN(y),v=new MS;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=Bb(this.apiClient,e);return p=re("{model}:predictLongRunning",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>ON(v))}else{const h=FA(this.apiClient,e);return p=re("{model}:predictLongRunning",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>cN(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fM(t){const e={},i=r(t,["operationName"]);i!=null&&u(e,["_url","operationName"],i);const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function dM(t){const e={},i=r(t,["operationName"]);i!=null&&u(e,["_url","operationName"],i);const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function mM(t){const e={},i=r(t,["operationName"]);i!=null&&u(e,["operationName"],i);const l=r(t,["resourceName"]);l!=null&&u(e,["_url","resourceName"],l);const s=r(t,["config"]);return s!=null&&u(e,["config"],s),e}function pM(t){const e={},i=r(t,["video","uri"]);i!=null&&u(e,["uri"],i);const l=r(t,["video","encodedVideo"]);l!=null&&u(e,["videoBytes"],Sn(l));const s=r(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function hM(t){const e={},i=r(t,["_self"]);return i!=null&&u(e,["video"],pM(i)),e}function gM(t){const e={},i=r(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>hM(m))),u(e,["generatedVideos"],f)}const l=r(t,["raiMediaFilteredCount"]);l!=null&&u(e,["raiMediaFilteredCount"],l);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function yM(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["metadata"]);l!=null&&u(e,["metadata"],l);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response","generateVideoResponse"]);return m!=null&&u(e,["response"],gM(m)),e}function vM(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["uri"],i);const l=r(t,["bytesBase64Encoded"]);l!=null&&u(e,["videoBytes"],Sn(l));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function xM(t){const e={},i=r(t,["_self"]);return i!=null&&u(e,["video"],vM(i)),e}function TM(t){const e={},i=r(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>xM(m))),u(e,["generatedVideos"],f)}const l=r(t,["raiMediaFilteredCount"]);l!=null&&u(e,["raiMediaFilteredCount"],l);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function xg(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["metadata"]);l!=null&&u(e,["metadata"],l);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response"]);return m!=null&&u(e,["response"],TM(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SM extends xi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,l=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=i.name.split("/operations/")[0];let f;return l&&"httpOptions"in l&&(f=l.httpOptions),this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:s,config:{httpOptions:f}})}else return this.getVideosOperationInternal({operationName:i.name,config:l})}async getVideosOperationInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=dM(e);return p=re("{operationName}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>xg(v))}else{const h=fM(e);return p=re("{operationName}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>yM(v))}}async fetchPredictVideosOperationInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=mM(e);return f=re("{resourceName}:fetchPredictOperation",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>xg(y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _M(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Uy(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],_M(i)),e}function EM(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const l=r(t,["voiceConfig"]);return l!=null&&u(e,["voiceConfig"],Uy(l)),e}function CM(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>EM(s))),u(e,["speakerVoiceConfigs"],l)}return e}function AM(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Uy(i));const l=r(t,["multiSpeakerVoiceConfig"]);l!=null&&u(e,["multiSpeakerVoiceConfig"],CM(l));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function bM(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const l=r(t,["endOffset"]);l!=null&&u(e,["endOffset"],l);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function NM(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function MM(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const l=r(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function RM(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],bM(i));const l=r(t,["thought"]);l!=null&&u(e,["thought"],l);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],NM(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],MM(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const p=r(t,["codeExecutionResult"]);p!=null&&u(e,["codeExecutionResult"],p);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const h=r(t,["functionCall"]);h!=null&&u(e,["functionCall"],h);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const S=r(t,["text"]);return S!=null&&u(e,["text"],S),e}function wM(t){const e={},i=r(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(f=>RM(f))),u(e,["parts"],s)}const l=r(t,["role"]);return l!=null&&u(e,["role"],l),e}function DM(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const l=r(t,["description"]);l!=null&&u(e,["description"],l);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const p=r(t,["response"]);p!=null&&u(e,["response"],p);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function IM(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const l=r(t,["endTime"]);return l!=null&&u(e,["endTime"],l),e}function UM(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],IM(i)),e}function kM(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const l=r(t,["dynamicThreshold"]);return l!=null&&u(e,["dynamicThreshold"],l),e}function LM(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],kM(i)),e}function VM(){return{}}function PM(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>DM(h))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],UM(l));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],LM(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],VM());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const p=r(t,["computerUse"]);return p!=null&&u(e,["computerUse"],p),e}function OM(t){const e={},i=r(t,["handle"]);if(i!=null&&u(e,["handle"],i),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tg(){return{}}function qM(t){const e={},i=r(t,["disabled"]);i!=null&&u(e,["disabled"],i);const l=r(t,["startOfSpeechSensitivity"]);l!=null&&u(e,["startOfSpeechSensitivity"],l);const s=r(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function GM(t){const e={},i=r(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],qM(i));const l=r(t,["activityHandling"]);l!=null&&u(e,["activityHandling"],l);const s=r(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function BM(t){const e={},i=r(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function zM(t){const e={},i=r(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const l=r(t,["slidingWindow"]);return l!=null&&u(e,["slidingWindow"],BM(l)),e}function HM(t){const e={},i=r(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function FM(t,e){const i={},l=r(t,["generationConfig"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig"],l);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const p=r(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const y=r(t,["maxOutputTokens"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","maxOutputTokens"],y);const h=r(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const S=r(t,["speechConfig"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","speechConfig"],AM(Rc(S)));const E=r(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=r(t,["systemInstruction"]);e!==void 0&&A!=null&&u(e,["setup","systemInstruction"],wM(mt(A)));const M=r(t,["tools"]);if(e!==void 0&&M!=null){let z=Ao(M);Array.isArray(z)&&(z=z.map(W=>PM(Co(W)))),u(e,["setup","tools"],z)}const k=r(t,["sessionResumption"]);e!==void 0&&k!=null&&u(e,["setup","sessionResumption"],OM(k));const L=r(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],Tg());const H=r(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&u(e,["setup","outputAudioTranscription"],Tg());const Y=r(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&u(e,["setup","realtimeInputConfig"],GM(Y));const F=r(t,["contextWindowCompression"]);e!==void 0&&F!=null&&u(e,["setup","contextWindowCompression"],zM(F));const Q=r(t,["proactivity"]);return e!==void 0&&Q!=null&&u(e,["setup","proactivity"],HM(Q)),i}function YM(t,e){const i={},l=r(e,["model"]);l!=null&&u(i,["setup","model"],Le(t,l));const s=r(e,["config"]);return s!=null&&u(i,["config"],FM(s,i)),i}function JM(t,e,i){const l={},s=r(e,["expireTime"]);i!==void 0&&s!=null&&u(i,["expireTime"],s);const f=r(e,["newSessionExpireTime"]);i!==void 0&&f!=null&&u(i,["newSessionExpireTime"],f);const m=r(e,["uses"]);i!==void 0&&m!=null&&u(i,["uses"],m);const p=r(e,["liveConnectConstraints"]);i!==void 0&&p!=null&&u(i,["bidiGenerateContentSetup"],YM(t,p));const y=r(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&u(i,["fieldMask"],y),l}function KM(t,e){const i={},l=r(e,["config"]);return l!=null&&u(i,["config"],JM(t,l,i)),i}function ZM(t){const e={},i=r(t,["name"]);return i!=null&&u(e,["name"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $M(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const l=t[i];if(typeof l=="object"&&l!=null&&Object.keys(l).length>0){const s=Object.keys(l).map(f=>`${i}.${f}`);e.push(...s)}else e.push(i)}return e.join(",")}function XM(t,e){let i=null;const l=t.bidiGenerateContentSetup;if(typeof l=="object"&&l!==null&&"setup"in l){const f=l.setup;typeof f=="object"&&f!==null?(t.bidiGenerateContentSetup=f,i=f):delete t.bidiGenerateContentSetup}else l!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(i){const f=$M(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?t.fieldMask=f:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];s.length>0&&(p=s.map(h=>m.includes(h)?`generationConfig.${h}`:h));const y=[];f&&y.push(f),p.length>0&&y.push(...p),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class QM extends xi{constructor(e){super(),this.apiClient=e}async create(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=KM(this.apiClient,e);f=re("auth_tokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query;const y=XM(p,e.config);return s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(h=>h.json()),s.then(h=>ZM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jM(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","name"],i);const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function WM(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function eR(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],WM(i,e)),e}function tR(t){const e={},i=r(t,["textInput"]);i!=null&&u(e,["textInput"],i);const l=r(t,["output"]);return l!=null&&u(e,["output"],l),e}function nR(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=r(t,["examples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(s=>tR(s))),u(e,["examples","examples"],l)}return e}function iR(t,e){const i={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=r(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&u(e,["displayName"],l),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=r(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","epochCount"],s);const f=r(t,["learningRateMultiplier"]);if(f!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=r(t,["batchSize"]);e!==void 0&&m!=null&&u(e,["tuningTask","hyperparameters","batchSize"],m);const p=r(t,["learningRate"]);return e!==void 0&&p!=null&&u(e,["tuningTask","hyperparameters","learningRate"],p),i}function oR(t){const e={},i=r(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const l=r(t,["trainingDataset"]);l!=null&&u(e,["tuningTask","trainingData"],nR(l));const s=r(t,["config"]);return s!=null&&u(e,["config"],iR(s,e)),e}function lR(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","name"],i);const l=r(t,["config"]);return l!=null&&u(e,["config"],l),e}function aR(t,e){const i={},l=r(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function sR(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],aR(i,e)),e}function rR(t,e){const i={},l=r(t,["gcsUri"]);e!==void 0&&l!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],l);const s=r(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function uR(t,e){const i={},l=r(t,["gcsUri"]);l!=null&&u(i,["validationDatasetUri"],l);const s=r(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s),i}function cR(t,e){const i={},l=r(t,["validationDataset"]);e!==void 0&&l!=null&&u(e,["supervisedTuningSpec"],uR(l,i));const s=r(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&u(e,["tunedModelDisplayName"],s);const f=r(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);const m=r(t,["epochCount"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const p=r(t,["learningRateMultiplier"]);e!==void 0&&p!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p);const y=r(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const h=r(t,["adapterSize"]);if(e!==void 0&&h!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function fR(t){const e={},i=r(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const l=r(t,["trainingDataset"]);l!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],rR(l,e));const s=r(t,["config"]);return s!=null&&u(e,["config"],cR(s,e)),e}function dR(t){const e={},i=r(t,["name"]);i!=null&&u(e,["model"],i);const l=r(t,["name"]);return l!=null&&u(e,["endpoint"],l),e}function ky(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["state"]);l!=null&&u(e,["state"],fy(l));const s=r(t,["createTime"]);s!=null&&u(e,["createTime"],s);const f=r(t,["tuningTask","startTime"]);f!=null&&u(e,["startTime"],f);const m=r(t,["tuningTask","completeTime"]);m!=null&&u(e,["endTime"],m);const p=r(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const y=r(t,["description"]);y!=null&&u(e,["description"],y);const h=r(t,["baseModel"]);h!=null&&u(e,["baseModel"],h);const v=r(t,["_self"]);v!=null&&u(e,["tunedModel"],dR(v));const S=r(t,["distillationSpec"]);S!=null&&u(e,["distillationSpec"],S);const E=r(t,["experiment"]);E!=null&&u(e,["experiment"],E);const A=r(t,["labels"]);A!=null&&u(e,["labels"],A);const M=r(t,["pipelineJob"]);M!=null&&u(e,["pipelineJob"],M);const k=r(t,["satisfiesPzi"]);k!=null&&u(e,["satisfiesPzi"],k);const L=r(t,["satisfiesPzs"]);L!=null&&u(e,["satisfiesPzs"],L);const H=r(t,["serviceAccount"]);H!=null&&u(e,["serviceAccount"],H);const Y=r(t,["tunedModelDisplayName"]);return Y!=null&&u(e,["tunedModelDisplayName"],Y),e}function mR(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["tunedModels"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>ky(f))),u(e,["tuningJobs"],s)}return e}function pR(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["metadata"]);l!=null&&u(e,["metadata"],l);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);return f!=null&&u(e,["error"],f),e}function hR(t){const e={},i=r(t,["checkpointId"]);i!=null&&u(e,["checkpointId"],i);const l=r(t,["epoch"]);l!=null&&u(e,["epoch"],l);const s=r(t,["step"]);s!=null&&u(e,["step"],s);const f=r(t,["endpoint"]);return f!=null&&u(e,["endpoint"],f),e}function gR(t){const e={},i=r(t,["model"]);i!=null&&u(e,["model"],i);const l=r(t,["endpoint"]);l!=null&&u(e,["endpoint"],l);const s=r(t,["checkpoints"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>hR(m))),u(e,["checkpoints"],f)}return e}function Tc(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const l=r(t,["state"]);l!=null&&u(e,["state"],fy(l));const s=r(t,["createTime"]);s!=null&&u(e,["createTime"],s);const f=r(t,["startTime"]);f!=null&&u(e,["startTime"],f);const m=r(t,["endTime"]);m!=null&&u(e,["endTime"],m);const p=r(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const y=r(t,["error"]);y!=null&&u(e,["error"],y);const h=r(t,["description"]);h!=null&&u(e,["description"],h);const v=r(t,["baseModel"]);v!=null&&u(e,["baseModel"],v);const S=r(t,["tunedModel"]);S!=null&&u(e,["tunedModel"],gR(S));const E=r(t,["supervisedTuningSpec"]);E!=null&&u(e,["supervisedTuningSpec"],E);const A=r(t,["tuningDataStats"]);A!=null&&u(e,["tuningDataStats"],A);const M=r(t,["encryptionSpec"]);M!=null&&u(e,["encryptionSpec"],M);const k=r(t,["partnerModelTuningSpec"]);k!=null&&u(e,["partnerModelTuningSpec"],k);const L=r(t,["distillationSpec"]);L!=null&&u(e,["distillationSpec"],L);const H=r(t,["experiment"]);H!=null&&u(e,["experiment"],H);const Y=r(t,["labels"]);Y!=null&&u(e,["labels"],Y);const F=r(t,["pipelineJob"]);F!=null&&u(e,["pipelineJob"],F);const Q=r(t,["satisfiesPzi"]);Q!=null&&u(e,["satisfiesPzi"],Q);const z=r(t,["satisfiesPzs"]);z!=null&&u(e,["satisfiesPzs"],z);const W=r(t,["serviceAccount"]);W!=null&&u(e,["serviceAccount"],W);const Z=r(t,["tunedModelDisplayName"]);return Z!=null&&u(e,["tunedModelDisplayName"],Z),e}function yR(t){const e={},i=r(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=r(t,["tuningJobs"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>Tc(f))),u(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vR extends xi{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Pl(vi.PAGED_ITEM_TUNING_JOBS,l=>this.listInternal(l),await this.listInternal(i),i),this.tune=async i=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(i);{const l=await this.tuneMldevInternal(i);let s="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?s=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(s=l.name.split("/operations/")[0]),{name:s,state:cc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=lR(e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>Tc(v))}else{const h=jM(e);return p=re("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>ky(v))}}async listInternal(e){var i,l,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=sR(e);return p=re("tuningJobs",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const S=yR(v),E=new Zh;return Object.assign(E,S),E})}else{const h=eR(e);return p=re("tunedModels",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const S=mR(v),E=new Zh;return Object.assign(E,S),E})}}async tuneInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=fR(e);return f=re("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>Tc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,l;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=oR(e);return f=re("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),s.then(y=>pR(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xR{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TR=1024*1024*8,SR=3,_R=1e3,ER=2,Ku="x-goog-upload-status";async function CR(t,e,i){var l,s,f;let m=0,p=0,y=new fc(new Response),h="upload";for(m=t.size;p<m;){const S=Math.min(TR,m-p),E=t.slice(p,p+S);p+S>=m&&(h+=", finalize");let A=0,M=_R;for(;A<SR&&(y=await i.request({path:"",body:E,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(p),"Content-Length":String(S)}}}),!(!((l=y==null?void 0:y.headers)===null||l===void 0)&&l[Ku]));)A++,await bR(M),M=M*ER;if(p+=S,((s=y==null?void 0:y.headers)===null||s===void 0?void 0:s[Ku])!=="active")break;if(m<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((f=y==null?void 0:y.headers)===null||f===void 0?void 0:f[Ku])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function AR(t){return{size:t.size,type:t.type}}function bR(t){return new Promise(e=>setTimeout(e,t))}class NR{async upload(e,i,l){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CR(e,i,l)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MR{create(e,i,l){return new RR(e,i,l)}}class RR{constructor(e,i,l){this.url=e,this.headers=i,this.callbacks=l}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sg="x-goog-api-key";class wR{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Sg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Sg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DR="gl-node/";class IR{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const l=AS(e,void 0,void 0);l&&(e.httpOptions?e.httpOptions.baseUrl=l:e.httpOptions={baseUrl:l}),this.apiVersion=e.apiVersion;const s=new wR(this.apiKey);this.apiClient=new JN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:DR+"web",uploader:new NR,downloader:new xR}),this.models=new cM(this.apiClient),this.live=new lM(this.apiClient,s,new MR),this.batches=new W_(this.apiClient),this.chats=new iC(this.models,this.apiClient),this.caches=new eC(this.apiClient),this.files=new gC(this.apiClient),this.operations=new SM(this.apiClient),this.authTokens=new QM(this.apiClient),this.tunings=new vR(this.apiClient)}}const UR={low:"Identify only the most essential and defining grammar patterns of the sentence. Focus on major conjunctions, verb conjugations (tense/politeness), and sentence-ending particles. Avoid breaking down common compound words or very simple phrases.",medium:"Provide a balanced analysis. Identify all major grammar patterns, common set phrases, and important vocabulary usage. This is the standard level of detail suitable for most learners.",high:"Perform an exhaustive analysis. Identify every possible grammatical pattern, nuance, idiomatic expression, and compound word structure, no matter how small or common. Deconstruct everything for a very detailed view for advanced study."};function kR(t){return`You are an advanced linguistic analysis model, acting as a patient, insightful teacher of the Japanese language.
Your primary task is to take a single Japanese sentence and produce a detailed, structured analysis according to the specified JSON schema. Your explanations should be clear enough for a language learner.

Detailed Task Breakdown:
1.  **Sentence Analysis**: Deconstruct the input sentence into its smallest meaningful components (words, particles, etc.).
    For each component in the 'analysis' array:
    *   **Grammatical Category**: Assign a highly specific category. Use the format \`BASE_TYPE-FORM-TENSE-POLARITY\`.
        *   Examples: \`VERB_GODAN-TE-PAST-AFFIRMATIVE\`, \`ADJECTIVE_I-PLAIN-PRESENT-NEGATIVE\`, \`NOUN_COMMON\`.
        *   Available Categories: NOUN_COMMON, NOUN_PROPER, NOUN_PRONOUN, NOUN_COUNTER, VERB_ICHIDAN, VERB_GODAN, VERB_IRREGULAR, VERB_SURU, ADJECTIVE_I, ADJECTIVE_NA, ADVERB, PARTICLE, AUXILIARY_VERB, GRAMMATICAL_AUXILIARY, CONJUNCTION, INTERJECTION, SUFFIX, PREFIX, PUNCTUATION.
    *   **Reading**: Provide the reading in Hiragana or Katakana.
    *   **English Equivalent**: Provide a concise English meaning.
    *   **Pitch Accent**: THIS IS A CRITICAL, MANDATORY FIELD.
        *   Provide the standard Tokyo-dialect pitch accent as a string of 'H' (High) and 'L' (Low).
        *   **RULE: The length of the 'pitch_accent' string MUST EXACTLY match the character length of the 'reading' string.**
        *   Example: If 'reading' is 'ねこ' (2 chars), 'pitch_accent' MUST be 'LH' (2 chars).
        *   Example: If 'reading' is 'ともだち' (4 chars), 'pitch_accent' (heiban) MUST be 'LHHH' (4 chars).
        *   For particles or single-mora words with no accent drop, use the appropriate single letter ('H' or 'L').
        *   If pitch is truly not applicable (like punctuation), provide an empty string "". DO NOT OMIT THE FIELD. Avoid common pitfalls like providing a pattern shorter than the reading.

2.  **Full Translation**: Provide a natural, fluent English translation of the entire sentence.

3.  **Grammar & Phrase Explanations**: In the 'grammar_patterns' array, identify and explain all notable grammar points, set phrases, or nuanced vocabulary.
    *   **Analysis Thoroughness Level: ${t.toUpperCase()}**
    *   **Instruction: ${UR[t]}**
    *   For each pattern, provide its name, a clear explanation for a learner, and the 'constituent_indices' that form the pattern in the 'analysis' array. This section must be comprehensive according to the specified thoroughness level.

Input is a single Japanese sentence. You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function LR(){return`You are a Japanese language teaching assistant.
Your task is to provide 2-3 simple, distinct, and pedagogically useful example sentences for the Japanese grammar pattern provided as the user input.

For each example sentence, you MUST provide:
1.  'japanese': The full sentence in Japanese, using Kanji where appropriate.
2.  'reading': The complete furigana reading of the sentence in Hiragana.
3.  'english': A natural and accurate English translation.
4.  'highlight_indices': A two-element array \`[startIndex, endIndex]\` indicating the exact location of the grammar pattern within the 'japanese' string. 'startIndex' is the zero-based index of the first character of the pattern, and 'endIndex' is the zero-based index of the character immediately AFTER the last character of the pattern.

Example for pattern "〜について":
If the user input is "〜について" and a sentence is "日本の文化について話します。", the pattern "について" starts at index 5 and ends at index 9. So, 'highlight_indices' would be [5, 9].

Respond ONLY with a JSON object that adheres to the provided schema. Do not add any extra text or markdown fences.`}function VR(){return`You are an expert web content extraction model. You will be given the full raw HTML of a webpage.
Your task is to perform the following actions:
1.  Identify the main article or content body of the HTML. Ignore navigation menus, sidebars, advertisements, footers, comment sections, and other boilerplate content.
2.  Extract the main title of the article from elements like \`<title>\` or \`<h1>\`.
3.  Extract the full text of the article.
4.  The extracted text MUST be in Japanese. If the main content is not in Japanese, you must treat it as if no content was found.
5.  Clean the extracted text by removing any remaining HTML tags and unnecessary whitespace, presenting it as clean paragraphs separated by single newline characters.

You must respond ONLY with a JSON object that adheres to the specified schema.
If no valid Japanese article text can be found on the page, the 'japanese_text' field in your JSON response must be an empty string. The 'title' can still be populated if found.
`}const PR={type:"OBJECT",properties:{original_japanese_sentence:{type:"STRING",description:"The original Japanese sentence provided by the user."},analysis:{type:"ARRAY",description:"An array of objects, each representing a segmented component of the Japanese sentence.",items:{type:"OBJECT",properties:{japanese_segment:{type:"STRING",description:"The individual Japanese segment (word, particle, etc.)."},reading:{type:"STRING",description:"The reading of the Japanese segment in Hiragana or Katakana."},category:{type:"STRING",description:"A highly specific grammatical category label for the segment (e.g., 'NOUN_COMMON', 'VERB_ICHIDAN-TE-PAST-AFFIRMATIVE')."},english_equivalent:{type:"STRING",description:"A direct, concise English equivalent of the segment."},pitch_accent:{type:"STRING",description:`CRITICAL: A string representing the pitch accent pattern using 'H' for high and 'L' for low. This string's length MUST exactly match the character length of the 'reading' field. For heiban words, use 'L' followed by all 'H's (e.g., reading 'ともだち' -> pitch 'LHHH'). For non-applicable segments like punctuation, this MUST be an empty string "". Do not omit this field.`}},required:["japanese_segment","reading","category","english_equivalent","pitch_accent"]}},grammar_patterns:{type:"ARRAY",description:"A comprehensive array of identified grammatical patterns, idiomatic phrases, or nuanced vocabulary in the sentence.",items:{type:"OBJECT",properties:{pattern_name:{type:"STRING",description:"The name of the grammatical pattern or the phrase being explained (e.g., '〜なければならない', 'よろしくお願いします')."},explanation:{type:"STRING",description:"A detailed explanation of the pattern's meaning, usage, and nuance for a language learner."},constituent_indices:{type:"ARRAY",description:"An array of zero-based indices from the 'analysis' array that form this pattern.",items:{type:"NUMBER"}}},required:["pattern_name","explanation","constituent_indices"]}},english_translation:{type:"STRING",description:"The complete, natural-sounding English translation of the entire Japanese sentence."}},required:["original_japanese_sentence","analysis","grammar_patterns","english_translation"]},OR={type:"ARRAY",description:"An array of 2-3 simple example sentences for the given grammar pattern.",items:{type:"OBJECT",properties:{japanese:{type:"STRING",description:"The full example sentence in Japanese, including Kanji."},reading:{type:"STRING",description:"The complete reading of the Japanese sentence in Hiragana."},english:{type:"STRING",description:"The natural English translation of the sentence."},highlight_indices:{type:"ARRAY",description:"A two-element array [startIndex, endIndex] indicating the character position of the grammar pattern within the 'japanese' string. startIndex is inclusive, endIndex is exclusive.",items:{type:"NUMBER"},minItems:2,maxItems:2}},required:["japanese","reading","english","highlight_indices"]}},qR={type:"OBJECT",properties:{title:{type:"STRING",description:"The extracted main title of the article. Should be an empty string if no title is found."},japanese_text:{type:"STRING",description:"The extracted and cleaned main Japanese text of the article, formatted with paragraphs separated by newlines. Should be an empty string if no Japanese article is found."}},required:["title","japanese_text"]},Uc=async()=>{const e=(await bc()).userApiKey||void 0;if(!e)throw new Error("API Key is not configured. Please set your key in the settings menu or ensure the default key is present.");return new IR({apiKey:e})},kc=t=>{var s;const e=t.text;if(typeof e!="string"||e.trim()===""){const f=(s=t.candidates)==null?void 0:s[0];throw f&&f.finishReason!=="STOP"?new Error(`The AI model's response was incomplete. Reason: ${f.finishReason}.`):new Error("The AI model returned an empty response.")}const i=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,l=e.trim().match(i);return l?l[1].trim():e.trim()},Ly=t=>{const[e,i]=G.useState(!1),[l,s]=G.useState(null),[f,m]=G.useState(null),p=G.useCallback(async(...y)=>{i(!0),s(null),m(null);try{const h=await t(...y);return m(h),h}catch(h){s(h)}finally{i(!1)}},[t]);return{isLoading:e,error:l,data:f,execute:p}},GR=async(t,e,i=!1)=>{const l=await Uc(),s=t.trim().replace(/^[「『]/,"").replace(/[」』]$/,"").trim();if(!s)return{original_japanese_sentence:t,analysis:[{japanese_segment:t,reading:t,category:"PUNCTUATION",english_equivalent:"Punctuation/Quotes",pitch_accent:""}],grammar_patterns:[],english_translation:"(Sentence consists only of punctuation)"};const f=await l.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:s,config:{systemInstruction:kR(e),responseMimeType:"application/json",responseSchema:PR,temperature:.1,seed:42}}),m=kc(f),p=JSON.parse(m),y=Array.isArray(p)?p[0]:p;return y.original_japanese_sentence=t,y},BR=async t=>{const i=await(await Uc()).models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:t,config:{systemInstruction:LR(),responseMimeType:"application/json",responseSchema:OR,temperature:.01,seed:42}}),l=kc(i);return JSON.parse(l)},zR=async t=>{let e="";const i=[h=>`https://api.allorigins.win/raw?url=${encodeURIComponent(h)}`,h=>`https://corsproxy.io/?${h}`];let s=null;for(const h of i){const v=h(t),S=new AbortController,E=setTimeout(()=>S.abort(),15e3);try{const A=await fetch(v,{signal:S.signal});if(clearTimeout(E),!A.ok)throw A.status===408||A.status===504?new Error("Proxy timed out waiting for the target website."):A.status===404?new Error("The requested URL was not found (404). Please check the URL."):A.status===403?new Error("Access to this website is forbidden (403). It may be blocking access."):A.status>=500?new Error("The website's server encountered an error. Please try again later."):new Error(`Failed to fetch content (status: ${A.status}).`);const M=await A.text();if(!M||M.trim()==="")throw new Error("Retrieved empty content. The page might be protected or require JavaScript.");e=M,s=null;break}catch(A){clearTimeout(E);const M=new URL(v).hostname;console.warn(`Proxy ${M} failed. Trying next...`,A),s=A instanceof Error?A:new Error("An unknown fetch error occurred"),s.name==="AbortError"&&(s=new Error(`The request to ${M} timed out.`))}}if(!e)throw new Error(`Failed to fetch from all proxies. Last error: ${(s==null?void 0:s.message)||"Unknown issue."}`);const m=await(await Uc()).models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:e,config:{systemInstruction:VR(),responseMimeType:"application/json",responseSchema:qR,temperature:0,seed:42}}),p=kc(m),y=JSON.parse(p);if(!y.japanese_text||y.japanese_text.trim()==="")throw new Error("No Japanese article content could be found at the provided URL.");return y},Vy=()=>{const t=G.useCallback(GR,[]);return Ly(t)},HR=()=>{const t=G.useCallback(BR,[]);return Ly(t)},_g="unsaved-title",Eg="unsaved-text";function Cg(){const{state:t,dispatch:e}=wt(),{state:i}=Yt(),{showAlert:l}=Eo(),[s,f]=G.useState(""),[m,p]=G.useState(""),[y,h]=G.useState(!1),[v,S]=G.useState(""),[E,A]=G.useState(!1),[M,k]=G.useState(null),[L,H]=G.useState("manual"),Y=!!i.userApiKey,F=t.editingEntryId?t.history.find(X=>X.id===t.editingEntryId):null;G.useEffect(()=>{(async()=>{if(F)f(F.title),p(F.text),H("manual");else{const ve=await Bp(_g)||"",oe=await Bp(Eg)||"";f(ve),p(oe)}h(!0)})()},[F]),G.useEffect(()=>{y&&!F&&us(_g,s)},[s,F,y]),G.useEffect(()=>{y&&!F&&us(Eg,m)},[m,F,y]);const Q=async()=>{if(k(null),!v){k("Please enter a URL.");return}try{new URL(v)}catch{k("Invalid URL format.");return}A(!0);try{const X=await zR(v);f(X.title),p(X.japanese_text),S(""),H("manual")}catch(X){k(X.message)}finally{A(!1)}},z=()=>{if(!Y){l("API Key is not configured. Please add your key in the settings menu.");return}const X=m.trim();if(!X)return;const ve=s.trim()||X.substring(0,40)+"...";if(F){const oe=F.analyzedSentences,le={};X.split(`
`).flatMap(Ee=>{var P;return((P=Ee.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:P.filter(j=>j==null?void 0:j.trim()))||[]}).forEach(Ee=>{oe[Ee]&&(le[Ee]=oe[Ee])});const Ge={...F,title:ve,text:X,updatedAt:Date.now(),analyzedSentences:le,readingProgress:0};e({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:Ge}),e({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:Ge.id}),e({type:"SET_VIEW",payload:Fe.Reader})}else{const oe={id:Date.now().toString(),title:ve,text:X,createdAt:Date.now(),updatedAt:Date.now(),analyzedSentences:{},readingProgress:0};e({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:oe}),e({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:oe.id}),e({type:"SET_VIEW",payload:Fe.Reader})}},W="px-4 py-3 text-sm font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background rounded-t-lg",Z="border-b-2 border-primary text-primary",ge="text-text-muted hover:text-text-primary hover:bg-surface-hover";return x.jsx("div",{className:"h-screen md:h-auto input-area p-6 bg-gradient-to-b from-background/50 to-surface overflow-y-auto no-scrollbar flex flex-col",children:x.jsxs("div",{className:"space-y-6 flex-grow flex flex-col",children:[x.jsx("div",{className:"border-b border-border-subtle flex-shrink-0",children:x.jsxs("nav",{className:"-mb-px flex space-x-4","aria-label":"Tabs",children:[x.jsx("button",{onClick:()=>H("manual"),className:`${W} ${L==="manual"?Z:ge}`,"aria-current":L==="manual"?"page":void 0,children:"Manual Input"}),x.jsx("button",{onClick:()=>H("url"),className:`${W} ${L==="url"?Z:ge}`,"aria-current":L==="url"?"page":void 0,children:"Import from URL"})]})}),x.jsxs("div",{className:"flex-grow min-h-0 py-2",children:[L==="manual"&&x.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"text-title-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Title"}),x.jsx("input",{type:"text",id:"text-title-input",placeholder:"Enter a title for your text...",className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-lg font-medium px-4 py-3",value:s,onChange:X=>f(X.target.value)})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"sentence-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Japanese Text"}),x.jsx("textarea",{id:"sentence-input",placeholder:"Enter Japanese text here. e.g., 猫が大好きです。犬も好きです。",rows:8,className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-base px-4 py-3 font-japanese resize-y transition-all duration-200",value:m,onChange:X=>p(X.target.value)})]})]}),L==="url"&&x.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x.jsx("label",{htmlFor:"url-input",className:"block text-sm font-medium text-text-secondary",children:"Paste article URL"}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("input",{type:"url",id:"url-input",placeholder:"https://example.com/japanese-article",className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-base px-4 py-3",value:v,onChange:X=>S(X.target.value),onKeyDown:X=>X.key==="Enter"&&Q(),disabled:E}),x.jsx("button",{onClick:Q,disabled:E||!v.trim(),className:"px-4 py-3 rounded-xl bg-accent text-primary-text font-medium hover:bg-accent/90 transition-colors shadow-sm focus-ring disabled:opacity-60 disabled:cursor-not-allowed flex-shrink-0",title:"Fetch content from URL",children:E?x.jsx("i",{className:"bi bi-arrow-repeat text-xl animate-spin"}):x.jsx("i",{className:"bi bi-cloud-arrow-down text-xl"})})]}),M&&x.jsxs("p",{className:"text-sm text-destructive mt-1.5 px-2",children:[x.jsx("i",{className:"bi bi-exclamation-circle-fill mr-1 align-middle"}),M]})]})]}),x.jsxs("div",{className:"mt-auto flex-shrink-0 pt-4",children:[x.jsxs("button",{onClick:z,className:"w-full btn-primary text-lg flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!m.trim()||!Y,title:Y?"":"API Key not configured. Please add one in settings.",children:[x.jsx("i",{className:"bi bi-search"}),"Analyze Text"]}),!Y&&x.jsxs("p",{className:"text-center text-sm text-warning-text mt-3",children:[x.jsx("i",{className:"bi bi-exclamation-triangle-fill mr-1 align-middle"}),"Please set your API key in settings to enable analysis."]})]})]})})}const Py=(t,e)=>{const{state:i,dispatch:l}=wt(),{state:s}=Yt(),{execute:f,error:m,isLoading:p}=Vy(),[y,h]=G.useState(null),v=G.useMemo(()=>t?i.history.find(M=>M.id===t):null,[t,i.history]),S=s.analysisDepth;G.useEffect(()=>{var L;let M=!1;if(!e){h(null);return}if((y==null?void 0:y.sentence)===e)return;const k=((L=v==null?void 0:v.analyzedSentences[e])==null?void 0:L[S])||null;if(k){h({sentence:e,analysis:k});return}return h(null),f(e,S).then(H=>{!M&&H&&h({sentence:e,analysis:H})}),()=>{M=!0}},[e,S,v,f,y==null?void 0:y.sentence]),G.useEffect(()=>{var M;y&&t&&((M=v==null?void 0:v.analyzedSentences[y.sentence])!=null&&M[S]||l({type:"CACHE_ANALYSIS",payload:{entryId:t,sentence:y.sentence,depth:S,analysis:y.analysis}}))},[y,t,S,v,l]);const E=G.useCallback(()=>{e&&(h(null),f(e,S,!0).then(M=>{M&&h({sentence:e,analysis:M})}))},[e,S,f]),A=(y==null?void 0:y.sentence)===e?y.analysis:null;return{analysis:A,isLoading:p||!!e&&!A&&!m,error:m,reanalyze:E}};let Sc=null;function Ag(t){Sc=t}function FR(){if(!("speechSynthesis"in window)){document.body.classList.remove("tts-available");return}const t=()=>{const e=window.speechSynthesis.getVoices().filter(f=>f.lang==="ja-JP");if(e.length===0){Ag(null),document.body.classList.remove("tts-available");return}const i=e.find(f=>f.name.includes("Google")),l=e.find(f=>!f.localService),s=i||l||e[0]||null;Ag(s),document.body.classList.toggle("tts-available",!!s)};t(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=t)}function YR(t){if(!("speechSynthesis"in window)||!Sc){console.warn("Speech synthesis not available or no Japanese voice found.");return}window.speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(t);e.voice=Sc,e.lang="ja-JP",e.rate=.9,e.pitch=1,window.speechSynthesis.speak(e)}const Oy=({text:t,title:e="Read aloud"})=>x.jsx("button",{className:"tts-button btn-ghost p-1 text-text-muted hover:text-text-primary",title:e,onClick:i=>{i.stopPropagation(),YR(t)},children:x.jsx("i",{className:"bi bi-volume-up text-base"})}),Zu=So.memo(function({text:e}){const i=G.useMemo(()=>e.split("").map((l,s)=>/[一-龯]/.test(l)?x.jsx("a",{href:`https://jisho.org/search/${encodeURIComponent(l)}%20%23kanji`,target:"_blank",rel:"noopener noreferrer",className:"underline decoration-text-muted/50 decoration-1 underline-offset-2 hover:text-accent hover:decoration-accent transition",onClick:f=>f.stopPropagation(),children:l},s):l),[e]);return x.jsx(x.Fragment,{children:i})}),ns=t=>/[一-龯]/.test(t),Mo=So.memo(function({base:e,reading:i,interactiveKanji:l=!1}){const{state:s}=Yt(),{showFurigana:f}=s,m=G.useMemo(()=>{if(!f||!i||e===i)return l?x.jsx(Zu,{text:e}):e;const p=[];let y=0,h=0;for(;h<e.length;)if(ns(e[h])){let v="",S=h;for(;S<e.length&&ns(e[S]);)v+=e[S],S++;let E="",A=S;for(;A<e.length&&!ns(e[A]);)E+=e[A],A++;let M="",k=E?i.indexOf(E,y):-1;if(E&&k===y){const H=i.indexOf(E,y+1);H!==-1&&(k=H)}if(k!==-1)M=i.substring(y,k);else{const H=e.substring(h),Y=i.substring(y),F=H.split("").filter(Q=>!ns(Q)).length;M=Y.slice(0,Y.length-F)}const L=l?x.jsx(Zu,{text:v}):v;p.push(x.jsxs("ruby",{children:[L,x.jsx("rt",{className:"text-xs text-text-muted select-none",children:M})]},h)),y+=M.length,h+=v.length}else p.push(e[h]),y<i.length&&e[h]===i[y]&&y++,h++;return p},[e,i,l,f]);return f?x.jsx(x.Fragment,{children:m}):l?x.jsx(Zu,{text:e}):e}),qy=So.memo(function({reading:e,pitchAccent:i}){const{state:l}=Yt();if(!l.showPitchAccent||!e||!i||e.length!==i.length)return null;const s=i.split("").map((f,m)=>({x:100/e.length*(m+.5),y:f==="H"?2:8}));return x.jsxs("svg",{className:"pitch-accent-svg absolute top-0 left-0 w-full h-[14px] overflow-visible pointer-events-none",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:[s.length>1&&x.jsx("polyline",{points:s.map(f=>`${f.x},${f.y}`).join(" "),className:"fill-none stroke-text-muted",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.map((f,m)=>x.jsx("circle",{cx:f.x,cy:f.y,r:"1.2",className:"fill-text-muted"},m))]})});function Gy({itemId:t,itemType:e,itemContent:i}){const{state:l,dispatch:s}=wt(),{showAlert:f}=Eo(),m=!!l.reviewDeck.find(y=>y.id===t),p=y=>{y.stopPropagation();const{currentTextEntryId:h}=l;if(!h){f("Cannot add an item to the deck without first saving the text.");return}const v=m?"REMOVE_REVIEW_ITEM":"ADD_OR_UPDATE_REVIEW_ITEM";if(v==="REMOVE_REVIEW_ITEM")s({type:v,payload:t});else{const S={id:t,type:e,content:i,textEntryId:h,srsStage:0,intervalModifier:1,incorrectAnswerCount:0,nextReviewDate:new Date().setHours(0,0,0,0),addedAt:Date.now()};s({type:v,payload:S})}};return m?x.jsxs("button",{onClick:p,className:"in-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent bg-accent-subtle-bg hover:bg-destructive-subtle-bg hover:text-destructive hover:border-destructive transition inline-flex items-center gap-2",title:"Remove from Review Deck",children:[x.jsx("i",{className:"bi bi-check-lg text-base"}),"In Deck"]}):x.jsxs("button",{onClick:p,className:"add-to-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-primary-subtle-text text-primary-subtle-text hover:bg-primary-subtle-bg hover:text-primary-subtle-text/80 transition inline-flex items-center gap-2",title:"Add to Review Deck",children:[x.jsx("i",{className:"bi bi-plus-lg text-base"}),"Add to Deck"]})}function JR(t){const e=(t||"unknown").split(/[-_]/)[0].toLowerCase(),i={noun:"bg-pos-noun-bg text-pos-noun-text",verb:"bg-pos-verb-bg text-pos-verb-text",particle:"bg-pos-particle-bg text-pos-particle-text",adjective:"bg-pos-adjective-bg text-pos-adjective-text",adverb:"bg-pos-adverb-bg text-pos-adverb-text",auxiliary:"bg-pos-auxiliary-bg text-pos-auxiliary-text",grammatical:"bg-pos-auxiliary-bg text-pos-auxiliary-text",conjunction:"bg-pos-conjunction-bg text-pos-conjunction-text",suffix:"bg-pos-suffix-bg text-pos-suffix-text",punctuation:"bg-transparent",unknown:"bg-surface-soft"};return i[e]||i.unknown}function bg(t,e){const i=t*137.5%360;return e==="dark"?`hsl(${i}, 65%, 60%)`:`hsl(${i}, 70%, 45%)`}const KR=({segment:t})=>x.jsxs("div",{children:[x.jsx("div",{className:"text-lg font-japanese font-semibold mb-3 pb-2 border-b border-border-subtle",children:x.jsx(Mo,{base:t.japanese_segment,reading:t.reading||"",interactiveKanji:!0})}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Meaning:"})," ",t.english_equivalent]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",x.jsx("span",{className:"capitalize",children:t.category.replace(/_/g," ").toLowerCase()})]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",t.reading]})]}),x.jsx("div",{className:"mt-4 pt-3 border-t border-border-subtle",children:x.jsx(Gy,{itemId:`word-${t.japanese_segment}-${t.reading}`,itemType:"word",itemContent:t})})]}),ZR=({segment:t})=>{const{state:e}=Yt(),{state:i,dispatch:l}=xn(),{japanese_segment:s,reading:f,category:m,pitch_accent:p,patterns:y}=t,h=A=>{const M=A.currentTarget,k=x.jsx(KR,{segment:t});if(window.innerWidth<768)i.bottomSheet.visible&&i.bottomSheet.targetElement===M?l({type:"HIDE_BOTTOM_SHEET"}):l({type:"SHOW_BOTTOM_SHEET",payload:{content:{title:s,body:k},targetElement:M}});else{const L=M.getBoundingClientRect(),H={top:L.top-10,left:L.left+L.width/2};l({type:"PIN_TOOLTIP",payload:{content:k,position:H,targetElement:M}})}},v=G.useMemo(()=>{if(!y||y.length===0)return{};const A=3,M=2,k=A+M,L=y.map(z=>`linear-gradient(to right, ${z.color}, ${z.color})`).join(", "),H=y.map((z,W)=>`0 calc(100% - ${W*k}px)`).join(", "),Y=y.map(()=>`100% ${A}px`).join(", "),F=4,Q=y.length*k-M;return{backgroundImage:L,backgroundPosition:H,backgroundSize:Y,paddingBottom:`${F+Q}px`}},[y]),S=["segment","relative","inline-block","rounded-md","px-2","cursor-pointer","transition-transform","duration-200","hover:-translate-y-0.5","leading-loose",e.showColorCoding?JR(m):"bg-surface-soft",y&&y.length>0?"grammar-pattern":""].filter(Boolean).join(" "),E={paddingTop:e.showPitchAccent?"18px":"0.25rem",paddingBottom:"0.25rem",...v};return x.jsxs("span",{className:S,style:E,onClick:h,children:[x.jsx(qy,{reading:f,pitchAccent:p}),x.jsx("div",{children:x.jsx(Mo,{base:s,reading:f})})]})};function $R({pattern:t,onNoteClick:e,isFocused:i}){const{isLoading:l,error:s,data:f,execute:m}=HR(),[p,y]=G.useState(!1),h=A=>{A.stopPropagation(),f?y(!p):(m(t.pattern_name),y(!0))},v=`grammar-${t.pattern_name}`,S=(t.constituent_indices||[]).map(A=>{const M=t.fullAnalysis.analysis[A];return M?M.japanese_segment:null}).filter(Boolean).join(""),E={pattern_name:t.pattern_name,explanation:t.explanation,original_sentence:t.fullAnalysis.original_japanese_sentence,constituent_text:S};return x.jsxs("li",{className:`flex gap-4 p-4 rounded-lg bg-surface-subtle cursor-pointer transition-all duration-200 ${i?"is-focused ring-2 ring-focus-ring bg-surface-soft":""}`,"data-pattern-id":t.idClass,onClick:()=>e(t),children:[x.jsx("span",{className:"flex-shrink-0 w-1.5 rounded-full",style:{backgroundColor:t.color}}),x.jsxs("div",{className:"flex-grow",children:[x.jsx("strong",{className:"font-semibold text-accent",children:t.pattern_name}),x.jsx("p",{className:"text-sm text-text-muted mt-1",children:t.explanation}),x.jsxs("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[x.jsxs("button",{className:"show-examples-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent hover:bg-accent hover:text-primary-text transition inline-flex items-center gap-2 disabled:opacity-50",onClick:h,disabled:l,children:[l?x.jsx("i",{className:"bi bi-arrow-repeat text-base animate-spin"}):x.jsx("i",{className:"bi bi-card-list text-base"}),x.jsx("span",{className:"button-text",children:p&&f?"Hide":"Examples"})]}),x.jsx(Gy,{itemId:v,itemType:"grammar",itemContent:E})]}),p&&x.jsxs("div",{className:"examples-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:[s&&x.jsx("p",{className:"text-xs text-destructive-subtle-text",children:s.message}),f&&x.jsx("dl",{className:"flex flex-col gap-4",children:f.map((A,M)=>x.jsxs(So.Fragment,{children:[x.jsx("dt",{children:x.jsx("span",{className:"text-lg font-jp",children:x.jsx(Mo,{base:A.japanese,reading:A.reading})})}),x.jsx("dd",{className:"text-sm text-text-muted -mt-1",children:A.english})]},M))})]})]})]})}const XR=()=>x.jsxs("div",{className:"mt-6 p-4 border-t border-border-subtle text-center",children:[x.jsx("h4",{className:"text-xs font-bold uppercase text-text-muted tracking-wider mb-3",children:"Hotkeys"}),x.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-xs text-text-secondary",children:[x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"F"})," Furigana"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"C"})," Colors"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"T"})," Translate"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"S"})," Speak"]}),x.jsx("div",{className:"w-px h-4 bg-border mx-2 self-center"}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"J"}),"/",x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"K"})," Nav"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"E"})," Examples"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"Esc"})," Deselect"]})]})]});function By({analysis:t,onReanalyze:e}){const[i,l]=G.useState(null),[s,f]=G.useState(!1),{state:m}=Yt(),p=G.useMemo(()=>{if(!t.grammar_patterns)return t.analysis.map(v=>({...v,patterns:[]}));const h=new Map;return t.grammar_patterns.forEach((v,S)=>{var M;const E=bg(S,m.theme),A=`pattern-dynamic-${S}`;(M=v.constituent_indices)==null||M.forEach(k=>{h.has(k)||h.set(k,[]),h.get(k).push({...v,idClass:A,color:E})})}),t.analysis.map((v,S)=>({...v,patterns:h.get(S)||[]}))},[t,m.theme]),y=h=>{l(v=>(v==null?void 0:v.idClass)===h.idClass?null:h)};return x.jsxs("div",{className:"analysis-view-container animate-fade-in max-w-4xl mx-auto w-full",children:[x.jsxs("div",{id:"analysis-header",className:"relative sticky top-0 z-20 bg-surface-soft rounded-lg transition-colors duration-300 p-4 min-h-36",children:[x.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl max-h-[50vh] overflow-y-auto no-scrollbar pr-8",children:p.map((h,v)=>x.jsx("div",{className:`transition-opacity duration-300 ${i&&!h.patterns.some(S=>S.idClass===i.idClass)?"opacity-30":"opacity-100"}`,children:x.jsx(ZR,{segment:h})},v))}),s&&x.jsx("div",{className:"translation-text-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:x.jsx("p",{className:"text-text-primary text-base",children:t.english_translation})}),x.jsxs("div",{className:"absolute top-4 right-4 flex flex-col items-center gap-2",children:[x.jsx(Oy,{text:t.original_japanese_sentence,title:"Read sentence (S)"}),x.jsx("button",{onClick:e,title:"Force re-analysis",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:x.jsx("i",{className:"bi bi-arrow-clockwise text-base"})}),x.jsx("button",{id:"toggle-translation-button",onClick:()=>f(h=>!h),title:"Toggle translation (T)",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:x.jsx("i",{className:"bi bi-translate text-base"})})]})]}),x.jsx("div",{className:"p-4 space-y-4",children:t.grammar_patterns&&t.grammar_patterns.length>0&&x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold uppercase text-text-muted mb-3 tracking-wider",children:"Grammar & Phrases"}),x.jsx("ul",{className:"space-y-3",children:t.grammar_patterns.map((h,v)=>{const S=bg(v,m.theme),E=`pattern-dynamic-${v}`,A={...h,idClass:E,color:S,fullAnalysis:t};return x.jsx($R,{pattern:A,onNoteClick:y,isFocused:(i==null?void 0:i.idClass)===E},v)})})]})}),x.jsx(XR,{})]})}const Ng=5,zy=({error:t,onRetry:e})=>{const[i,l]=G.useState(!1),[s,f]=G.useState(0),m=(t==null?void 0:t.message)||"An unknown error occurred.";G.useEffect(()=>{const v=/rate limit|429/i.test(m);if(l(v),v){f(Ng);const S=setInterval(()=>{f(E=>E<=1?(clearInterval(S),0):E-1)},1e3);return()=>clearInterval(S)}else f(0)},[m]);const p=()=>{e&&(i&&f(Ng),e())},y=i?"Too many requests":"API Error",h=i?"You are analyzing sentences too quickly. Please wait a moment before trying again.":m;return x.jsx("div",{role:"alert",className:"p-4 bg-destructive-subtle-bg border-l-4 border-destructive rounded-r-lg shadow-md my-4 transition-all duration-300",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("i",{className:"bi bi-x-circle-fill text-xl text-destructive","aria-hidden":"true"})}),x.jsxs("div",{className:"ml-3 flex-1",children:[x.jsx("p",{className:"text-sm font-semibold text-destructive-subtle-text",children:y}),h&&x.jsx("div",{className:"mt-2 text-sm text-destructive-subtle-text/80",children:x.jsx("p",{children:h})}),e&&x.jsx("button",{onClick:p,disabled:s>0,className:"mt-3 text-xs font-semibold px-2 py-1 rounded-md border border-destructive-subtle-text text-destructive-subtle-text hover:bg-destructive-subtle-text/10 transition disabled:opacity-50 disabled:cursor-wait",children:s>0?`Try Again in ${s}s`:"Try Again"})]})]})})},Hy=({sentence:t,isLoading:e=!0})=>x.jsxs("div",{className:"relative p-4 bg-surface-soft rounded-lg min-h-36 animate-fade-in",children:[x.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl pr-8",children:x.jsx("p",{className:`text-2xl text-text-muted font-japanese transition-opacity duration-500 ${e?"opacity-50":"opacity-100"}`,children:t})}),e&&x.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:x.jsx("i",{className:"bi bi-arrow-repeat text-lg text-text-muted animate-spin",role:"status","aria-label":"Loading analysis"})})]}),QR=({entry:t,onExit:e,onSentenceChange:i,totalSentences:l,isVisible:s})=>{const f=t.readingProgress,[m,p]=G.useState(String(f+1));G.useEffect(()=>{p(String(f+1))},[f]);const y=()=>{let v=parseInt(m,10);(isNaN(v)||v<1)&&(v=1),v>l&&(v=l),i(v-1),p(String(v))},h=v=>{v.key==="Enter"&&(y(),v.currentTarget.blur())};return x.jsx("header",{className:`fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl z-30 bg-surface/90 backdrop-blur-md shadow-sm rounded-b-lg transition-transform duration-250 ease-in-out ${s?"translate-y-0":"-translate-y-full"}`,children:x.jsx("div",{className:"p-2",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("button",{onClick:e,title:"Exit Reading Mode",className:"p-2 rounded-full hover:bg-surface-hover transition-colors",children:x.jsx("i",{className:"bi bi-box-arrow-right text-2xl text-text-secondary"})}),x.jsxs("div",{className:"font-medium text-text-secondary flex items-center gap-1",children:[x.jsx("input",{type:"number",value:m,onChange:v=>p(v.target.value),onBlur:y,onKeyDown:h,min:"1",max:l,title:"Enter sentence number and press Enter",className:"w-12 text-center bg-surface-subtle rounded-md p-1 focus:ring-2 focus:ring-focus-ring focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),x.jsxs("span",{children:["/ ",l]})]})]})})})},jR=({isVisible:t,onNav:e,sentenceIndex:i,totalSentences:l})=>x.jsx("div",{className:`fixed top-3/4 -translate-y-1/2 left-0 right-0 z-20 pointer-events-none transition-all duration-300 ${t?"opacity-100":"opacity-0"}`,children:x.jsxs("div",{className:"w-full max-w-4xl mx-auto relative h-0",children:[x.jsx("button",{id:"reading-nav-prev",onClick:()=>e("prev"),disabled:i===0,"aria-label":"Previous sentence",className:`absolute top-0 left-2 md:left-auto md:right-full md:mr-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${t?"scale-100":"scale-90"}`,children:"←"}),x.jsx("button",{id:"reading-nav-next",onClick:()=>e("next"),disabled:i>=l-1,"aria-label":"Next sentence",className:`absolute top-0 right-2 md:right-auto md:left-full md:ml-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${t?"scale-100":"scale-90"}`,children:"→"})]})}),WR=()=>{const{state:t,dispatch:e}=wt(),{state:i}=Yt(),{dispatch:l}=xn(),[s,f]=G.useState(!1),[m,p]=G.useState(!0),y=G.useRef(null),h=G.useRef(null),v=G.useRef({x:0,y:0,time:0}),S=G.useRef(null),E=t.history.find(le=>le.id===t.currentTextEntryId),A=G.useMemo(()=>(E==null?void 0:E.text.split(`
`).flatMap(le=>{var Ye;return((Ye=le.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:Ye.filter(Ge=>Ge==null?void 0:Ge.trim()))||[]}))||[],[E==null?void 0:E.text]),M=(E==null?void 0:E.readingProgress)??0,k=A[M],L=A[M+1],{analysis:H,isLoading:Y,error:F,reanalyze:Q}=Py(E==null?void 0:E.id,k),{execute:z}=Vy(),W=G.useCallback(()=>{f(!0),y.current&&window.clearTimeout(y.current),y.current=window.setTimeout(()=>{f(!1)},4e3)},[]),Z=G.useCallback(()=>{p(!0),h.current&&window.clearTimeout(h.current),h.current=window.setTimeout(()=>{p(!1)},1500)},[]),ge=G.useCallback(le=>{const Ye=le==="prev"&&M>0,Ge=le==="next"&&M<A.length-1;(Ye||Ge)&&(e({type:"NAVIGATE_SENTENCE",payload:{direction:le}}),navigator.vibrate&&navigator.vibrate(10),Z())},[e,M,A.length,Z]),X=G.useCallback(le=>{e({type:"JUMP_TO_SENTENCE",payload:{index:le}})},[e]);G.useEffect(()=>{l({type:"HIDE_BOTTOM_SHEET"}),l({type:"HIDE_TOOLTIP"}),Z()},[k,l,Z]),G.useEffect(()=>{Z();const le=S.current;return le&&le.addEventListener("scroll",Z,{passive:!0}),()=>{y.current&&window.clearTimeout(y.current),h.current&&window.clearTimeout(h.current),le&&le.removeEventListener("scroll",Z)}},[Z]);const ve=le=>{Z();const Ye=le.touches[0];v.current={x:Ye.clientX,y:Ye.clientY,time:Date.now()}},oe=le=>{const Ye=le.changedTouches[0],{x:Ge,y:Ee,time:P}=v.current,{clientX:j,clientY:fe}=Ye,Me=Date.now()-P,b=j-Ge,V=fe-Ee;if(Ee<50&&V>30&&Math.abs(b)<30){W();return}if(Me<500&&Math.abs(b)>50&&Math.abs(V)<50){ge(b>0?"prev":"next");return}if(Me<250&&Math.abs(b)<10&&Math.abs(V)<10){Z();return}};return G.useEffect(()=>{var le;E&&L&&((le=E.analyzedSentences[L])!=null&&le[i.analysisDepth]||z(L,i.analysisDepth).then(Ge=>{Ge&&E&&e({type:"CACHE_ANALYSIS",payload:{entryId:E.id,sentence:L,depth:i.analysisDepth,analysis:Ge}})}))},[L,E,i.analysisDepth,z,e]),E?x.jsxs("div",{className:"reading-mode-view h-screen flex flex-col bg-surface",onTouchStart:ve,onTouchEnd:oe,onClick:Z,children:[x.jsx("div",{className:"fixed top-0 left-0 right-0 h-5 z-40",onClick:W}),x.jsx(QR,{entry:E,onExit:()=>e({type:"SET_VIEW",payload:Fe.Reader}),onSentenceChange:X,totalSentences:A.length,isVisible:s}),x.jsx(jR,{isVisible:m,onNav:ge,sentenceIndex:M,totalSentences:A.length}),x.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:x.jsx("div",{ref:S,className:"flex-1 overflow-y-auto min-h-0 no-scrollbar",children:k?F?x.jsx(zy,{error:F,onRetry:Q}):H?x.jsx(By,{analysis:H,onReanalyze:Q}):x.jsx(Hy,{sentence:k,isLoading:Y}):x.jsx("div",{className:"text-center p-8 text-text-muted",children:"End of text."})})})]}):x.jsx("div",{children:"Error: No text selected."})},ew=()=>{const{state:t,dispatch:e}=wt(),i=t.history.find(S=>S.id===t.currentTextEntryId),{analysis:l,isLoading:s,error:f,reanalyze:m}=Py(i==null?void 0:i.id,t.selectedSentence),p=G.useCallback(S=>{e({type:"SET_SELECTED_SENTENCE",payload:S})},[e]);if(!i)return G.useEffect(()=>{e({type:"RESET_VIEW"})},[e]),null;const y=()=>{i&&e({type:"START_EDITING",payload:i.id})},h=()=>{if(!i)return;const S=i.text.split(`
`).flatMap(M=>{var k;return((k=M.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:k.filter(L=>L==null?void 0:L.trim()))||[]}),E=t.selectedSentence?S.indexOf(t.selectedSentence):-1,A=E!==-1?E:i.readingProgress||0;e({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:{...i,readingProgress:A}}),e({type:"SET_VIEW",payload:Fe.ReadingMode})},v=i.text.split(`
`).map(S=>{var E;return((E=S.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:E.filter(A=>A==null?void 0:A.trim()))||[]});return x.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto md:grid md:grid-cols-2 md:overflow-hidden",children:[x.jsxs("div",{className:"p-6 flex flex-col md:h-full md:grid md:grid-rows-[auto_1fr] md:gap-y-4 md:min-w-0",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-0",children:[x.jsx("h2",{className:"text-xl font-bold text-text-primary break-words",title:i.title,children:i.title}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:y,title:"Edit Text",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-pencil-square text-xl"})}),x.jsx("button",{id:"start-reading-button",onClick:h,title:"Start Reading Mode",className:"inline-flex items-center justify-center p-2.5 rounded-full text-primary-text bg-accent hover:bg-accent/90 focus-ring shadow-sm",children:x.jsx("i",{className:"bi bi-book text-2xl"})})]})]}),x.jsx("div",{id:"reader-view-text-container",className:"reader-view-text bg-surface-soft border border-border rounded-lg p-4 sm:p-6 overflow-y-auto no-scrollbar min-h-0 max-h-[40vh]",children:v.map((S,E)=>x.jsx("p",{className:"text-lg sm:text-xl leading-relaxed mb-4 last:mb-0",children:S.length>0?S.map((A,M)=>{const k=t.selectedSentence===A,L=!!(i!=null&&i.analyzedSentences[A]),H=["clickable-sentence","cursor-pointer","rounded","p-1","-m-1","transition-colors","duration-200","hover:bg-accent-selected-bg/50"];return k?H.push("selected","bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","font-semibold"):L&&H.push("has-analysis"),x.jsxs(So.Fragment,{children:[x.jsx("span",{className:H.join(" "),onClick:()=>p(A),children:A})," "]},M)}):x.jsx(x.Fragment,{children:" "})},E))})]}),x.jsx("div",{className:"md:h-full md:overflow-y-auto no-scrollbar md:border-l border-border md:min-w-0",children:x.jsx("div",{className:"p-6 md:h-full",children:x.jsx("div",{id:"analysis-view",className:"md:h-full",children:t.selectedSentence?f?x.jsx(zy,{error:f,onRetry:m}):l?x.jsx(By,{analysis:l,onReanalyze:m}):x.jsx(Hy,{sentence:t.selectedSentence,isLoading:s}):x.jsx("div",{className:"text-center p-8 text-text-muted md:h-full flex items-center justify-center",children:"Select a sentence to begin."})})})})]})},tw=[0,4,8,24,48,168,336,720,2880],nw=1,iw=.5,ow=2.5,lw=.15,aw=.15,sw=.2;function $u(t,e){const i={...t};let l=t.srsStage,s=t.intervalModifier??nw;if(e===1){i.incorrectAnswerCount=(t.incorrectAnswerCount||0)+1;const f=Math.ceil(i.incorrectAnswerCount/2),m=t.srsStage>=5?2:1,p=f*m;l=Math.max(1,t.srsStage-p),s-=sw}else i.incorrectAnswerCount=0,e===2?s-=aw:(e===3||(s+=lw),l=t.srsStage+1);if(i.intervalModifier=Math.max(iw,Math.min(s,ow)),l>=9)i.srsStage=9,i.nextReviewDate=new Date("9999-12-31").getTime();else{i.srsStage=l;const m=tw[i.srsStage]*i.intervalModifier,p=new Date;i.nextReviewDate=new Date(p.getTime()+m*60*60*1e3).getTime()}return i}function To(t){return t===null?"null":t!==Object(t)?typeof t:{}.toString.call(t).slice(8,-1).toLowerCase()}function Ro(t){return To(t)!=="string"?!0:!t.length}function Lc(t="",e,i){if(Ro(t))return!1;const l=t.charCodeAt(0);return e<=l&&l<=i}const Mg={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},Fy={HEPBURN:"hepburn"},rw={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:Fy.HEPBURN},uw=65,cw=90,fw=65345,dw=65370,mw=65313,pw=65338,Yy=12353,hw=12438,gw=12449,yw=12540,vw=12539,xw=[65296,65305],Tw=[mw,pw],Sw=[fw,dw],_w=[65281,65295],Ew=[65306,65311],Cw=[65339,65343],Aw=[65371,65376],bw=[65504,65518],Nw=[12352,12447],Mw=[12448,12543],Rw=[65382,65439],ww=[12539,12540],Jy=[65377,65381],Dw=[12288,12351],Iw=[19968,40959],Uw=[13312,19903],kw=[Nw,Mw,Jy,Rw],Lw=[Dw,Jy,ww,_w,Ew,Cw,Aw,bw],Vw=[...kw,...Lw,Tw,Sw,xw,Iw,Uw];function Pw(t=""){return Vw.some(([e,i])=>Lc(t,e,i))}function Cs(t="",e){const i=To(e)==="regexp";return Ro(t)?!1:[...t].every(l=>{const s=Pw(l);return i?s||e.test(l):s})}var Rg=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ow(t,e){return!!(t===e||Rg(t)&&Rg(e))}function qw(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!Ow(t[i],e[i]))return!1;return!0}function Ky(t,e){e===void 0&&(e=qw);var i=null;function l(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];if(i&&i.lastThis===this&&e(s,i.lastArgs))return i.lastResult;var m=t.apply(this,s);return i={lastResult:m,lastArgs:s,lastThis:this},m}return l.clear=function(){i=null},l}var wg=Object.prototype.hasOwnProperty;function Dg(t,e,i){for(i of t.keys())if(fo(i,e))return i}function fo(t,e){var i,l,s;if(t===e)return!0;if(t&&e&&(i=t.constructor)===e.constructor){if(i===Date)return t.getTime()===e.getTime();if(i===RegExp)return t.toString()===e.toString();if(i===Array){if((l=t.length)===e.length)for(;l--&&fo(t[l],e[l]););return l===-1}if(i===Set){if(t.size!==e.size)return!1;for(l of t)if(s=l,s&&typeof s=="object"&&(s=Dg(e,s),!s)||!e.has(s))return!1;return!0}if(i===Map){if(t.size!==e.size)return!1;for(l of t)if(s=l[0],s&&typeof s=="object"&&(s=Dg(e,s),!s)||!fo(l[1],e.get(s)))return!1;return!0}if(i===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(i===DataView){if((l=t.byteLength)===e.byteLength)for(;l--&&t.getInt8(l)===e.getInt8(l););return l===-1}if(ArrayBuffer.isView(t)){if((l=t.byteLength)===e.byteLength)for(;l--&&t[l]===e[l];);return l===-1}if(!i||typeof t=="object"){l=0;for(i in t)if(wg.call(t,i)&&++l&&!wg.call(e,i)||!(i in e)||!fo(t[i],e[i]))return!1;return Object.keys(e).length===l}}return t!==t&&e!==e}const Zy=(t={})=>Object.assign({},rw,t);function Gw(t,e,i){const l=e;function s(p,y){if(p[y]!==void 0)return Object.assign({"":p[""]+y},p[y])}function f(p,y){const h=p.charAt(0);return m(Object.assign({"":h},l[h]),p.slice(1),y,y+1)}function m(p,y,h,v){if(!y)return i||Object.keys(p).length===1?p[""]?[[h,v,p[""]]]:[]:[[h,v,null]];if(Object.keys(p).length===1)return[[h,v,p[""]]].concat(f(y,v));const S=s(p,y.charAt(0));return S===void 0?[[h,v,p[""]]].concat(f(y,v)):m(S,y.slice(1),h,v+1)}return f(t,0)}function Vc(t){return Object.entries(t).reduce((e,[i,l])=>{const s=To(l)==="string";return e[i]=s?{"":l}:Vc(l),e},{})}function $y(t,e){return e.split("").reduce((i,l)=>(i[l]===void 0&&(i[l]={}),i[l]),t)}function Xy(t={}){const e={};return To(t)==="object"&&Object.entries(t).forEach(([i,l])=>{let s=e;i.split("").forEach(f=>{s[f]===void 0&&(s[f]={}),s=s[f]}),s[""]=l}),function(l){const s=JSON.parse(JSON.stringify(l));function f(m,p){return m===void 0||To(m)==="string"?p:Object.entries(p).reduce((y,[h,v])=>(y[h]=f(m[h],v),y),m)}return f(s,e)}}function Qy(t,e){return e?To(e)==="function"?e(t):Xy(e)(t):t}const Bw={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},zw={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},Ig={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},jy={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},Wy={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},Ug={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},Hw=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},Wy,jy),Fw={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},Yw={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function Jw(){const t=Vc(Bw),e=s=>$y(t,s);Object.entries(Ig).forEach(([s,f])=>{Object.entries(jy).forEach(([m,p])=>{e(s+m)[""]=f+p})}),Object.entries(zw).forEach(([s,f])=>{e(s)[""]=f}),Object.entries(Yw).forEach(([s,f])=>{Object.entries(Wy).forEach(([m,p])=>{const y=e(s+m);y[""]=f+p})}),["n","n'","xn"].forEach(s=>{e(s)[""]="ん"}),t.c=JSON.parse(JSON.stringify(t.k)),Object.entries(Ug).forEach(([s,f])=>{const m=s.slice(0,s.length-1),p=s.charAt(s.length-1),y=e(m);y[p]=JSON.parse(JSON.stringify(e(f)))});function i(s){return[...Object.entries(Ug),["c","k"]].reduce((f,[m,p])=>s.startsWith(p)?f.concat(s.replace(p,m)):f,[])}Object.entries(Hw).forEach(([s,f])=>{const m=S=>S.charAt(S.length-1),p=S=>S.slice(0,S.length-1),y=`x${s}`,h=e(y);h[""]=f;const v=e(`l${p(s)}`);v[m(s)]=h,i(s).forEach(S=>{["l","x"].forEach(E=>{const A=e(E+p(S));A[m(S)]=e(E+s)})})}),Object.entries(Fw).forEach(([s,f])=>{e(s)[""]=f});function l(s){return Object.entries(s).reduce((f,[m,p])=>(m?f[m]=l(p):f[m]=`っ${p}`,f),{})}return[...Object.keys(Ig),"c","y","w","j"].forEach(s=>{const f=t[s];f[s]=l(f)}),delete t.n.n,Object.freeze(JSON.parse(JSON.stringify(t)))}let Xu=null;function Kw(){return Xu==null&&(Xu=Jw()),Xu}const Zw=Xy({wi:"ゐ",we:"ゑ"});function $w(t){const e=JSON.parse(JSON.stringify(t));return e.n.n={"":"ん"},e.n[" "]={"":"ん"},e}function Xw(t=""){return Ro(t)?!1:Lc(t,uw,cw)}function ev(t=""){return Ro(t)?!1:t.charCodeAt(0)===yw}function Qw(t=""){return Ro(t)?!1:t.charCodeAt(0)===vw}function jw(t=""){return Ro(t)?!1:ev(t)?!0:Lc(t,Yy,hw)}function Ww(t=""){const e=[];return t.split("").forEach(i=>{if(ev(i)||Qw(i))e.push(i);else if(jw(i)){const l=i.charCodeAt(0)+(gw-Yy),s=String.fromCharCode(l);e.push(s)}else e.push(i)}),e.join("")}const Pc=Ky((t,e,i)=>{let l=Kw();return l=t?$w(l):l,l=e?Zw(l):l,i&&(l=Qy(l,i)),l},fo);function eD(t="",e={},i){let l;return i?l=e:(l=Zy(e),i=Pc(l.IMEMode,l.useObsoleteKana,l.customKanaMapping)),tD(t,l,i).map(s=>{const[f,m,p]=s;if(p===null)return t.slice(f);const y=l.IMEMode===Mg.HIRAGANA,h=l.IMEMode===Mg.KATAKANA||[...t.slice(f,m)].every(Xw);return y||!h?p:Ww(p)}).join("")}function tD(t="",e={},i){const{IMEMode:l,useObsoleteKana:s,customKanaMapping:f}=e;return i||(i=Pc(l,s,f)),Gw(t.toLowerCase(),i,!l)}let Vl=[];function nD(t){let e;const i=Object.assign({},Zy(t),{IMEMode:t.IMEMode||!0}),l=Pc(i.IMEMode,i.useObsoleteKana,i.customKanaMapping),s=[...Object.keys(l),...Object.keys(l).map(f=>f.toUpperCase())];return function({target:m}){m.value!==e&&m.dataset.ignoreComposition!=="true"&&iD(m,i,l,s)}}function iD(t,e,i,l,s){const[f,m,p]=sD(t.value,t.selectionEnd,l),y=eD(m,e,i);if(m!==y){const v=f.length+y.length,S=f+y+p;t.value=S,p.length?setTimeout(()=>t.setSelectionRange(v,v),1):t.setSelectionRange(v,v)}else t.value}function Qu({type:t,target:e,data:i}){/Mac/.test(window.navigator&&window.navigator.platform)&&(t==="compositionupdate"&&Cs(i)&&(e.dataset.ignoreComposition="true"),t==="compositionend"&&(e.dataset.ignoreComposition="false"))}function oD(t,e,i){Vl=Vl.concat({id:t,inputHandler:e,compositionHandler:i})}function lD({id:t}){Vl=Vl.filter(({id:e})=>e!==t)}function aD(t){return t&&Vl.find(({id:e})=>e===t.getAttribute("data-wanakana-id"))}function sD(t="",e=0,i=[]){let l,s,f;return e===0&&i.includes(t[0])?[l,s,f]=rD(t,i):e>0?[l,s,f]=uD(t,e):([l,s]=vs(t,m=>!i.includes(m)),[s,f]=vs(s,m=>!Cs(m))),[l,s,f]}function rD(t,e){return["",...vs(t,i=>e.includes(i)||!Cs(i,/[0-9]/))]}function uD(t="",e=0){const[i,l]=vs([...t.slice(0,e)].reverse(),s=>!Cs(s));return[l.reverse().join(""),i.split("").reverse().join(""),t.slice(e)]}function vs(t={},e=i=>!!i){const i=[],{length:l}=t;let s=0;for(;s<l&&e(t[s],s);)i.push(t[s]),s+=1;return[i.join(""),t.slice(s)]}const cD=({target:{value:t,selectionStart:e,selectionEnd:i}})=>console.log("input:",{value:t,selectionStart:e,selectionEnd:i}),fD=()=>console.log("compositionstart"),dD=({target:{value:t,selectionStart:e,selectionEnd:i},data:l})=>console.log("compositionupdate",{data:l,value:t,selectionStart:e,selectionEnd:i}),mD=()=>console.log("compositionend"),tv={input:cD,compositionstart:fD,compositionupdate:dD,compositionend:mD},pD=t=>{Object.entries(tv).forEach(([e,i])=>t.addEventListener(e,i))},hD=t=>{Object.entries(tv).forEach(([e,i])=>t.removeEventListener(e,i))},gD=["TEXTAREA","INPUT"];let kg=0;const yD=()=>(kg+=1,`${Date.now()}${kg}`);function vD(t={},e={},i=!1){if(!gD.includes(t.nodeName))throw new Error(`Element provided to Wanakana bind() was not a valid input or textarea element.
 Received: (${JSON.stringify(t)})`);if(t.hasAttribute("data-wanakana-id"))return;const l=nD(e),s=yD(),f=[{name:"data-wanakana-id",value:s},{name:"lang",value:"ja"},{name:"autoCapitalize",value:"none"},{name:"autoCorrect",value:"off"},{name:"autoComplete",value:"off"},{name:"spellCheck",value:"false"}],m={};f.forEach(p=>{m[p.name]=t.getAttribute(p.name),t.setAttribute(p.name,p.value)}),t.dataset.previousAttributes=JSON.stringify(m),t.addEventListener("input",l),t.addEventListener("compositionupdate",Qu),t.addEventListener("compositionend",Qu),oD(s,l,Qu),i===!0&&pD(t)}function xD(t,e=!1){const i=aD(t);if(i==null)throw new Error(`Element provided to Wanakana unbind() had no listener registered.
 Received: ${JSON.stringify(t)}`);const{inputHandler:l,compositionHandler:s}=i,f=JSON.parse(t.dataset.previousAttributes);Object.keys(f).forEach(m=>{f[m]?t.setAttribute(m,f[m]):t.removeAttribute(m)}),t.removeAttribute("data-previous-attributes"),t.removeAttribute("data-ignore-composition"),t.removeEventListener("input",l),t.removeEventListener("compositionstart",s),t.removeEventListener("compositionupdate",s),t.removeEventListener("compositionend",s),lD(i),e===!0&&hD(t)}let ju=null;const TD={あ:"a",い:"i",う:"u",え:"e",お:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",さ:"sa",し:"shi",す:"su",せ:"se",そ:"so",た:"ta",ち:"chi",つ:"tsu",て:"te",と:"to",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",は:"ha",ひ:"hi",ふ:"fu",へ:"he",ほ:"ho",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",や:"ya",ゆ:"yu",よ:"yo",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ざ:"za",じ:"ji",ず:"zu",ぜ:"ze",ぞ:"zo",だ:"da",ぢ:"ji",づ:"zu",で:"de",ど:"do",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",ゔぁ:"va",ゔぃ:"vi",ゔ:"vu",ゔぇ:"ve",ゔぉ:"vo"},SD={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~",ー:"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},_D=["あ","い","う","え","お","や","ゆ","よ"],Wu={ゃ:"ya",ゅ:"yu",ょ:"yo"},ED={ぃ:"yi",ぇ:"ye"},CD={ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},AD=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],bD={し:"sh",ち:"ch",じ:"j",ぢ:"j"},ND={っ:"",ゃ:"ya",ゅ:"yu",ょ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},Lg={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function MD(){return ju==null&&(ju=wD()),ju}function RD(t){switch(t){case Fy.HEPBURN:return MD();default:return{}}}function wD(){const t=Vc(TD),e=l=>$y(t,l),i=(l,s)=>{e(l)[""]=s};return Object.entries(SD).forEach(([l,s])=>{e(l)[""]=s}),[...Object.entries(Wu),...Object.entries(CD)].forEach(([l,s])=>{i(l,s)}),AD.forEach(l=>{const s=e(l)[""][0];Object.entries(Wu).forEach(([f,m])=>{i(l+f,s+m)}),Object.entries(ED).forEach(([f,m])=>{i(l+f,s+m)})}),Object.entries(bD).forEach(([l,s])=>{Object.entries(Wu).forEach(([f,m])=>{i(l+f,s+m[1])}),i(`${l}ぃ`,`${s}yi`),i(`${l}ぇ`,`${s}e`)}),t.っ=nv(t),Object.entries(ND).forEach(([l,s])=>{i(l,s)}),_D.forEach(l=>{i(`ん${l}`,`n'${e(l)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(t)))}function nv(t){return Object.entries(t).reduce((e,[i,l])=>{if(i)e[i]=nv(l);else{const s=l.charAt(0);e[i]=Object.keys(Lg).includes(s)?Lg[s]+l:l}return e},{})}Ky((t,e)=>{let i=RD(t);return e&&(i=Qy(i,e)),i},fo);function DD(t,e){const i=t?t.length:0,l=e?e.length:0;if(i===0)return l;if(l===0)return i;const s=Array.from({length:i+1},()=>Array(l+1).fill(0));for(let f=0;f<=i;f++)s[f][0]=f;for(let f=0;f<=l;f++)s[0][f]=f;for(let f=1;f<=i;f++)for(let m=1;m<=l;m++){const p=t[f-1]===e[m-1]?0:1;s[f][m]=Math.min(s[f-1][m]+1,s[f][m-1]+1,s[f-1][m-1]+p)}return s[i][l]}function ID(t,e){const i=t.trim().toLowerCase(),l=e.trim().toLowerCase();if(i===l)return!0;const s=l.split("/").map(f=>f.trim());return s.some(f=>i===f)?!0:s.some(f=>{const m=DD(i,f),p=Math.max(i.length,f.length);return p<=4?m<=1:p<=10?m<=2:m<=Math.floor(p*.2)})}const UD={"jp-en":{questionLabel:"Translate to English",answerPlaceholder:"Meaning",inputLang:"en",inputMode:"text",colorClass:"border-review-jp-en"},"kanji-read":{questionLabel:"What is the reading?",answerPlaceholder:"ひらがな",inputLang:"ja",inputMode:"text",colorClass:"border-review-kanji-read"}},iv=({item:t,quizType:e,onComplete:i})=>{const[l,s]=G.useState(""),[f,m]=G.useState(!1),[p,y]=G.useState(!1),h=G.useRef(null),v=G.useRef(null);G.useEffect(()=>{const Z=h.current;if(Z&&(Z.focus(),e==="kanji-read"))return vD(Z,{IMEMode:"toHiragana"}),()=>{xD(Z)}},[e]),G.useEffect(()=>{var Z;f&&((Z=v.current)==null||Z.focus())},[f]);const{content:S}=t,{questionLabel:E,answerPlaceholder:A,inputLang:M,colorClass:k}=UD[e],L=G.useMemo(()=>x.jsx("span",{className:"font-japanese",children:S.japanese_segment}),[S]),H=()=>{var X;const Z=((X=h.current)==null?void 0:X.value)||"";if(!Z.trim())return;s(Z);let ge=!1;switch(e){case"jp-en":ge=ID(Z,S.english_equivalent);break;case"kanji-read":ge=S.reading.split("/").map(oe=>oe.trim()).includes(Z.trim());break}y(ge),m(!0)},Y=Z=>{Z.key==="Enter"&&(Z.preventDefault(),f?i(p):setTimeout(H,0))},F=Z=>{Z.key==="Enter"&&(Z.preventDefault(),i(p))},Q=p?"bg-accent-subtle-bg":"bg-destructive-subtle-bg",z=p?"border-accent":"border-destructive",W=p?"text-accent-text":"text-destructive-subtle-text";return x.jsxs("div",{className:`relative w-full flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg border-t-4 ${k}`,children:[x.jsx("div",{className:"absolute top-3 left-3 text-xs font-bold uppercase tracking-wider opacity-60",style:{color:`var(--color-review-${e}-rgb)`},children:E}),x.jsx("div",{className:"text-5xl md:text-7xl font-semibold text-center text-text-primary p-4 mb-4",children:L}),f?x.jsxs("div",{className:`w-full text-center p-4 rounded-lg border-2 animate-fade-in ${Q} ${z}`,children:[x.jsxs("div",{className:"flex justify-center items-center gap-2 mb-4",children:[p?x.jsx("i",{className:"bi bi-check-circle-fill text-2xl text-accent-text"}):x.jsx("i",{className:"bi bi-x-circle-fill text-2xl text-destructive-subtle-text"}),x.jsx("p",{className:`text-xl font-bold ${W}`,children:p?"Correct!":"Incorrect"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"text-2xl font-japanese font-semibold",children:[x.jsx(Mo,{base:S.japanese_segment,reading:S.reading}),x.jsx(Oy,{text:S.japanese_segment})]}),x.jsx("p",{className:"text-text-secondary text-lg",children:S.english_equivalent})]}),!p&&x.jsxs("p",{className:"mt-2",children:["Your answer: ",x.jsx("span",{className:"font-semibold",children:l})]}),x.jsx("button",{ref:v,onKeyDown:F,onClick:()=>i(p),className:"mt-6 w-full btn-primary text-lg",children:"Continue"})]}):x.jsxs("div",{className:"w-full max-w-sm flex flex-col items-center gap-4",children:[x.jsx("input",{ref:h,type:"text",lang:M,value:l,onChange:Z=>s(Z.target.value),onKeyDown:Y,placeholder:A,className:"w-full text-center text-xl p-3 rounded-lg border-2 border-border bg-surface focus:border-primary focus:ring-primary transition",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),x.jsx("button",{onClick:H,className:"btn-secondary px-8 py-2 text-base",children:"Check"})]})]})},kD=({onExit:t})=>x.jsx("div",{className:"w-full flex justify-end mb-4",children:x.jsx("button",{"data-action":"review-exit",onClick:t,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})}),LD=({item:t,onReview:e,cardKey:i})=>{const{content:l}=t,[s,f]=G.useState(!1);G.useEffect(()=>{f(!1)},[t,i]);const{original_sentence:m,constituent_text:p,pattern_name:y,explanation:h}=l,v=m&&p?m.replace(p,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${p}</span>`):y,S=x.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-8 leading-relaxed",dangerouslySetInnerHTML:{__html:v}}),E=x.jsxs("div",{className:"text-center space-y-6",children:[x.jsx("div",{className:"text-xl md:text-2xl font-japanese font-medium text-text-primary leading-relaxed p-4 bg-surface rounded-xl border border-border-subtle",dangerouslySetInnerHTML:{__html:v}}),x.jsxs("div",{children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-2 text-accent",children:y}),x.jsx("p",{className:"text-lg text-text-secondary",children:h})]})]});return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:s?E:S}),s?x.jsx("div",{className:"mt-8 w-full",children:x.jsxs("div",{children:[x.jsx("p",{className:"text-center text-text-muted mb-4 text-sm",children:"How well did you remember?"}),x.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[x.jsxs("button",{onClick:()=>e(1),"data-action":"review-quality-1",className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:["Again ",x.jsx("span",{className:"text-xs font-normal",children:"(1)"})]}),x.jsxs("button",{onClick:()=>e(2),"data-action":"review-quality-2",className:"text-lg font-bold py-4 px-4 rounded-xl bg-pos-auxiliary-bg text-pos-auxiliary-text hover:opacity-80 focus-ring transition",children:["Hard ",x.jsx("span",{className:"text-xs font-normal",children:"(2)"})]}),x.jsxs("button",{onClick:()=>e(3),"data-action":"review-quality-3",className:"text-lg font-bold py-4 px-4 rounded-xl bg-surface-hover text-text-secondary hover:bg-surface-hover/80 focus-ring transition",children:["Good ",x.jsx("span",{className:"text-xs font-normal",children:"(3)"})]}),x.jsxs("button",{onClick:()=>e(4),"data-action":"review-quality-4",className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:["Easy ",x.jsx("span",{className:"text-xs font-normal",children:"(4)"})]})]})]})}):x.jsx("div",{className:"mt-8 w-full flex items-center",children:x.jsxs("button",{onClick:()=>f(!0),"data-action":"review-show-answer",className:"w-full max-w-xs mx-auto btn-primary text-lg",children:["Show Answer ",x.jsx("span",{className:"text-sm font-normal text-primary-text/80 ml-2",children:"(Space)"})]})})]})},VD=({item:t,quizType:e,onReview:i,onExit:l,cardKey:s})=>x.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[x.jsx(kD,{onExit:l}),t.type==="word"&&e?x.jsx(iv,{item:t,quizType:e,onComplete:f=>i(f)},s):x.jsx(LD,{item:t,onReview:f=>i(f),cardKey:s},s)]}),PD=t=>{if(t===null||!isFinite(t))return"";const e=Date.now(),i=t-e;if(i<=0)return"soon";const l=i/(1e3*60),s=l/60,f=s/24;return f>=2?`in ${Math.round(f)} days`:f>=1?"tomorrow":s>=2?`in ${Math.round(s)} hours`:s>=1?"in an hour":l>=2?`in ${Math.round(l)} minutes`:"in a minute"},OD=({learnedCount:t,reviewedCount:e,onManage:i,onExit:l,onRestart:s,hasMoreItems:f,nextReviewTimestamp:m})=>{const y=t+e>0,h=PD(m),v=f?"Round Complete!":y?"Session Complete!":"All Caught Up!",S=y?x.jsxs("div",{className:"mt-2 text-text-secondary space-y-1",children:[x.jsxs("p",{children:["Great work! You learned ",x.jsx("strong",{className:"text-primary",children:t})," new items and reviewed ",x.jsx("strong",{className:"text-accent",children:e})," items."]}),f&&x.jsx("p",{children:"There are more items ready for your next round."}),!f&&h&&x.jsxs("p",{children:["Your next review is due ",h,"."]})]}):x.jsxs("p",{className:"mt-2 text-text-secondary",children:["There are no new words or reviews due right now.",!f&&h&&` Your next review is due ${h}.`]});return x.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[x.jsx("i",{className:"bi bi-check-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:v}),S,x.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[f?x.jsx("button",{onClick:s,className:"btn-primary",children:"Start Next Round"}):x.jsx("button",{onClick:l,className:"btn-secondary",children:"Back to Analyzer"}),x.jsx("button",{onClick:i,className:"btn-ghost",children:"Manage Deck"})]})]})},qD=({onManage:t,onExit:e})=>x.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[x.jsx("i",{className:"bi bi-journal-bookmark text-6xl text-text-muted/50 mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Review Deck is Empty"}),x.jsx("p",{className:"mt-2 text-text-secondary",children:'Add items by clicking the "Add to Deck" button on words or grammar patterns.'}),x.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[x.jsx("button",{onClick:e,className:"btn-secondary",children:"Back to Analyzer"}),x.jsx("button",{onClick:t,className:"btn-ghost",children:"Manage Deck"})]})]}),GD=({item:t,onDelete:e})=>{const[i,l]=So.useState(!1);let s,f;if(t.type==="word"){const{japanese_segment:m,english_equivalent:p,reading:y,category:h,pitch_accent:v}=t.content;s=x.jsxs(x.Fragment,{children:[x.jsx("strong",{className:"font-japanese text-lg",children:m})," ",x.jsxs("span",{className:"text-text-muted",children:["- ",p]})]}),f=x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"relative inline-block text-xl font-japanese font-semibold p-2 bg-surface-subtle rounded-lg",style:{paddingTop:"22px"},children:[x.jsx(qy,{reading:y,pitchAccent:v}),x.jsx(Mo,{base:m,reading:y,interactiveKanji:!0})]}),x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3 text-sm mt-2",children:[x.jsxs("div",{children:[x.jsx("strong",{className:"font-medium text-text-secondary block",children:"Meaning"}),x.jsx("p",{className:"text-text-primary",children:p})]}),x.jsxs("div",{children:[x.jsx("strong",{className:"font-medium text-text-secondary block",children:"Category"}),x.jsx("p",{className:"text-text-primary capitalize",children:h.replace(/_/g," ").toLowerCase()})]}),x.jsxs("div",{className:"sm:col-span-2",children:[x.jsx("strong",{className:"font-medium text-text-secondary block",children:"Reading"}),x.jsx("p",{className:"text-text-primary font-japanese",children:y})]})]})]})}else{const{pattern_name:m,constituent_text:p,explanation:y}=t.content;p?s=x.jsxs(x.Fragment,{children:[x.jsx("strong",{className:"font-japanese text-lg",children:p})," ",x.jsxs("span",{className:"text-text-muted",children:["- ",m]})]}):s=x.jsx("strong",{className:"font-japanese text-lg",children:m}),f=x.jsx("p",{className:"text-sm text-text-secondary",children:y})}return x.jsxs("li",{className:"deck-item bg-surface-soft rounded-lg shadow-sm transition-shadow hover:shadow-md",children:[x.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>l(!i),children:[x.jsx("div",{className:"flex-grow pr-2",children:s}),x.jsxs("div",{className:"flex items-center flex-shrink-0 ml-4",children:[x.jsx("button",{onClick:m=>{m.stopPropagation(),e(t.id)},title:"Delete Item",className:"btn-ghost p-2 text-destructive/70 hover:bg-destructive-subtle-bg hover:text-destructive",children:x.jsx("i",{className:"bi bi-trash3 text-xl"})}),x.jsx("i",{className:`bi bi-chevron-down text-xl text-text-muted transition-transform ${i?"rotate-180":""}`})]})]}),i&&x.jsx("div",{className:"p-4 border-t border-border-subtle bg-surface",children:f})]})},BD=({items:t,onDelete:e,onExit:i,title:l})=>x.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsxs("h2",{className:"text-2xl font-bold text-text-primary truncate pr-4",title:l,children:[l," (",t.length," items)"]}),x.jsx("button",{onClick:i,title:"Back to Analyzer",className:"btn-secondary flex-shrink-0",children:"Back"})]}),t.length===0?x.jsx("p",{className:"text-center text-text-muted p-8",children:"Your deck is empty."}):x.jsx("ul",{className:"space-y-3",children:t.map(s=>x.jsx(GD,{item:s,onDelete:e},s.id))})]}),zD=({item:t})=>{if(t.type==="word")return x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:x.jsx(Mo,{base:t.content.japanese_segment,reading:t.content.reading||""})}),x.jsx("div",{className:"text-lg text-text-secondary mb-6",children:t.content.english_equivalent}),x.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",t.content.category.replace(/_/g," ").replace(/-/g,", ")]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",t.content.reading]})]})]});const{original_sentence:e,constituent_text:i,pattern_name:l,explanation:s}=t.content,f=e&&i?e.replace(i,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${i}</span>`):l;return x.jsxs("div",{className:"text-center",children:[(e||i)&&x.jsx("div",{className:"text-xl md:text-2xl font-japanese font-medium text-center text-text-primary p-2 leading-relaxed mb-6 pb-6 border-b border-border-subtle",dangerouslySetInnerHTML:{__html:f}}),x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:l}),x.jsx("p",{className:"text-lg text-text-secondary",children:s})]})},HD=({item:t,onExit:e,currentIndex:i,totalInChunk:l,onNext:s,onPrev:f,onStartQuiz:m})=>{const p=i===0,y=i===l-1;return x.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[x.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[x.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[i+1," / ",l]}),x.jsx("button",{onClick:e,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),x.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:x.jsx(zD,{item:t})}),x.jsxs("div",{className:"mt-8 w-full flex items-center justify-center gap-4",children:[x.jsx("button",{onClick:f,disabled:p,className:"p-4 rounded-full bg-surface-hover text-text-secondary disabled:opacity-50 transition",children:x.jsx("i",{className:"bi bi-arrow-left text-2xl"})}),y?x.jsx("button",{onClick:m,className:"btn-primary text-xl px-10 py-4",children:"Start Quiz!"}):x.jsx("button",{onClick:s,className:"p-4 rounded-full bg-surface-hover text-text-secondary transition",children:x.jsx("i",{className:"bi bi-arrow-right text-2xl"})})]})]})},FD=({item:t,onAnswer:e,cardKey:i})=>{const[l,s]=G.useState(!1);G.useEffect(()=>{s(!1)},[t,i]);const{content:f}=t,{original_sentence:m,constituent_text:p,pattern_name:y,explanation:h}=f,v=m&&p?m.replace(p,`<strong class="text-accent-text">${p}</strong>`):y,S=x.jsxs("div",{className:"text-xl md:text-2xl font-japanese font-medium text-center text-text-primary p-4 leading-relaxed",children:[x.jsx("p",{className:"mb-2 text-sm text-text-muted",children:"In sentence:"}),x.jsx("div",{dangerouslySetInnerHTML:{__html:v}}),x.jsxs("p",{className:"mt-6 text-base text-text-secondary",children:["What does ",x.jsx("strong",{className:"text-accent-text",children:y})," mean?"]})]}),E=x.jsxs("div",{className:"text-center space-y-4",children:[x.jsx("div",{className:"text-lg font-japanese text-text-primary p-4 leading-relaxed bg-surface rounded-md border border-border-subtle",dangerouslySetInnerHTML:{__html:v}}),x.jsxs("div",{children:[x.jsx("div",{className:"text-2xl font-japanese font-semibold mb-2 text-accent",children:y}),x.jsx("p",{className:"text-base text-text-secondary",children:h})]})]});return x.jsxs("div",{className:"w-full flex flex-col items-center",children:[x.jsx("div",{className:"relative w-full min-h-[15rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg border-t-4 border-pos-conjunction-bg/50",children:l?E:S}),x.jsx("div",{className:"mt-6 w-full max-w-sm",children:l?x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsx("button",{onClick:()=>e(!1),className:"text-lg font-bold py-3 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:"Forgot"}),x.jsx("button",{onClick:()=>e(!0),className:"text-lg font-bold py-3 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:"Remembered"})]}):x.jsx("button",{onClick:()=>s(!0),className:"w-full btn-primary text-lg",children:"Show Answer"})})]})},YD=({quizQuestion:t,onExit:e,onAnswer:i,remainingCount:l,cardKey:s})=>{const{item:f,quizType:m}=t;return x.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[x.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[x.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[l," to go"]}),x.jsx("button",{onClick:e,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),m?x.jsx(iv,{item:f,quizType:m,onComplete:p=>i(t,p)},s):x.jsx(FD,{item:f,onAnswer:p=>i(t,p),cardKey:s},s)]})},JD=({onContinue:t,onExit:e,hasMoreChunks:i,hasReviews:l})=>{const s=!i&&!l,f=s?"Session Complete!":"Chunk Complete!",m=s?"You've finished all learning and review items for now.":"Great work! You've learned this set of items.",p=s?"See Summary":"Continue";return x.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto flex flex-col h-full justify-center",children:[x.jsx("i",{className:"bi bi-patch-check-fill text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:f}),x.jsx("p",{className:"mt-2 text-text-secondary",children:m}),x.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[x.jsx("button",{onClick:e,className:"btn-secondary",children:"Finish for Now"}),x.jsx("button",{onClick:t,className:`btn-primary text-lg ${s?"px-8 py-3":""}`,children:p})]})]})},KD=({newCount:t,reviewCount:e,onStartLearning:i,onStartReviewing:l,onExit:s})=>{const f=t>0,m=e>0;return x.jsxs("div",{className:"text-center py-6 px-6 max-w-lg mx-auto flex flex-col h-full",children:[x.jsx("div",{className:"w-full flex justify-end mb-4",children:x.jsx("button",{"data-action":"review-exit",onClick:s,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})}),x.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center",children:[x.jsx("i",{className:"bi bi-play-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Ready for your session?"}),x.jsxs("div",{className:"mt-8 flex flex-col gap-4 w-full max-w-xs",children:[f&&x.jsxs("button",{onClick:i,className:"btn-primary text-lg font-semibold px-8 py-3",children:["Learn ",t," new item",t>1?"s":""]}),m&&x.jsxs("button",{onClick:l,className:`${f?"btn-secondary":"btn-primary"} text-lg font-semibold px-8 py-3`,children:["Review ",e," due item",e>1?"s":""]})]})]})]})},Vg=5,ZD=()=>{const{state:t,dispatch:e}=wt(),{state:i}=Yt(),{showConfirmation:l}=Eo(),[s,f]=G.useState(0),[m,p]=G.useState("LOADING"),[y,h]=G.useState("STUDY"),[v,S]=G.useState({newItemsForSession:[],allDueReviewItems:[]}),[E,A]=G.useState([]),[M,k]=G.useState([]),[L,H]=G.useState(new Set),[Y,F]=G.useState(0),[Q,z]=G.useState(0),[W,Z]=G.useState([]),[ge,X]=G.useState({learned:0,reviewed:0}),ve=G.useMemo(()=>{const K=t.reviewDeck.filter(ee=>t.currentTextEntryId?ee.textEntryId===t.currentTextEntryId||!ee.textEntryId:!0).filter(ee=>ee.srsStage>0&&ee.srsStage<9);if(K.length===0)return null;const J=K.map(ee=>ee.nextReviewDate);return Math.min(...J)},[t.reviewDeck,t.currentTextEntryId]),oe=G.useCallback(()=>{const V=Date.now(),K=t.reviewDeck.filter(Re=>t.currentTextEntryId?Re.textEntryId===t.currentTextEntryId||!Re.textEntryId:!0),J=K.filter(Re=>Re.srsStage===0).sort((Re,Ve)=>Re.addedAt-Ve.addedAt),ee=K.filter(Re=>Re.srsStage>0&&Re.nextReviewDate<=V).sort((Re,Ve)=>Re.nextReviewDate-Ve.nextReviewDate),ce=J.slice(0,i.newWordsPerDay);S({newItemsForSession:ce,allDueReviewItems:ee});const ae=[];for(let Re=0;Re<ce.length;Re+=Vg)ae.push(ce.slice(Re,Re+Vg));A(ae),K.length===0?p("EMPTY"):ce.length===0&&ee.length===0?p("COMPLETE"):p("START")},[t.reviewDeck,t.currentTextEntryId,i.newWordsPerDay]);G.useEffect(()=>{(m==="LOADING"||m!=="LEARNING"&&m!=="REVIEW"&&m!=="MANAGE")&&(F(0),z(0),Z([]),k([]),f(0),X({learned:0,reviewed:0}),h("STUDY"),oe())},[m,oe]),G.useEffect(()=>{m==="REVIEW"&&M.length===0&&ge.reviewed>0&&oe()},[M,m,ge.reviewed,oe]);const le=()=>{t.currentTextEntryId?e({type:"SET_VIEW",payload:Fe.Reader}):e({type:"RESET_VIEW"})},Ye=()=>{E.length>0?p("LEARNING"):oe()},Ge=()=>{if(v.allDueReviewItems.length>0){H(new Set);const V=v.allDueReviewItems.map(K=>{let J;if(K.type==="word"){const ee=["jp-en"];/[一-龯]/.test(K.content.japanese_segment)&&ee.push("kanji-read"),J=ee[Math.floor(Math.random()*ee.length)]}return{item:K,quizType:J}});k(V),p("REVIEW")}else oe()},Ee=()=>{const V=E[Y];if(V){const K=[];V.forEach(J=>{J.type==="word"?(K.push({item:J,quizType:"jp-en"}),/[一-龯]/.test(J.content.japanese_segment)&&K.push({item:J,quizType:"kanji-read"})):J.type==="grammar"&&K.push({item:J})}),Z(K.sort(()=>.5-Math.random())),h("QUIZ")}},P=(V,K)=>{const J=[...W],ee=J.shift();if(K||J.push(ee),J.length===0){const ce=E[Y];ce.forEach(ae=>{const Re=$u(ae,3);e({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:Re})}),X(ae=>({...ae,learned:ae.learned+ce.length})),h("CHUNK_COMPLETE")}else Z(J);f(ce=>ce+1)},j=()=>{Y<E.length-1?(F(V=>V+1),z(0),h("STUDY")):v.allDueReviewItems.length>0?Ge():oe()},fe=V=>{const K=M[0];if(!K)return;const{item:J}=K;let ee;if(typeof V=="boolean"?ee=V?3:1:ee=V,ee===1){if(!L.has(J.id)){const ce=$u(J,ee);e({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:ce}),H(ae=>new Set(ae).add(J.id))}k(ce=>[...ce.slice(1),K])}else if(L.has(J.id))X(ce=>({...ce,reviewed:ce.reviewed+1})),k(ce=>ce.slice(1));else{const ce=$u(J,ee);e({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:ce}),X(ae=>({...ae,reviewed:ae.reviewed+1})),k(ae=>ae.slice(1))}f(ce=>ce+1)},Me=V=>{l("Are you sure you want to delete this item?",()=>{e({type:"REMOVE_REVIEW_ITEM",payload:V})},{confirmText:"Delete"})},b=G.useMemo(()=>t.history.find(V=>V.id===t.currentTextEntryId),[t.history,t.currentTextEntryId]);switch(m){case"LOADING":return x.jsx("div",{className:"p-6 text-center text-text-muted",children:"Loading review session..."});case"START":return x.jsx(KD,{newCount:v.newItemsForSession.length,reviewCount:v.allDueReviewItems.length,onStartLearning:Ye,onStartReviewing:Ge,onExit:le});case"LEARNING":{const V=E[Y];if(!V)return oe(),null;switch(y){case"STUDY":return x.jsx(HD,{item:V[Q],onExit:le,currentIndex:Q,totalInChunk:V.length,onNext:()=>z(K=>K+1),onPrev:()=>z(K=>K-1),onStartQuiz:Ee});case"QUIZ":{const K=W[0];return K?x.jsx(YD,{quizQuestion:K,onExit:le,onAnswer:P,remainingCount:W.length,cardKey:s}):null}case"CHUNK_COMPLETE":return x.jsx(JD,{onContinue:j,onExit:le,hasMoreChunks:Y<E.length-1,hasReviews:v.allDueReviewItems.length>0})}}case"REVIEW":{const V=M[0];return V?x.jsx(VD,{item:V.item,quizType:V.quizType,onReview:fe,onExit:le,cardKey:s}):x.jsx("div",{className:"p-6 text-center text-text-muted",children:"Loading next review..."})}case"COMPLETE":{const V=v.newItemsForSession.length>0||v.allDueReviewItems.length>0;return x.jsx(OD,{learnedCount:ge.learned,reviewedCount:ge.reviewed,onManage:()=>p("MANAGE"),onExit:le,nextReviewTimestamp:ve,hasMoreItems:V,onRestart:oe})}case"EMPTY":return x.jsx(qD,{onManage:()=>p("MANAGE"),onExit:le});case"MANAGE":{const V=t.reviewDeck.filter(J=>t.currentTextEntryId?J.textEntryId===t.currentTextEntryId||!J.textEntryId:!0),K=t.currentTextEntryId&&b?`Deck for "${b.title}"`:"Full Review Deck";return x.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto no-scrollbar",children:x.jsx(BD,{items:V,onDelete:Me,onExit:oe,title:K})})}default:return x.jsx("div",{className:"p-6 text-center text-text-muted",children:"An unexpected error occurred."})}};function $D({entry:t}){const{dispatch:e}=wt(),{dispatch:i}=xn(),{showConfirmation:l}=Eo(),s=()=>{i({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),e({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:t.id}),e({type:"SET_VIEW",payload:Fe.Reader})},f=m=>{m.stopPropagation(),l(`Are you sure you want to delete "${t.title}"?`,()=>{e({type:"REMOVE_TEXT_ENTRY",payload:t.id})},{confirmText:"Delete"})};return x.jsxs("li",{className:"text-entry-item group p-4 hover:bg-surface-hover transition-colors flex justify-between items-center",children:[x.jsxs("div",{className:"flex-grow pr-4 truncate cursor-pointer",onClick:s,children:[x.jsx("span",{className:"font-medium text-sm pointer-events-none text-text-primary",title:t.title,children:t.title}),x.jsxs("span",{className:"block text-xs text-text-muted mt-1 pointer-events-none",children:["Updated: ",new Date(t.updatedAt).toLocaleString()]})]}),x.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:x.jsx("button",{className:"p-2 rounded-full hover:bg-destructive-subtle-bg text-destructive/70 hover:text-destructive transition-colors",title:"Delete Text",onClick:f,children:x.jsx("i",{className:"bi bi-trash3 text-xl"})})})]})}function XD(){const{state:t,dispatch:e}=wt(),{state:i,dispatch:l}=xn(),{showConfirmation:s}=Eo(),f=()=>l({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),m=()=>{t.history.length!==0&&s("Are you sure you want to delete all your saved texts? This cannot be undone.",()=>{e({type:"CLEAR_HISTORY"})},{confirmText:"Delete All"})};return i.isHistoryPanelOpen?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30 transition-opacity",onClick:f}),x.jsxs("div",{className:"fixed top-0 right-0 h-full w-full max-w-md glass-morphism shadow-2xl z-40 flex flex-col border-l border-border transition-transform duration-300 ease-in-out",style:{transform:"translateX(0%)"},children:[x.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-border flex-shrink-0",children:[x.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"My Texts"}),x.jsxs("div",{className:"flex items-center gap-2",children:[t.history.length>0&&x.jsx("button",{title:"Delete All Texts",className:"p-2 rounded-lg text-text-muted hover:bg-destructive-subtle-bg hover:text-destructive transition-colors",onClick:m,children:x.jsx("i",{className:"bi bi-trash3 text-xl"})}),x.jsx("button",{title:"Close Panel",className:"btn-ghost",onClick:f,children:x.jsx("i",{className:"bi bi-x-lg text-xl"})})]})]}),x.jsx("div",{className:"flex-grow overflow-y-auto no-scrollbar",children:t.history.length>0?x.jsx("ul",{className:"divide-y divide-border",children:t.history.map(p=>x.jsx($D,{entry:p},p.id))}):x.jsxs("div",{className:"text-center p-8",children:[x.jsx("i",{className:"bi bi-file-earmark-text text-5xl text-text-muted/50 mx-auto mb-4","aria-hidden":"true"}),x.jsx("p",{className:"text-text-muted",children:"You have no saved texts yet."}),x.jsx("p",{className:"text-sm text-text-muted/70 mt-1",children:"Start by analyzing some Japanese text!"})]})})]})]}):null}const is=({label:t,shortcut:e,checked:i,onChange:l,id:s})=>x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("label",{htmlFor:s,className:"text-sm font-medium text-text-secondary cursor-pointer",children:[t," ",e&&x.jsxs("span",{className:"text-xs text-text-muted",children:["(",e,")"]})]}),x.jsxs("label",{htmlFor:s,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-surface-subtle transition-colors focus-within:outline-none focus-within:ring-2 focus-within:ring-focus-ring focus-within:ring-offset-2 cursor-pointer",children:[x.jsx("input",{type:"checkbox",id:s,className:"sr-only peer",checked:i,onChange:l}),x.jsx("span",{className:"ml-1 inline-block h-4 w-4 transform rounded-full bg-surface transition-transform peer-checked:translate-x-5 peer-checked:bg-primary shadow-sm"})]})]});function QD({setIsOpen:t}){const{state:e,dispatch:i}=Yt(),{dispatch:l}=wt(),{showAlert:s,showConfirmation:f}=Eo(),m=G.useRef(null),[p,y]=G.useState(""),[h,v]=G.useState(!1);G.useEffect(()=>{const L=H=>{H.key==="Escape"&&t(!1)};return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[t]),G.useEffect(()=>{y(e.userApiKey||"")},[e.userApiKey]);const S=L=>{i({type:"UPDATE_SETTINGS",payload:L})},E=()=>{S({userApiKey:p}),s("API Key settings updated.")},A=async L=>{var F;const H=(F=L.target.files)==null?void 0:F[0];if(!H)return;const Y=new FileReader;Y.onload=Q=>{var z;try{const W=JSON.parse((z=Q.target)==null?void 0:z.result);if(!W.history||!W.settings||!W.reviewDeck)throw new Error("Invalid backup file structure.");f("Importing will overwrite your current history, review deck, and settings. Are you sure you want to continue?",async()=>{try{await Promise.all([tc(),Fg()]),await Promise.all([...W.history.map(Z=>ao(Z)),...W.reviewDeck.map(Z=>nc(Z)),Yg(W.settings)]),l({type:"SET_HISTORY",payload:W.history||[]}),l({type:"SET_REVIEW_DECK",payload:W.reviewDeck||[]}),i({type:"UPDATE_SETTINGS",payload:W.settings}),s("Import successful!",{onOk:()=>t(!1)}),l({type:"RESET_VIEW"})}catch(Z){s(`Import failed during database operation: ${Z instanceof Error?Z.message:"Unknown error."}`,{onOk:()=>t(!1)})}},{confirmText:"Import",confirmClass:"bg-accent hover:bg-accent/90"})}catch(W){s(`Import failed: ${W instanceof Error?W.message:"Could not read file."}`,{onOk:()=>t(!1)})}finally{L.target.value=""}},Y.readAsText(H)},M=async()=>{try{const[L,H,Y]=await Promise.all([zg(),Hg(),bc()]),F={version:"3.0-indexeddb",exportedAt:Date.now(),history:L,reviewDeck:H,settings:Y},Q=JSON.stringify(F,null,2),z=new Blob([Q],{type:"application/json"}),W=URL.createObjectURL(z),Z=document.createElement("a");Z.href=W;const ge=new Date().toISOString().split("T")[0];Z.download=`japanese-analyzer-backup-${ge}.json`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(W)}catch(L){s(`Export failed: ${L instanceof Error?L.message:"Could not read data from database."}`)}},k=zp.indexOf(e.analysisDepth);return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-[80]",onClick:()=>t(!1)}),x.jsxs("div",{ref:m,className:"fixed top-20 right-4 flex flex-col w-[95vw] max-w-sm glass-morphism rounded-xl shadow-2xl ring-1 ring-border-subtle z-[90] origin-top-right animate-fade-in max-h-[calc(100vh-12rem)]",children:[x.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-border-subtle flex-shrink-0",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Settings"}),x.jsx("button",{onClick:()=>t(!1),className:"btn-ghost p-1",title:"Close Settings (Esc)",children:x.jsx("i",{className:"bi bi-x-lg text-xl"})})]}),x.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto no-scrollbar",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3",children:[x.jsx(is,{id:"pitch-accent-checkbox",label:"Pitch Accent",checked:e.showPitchAccent,onChange:L=>S({showPitchAccent:L.target.checked})}),x.jsx(is,{id:"furigana-checkbox",label:"Furigana",shortcut:"F",checked:e.showFurigana,onChange:L=>S({showFurigana:L.target.checked})}),x.jsx(is,{id:"color-coding-checkbox",label:"POS Colors",shortcut:"C",checked:e.showColorCoding,onChange:L=>S({showColorCoding:L.target.checked})}),x.jsx(is,{id:"theme-checkbox",label:"Dark Mode",checked:e.theme==="dark",onChange:L=>S({theme:L.target.checked?"dark":"light"})})]}),x.jsx("hr",{className:"border-border-subtle"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"analysis-depth-slider",className:"text-sm font-medium text-text-secondary",children:"Analysis Depth"}),x.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text capitalize",children:e.analysisDepth})]}),x.jsx("input",{type:"range",id:"analysis-depth-slider",min:"0",max:"2",step:"1",value:k,onChange:L=>S({analysisDepth:zp[parseInt(L.target.value)]}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"font-size-slider",className:"text-sm font-medium text-text-secondary",children:"Font Size"}),x.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:ec[e.fontSizeIndex].label})]}),x.jsx("input",{type:"range",id:"font-size-slider",min:"0",max:ec.length-1,step:"1",value:e.fontSizeIndex,onChange:L=>S({fontSizeIndex:parseInt(L.target.value)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"new-words-slider",className:"text-sm font-medium text-text-secondary",children:"New Words Per Day"}),x.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:e.newWordsPerDay})]}),x.jsx("input",{type:"range",id:"new-words-slider",min:"5",max:"50",step:"5",value:e.newWordsPerDay,onChange:L=>S({newWordsPerDay:parseInt(L.target.value,10)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]})]}),x.jsx("hr",{className:"border-border-subtle"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"API Key Management"}),x.jsxs("div",{className:"relative flex items-center",children:[x.jsx("input",{type:h?"text":"password",value:p,onChange:L=>y(L.target.value),placeholder:"Enter your Gemini API Key",className:"w-full rounded-lg border-border-subtle bg-surface-soft shadow-sm focus-ring text-sm px-4 py-2 pr-10","aria-label":"Gemini API Key"}),x.jsx("button",{type:"button",className:"absolute right-2 text-text-muted hover:text-text-primary p-1",onClick:()=>v(!h),title:h?"Hide key":"Show key",children:x.jsx("i",{className:`bi ${h?"bi-eye-slash":"bi-eye"} text-base`})})]}),x.jsx("div",{className:"flex gap-2 mt-2",children:x.jsxs("button",{onClick:E,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-primary/80 text-primary-text hover:bg-primary transition-colors inline-flex items-center justify-center gap-2",children:[x.jsx("i",{className:"bi bi-save text-base"}),"Save Key"]})}),x.jsxs("p",{className:"text-xs text-text-muted mt-2 px-1",children:[e.userApiKey?"Using your custom API key.":"Using the default application key.","Your key is stored in your browser's database."]})]}),x.jsx("hr",{className:"border-border-subtle"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"Data Management"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:M,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors inline-flex items-center justify-center gap-2",children:[x.jsx("i",{className:"bi bi-download text-base"}),"Export"]}),x.jsxs("label",{className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors cursor-pointer inline-flex items-center justify-center gap-2",children:[x.jsx("i",{className:"bi bi-upload text-base"}),"Import",x.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:A})]})]})]})]})]})]})}function jD(){const{state:t,dispatch:e}=wt(),{state:i,dispatch:l}=Yt(),{state:s}=xn();G.useEffect(()=>{const f=m=>{var h,v,S,E,A,M,k,L,H;const p=m.target;if(["INPUT","TEXTAREA"].includes(p.tagName)||p.isContentEditable)return;switch(m.key.toLowerCase()==="f"&&(m.preventDefault(),l({type:"UPDATE_SETTINGS",payload:{showFurigana:!i.showFurigana}})),m.key.toLowerCase()==="c"&&(m.preventDefault(),l({type:"UPDATE_SETTINGS",payload:{showColorCoding:!i.showColorCoding}})),t.view){case Fe.Review:m.key==="Escape"&&(m.preventDefault(),(h=document.querySelector('[data-action="review-exit"]'))==null||h.click());const Y=document.querySelector('[data-action="review-show-answer"]');Y&&(m.code==="Space"||m.key===" ")&&(m.preventDefault(),Y.click()),Y||(m.key==="1"?(m.preventDefault(),(v=document.querySelector('[data-action="review-quality-1"]'))==null||v.click()):m.key==="2"?(m.preventDefault(),(S=document.querySelector('[data-action="review-quality-2"]'))==null||S.click()):m.key==="3"?(m.preventDefault(),(E=document.querySelector('[data-action="review-quality-3"]'))==null||E.click()):m.key==="4"&&(m.preventDefault(),(A=document.querySelector('[data-action="review-quality-4"]'))==null||A.click()));return;case Fe.ReadingMode:m.key==="ArrowRight"?(m.preventDefault(),(M=document.querySelector("#reading-nav-next"))==null||M.click()):m.key==="ArrowLeft"&&(m.preventDefault(),(k=document.querySelector("#reading-nav-prev"))==null||k.click());break}if(t.view===Fe.Reader||t.view===Fe.ReadingMode){if(m.key.toLowerCase()==="t"){const Y=document.querySelector("#toggle-translation-button");Y&&(m.preventDefault(),Y.click())}if(m.key.toLowerCase()==="s"){const Y=document.querySelector(".tts-button");Y&&(m.preventDefault(),Y.click())}}const y=document.querySelector(".analysis-view-container, .reading-mode-view");if(y){const Y=y.querySelector(".is-focused");m.key==="Escape"&&Y&&(m.preventDefault(),Y.classList.remove("is-focused","ring-2","ring-focus-ring","bg-surface-soft"),y.querySelectorAll(".segment").forEach(Q=>Q.classList.remove("opacity-30")));const F=Array.from(y.querySelectorAll("[data-pattern-id]"));if(F.length>0){const Q=F.findIndex(z=>z.classList.contains("is-focused"));if(m.key.toLowerCase()==="j"||m.key.toLowerCase()==="k"){m.preventDefault();let z=Q===-1?0:m.key==="j"?Q+1:Q-1;z>=F.length&&(z=0),z<0&&(z=F.length-1),(L=F[z])==null||L.click()}m.key.toLowerCase()==="e"&&Y&&(m.preventDefault(),(H=Y.querySelector(".show-examples-button"))==null||H.click())}}};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[t,i,e,l])}function WD(){const{state:t,dispatch:e}=xn(),{visible:i,content:l,position:s,pinned:f,targetElement:m}=t.tooltip,p=G.useRef(null);G.useEffect(()=>{if(!i||!f)return;const v=S=>{m&&m.contains(S.target)||p.current&&p.current.contains(S.target)||e({type:"HIDE_TOOLTIP"})};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[i,f,m,e]);const y=()=>{},h=()=>{t.tooltip.pinned||e({type:"HIDE_TOOLTIP"})};return i?xs.createPortal(x.jsx("div",{ref:p,className:"fixed z-50 max-w-sm rounded-xl glass-morphism border border-border/50 shadow-2xl p-4 text-base transition-all duration-200 max-h-96 overflow-y-auto no-scrollbar",style:{left:`${s.left}px`,top:`${s.top}px`,opacity:1},onMouseOver:y,onMouseOut:h,children:l}),document.body):null}const e1=()=>{const{state:t,dispatch:e}=xn(),{visible:i,content:l,targetElement:s}=t.bottomSheet,f=G.useRef(null),[m,p]=G.useState(!1),[y,h]=G.useState(!1);G.useEffect(()=>{if(i){p(!0);const E=setTimeout(()=>{h(!0)},50);return()=>clearTimeout(E)}else h(!1)},[i]);const v=E=>{E.target===f.current&&E.propertyName==="transform"&&!y&&!i&&p(!1)},S=()=>{e({type:"HIDE_BOTTOM_SHEET"})};return G.useEffect(()=>{const E=M=>{M.target.closest(".segment")||f.current&&!f.current.contains(M.target)&&S()},A=M=>{M.key==="Escape"&&S()};return m&&i&&(document.addEventListener("mousedown",E),document.addEventListener("keydown",A)),()=>{document.removeEventListener("mousedown",E),document.removeEventListener("keydown",A)}},[m,i]),G.useEffect(()=>{const E=document.querySelector(".segment-bottom-sheet-active");E&&E.classList.remove("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active"),s&&i&&s.classList.add("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active")},[s,i]),m?xs.createPortal(x.jsxs(x.Fragment,{children:[x.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm z-10 transition-opacity duration-300 md:hidden ${y?"opacity-100":"opacity-0"}`,onClick:S,"aria-hidden":"true"}),x.jsxs("div",{ref:f,className:`fixed bottom-0 left-0 right-0 z-20 bg-surface border-t border-border rounded-t-2xl shadow-2xl-top transition-transform duration-300 ease-in-out max-h-[60vh] flex flex-col md:hidden ${y?"translate-y-0":"translate-y-full"}`,onTransitionEnd:v,children:[x.jsxs("header",{className:"flex-shrink-0 py-3 px-4 border-b border-border-subtle relative text-center",children:[x.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-10 h-1.5 bg-border rounded-full","aria-hidden":"true"}),x.jsx("h3",{className:"font-semibold text-lg text-text-primary font-japanese mt-2",children:l.title}),x.jsx("button",{title:"Close details (Esc)",className:"btn-ghost absolute top-1.5 right-2",onClick:S,children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),x.jsx("div",{className:"p-4 overflow-y-auto no-scrollbar flex-grow",children:l.body})]})]}),document.body):null};function t1(){const{state:t}=wt(),{state:e}=xn(),[i,l]=G.useState(!1),s=G.useCallback(()=>{const m=t.view===Fe.ReadingMode,p=t.view===Fe.Review;let y=!1;if(!p&&!e.bottomSheet.visible){if(m)y=window.scrollY>window.innerHeight/2;else if(t.view===Fe.Reader&&t.selectedSentence){const h=document.getElementById("reader-view-text-container");if(h){const v=h.getBoundingClientRect();y=!(v.bottom>0&&v.top<window.innerHeight)}}}l(y)},[t.view,t.selectedSentence,e.bottomSheet.visible]);G.useEffect(()=>(window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)),[s]),G.useEffect(()=>{s()},[t.view,t.selectedSentence,e.bottomSheet.visible]);const f=()=>{if(t.view===Fe.ReadingMode)window.scrollTo({top:0,behavior:"smooth"});else if(t.view===Fe.Reader&&t.selectedSentence){const m=document.querySelector(".clickable-sentence.selected");m==null||m.scrollIntoView({behavior:"smooth",block:"center"})}};return i?xs.createPortal(x.jsx("button",{className:`fixed bottom-5 right-5 w-12 h-12 bg-accent text-primary-text rounded-full shadow-lg flex items-center justify-center text-2xl font-bold transition-all duration-300 hover:bg-accent/90 z-50 ${i?"opacity-100 visible translate-y-0":"opacity-0 invisible translate-y-5"}`,onClick:f,title:t.view===Fe.ReadingMode?"Scroll to top":"Back to analyzed sentence",children:"⇧"}),document.body):null}function n1(){const{state:t,dispatch:e}=wt(),{dispatch:i}=xn(),[l,s]=G.useState(!1),f=t.reviewDeck.filter(p=>{if(t.currentTextEntryId&&p.textEntryId&&p.textEntryId!==t.currentTextEntryId)return!1;const y=new Date;return y.setHours(0,0,0,0),p.nextReviewDate<=y.getTime()}).length,m=()=>{t.currentTextEntryId?e({type:"SET_VIEW",payload:Fe.Reader}):e({type:"RESET_VIEW"})};return x.jsxs("header",{id:"app-header",className:"flex justify-between items-center px-4 py-3 border-b border-border bg-gradient-to-r from-background to-surface md:rounded-t-2xl flex-shrink-0",children:[x.jsx("div",{className:"flex items-center gap-4",children:x.jsx("button",{onClick:m,title:"Return to main screen",className:"px-4 py-1 bg-gradient-to-br from-primary to-purple-600 rounded-xl flex items-center justify-center shadow-lg focus-ring hover-lift",children:x.jsx("span",{className:"font-japanese font-bold text-primary-text text-xl select-none dark:text-white",children:"積読"})})}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{title:"New Text",className:"btn-ghost",onClick:()=>e({type:"RESET_VIEW"}),children:x.jsx("i",{className:"bi bi-plus-lg text-xl"})}),x.jsx("button",{title:"My Texts",className:"btn-ghost",onClick:()=>i({type:"SET_HISTORY_PANEL_OPEN",payload:!0}),children:x.jsx("i",{className:"bi bi-clock-history text-xl"})}),x.jsx("div",{className:"relative",children:x.jsxs("button",{title:"Review Deck",className:"btn-ghost",onClick:()=>e({type:"SET_VIEW",payload:Fe.Review}),children:[x.jsx("i",{className:"bi bi-stack text-xl"}),f>0&&x.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs rounded-full h-4 w-4 flex items-center justify-center pointer-events-none transition-opacity",children:f})]})}),x.jsxs("div",{children:[x.jsx("button",{title:"Settings",className:"btn-ghost",onClick:()=>s(p=>!p),children:x.jsx("i",{className:"bi bi-gear text-xl"})}),l&&x.jsx(QD,{setIsOpen:s})]})]})]})}function ov(){const{state:t}=wt(),{state:e}=Yt();if(jD(),G.useEffect(()=>{FR()},[]),t.isLoading||e.isLoading)return x.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background",children:x.jsxs("div",{className:"text-center",children:[x.jsx("i",{className:"bi bi-arrow-repeat text-4xl text-text-muted animate-spin"}),x.jsx("p",{className:"mt-4 text-text-muted",children:"Loading application data..."})]})});const i=()=>{switch(t.view){case Fe.Editor:return x.jsx(Cg,{});case Fe.Reader:return x.jsx(ew,{});case Fe.ReadingMode:return x.jsx(WR,{});case Fe.Review:return x.jsx(ZD,{});default:return x.jsx(Cg,{})}},l=t.view===Fe.ReadingMode;return x.jsxs("div",{className:`w-full h-full flex flex-col ${l?"":"md:container md:mx-auto md:px-4 md:py-6"}`,children:[x.jsxs("main",{id:"app",className:`bg-surface w-full flex-grow flex flex-col min-h-0 ${l?"":"md:rounded-2xl md:shadow-xl md:border border-border md:overflow-hidden"}`,children:[t.view!==Fe.ReadingMode&&x.jsx(n1,{}),i()]}),x.jsx(XD,{}),x.jsx(WD,{}),x.jsx(e1,{}),x.jsx(t1,{})]})}function i1(){return x.jsx(Qg,{children:x.jsx(Wg,{children:x.jsx(Zg,{children:x.jsx(ty,{children:x.jsx(ov,{})})})})})}const o1=Og.createRoot(document.getElementById("root"));o1.render(x.jsx(i1,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/japanese-reader/sw.js").then(t=>{console.log("ServiceWorker registration successful with scope: ",t.scope)}).catch(t=>{console.log("ServiceWorker registration failed: ",t)})});function l1(){return x.jsx(Qg,{children:x.jsx(Wg,{children:x.jsx(Zg,{children:x.jsx(ty,{children:x.jsx(ov,{})})})})})}const a1=Og.createRoot(document.getElementById("root"));a1.render(x.jsx(l1,{}));
