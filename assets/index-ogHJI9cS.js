(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function yg(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ql={exports:{}},go={},Xl={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd;function vg(){if(kd)return ge;kd=1;var o=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function T(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function D(N,L,he){this.props=N,this.context=L,this.refs=P,this.updater=he||w}D.prototype.isReactComponent={},D.prototype.setState=function(N,L){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,L,"setState")},D.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function b(){}b.prototype=D.prototype;function $(N,L,he){this.props=N,this.context=L,this.refs=P,this.updater=he||w}var q=$.prototype=new b;q.constructor=$,k(q,D.prototype),q.isPureReactComponent=!0;var K=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},oe={key:!0,ref:!0,__self:!0,__source:!0};function _e(N,L,he){var ve,Ee={},Se=null,Re=null;if(L!=null)for(ve in L.ref!==void 0&&(Re=L.ref),L.key!==void 0&&(Se=""+L.key),L)Z.call(L,ve)&&!oe.hasOwnProperty(ve)&&(Ee[ve]=L[ve]);var ke=arguments.length-2;if(ke===1)Ee.children=he;else if(1<ke){for(var Ve=Array(ke),gt=0;gt<ke;gt++)Ve[gt]=arguments[gt+2];Ee.children=Ve}if(N&&N.defaultProps)for(ve in ke=N.defaultProps,ke)Ee[ve]===void 0&&(Ee[ve]=ke[ve]);return{$$typeof:o,type:N,key:Se,ref:Re,props:Ee,_owner:ie.current}}function se(N,L){return{$$typeof:o,type:N.type,key:L,ref:N.ref,props:N.props,_owner:N._owner}}function pe(N){return typeof N=="object"&&N!==null&&N.$$typeof===o}function Be(N){var L={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return L[he]})}var ye=/\/+/g;function Ne(N,L){return typeof N=="object"&&N!==null&&N.key!=null?Be(""+N.key):L.toString(36)}function Ce(N,L,he,ve,Ee){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(Se){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case o:case t:Re=!0}}if(Re)return Re=N,Ee=Ee(Re),N=ve===""?"."+Ne(Re,0):ve,K(Ee)?(he="",N!=null&&(he=N.replace(ye,"$&/")+"/"),Ce(Ee,L,he,"",function(gt){return gt})):Ee!=null&&(pe(Ee)&&(Ee=se(Ee,he+(!Ee.key||Re&&Re.key===Ee.key?"":(""+Ee.key).replace(ye,"$&/")+"/")+N)),L.push(Ee)),1;if(Re=0,ve=ve===""?".":ve+":",K(N))for(var ke=0;ke<N.length;ke++){Se=N[ke];var Ve=ve+Ne(Se,ke);Re+=Ce(Se,L,he,Ve,Ee)}else if(Ve=T(N),typeof Ve=="function")for(N=Ve.call(N),ke=0;!(Se=N.next()).done;)Se=Se.value,Ve=ve+Ne(Se,ke++),Re+=Ce(Se,L,he,Ve,Ee);else if(Se==="object")throw L=String(N),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Re}function Ye(N,L,he){if(N==null)return N;var ve=[],Ee=0;return Ce(N,ve,"","",function(Se){return L.call(he,Se,Ee++)}),ve}function je(N){if(N._status===-1){var L=N._result;L=L(),L.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=L)}if(N._status===1)return N._result.default;throw N._result}var re={current:null},U={transition:null},W={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:U,ReactCurrentOwner:ie};function z(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:Ye,forEach:function(N,L,he){Ye(N,function(){L.apply(this,arguments)},he)},count:function(N){var L=0;return Ye(N,function(){L++}),L},toArray:function(N){return Ye(N,function(L){return L})||[]},only:function(N){if(!pe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ge.Component=D,ge.Fragment=e,ge.Profiler=s,ge.PureComponent=$,ge.StrictMode=i,ge.Suspense=g,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,ge.act=z,ge.cloneElement=function(N,L,he){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ve=k({},N.props),Ee=N.key,Se=N.ref,Re=N._owner;if(L!=null){if(L.ref!==void 0&&(Se=L.ref,Re=ie.current),L.key!==void 0&&(Ee=""+L.key),N.type&&N.type.defaultProps)var ke=N.type.defaultProps;for(Ve in L)Z.call(L,Ve)&&!oe.hasOwnProperty(Ve)&&(ve[Ve]=L[Ve]===void 0&&ke!==void 0?ke[Ve]:L[Ve])}var Ve=arguments.length-2;if(Ve===1)ve.children=he;else if(1<Ve){ke=Array(Ve);for(var gt=0;gt<Ve;gt++)ke[gt]=arguments[gt+2];ve.children=ke}return{$$typeof:o,type:N.type,key:Ee,ref:Se,props:ve,_owner:Re}},ge.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},ge.createElement=_e,ge.createFactory=function(N){var L=_e.bind(null,N);return L.type=N,L},ge.createRef=function(){return{current:null}},ge.forwardRef=function(N){return{$$typeof:m,render:N}},ge.isValidElement=pe,ge.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:je}},ge.memo=function(N,L){return{$$typeof:h,type:N,compare:L===void 0?null:L}},ge.startTransition=function(N){var L=U.transition;U.transition={};try{N()}finally{U.transition=L}},ge.unstable_act=z,ge.useCallback=function(N,L){return re.current.useCallback(N,L)},ge.useContext=function(N){return re.current.useContext(N)},ge.useDebugValue=function(){},ge.useDeferredValue=function(N){return re.current.useDeferredValue(N)},ge.useEffect=function(N,L){return re.current.useEffect(N,L)},ge.useId=function(){return re.current.useId()},ge.useImperativeHandle=function(N,L,he){return re.current.useImperativeHandle(N,L,he)},ge.useInsertionEffect=function(N,L){return re.current.useInsertionEffect(N,L)},ge.useLayoutEffect=function(N,L){return re.current.useLayoutEffect(N,L)},ge.useMemo=function(N,L){return re.current.useMemo(N,L)},ge.useReducer=function(N,L,he){return re.current.useReducer(N,L,he)},ge.useRef=function(N){return re.current.useRef(N)},ge.useState=function(N){return re.current.useState(N)},ge.useSyncExternalStore=function(N,L,he){return re.current.useSyncExternalStore(N,L,he)},ge.useTransition=function(){return re.current.useTransition()},ge.version="18.3.1",ge}var Ad;function Aa(){return Ad||(Ad=1,Xl.exports=vg()),Xl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd;function xg(){if(Rd)return go;Rd=1;var o=Aa(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function f(m,g,h){var x,_={},T=null,w=null;h!==void 0&&(T=""+h),g.key!==void 0&&(T=""+g.key),g.ref!==void 0&&(w=g.ref);for(x in g)i.call(g,x)&&!a.hasOwnProperty(x)&&(_[x]=g[x]);if(m&&m.defaultProps)for(x in g=m.defaultProps,g)_[x]===void 0&&(_[x]=g[x]);return{$$typeof:t,type:m,key:T,ref:w,props:_,_owner:s.current}}return go.Fragment=e,go.jsx=f,go.jsxs=f,go}var Md;function Cg(){return Md||(Md=1,Ql.exports=xg()),Ql.exports}var v=Cg(),Fi={},ea={exports:{}},mt={},ta={exports:{}},na={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd;function _g(){return Pd||(Pd=1,function(o){function t(U,W){var z=U.length;U.push(W);e:for(;0<z;){var N=z-1>>>1,L=U[N];if(0<s(L,W))U[N]=W,U[z]=L,z=N;else break e}}function e(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var W=U[0],z=U.pop();if(z!==W){U[0]=z;e:for(var N=0,L=U.length,he=L>>>1;N<he;){var ve=2*(N+1)-1,Ee=U[ve],Se=ve+1,Re=U[Se];if(0>s(Ee,z))Se<L&&0>s(Re,Ee)?(U[N]=Re,U[Se]=z,N=Se):(U[N]=Ee,U[ve]=z,N=ve);else if(Se<L&&0>s(Re,z))U[N]=Re,U[Se]=z,N=Se;else break e}}return W}function s(U,W){var z=U.sortIndex-W.sortIndex;return z!==0?z:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var f=Date,m=f.now();o.unstable_now=function(){return f.now()-m}}var g=[],h=[],x=1,_=null,T=3,w=!1,k=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(U){for(var W=e(h);W!==null;){if(W.callback===null)i(h);else if(W.startTime<=U)i(h),W.sortIndex=W.expirationTime,t(g,W);else break;W=e(h)}}function K(U){if(P=!1,q(U),!k)if(e(g)!==null)k=!0,je(Z);else{var W=e(h);W!==null&&re(K,W.startTime-U)}}function Z(U,W){k=!1,P&&(P=!1,b(_e),_e=-1),w=!0;var z=T;try{for(q(W),_=e(g);_!==null&&(!(_.expirationTime>W)||U&&!Be());){var N=_.callback;if(typeof N=="function"){_.callback=null,T=_.priorityLevel;var L=N(_.expirationTime<=W);W=o.unstable_now(),typeof L=="function"?_.callback=L:_===e(g)&&i(g),q(W)}else i(g);_=e(g)}if(_!==null)var he=!0;else{var ve=e(h);ve!==null&&re(K,ve.startTime-W),he=!1}return he}finally{_=null,T=z,w=!1}}var ie=!1,oe=null,_e=-1,se=5,pe=-1;function Be(){return!(o.unstable_now()-pe<se)}function ye(){if(oe!==null){var U=o.unstable_now();pe=U;var W=!0;try{W=oe(!0,U)}finally{W?Ne():(ie=!1,oe=null)}}else ie=!1}var Ne;if(typeof $=="function")Ne=function(){$(ye)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ye=Ce.port2;Ce.port1.onmessage=ye,Ne=function(){Ye.postMessage(null)}}else Ne=function(){D(ye,0)};function je(U){oe=U,ie||(ie=!0,Ne())}function re(U,W){_e=D(function(){U(o.unstable_now())},W)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_continueExecution=function(){k||w||(k=!0,je(Z))},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return T},o.unstable_getFirstCallbackNode=function(){return e(g)},o.unstable_next=function(U){switch(T){case 1:case 2:case 3:var W=3;break;default:W=T}var z=T;T=W;try{return U()}finally{T=z}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=T;T=U;try{return W()}finally{T=z}},o.unstable_scheduleCallback=function(U,W,z){var N=o.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?N+z:N):z=N,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=z+L,U={id:x++,callback:W,priorityLevel:U,startTime:z,expirationTime:L,sortIndex:-1},z>N?(U.sortIndex=z,t(h,U),e(g)===null&&U===e(h)&&(P?(b(_e),_e=-1):P=!0,re(K,z-N))):(U.sortIndex=L,t(g,U),k||w||(k=!0,je(Z))),U},o.unstable_shouldYield=Be,o.unstable_wrapCallback=function(U){var W=T;return function(){var z=T;T=W;try{return U.apply(this,arguments)}finally{T=z}}}}(na)),na}var Dd;function Tg(){return Dd||(Dd=1,ta.exports=_g()),ta.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld;function Eg(){if(Ld)return mt;Ld=1;var o=Aa(),t=Tg();function e(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function a(n,r){f(n,r),f(n+"Capture",r)}function f(n,r){for(s[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function T(n){return g.call(_,n)?!0:g.call(x,n)?!1:h.test(n)?_[n]=!0:(x[n]=!0,!1)}function w(n,r,l,d){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,r,l,d){if(r===null||typeof r>"u"||w(n,r,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function P(n,r,l,d,p,y,C){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=n,this.type=r,this.sanitizeURL=y,this.removeEmptyString=C}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new P(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];D[r]=new P(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new P(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new P(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new P(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new P(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new P(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new P(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new P(n,5,!1,n.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function $(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(b,$);D[r]=new P(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(b,$);D[r]=new P(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(b,$);D[r]=new P(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new P(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new P(n,1,!1,n.toLowerCase(),null,!0,!0)});function q(n,r,l,d){var p=D.hasOwnProperty(r)?D[r]:null;(p!==null?p.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,l,p,d)&&(l=null),d||p===null?T(r)&&(l===null?n.removeAttribute(r):n.setAttribute(r,""+l)):p.mustUseProperty?n[p.propertyName]=l===null?p.type===3?!1:"":l:(r=p.attributeName,d=p.attributeNamespace,l===null?n.removeAttribute(r):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?n.setAttributeNS(d,r,l):n.setAttribute(r,l))))}var K=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),oe=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Be=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),U=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var z=Object.assign,N;function L(n){if(N===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+n}var he=!1;function ve(n,r){if(!n||he)return"";he=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(M){var d=M}Reflect.construct(n,[],r)}else{try{r.call()}catch(M){d=M}n.call(r.prototype)}else{try{throw Error()}catch(M){d=M}n()}}catch(M){if(M&&d&&typeof M.stack=="string"){for(var p=M.stack.split(`
`),y=d.stack.split(`
`),C=p.length-1,E=y.length-1;1<=C&&0<=E&&p[C]!==y[E];)E--;for(;1<=C&&0<=E;C--,E--)if(p[C]!==y[E]){if(C!==1||E!==1)do if(C--,E--,0>E||p[C]!==y[E]){var S=`
`+p[C].replace(" at new "," at ");return n.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",n.displayName)),S}while(1<=C&&0<=E);break}}}finally{he=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?L(n):""}function Ee(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=ve(n.type,!1),n;case 11:return n=ve(n.type.render,!1),n;case 1:return n=ve(n.type,!0),n;default:return""}}function Se(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case oe:return"Fragment";case ie:return"Portal";case se:return"Profiler";case _e:return"StrictMode";case Ne:return"Suspense";case Ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Be:return(n.displayName||"Context")+".Consumer";case pe:return(n._context.displayName||"Context")+".Provider";case ye:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ye:return r=n.displayName||null,r!==null?r:Se(n.type)||"Memo";case je:r=n._payload,n=n._init;try{return Se(n(r))}catch{}}return null}function Re(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(r);case 8:return r===_e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ke(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ve(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gt(n){var r=Ve(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),d=""+n[r];if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return p.call(this)},set:function(C){d=""+C,y.call(this,C)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function wo(n){n._valueTracker||(n._valueTracker=gt(n))}function La(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return n&&(d=Ve(n)?n.checked?"true":"false":n.value),n=d,n!==l?(r.setValue(n),!0):!1}function Io(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function is(n,r){var l=r.checked;return z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Fa(n,r){var l=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;l=ke(r.value!=null?r.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Va(n,r){r=r.checked,r!=null&&q(n,"checked",r,!1)}function ss(n,r){Va(n,r);var l=ke(r.value),d=r.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ls(n,r.type,l):r.hasOwnProperty("defaultValue")&&ls(n,r.type,ke(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Ua(n,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,l||r===n.value||(n.value=r),n.defaultValue=r}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function ls(n,r,l){(r!=="number"||Io(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Rr=Array.isArray;function Yn(n,r,l,d){if(n=n.options,r){r={};for(var p=0;p<l.length;p++)r["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=r.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&d&&(n[l].defaultSelected=!0)}else{for(l=""+ke(l),r=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}r!==null||n[p].disabled||(r=n[p])}r!==null&&(r.selected=!0)}}function as(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(e(91));return z({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ba(n,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(e(92));if(Rr(l)){if(1<l.length)throw Error(e(93));l=l[0]}r=l}r==null&&(r=""),l=r}n._wrapperState={initialValue:ke(l)}}function Oa(n,r){var l=ke(r.value),d=ke(r.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),r.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function za(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Ba(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function us(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Ba(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var No,Ga=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,d,p){MSApp.execUnsafeLocalFunction(function(){return n(r,l,d,p)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(No=No||document.createElement("div"),No.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=No.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Mr(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var Pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_m=["Webkit","ms","Moz","O"];Object.keys(Pr).forEach(function(n){_m.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Pr[r]=Pr[n]})});function Ha(n,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||Pr.hasOwnProperty(n)&&Pr[n]?(""+r).trim():r+"px"}function $a(n,r){n=n.style;for(var l in r)if(r.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Ha(l,r[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,p):n[l]=p}}var Tm=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cs(n,r){if(r){if(Tm[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(e(61))}if(r.style!=null&&typeof r.style!="object")throw Error(e(62))}}function ds(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function ps(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ms=null,jn=null,Jn=null;function qa(n){if(n=eo(n)){if(typeof ms!="function")throw Error(e(280));var r=n.stateNode;r&&(r=Ko(r),ms(n.stateNode,n.type,r))}}function Wa(n){jn?Jn?Jn.push(n):Jn=[n]:jn=n}function Ya(){if(jn){var n=jn,r=Jn;if(Jn=jn=null,qa(n),r)for(n=0;n<r.length;n++)qa(r[n])}}function ja(n,r){return n(r)}function Ja(){}var hs=!1;function Ka(n,r,l){if(hs)return n(r,l);hs=!0;try{return ja(n,r,l)}finally{hs=!1,(jn!==null||Jn!==null)&&(Ja(),Ya())}}function Dr(n,r){var l=n.stateNode;if(l===null)return null;var d=Ko(l);if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,r,typeof l));return l}var gs=!1;if(m)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){gs=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{gs=!1}function Em(n,r,l,d,p,y,C,E,S){var M=Array.prototype.slice.call(arguments,3);try{r.apply(l,M)}catch(V){this.onError(V)}}var Fr=!1,ko=null,Ao=!1,ys=null,Sm={onError:function(n){Fr=!0,ko=n}};function wm(n,r,l,d,p,y,C,E,S){Fr=!1,ko=null,Em.apply(Sm,arguments)}function Im(n,r,l,d,p,y,C,E,S){if(wm.apply(this,arguments),Fr){if(Fr){var M=ko;Fr=!1,ko=null}else throw Error(e(198));Ao||(Ao=!0,ys=M)}}function kn(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function Za(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Qa(n){if(kn(n)!==n)throw Error(e(188))}function Nm(n){var r=n.alternate;if(!r){if(r=kn(n),r===null)throw Error(e(188));return r!==n?null:n}for(var l=n,d=r;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Qa(p),n;if(y===d)return Qa(p),r;y=y.sibling}throw Error(e(188))}if(l.return!==d.return)l=p,d=y;else{for(var C=!1,E=p.child;E;){if(E===l){C=!0,l=p,d=y;break}if(E===d){C=!0,d=p,l=y;break}E=E.sibling}if(!C){for(E=y.child;E;){if(E===l){C=!0,l=y,d=p;break}if(E===d){C=!0,d=y,l=p;break}E=E.sibling}if(!C)throw Error(e(189))}}if(l.alternate!==d)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:r}function Xa(n){return n=Nm(n),n!==null?eu(n):null}function eu(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=eu(n);if(r!==null)return r;n=n.sibling}return null}var tu=t.unstable_scheduleCallback,nu=t.unstable_cancelCallback,km=t.unstable_shouldYield,Am=t.unstable_requestPaint,He=t.unstable_now,Rm=t.unstable_getCurrentPriorityLevel,vs=t.unstable_ImmediatePriority,ru=t.unstable_UserBlockingPriority,Ro=t.unstable_NormalPriority,Mm=t.unstable_LowPriority,ou=t.unstable_IdlePriority,Mo=null,Ut=null;function Pm(n){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Mo,n,void 0,(n.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Fm,Dm=Math.log,Lm=Math.LN2;function Fm(n){return n>>>=0,n===0?32:31-(Dm(n)/Lm|0)|0}var Po=64,Do=4194304;function Vr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Lo(n,r){var l=n.pendingLanes;if(l===0)return 0;var d=0,p=n.suspendedLanes,y=n.pingedLanes,C=l&268435455;if(C!==0){var E=C&~p;E!==0?d=Vr(E):(y&=C,y!==0&&(d=Vr(y)))}else C=l&~p,C!==0?d=Vr(C):y!==0&&(d=Vr(y));if(d===0)return 0;if(r!==0&&r!==d&&(r&p)===0&&(p=d&-d,y=r&-r,p>=y||p===16&&(y&4194240)!==0))return r;if((d&4)!==0&&(d|=l&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=d;0<r;)l=31-At(r),p=1<<l,d|=n[l],r&=~p;return d}function Vm(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Um(n,r){for(var l=n.suspendedLanes,d=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes;0<y;){var C=31-At(y),E=1<<C,S=p[C];S===-1?((E&l)===0||(E&d)!==0)&&(p[C]=Vm(E,r)):S<=r&&(n.expiredLanes|=E),y&=~E}}function xs(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function iu(){var n=Po;return Po<<=1,(Po&4194240)===0&&(Po=64),n}function Cs(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function Ur(n,r,l){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-At(r),n[r]=l}function bm(n,r){var l=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var p=31-At(l),y=1<<p;r[p]=0,d[p]=-1,n[p]=-1,l&=~y}}function _s(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var d=31-At(l),p=1<<d;p&r|n[d]&r&&(n[d]|=r),l&=~p}}var Ae=0;function su(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var lu,Ts,au,uu,cu,Es=!1,Fo=[],rn=null,on=null,sn=null,br=new Map,Or=new Map,ln=[],Om="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function du(n,r){switch(n){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":br.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(r.pointerId)}}function zr(n,r,l,d,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},r!==null&&(r=eo(r),r!==null&&Ts(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),n)}function zm(n,r,l,d,p){switch(r){case"focusin":return rn=zr(rn,n,r,l,d,p),!0;case"dragenter":return on=zr(on,n,r,l,d,p),!0;case"mouseover":return sn=zr(sn,n,r,l,d,p),!0;case"pointerover":var y=p.pointerId;return br.set(y,zr(br.get(y)||null,n,r,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,Or.set(y,zr(Or.get(y)||null,n,r,l,d,p)),!0}return!1}function fu(n){var r=An(n.target);if(r!==null){var l=kn(r);if(l!==null){if(r=l.tag,r===13){if(r=Za(l),r!==null){n.blockedOn=r,cu(n.priority,function(){au(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vo(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=ws(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);fs=d,l.target.dispatchEvent(d),fs=null}else return r=eo(l),r!==null&&Ts(r),n.blockedOn=l,!1;r.shift()}return!0}function pu(n,r,l){Vo(n)&&l.delete(r)}function Bm(){Es=!1,rn!==null&&Vo(rn)&&(rn=null),on!==null&&Vo(on)&&(on=null),sn!==null&&Vo(sn)&&(sn=null),br.forEach(pu),Or.forEach(pu)}function Br(n,r){n.blockedOn===r&&(n.blockedOn=null,Es||(Es=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bm)))}function Gr(n){function r(p){return Br(p,n)}if(0<Fo.length){Br(Fo[0],n);for(var l=1;l<Fo.length;l++){var d=Fo[l];d.blockedOn===n&&(d.blockedOn=null)}}for(rn!==null&&Br(rn,n),on!==null&&Br(on,n),sn!==null&&Br(sn,n),br.forEach(r),Or.forEach(r),l=0;l<ln.length;l++)d=ln[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<ln.length&&(l=ln[0],l.blockedOn===null);)fu(l),l.blockedOn===null&&ln.shift()}var Kn=K.ReactCurrentBatchConfig,Uo=!0;function Gm(n,r,l,d){var p=Ae,y=Kn.transition;Kn.transition=null;try{Ae=1,Ss(n,r,l,d)}finally{Ae=p,Kn.transition=y}}function Hm(n,r,l,d){var p=Ae,y=Kn.transition;Kn.transition=null;try{Ae=4,Ss(n,r,l,d)}finally{Ae=p,Kn.transition=y}}function Ss(n,r,l,d){if(Uo){var p=ws(n,r,l,d);if(p===null)Gs(n,r,d,bo,l),du(n,d);else if(zm(p,n,r,l,d))d.stopPropagation();else if(du(n,d),r&4&&-1<Om.indexOf(n)){for(;p!==null;){var y=eo(p);if(y!==null&&lu(y),y=ws(n,r,l,d),y===null&&Gs(n,r,d,bo,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else Gs(n,r,d,null,l)}}var bo=null;function ws(n,r,l,d){if(bo=null,n=ps(d),n=An(n),n!==null)if(r=kn(n),r===null)n=null;else if(l=r.tag,l===13){if(n=Za(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return bo=n,null}function mu(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rm()){case vs:return 1;case ru:return 4;case Ro:case Mm:return 16;case ou:return 536870912;default:return 16}default:return 16}}var an=null,Is=null,Oo=null;function hu(){if(Oo)return Oo;var n,r=Is,l=r.length,d,p="value"in an?an.value:an.textContent,y=p.length;for(n=0;n<l&&r[n]===p[n];n++);var C=l-n;for(d=1;d<=C&&r[l-d]===p[y-d];d++);return Oo=p.slice(n,1<d?1-d:void 0)}function zo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Bo(){return!0}function gu(){return!1}function yt(n){function r(l,d,p,y,C){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(l=n[E],this[E]=l?l(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Bo:gu,this.isPropagationStopped=gu,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),r}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ns=yt(Zn),Hr=z({},Zn,{view:0,detail:0}),$m=yt(Hr),ks,As,$r,Go=z({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$r&&($r&&n.type==="mousemove"?(ks=n.screenX-$r.screenX,As=n.screenY-$r.screenY):As=ks=0,$r=n),ks)},movementY:function(n){return"movementY"in n?n.movementY:As}}),yu=yt(Go),qm=z({},Go,{dataTransfer:0}),Wm=yt(qm),Ym=z({},Hr,{relatedTarget:0}),Rs=yt(Ym),jm=z({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Jm=yt(jm),Km=z({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zm=yt(Km),Qm=z({},Zn,{data:0}),vu=yt(Qm),Xm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=th[n])?!!r[n]:!1}function Ms(){return nh}var rh=z({},Hr,{key:function(n){if(n.key){var r=Xm[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=zo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?eh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(n){return n.type==="keypress"?zo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oh=yt(rh),ih=z({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=yt(ih),sh=z({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),lh=yt(sh),ah=z({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),uh=yt(ah),ch=z({},Go,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dh=yt(ch),fh=[9,13,27,32],Ps=m&&"CompositionEvent"in window,qr=null;m&&"documentMode"in document&&(qr=document.documentMode);var ph=m&&"TextEvent"in window&&!qr,Cu=m&&(!Ps||qr&&8<qr&&11>=qr),_u=" ",Tu=!1;function Eu(n,r){switch(n){case"keyup":return fh.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Su(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qn=!1;function mh(n,r){switch(n){case"compositionend":return Su(r);case"keypress":return r.which!==32?null:(Tu=!0,_u);case"textInput":return n=r.data,n===_u&&Tu?null:n;default:return null}}function hh(n,r){if(Qn)return n==="compositionend"||!Ps&&Eu(n,r)?(n=hu(),Oo=Is=an=null,Qn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Cu&&r.locale!=="ko"?null:r.data;default:return null}}var gh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wu(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!gh[n.type]:r==="textarea"}function Iu(n,r,l,d){Wa(d),r=Yo(r,"onChange"),0<r.length&&(l=new Ns("onChange","change",null,l,d),n.push({event:l,listeners:r}))}var Wr=null,Yr=null;function yh(n){$u(n,0)}function Ho(n){var r=rr(n);if(La(r))return n}function vh(n,r){if(n==="change")return r}var Nu=!1;if(m){var Ds;if(m){var Ls="oninput"in document;if(!Ls){var ku=document.createElement("div");ku.setAttribute("oninput","return;"),Ls=typeof ku.oninput=="function"}Ds=Ls}else Ds=!1;Nu=Ds&&(!document.documentMode||9<document.documentMode)}function Au(){Wr&&(Wr.detachEvent("onpropertychange",Ru),Yr=Wr=null)}function Ru(n){if(n.propertyName==="value"&&Ho(Yr)){var r=[];Iu(r,Yr,n,ps(n)),Ka(yh,r)}}function xh(n,r,l){n==="focusin"?(Au(),Wr=r,Yr=l,Wr.attachEvent("onpropertychange",Ru)):n==="focusout"&&Au()}function Ch(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ho(Yr)}function _h(n,r){if(n==="click")return Ho(r)}function Th(n,r){if(n==="input"||n==="change")return Ho(r)}function Eh(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Rt=typeof Object.is=="function"?Object.is:Eh;function jr(n,r){if(Rt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!g.call(r,p)||!Rt(n[p],r[p]))return!1}return!0}function Mu(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Pu(n,r){var l=Mu(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=r&&d>=r)return{node:l,offset:r-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Mu(l)}}function Du(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Du(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Lu(){for(var n=window,r=Io();r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=Io(n.document)}return r}function Fs(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Sh(n){var r=Lu(),l=n.focusedElem,d=n.selectionRange;if(r!==l&&l&&l.ownerDocument&&Du(l.ownerDocument.documentElement,l)){if(d!==null&&Fs(l)){if(r=d.start,n=d.end,n===void 0&&(n=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(n,l.value.length);else if(n=(r=l.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!n.extend&&y>d&&(p=d,d=y,y=p),p=Pu(l,y);var C=Pu(l,d);p&&C&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==C.node||n.focusOffset!==C.offset)&&(r=r.createRange(),r.setStart(p.node,p.offset),n.removeAllRanges(),y>d?(n.addRange(r),n.extend(C.node,C.offset)):(r.setEnd(C.node,C.offset),n.addRange(r)))}}for(r=[],n=l;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)n=r[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var wh=m&&"documentMode"in document&&11>=document.documentMode,Xn=null,Vs=null,Jr=null,Us=!1;function Fu(n,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Us||Xn==null||Xn!==Io(d)||(d=Xn,"selectionStart"in d&&Fs(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Jr&&jr(Jr,d)||(Jr=d,d=Yo(Vs,"onSelect"),0<d.length&&(r=new Ns("onSelect","select",null,r,l),n.push({event:r,listeners:d}),r.target=Xn)))}function $o(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var er={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},bs={},Vu={};m&&(Vu=document.createElement("div").style,"AnimationEvent"in window||(delete er.animationend.animation,delete er.animationiteration.animation,delete er.animationstart.animation),"TransitionEvent"in window||delete er.transitionend.transition);function qo(n){if(bs[n])return bs[n];if(!er[n])return n;var r=er[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in Vu)return bs[n]=r[l];return n}var Uu=qo("animationend"),bu=qo("animationiteration"),Ou=qo("animationstart"),zu=qo("transitionend"),Bu=new Map,Gu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(n,r){Bu.set(n,r),a(r,[n])}for(var Os=0;Os<Gu.length;Os++){var zs=Gu[Os],Ih=zs.toLowerCase(),Nh=zs[0].toUpperCase()+zs.slice(1);un(Ih,"on"+Nh)}un(Uu,"onAnimationEnd"),un(bu,"onAnimationIteration"),un(Ou,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(zu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function Hu(n,r,l){var d=n.type||"unknown-event";n.currentTarget=l,Im(d,r,void 0,n),n.currentTarget=null}function $u(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],p=d.event;d=d.listeners;e:{var y=void 0;if(r)for(var C=d.length-1;0<=C;C--){var E=d[C],S=E.instance,M=E.currentTarget;if(E=E.listener,S!==y&&p.isPropagationStopped())break e;Hu(p,E,M),y=S}else for(C=0;C<d.length;C++){if(E=d[C],S=E.instance,M=E.currentTarget,E=E.listener,S!==y&&p.isPropagationStopped())break e;Hu(p,E,M),y=S}}}if(Ao)throw n=ys,Ao=!1,ys=null,n}function Pe(n,r){var l=r[js];l===void 0&&(l=r[js]=new Set);var d=n+"__bubble";l.has(d)||(qu(r,n,2,!1),l.add(d))}function Bs(n,r,l){var d=0;r&&(d|=4),qu(l,n,d,r)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Zr(n){if(!n[Wo]){n[Wo]=!0,i.forEach(function(l){l!=="selectionchange"&&(kh.has(l)||Bs(l,!1,n),Bs(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Wo]||(r[Wo]=!0,Bs("selectionchange",!1,r))}}function qu(n,r,l,d){switch(mu(r)){case 1:var p=Gm;break;case 4:p=Hm;break;default:p=Ss}l=p.bind(null,r,l,n),p=void 0,!gs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(r,l,{capture:!0,passive:p}):n.addEventListener(r,l,!0):p!==void 0?n.addEventListener(r,l,{passive:p}):n.addEventListener(r,l,!1)}function Gs(n,r,l,d,p){var y=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var E=d.stateNode.containerInfo;if(E===p||E.nodeType===8&&E.parentNode===p)break;if(C===4)for(C=d.return;C!==null;){var S=C.tag;if((S===3||S===4)&&(S=C.stateNode.containerInfo,S===p||S.nodeType===8&&S.parentNode===p))return;C=C.return}for(;E!==null;){if(C=An(E),C===null)return;if(S=C.tag,S===5||S===6){d=y=C;continue e}E=E.parentNode}}d=d.return}Ka(function(){var M=y,V=ps(l),O=[];e:{var F=Bu.get(n);if(F!==void 0){var j=Ns,Q=n;switch(n){case"keypress":if(zo(l)===0)break e;case"keydown":case"keyup":j=oh;break;case"focusin":Q="focus",j=Rs;break;case"focusout":Q="blur",j=Rs;break;case"beforeblur":case"afterblur":j=Rs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=lh;break;case Uu:case bu:case Ou:j=Jm;break;case zu:j=uh;break;case"scroll":j=$m;break;case"wheel":j=dh;break;case"copy":case"cut":case"paste":j=Zm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=xu}var ee=(r&4)!==0,$e=!ee&&n==="scroll",A=ee?F!==null?F+"Capture":null:F;ee=[];for(var I=M,R;I!==null;){R=I;var G=R.stateNode;if(R.tag===5&&G!==null&&(R=G,A!==null&&(G=Dr(I,A),G!=null&&ee.push(Qr(I,G,R)))),$e)break;I=I.return}0<ee.length&&(F=new j(F,Q,null,l,V),O.push({event:F,listeners:ee}))}}if((r&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",j=n==="mouseout"||n==="pointerout",F&&l!==fs&&(Q=l.relatedTarget||l.fromElement)&&(An(Q)||Q[Wt]))break e;if((j||F)&&(F=V.window===V?V:(F=V.ownerDocument)?F.defaultView||F.parentWindow:window,j?(Q=l.relatedTarget||l.toElement,j=M,Q=Q?An(Q):null,Q!==null&&($e=kn(Q),Q!==$e||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(j=null,Q=M),j!==Q)){if(ee=yu,G="onMouseLeave",A="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ee=xu,G="onPointerLeave",A="onPointerEnter",I="pointer"),$e=j==null?F:rr(j),R=Q==null?F:rr(Q),F=new ee(G,I+"leave",j,l,V),F.target=$e,F.relatedTarget=R,G=null,An(V)===M&&(ee=new ee(A,I+"enter",Q,l,V),ee.target=R,ee.relatedTarget=$e,G=ee),$e=G,j&&Q)t:{for(ee=j,A=Q,I=0,R=ee;R;R=tr(R))I++;for(R=0,G=A;G;G=tr(G))R++;for(;0<I-R;)ee=tr(ee),I--;for(;0<R-I;)A=tr(A),R--;for(;I--;){if(ee===A||A!==null&&ee===A.alternate)break t;ee=tr(ee),A=tr(A)}ee=null}else ee=null;j!==null&&Wu(O,F,j,ee,!1),Q!==null&&$e!==null&&Wu(O,$e,Q,ee,!0)}}e:{if(F=M?rr(M):window,j=F.nodeName&&F.nodeName.toLowerCase(),j==="select"||j==="input"&&F.type==="file")var te=vh;else if(wu(F))if(Nu)te=Th;else{te=Ch;var le=xh}else(j=F.nodeName)&&j.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(te=_h);if(te&&(te=te(n,M))){Iu(O,te,l,V);break e}le&&le(n,F,M),n==="focusout"&&(le=F._wrapperState)&&le.controlled&&F.type==="number"&&ls(F,"number",F.value)}switch(le=M?rr(M):window,n){case"focusin":(wu(le)||le.contentEditable==="true")&&(Xn=le,Vs=M,Jr=null);break;case"focusout":Jr=Vs=Xn=null;break;case"mousedown":Us=!0;break;case"contextmenu":case"mouseup":case"dragend":Us=!1,Fu(O,l,V);break;case"selectionchange":if(wh)break;case"keydown":case"keyup":Fu(O,l,V)}var ae;if(Ps)e:{switch(n){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Qn?Eu(n,l)&&(ue="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ue="onCompositionStart");ue&&(Cu&&l.locale!=="ko"&&(Qn||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Qn&&(ae=hu()):(an=V,Is="value"in an?an.value:an.textContent,Qn=!0)),le=Yo(M,ue),0<le.length&&(ue=new vu(ue,n,null,l,V),O.push({event:ue,listeners:le}),ae?ue.data=ae:(ae=Su(l),ae!==null&&(ue.data=ae)))),(ae=ph?mh(n,l):hh(n,l))&&(M=Yo(M,"onBeforeInput"),0<M.length&&(V=new vu("onBeforeInput","beforeinput",null,l,V),O.push({event:V,listeners:M}),V.data=ae))}$u(O,r)})}function Qr(n,r,l){return{instance:n,listener:r,currentTarget:l}}function Yo(n,r){for(var l=r+"Capture",d=[];n!==null;){var p=n,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Dr(n,l),y!=null&&d.unshift(Qr(n,y,p)),y=Dr(n,r),y!=null&&d.push(Qr(n,y,p))),n=n.return}return d}function tr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wu(n,r,l,d,p){for(var y=r._reactName,C=[];l!==null&&l!==d;){var E=l,S=E.alternate,M=E.stateNode;if(S!==null&&S===d)break;E.tag===5&&M!==null&&(E=M,p?(S=Dr(l,y),S!=null&&C.unshift(Qr(l,S,E))):p||(S=Dr(l,y),S!=null&&C.push(Qr(l,S,E)))),l=l.return}C.length!==0&&n.push({event:r,listeners:C})}var Ah=/\r\n?/g,Rh=/\u0000|\uFFFD/g;function Yu(n){return(typeof n=="string"?n:""+n).replace(Ah,`
`).replace(Rh,"")}function jo(n,r,l){if(r=Yu(r),Yu(n)!==r&&l)throw Error(e(425))}function Jo(){}var Hs=null,$s=null;function qs(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ws=typeof setTimeout=="function"?setTimeout:void 0,Mh=typeof clearTimeout=="function"?clearTimeout:void 0,ju=typeof Promise=="function"?Promise:void 0,Ph=typeof queueMicrotask=="function"?queueMicrotask:typeof ju<"u"?function(n){return ju.resolve(null).then(n).catch(Dh)}:Ws;function Dh(n){setTimeout(function(){throw n})}function Ys(n,r){var l=r,d=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){n.removeChild(p),Gr(r);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Gr(r)}function cn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Ju(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return n;r--}else l==="/$"&&r++}n=n.previousSibling}return null}var nr=Math.random().toString(36).slice(2),bt="__reactFiber$"+nr,Xr="__reactProps$"+nr,Wt="__reactContainer$"+nr,js="__reactEvents$"+nr,Lh="__reactListeners$"+nr,Fh="__reactHandles$"+nr;function An(n){var r=n[bt];if(r)return r;for(var l=n.parentNode;l;){if(r=l[Wt]||l[bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=Ju(n);n!==null;){if(l=n[bt])return l;n=Ju(n)}return r}n=l,l=n.parentNode}return null}function eo(n){return n=n[bt]||n[Wt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function rr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Ko(n){return n[Xr]||null}var Js=[],or=-1;function dn(n){return{current:n}}function De(n){0>or||(n.current=Js[or],Js[or]=null,or--)}function Me(n,r){or++,Js[or]=n.current,n.current=r}var fn={},nt=dn(fn),ut=dn(!1),Rn=fn;function ir(n,r){var l=n.type.contextTypes;if(!l)return fn;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=r[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=p),p}function ct(n){return n=n.childContextTypes,n!=null}function Zo(){De(ut),De(nt)}function Ku(n,r,l){if(nt.current!==fn)throw Error(e(168));Me(nt,r),Me(ut,l)}function Zu(n,r,l){var d=n.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in r))throw Error(e(108,Re(n)||"Unknown",p));return z({},l,d)}function Qo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fn,Rn=nt.current,Me(nt,n),Me(ut,ut.current),!0}function Qu(n,r,l){var d=n.stateNode;if(!d)throw Error(e(169));l?(n=Zu(n,r,Rn),d.__reactInternalMemoizedMergedChildContext=n,De(ut),De(nt),Me(nt,n)):De(ut),Me(ut,l)}var Yt=null,Xo=!1,Ks=!1;function Xu(n){Yt===null?Yt=[n]:Yt.push(n)}function Vh(n){Xo=!0,Xu(n)}function pn(){if(!Ks&&Yt!==null){Ks=!0;var n=0,r=Ae;try{var l=Yt;for(Ae=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}Yt=null,Xo=!1}catch(p){throw Yt!==null&&(Yt=Yt.slice(n+1)),tu(vs,pn),p}finally{Ae=r,Ks=!1}}return null}var sr=[],lr=0,ei=null,ti=0,Tt=[],Et=0,Mn=null,jt=1,Jt="";function Pn(n,r){sr[lr++]=ti,sr[lr++]=ei,ei=n,ti=r}function ec(n,r,l){Tt[Et++]=jt,Tt[Et++]=Jt,Tt[Et++]=Mn,Mn=n;var d=jt;n=Jt;var p=32-At(d)-1;d&=~(1<<p),l+=1;var y=32-At(r)+p;if(30<y){var C=p-p%5;y=(d&(1<<C)-1).toString(32),d>>=C,p-=C,jt=1<<32-At(r)+p|l<<p|d,Jt=y+n}else jt=1<<y|l<<p|d,Jt=n}function Zs(n){n.return!==null&&(Pn(n,1),ec(n,1,0))}function Qs(n){for(;n===ei;)ei=sr[--lr],sr[lr]=null,ti=sr[--lr],sr[lr]=null;for(;n===Mn;)Mn=Tt[--Et],Tt[Et]=null,Jt=Tt[--Et],Tt[Et]=null,jt=Tt[--Et],Tt[Et]=null}var vt=null,xt=null,Ue=!1,Mt=null;function tc(n,r){var l=Nt(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=n,r=n.deletions,r===null?(n.deletions=[l],n.flags|=16):r.push(l)}function nc(n,r){switch(n.tag){case 5:var l=n.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,vt=n,xt=cn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,vt=n,xt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=Mn!==null?{id:jt,overflow:Jt}:null,n.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=Nt(18,null,null,0),l.stateNode=r,l.return=n,n.child=l,vt=n,xt=null,!0):!1;default:return!1}}function Xs(n){return(n.mode&1)!==0&&(n.flags&128)===0}function el(n){if(Ue){var r=xt;if(r){var l=r;if(!nc(n,r)){if(Xs(n))throw Error(e(418));r=cn(l.nextSibling);var d=vt;r&&nc(n,r)?tc(d,l):(n.flags=n.flags&-4097|2,Ue=!1,vt=n)}}else{if(Xs(n))throw Error(e(418));n.flags=n.flags&-4097|2,Ue=!1,vt=n}}}function rc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vt=n}function ni(n){if(n!==vt)return!1;if(!Ue)return rc(n),Ue=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!qs(n.type,n.memoizedProps)),r&&(r=xt)){if(Xs(n))throw oc(),Error(e(418));for(;r;)tc(n,r),r=cn(r.nextSibling)}if(rc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(r===0){xt=cn(n.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}n=n.nextSibling}xt=null}}else xt=vt?cn(n.stateNode.nextSibling):null;return!0}function oc(){for(var n=xt;n;)n=cn(n.nextSibling)}function ar(){xt=vt=null,Ue=!1}function tl(n){Mt===null?Mt=[n]:Mt.push(n)}var Uh=K.ReactCurrentBatchConfig;function to(n,r,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var d=l.stateNode}if(!d)throw Error(e(147,n));var p=d,y=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===y?r.ref:(r=function(C){var E=p.refs;C===null?delete E[y]:E[y]=C},r._stringRef=y,r)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function ri(n,r){throw n=Object.prototype.toString.call(r),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function ic(n){var r=n._init;return r(n._payload)}function sc(n){function r(A,I){if(n){var R=A.deletions;R===null?(A.deletions=[I],A.flags|=16):R.push(I)}}function l(A,I){if(!n)return null;for(;I!==null;)r(A,I),I=I.sibling;return null}function d(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function p(A,I){return A=_n(A,I),A.index=0,A.sibling=null,A}function y(A,I,R){return A.index=R,n?(R=A.alternate,R!==null?(R=R.index,R<I?(A.flags|=2,I):R):(A.flags|=2,I)):(A.flags|=1048576,I)}function C(A){return n&&A.alternate===null&&(A.flags|=2),A}function E(A,I,R,G){return I===null||I.tag!==6?(I=Wl(R,A.mode,G),I.return=A,I):(I=p(I,R),I.return=A,I)}function S(A,I,R,G){var te=R.type;return te===oe?V(A,I,R.props.children,G,R.key):I!==null&&(I.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===je&&ic(te)===I.type)?(G=p(I,R.props),G.ref=to(A,I,R),G.return=A,G):(G=Ni(R.type,R.key,R.props,null,A.mode,G),G.ref=to(A,I,R),G.return=A,G)}function M(A,I,R,G){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=Yl(R,A.mode,G),I.return=A,I):(I=p(I,R.children||[]),I.return=A,I)}function V(A,I,R,G,te){return I===null||I.tag!==7?(I=zn(R,A.mode,G,te),I.return=A,I):(I=p(I,R),I.return=A,I)}function O(A,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Wl(""+I,A.mode,R),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Z:return R=Ni(I.type,I.key,I.props,null,A.mode,R),R.ref=to(A,null,I),R.return=A,R;case ie:return I=Yl(I,A.mode,R),I.return=A,I;case je:var G=I._init;return O(A,G(I._payload),R)}if(Rr(I)||W(I))return I=zn(I,A.mode,R,null),I.return=A,I;ri(A,I)}return null}function F(A,I,R,G){var te=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return te!==null?null:E(A,I,""+R,G);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Z:return R.key===te?S(A,I,R,G):null;case ie:return R.key===te?M(A,I,R,G):null;case je:return te=R._init,F(A,I,te(R._payload),G)}if(Rr(R)||W(R))return te!==null?null:V(A,I,R,G,null);ri(A,R)}return null}function j(A,I,R,G,te){if(typeof G=="string"&&G!==""||typeof G=="number")return A=A.get(R)||null,E(I,A,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Z:return A=A.get(G.key===null?R:G.key)||null,S(I,A,G,te);case ie:return A=A.get(G.key===null?R:G.key)||null,M(I,A,G,te);case je:var le=G._init;return j(A,I,R,le(G._payload),te)}if(Rr(G)||W(G))return A=A.get(R)||null,V(I,A,G,te,null);ri(I,G)}return null}function Q(A,I,R,G){for(var te=null,le=null,ae=I,ue=I=0,Xe=null;ae!==null&&ue<R.length;ue++){ae.index>ue?(Xe=ae,ae=null):Xe=ae.sibling;var we=F(A,ae,R[ue],G);if(we===null){ae===null&&(ae=Xe);break}n&&ae&&we.alternate===null&&r(A,ae),I=y(we,I,ue),le===null?te=we:le.sibling=we,le=we,ae=Xe}if(ue===R.length)return l(A,ae),Ue&&Pn(A,ue),te;if(ae===null){for(;ue<R.length;ue++)ae=O(A,R[ue],G),ae!==null&&(I=y(ae,I,ue),le===null?te=ae:le.sibling=ae,le=ae);return Ue&&Pn(A,ue),te}for(ae=d(A,ae);ue<R.length;ue++)Xe=j(ae,A,ue,R[ue],G),Xe!==null&&(n&&Xe.alternate!==null&&ae.delete(Xe.key===null?ue:Xe.key),I=y(Xe,I,ue),le===null?te=Xe:le.sibling=Xe,le=Xe);return n&&ae.forEach(function(Tn){return r(A,Tn)}),Ue&&Pn(A,ue),te}function ee(A,I,R,G){var te=W(R);if(typeof te!="function")throw Error(e(150));if(R=te.call(R),R==null)throw Error(e(151));for(var le=te=null,ae=I,ue=I=0,Xe=null,we=R.next();ae!==null&&!we.done;ue++,we=R.next()){ae.index>ue?(Xe=ae,ae=null):Xe=ae.sibling;var Tn=F(A,ae,we.value,G);if(Tn===null){ae===null&&(ae=Xe);break}n&&ae&&Tn.alternate===null&&r(A,ae),I=y(Tn,I,ue),le===null?te=Tn:le.sibling=Tn,le=Tn,ae=Xe}if(we.done)return l(A,ae),Ue&&Pn(A,ue),te;if(ae===null){for(;!we.done;ue++,we=R.next())we=O(A,we.value,G),we!==null&&(I=y(we,I,ue),le===null?te=we:le.sibling=we,le=we);return Ue&&Pn(A,ue),te}for(ae=d(A,ae);!we.done;ue++,we=R.next())we=j(ae,A,ue,we.value,G),we!==null&&(n&&we.alternate!==null&&ae.delete(we.key===null?ue:we.key),I=y(we,I,ue),le===null?te=we:le.sibling=we,le=we);return n&&ae.forEach(function(gg){return r(A,gg)}),Ue&&Pn(A,ue),te}function $e(A,I,R,G){if(typeof R=="object"&&R!==null&&R.type===oe&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Z:e:{for(var te=R.key,le=I;le!==null;){if(le.key===te){if(te=R.type,te===oe){if(le.tag===7){l(A,le.sibling),I=p(le,R.props.children),I.return=A,A=I;break e}}else if(le.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===je&&ic(te)===le.type){l(A,le.sibling),I=p(le,R.props),I.ref=to(A,le,R),I.return=A,A=I;break e}l(A,le);break}else r(A,le);le=le.sibling}R.type===oe?(I=zn(R.props.children,A.mode,G,R.key),I.return=A,A=I):(G=Ni(R.type,R.key,R.props,null,A.mode,G),G.ref=to(A,I,R),G.return=A,A=G)}return C(A);case ie:e:{for(le=R.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){l(A,I.sibling),I=p(I,R.children||[]),I.return=A,A=I;break e}else{l(A,I);break}else r(A,I);I=I.sibling}I=Yl(R,A.mode,G),I.return=A,A=I}return C(A);case je:return le=R._init,$e(A,I,le(R._payload),G)}if(Rr(R))return Q(A,I,R,G);if(W(R))return ee(A,I,R,G);ri(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(l(A,I.sibling),I=p(I,R),I.return=A,A=I):(l(A,I),I=Wl(R,A.mode,G),I.return=A,A=I),C(A)):l(A,I)}return $e}var ur=sc(!0),lc=sc(!1),oi=dn(null),ii=null,cr=null,nl=null;function rl(){nl=cr=ii=null}function ol(n){var r=oi.current;De(oi),n._currentValue=r}function il(n,r,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===l)break;n=n.return}}function dr(n,r){ii=n,nl=cr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(dt=!0),n.firstContext=null)}function St(n){var r=n._currentValue;if(nl!==n)if(n={context:n,memoizedValue:r,next:null},cr===null){if(ii===null)throw Error(e(308));cr=n,ii.dependencies={lanes:0,firstContext:n}}else cr=cr.next=n;return r}var Dn=null;function sl(n){Dn===null?Dn=[n]:Dn.push(n)}function ac(n,r,l,d){var p=r.interleaved;return p===null?(l.next=l,sl(r)):(l.next=p.next,p.next=l),r.interleaved=l,Kt(n,d)}function Kt(n,r){n.lanes|=r;var l=n.alternate;for(l!==null&&(l.lanes|=r),l=n,n=n.return;n!==null;)n.childLanes|=r,l=n.alternate,l!==null&&(l.childLanes|=r),l=n,n=n.return;return l.tag===3?l.stateNode:null}var mn=!1;function ll(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uc(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zt(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function hn(n,r,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Te&2)!==0){var p=d.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),d.pending=r,Kt(n,l)}return p=d.interleaved,p===null?(r.next=r,sl(d)):(r.next=p.next,p.next=r),d.interleaved=r,Kt(n,l)}function si(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,_s(n,l)}}function cc(n,r){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?p=y=r:y=y.next=r}else p=y=r;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}function li(n,r,l,d){var p=n.updateQueue;mn=!1;var y=p.firstBaseUpdate,C=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var S=E,M=S.next;S.next=null,C===null?y=M:C.next=M,C=S;var V=n.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==C&&(E===null?V.firstBaseUpdate=M:E.next=M,V.lastBaseUpdate=S))}if(y!==null){var O=p.baseState;C=0,V=M=S=null,E=y;do{var F=E.lane,j=E.eventTime;if((d&F)===F){V!==null&&(V=V.next={eventTime:j,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Q=n,ee=E;switch(F=r,j=l,ee.tag){case 1:if(Q=ee.payload,typeof Q=="function"){O=Q.call(j,O,F);break e}O=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=ee.payload,F=typeof Q=="function"?Q.call(j,O,F):Q,F==null)break e;O=z({},O,F);break e;case 2:mn=!0}}E.callback!==null&&E.lane!==0&&(n.flags|=64,F=p.effects,F===null?p.effects=[E]:F.push(E))}else j={eventTime:j,lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(M=V=j,S=O):V=V.next=j,C|=F;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;F=E,E=F.next,F.next=null,p.lastBaseUpdate=F,p.shared.pending=null}}while(!0);if(V===null&&(S=O),p.baseState=S,p.firstBaseUpdate=M,p.lastBaseUpdate=V,r=p.shared.interleaved,r!==null){p=r;do C|=p.lane,p=p.next;while(p!==r)}else y===null&&(p.shared.lanes=0);Vn|=C,n.lanes=C,n.memoizedState=O}}function dc(n,r,l){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var d=n[r],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(e(191,p));p.call(d)}}}var no={},Ot=dn(no),ro=dn(no),oo=dn(no);function Ln(n){if(n===no)throw Error(e(174));return n}function al(n,r){switch(Me(oo,r),Me(ro,n),Me(Ot,no),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:us(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=us(r,n)}De(Ot),Me(Ot,r)}function fr(){De(Ot),De(ro),De(oo)}function fc(n){Ln(oo.current);var r=Ln(Ot.current),l=us(r,n.type);r!==l&&(Me(ro,n),Me(Ot,l))}function ul(n){ro.current===n&&(De(Ot),De(ro))}var be=dn(0);function ai(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var cl=[];function dl(){for(var n=0;n<cl.length;n++)cl[n]._workInProgressVersionPrimary=null;cl.length=0}var ui=K.ReactCurrentDispatcher,fl=K.ReactCurrentBatchConfig,Fn=0,Oe=null,Je=null,Ze=null,ci=!1,io=!1,so=0,bh=0;function rt(){throw Error(e(321))}function pl(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Rt(n[l],r[l]))return!1;return!0}function ml(n,r,l,d,p,y){if(Fn=y,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ui.current=n===null||n.memoizedState===null?Gh:Hh,n=l(d,p),io){y=0;do{if(io=!1,so=0,25<=y)throw Error(e(301));y+=1,Ze=Je=null,r.updateQueue=null,ui.current=$h,n=l(d,p)}while(io)}if(ui.current=pi,r=Je!==null&&Je.next!==null,Fn=0,Ze=Je=Oe=null,ci=!1,r)throw Error(e(300));return n}function hl(){var n=so!==0;return so=0,n}function zt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function wt(){if(Je===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=Ze===null?Oe.memoizedState:Ze.next;if(r!==null)Ze=r,Je=n;else{if(n===null)throw Error(e(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ze===null?Oe.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function lo(n,r){return typeof r=="function"?r(n):r}function gl(n){var r=wt(),l=r.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var d=Je,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var C=p.next;p.next=y.next,y.next=C}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var E=C=null,S=null,M=y;do{var V=M.lane;if((Fn&V)===V)S!==null&&(S=S.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),d=M.hasEagerState?M.eagerState:n(d,M.action);else{var O={lane:V,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};S===null?(E=S=O,C=d):S=S.next=O,Oe.lanes|=V,Vn|=V}M=M.next}while(M!==null&&M!==y);S===null?C=d:S.next=E,Rt(d,r.memoizedState)||(dt=!0),r.memoizedState=d,r.baseState=C,r.baseQueue=S,l.lastRenderedState=d}if(n=l.interleaved,n!==null){p=n;do y=p.lane,Oe.lanes|=y,Vn|=y,p=p.next;while(p!==n)}else p===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function yl(n){var r=wt(),l=r.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var d=l.dispatch,p=l.pending,y=r.memoizedState;if(p!==null){l.pending=null;var C=p=p.next;do y=n(y,C.action),C=C.next;while(C!==p);Rt(y,r.memoizedState)||(dt=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),l.lastRenderedState=y}return[y,d]}function pc(){}function mc(n,r){var l=Oe,d=wt(),p=r(),y=!Rt(d.memoizedState,p);if(y&&(d.memoizedState=p,dt=!0),d=d.queue,vl(yc.bind(null,l,d,n),[n]),d.getSnapshot!==r||y||Ze!==null&&Ze.memoizedState.tag&1){if(l.flags|=2048,ao(9,gc.bind(null,l,d,p,r),void 0,null),Qe===null)throw Error(e(349));(Fn&30)!==0||hc(l,r,p)}return p}function hc(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=Oe.updateQueue,r===null?(r={lastEffect:null,stores:null},Oe.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function gc(n,r,l,d){r.value=l,r.getSnapshot=d,vc(r)&&xc(n)}function yc(n,r,l){return l(function(){vc(r)&&xc(n)})}function vc(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Rt(n,l)}catch{return!0}}function xc(n){var r=Kt(n,1);r!==null&&Ft(r,n,1,-1)}function Cc(n){var r=zt();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:n},r.queue=n,n=n.dispatch=Bh.bind(null,Oe,n),[r.memoizedState,n]}function ao(n,r,l,d){return n={tag:n,create:r,destroy:l,deps:d,next:null},r=Oe.updateQueue,r===null?(r={lastEffect:null,stores:null},Oe.updateQueue=r,r.lastEffect=n.next=n):(l=r.lastEffect,l===null?r.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,r.lastEffect=n)),n}function _c(){return wt().memoizedState}function di(n,r,l,d){var p=zt();Oe.flags|=n,p.memoizedState=ao(1|r,l,void 0,d===void 0?null:d)}function fi(n,r,l,d){var p=wt();d=d===void 0?null:d;var y=void 0;if(Je!==null){var C=Je.memoizedState;if(y=C.destroy,d!==null&&pl(d,C.deps)){p.memoizedState=ao(r,l,y,d);return}}Oe.flags|=n,p.memoizedState=ao(1|r,l,y,d)}function Tc(n,r){return di(8390656,8,n,r)}function vl(n,r){return fi(2048,8,n,r)}function Ec(n,r){return fi(4,2,n,r)}function Sc(n,r){return fi(4,4,n,r)}function wc(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ic(n,r,l){return l=l!=null?l.concat([n]):null,fi(4,4,wc.bind(null,r,n),l)}function xl(){}function Nc(n,r){var l=wt();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&pl(r,d[1])?d[0]:(l.memoizedState=[n,r],n)}function kc(n,r){var l=wt();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&pl(r,d[1])?d[0]:(n=n(),l.memoizedState=[n,r],n)}function Ac(n,r,l){return(Fn&21)===0?(n.baseState&&(n.baseState=!1,dt=!0),n.memoizedState=l):(Rt(l,r)||(l=iu(),Oe.lanes|=l,Vn|=l,n.baseState=!0),r)}function Oh(n,r){var l=Ae;Ae=l!==0&&4>l?l:4,n(!0);var d=fl.transition;fl.transition={};try{n(!1),r()}finally{Ae=l,fl.transition=d}}function Rc(){return wt().memoizedState}function zh(n,r,l){var d=xn(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Mc(n))Pc(r,l);else if(l=ac(n,r,l,d),l!==null){var p=lt();Ft(l,n,d,p),Dc(l,r,d)}}function Bh(n,r,l){var d=xn(n),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mc(n))Pc(r,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var C=r.lastRenderedState,E=y(C,l);if(p.hasEagerState=!0,p.eagerState=E,Rt(E,C)){var S=r.interleaved;S===null?(p.next=p,sl(r)):(p.next=S.next,S.next=p),r.interleaved=p;return}}catch{}finally{}l=ac(n,r,p,d),l!==null&&(p=lt(),Ft(l,n,d,p),Dc(l,r,d))}}function Mc(n){var r=n.alternate;return n===Oe||r!==null&&r===Oe}function Pc(n,r){io=ci=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Dc(n,r,l){if((l&4194240)!==0){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,_s(n,l)}}var pi={readContext:St,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Gh={readContext:St,useCallback:function(n,r){return zt().memoizedState=[n,r===void 0?null:r],n},useContext:St,useEffect:Tc,useImperativeHandle:function(n,r,l){return l=l!=null?l.concat([n]):null,di(4194308,4,wc.bind(null,r,n),l)},useLayoutEffect:function(n,r){return di(4194308,4,n,r)},useInsertionEffect:function(n,r){return di(4,2,n,r)},useMemo:function(n,r){var l=zt();return r=r===void 0?null:r,n=n(),l.memoizedState=[n,r],n},useReducer:function(n,r,l){var d=zt();return r=l!==void 0?l(r):r,d.memoizedState=d.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},d.queue=n,n=n.dispatch=zh.bind(null,Oe,n),[d.memoizedState,n]},useRef:function(n){var r=zt();return n={current:n},r.memoizedState=n},useState:Cc,useDebugValue:xl,useDeferredValue:function(n){return zt().memoizedState=n},useTransition:function(){var n=Cc(!1),r=n[0];return n=Oh.bind(null,n[1]),zt().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,l){var d=Oe,p=zt();if(Ue){if(l===void 0)throw Error(e(407));l=l()}else{if(l=r(),Qe===null)throw Error(e(349));(Fn&30)!==0||hc(d,r,l)}p.memoizedState=l;var y={value:l,getSnapshot:r};return p.queue=y,Tc(yc.bind(null,d,y,n),[n]),d.flags|=2048,ao(9,gc.bind(null,d,y,l,r),void 0,null),l},useId:function(){var n=zt(),r=Qe.identifierPrefix;if(Ue){var l=Jt,d=jt;l=(d&~(1<<32-At(d)-1)).toString(32)+l,r=":"+r+"R"+l,l=so++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=bh++,r=":"+r+"r"+l.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Hh={readContext:St,useCallback:Nc,useContext:St,useEffect:vl,useImperativeHandle:Ic,useInsertionEffect:Ec,useLayoutEffect:Sc,useMemo:kc,useReducer:gl,useRef:_c,useState:function(){return gl(lo)},useDebugValue:xl,useDeferredValue:function(n){var r=wt();return Ac(r,Je.memoizedState,n)},useTransition:function(){var n=gl(lo)[0],r=wt().memoizedState;return[n,r]},useMutableSource:pc,useSyncExternalStore:mc,useId:Rc,unstable_isNewReconciler:!1},$h={readContext:St,useCallback:Nc,useContext:St,useEffect:vl,useImperativeHandle:Ic,useInsertionEffect:Ec,useLayoutEffect:Sc,useMemo:kc,useReducer:yl,useRef:_c,useState:function(){return yl(lo)},useDebugValue:xl,useDeferredValue:function(n){var r=wt();return Je===null?r.memoizedState=n:Ac(r,Je.memoizedState,n)},useTransition:function(){var n=yl(lo)[0],r=wt().memoizedState;return[n,r]},useMutableSource:pc,useSyncExternalStore:mc,useId:Rc,unstable_isNewReconciler:!1};function Pt(n,r){if(n&&n.defaultProps){r=z({},r),n=n.defaultProps;for(var l in n)r[l]===void 0&&(r[l]=n[l]);return r}return r}function Cl(n,r,l,d){r=n.memoizedState,l=l(d,r),l=l==null?r:z({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var mi={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,r,l){n=n._reactInternals;var d=lt(),p=xn(n),y=Zt(d,p);y.payload=r,l!=null&&(y.callback=l),r=hn(n,y,p),r!==null&&(Ft(r,n,p,d),si(r,n,p))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var d=lt(),p=xn(n),y=Zt(d,p);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=hn(n,y,p),r!==null&&(Ft(r,n,p,d),si(r,n,p))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=lt(),d=xn(n),p=Zt(l,d);p.tag=2,r!=null&&(p.callback=r),r=hn(n,p,d),r!==null&&(Ft(r,n,d,l),si(r,n,d))}};function Lc(n,r,l,d,p,y,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,C):r.prototype&&r.prototype.isPureReactComponent?!jr(l,d)||!jr(p,y):!0}function Fc(n,r,l){var d=!1,p=fn,y=r.contextType;return typeof y=="object"&&y!==null?y=St(y):(p=ct(r)?Rn:nt.current,d=r.contextTypes,y=(d=d!=null)?ir(n,p):fn),r=new r(l,y),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=mi,n.stateNode=r,r._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=y),r}function Vc(n,r,l,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==n&&mi.enqueueReplaceState(r,r.state,null)}function _l(n,r,l,d){var p=n.stateNode;p.props=l,p.state=n.memoizedState,p.refs={},ll(n);var y=r.contextType;typeof y=="object"&&y!==null?p.context=St(y):(y=ct(r)?Rn:nt.current,p.context=ir(n,y)),p.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(Cl(n,r,y,l),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(r=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),r!==p.state&&mi.enqueueReplaceState(p,p.state,null),li(n,l,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function pr(n,r){try{var l="",d=r;do l+=Ee(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:r,stack:p,digest:null}}function Tl(n,r,l){return{value:n,source:null,stack:l??null,digest:r??null}}function El(n,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var qh=typeof WeakMap=="function"?WeakMap:Map;function Uc(n,r,l){l=Zt(-1,l),l.tag=3,l.payload={element:null};var d=r.value;return l.callback=function(){_i||(_i=!0,bl=d),El(n,r)},l}function bc(n,r,l){l=Zt(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=r.value;l.payload=function(){return d(p)},l.callback=function(){El(n,r)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){El(n,r),typeof d!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})}),l}function Oc(n,r,l){var d=n.pingCache;if(d===null){d=n.pingCache=new qh;var p=new Set;d.set(r,p)}else p=d.get(r),p===void 0&&(p=new Set,d.set(r,p));p.has(l)||(p.add(l),n=ig.bind(null,n,r,l),r.then(n,n))}function zc(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Bc(n,r,l,d,p){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=Zt(-1,1),r.tag=2,hn(l,r,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var Wh=K.ReactCurrentOwner,dt=!1;function st(n,r,l,d){r.child=n===null?lc(r,null,l,d):ur(r,n.child,l,d)}function Gc(n,r,l,d,p){l=l.render;var y=r.ref;return dr(r,p),d=ml(n,r,l,d,y,p),l=hl(),n!==null&&!dt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Qt(n,r,p)):(Ue&&l&&Zs(r),r.flags|=1,st(n,r,d,p),r.child)}function Hc(n,r,l,d,p){if(n===null){var y=l.type;return typeof y=="function"&&!ql(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=y,$c(n,r,y,d,p)):(n=Ni(l.type,null,d,r,r.mode,p),n.ref=r.ref,n.return=r,r.child=n)}if(y=n.child,(n.lanes&p)===0){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:jr,l(C,d)&&n.ref===r.ref)return Qt(n,r,p)}return r.flags|=1,n=_n(y,d),n.ref=r.ref,n.return=r,r.child=n}function $c(n,r,l,d,p){if(n!==null){var y=n.memoizedProps;if(jr(y,d)&&n.ref===r.ref)if(dt=!1,r.pendingProps=d=y,(n.lanes&p)!==0)(n.flags&131072)!==0&&(dt=!0);else return r.lanes=n.lanes,Qt(n,r,p)}return Sl(n,r,l,d,p)}function qc(n,r,l){var d=r.pendingProps,p=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(hr,Ct),Ct|=l;else{if((l&1073741824)===0)return n=y!==null?y.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Me(hr,Ct),Ct|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,Me(hr,Ct),Ct|=d}else y!==null?(d=y.baseLanes|l,r.memoizedState=null):d=l,Me(hr,Ct),Ct|=d;return st(n,r,p,l),r.child}function Wc(n,r){var l=r.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function Sl(n,r,l,d,p){var y=ct(l)?Rn:nt.current;return y=ir(r,y),dr(r,p),l=ml(n,r,l,d,y,p),d=hl(),n!==null&&!dt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Qt(n,r,p)):(Ue&&d&&Zs(r),r.flags|=1,st(n,r,l,p),r.child)}function Yc(n,r,l,d,p){if(ct(l)){var y=!0;Qo(r)}else y=!1;if(dr(r,p),r.stateNode===null)gi(n,r),Fc(r,l,d),_l(r,l,d,p),d=!0;else if(n===null){var C=r.stateNode,E=r.memoizedProps;C.props=E;var S=C.context,M=l.contextType;typeof M=="object"&&M!==null?M=St(M):(M=ct(l)?Rn:nt.current,M=ir(r,M));var V=l.getDerivedStateFromProps,O=typeof V=="function"||typeof C.getSnapshotBeforeUpdate=="function";O||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E!==d||S!==M)&&Vc(r,C,d,M),mn=!1;var F=r.memoizedState;C.state=F,li(r,d,C,p),S=r.memoizedState,E!==d||F!==S||ut.current||mn?(typeof V=="function"&&(Cl(r,l,V,d),S=r.memoizedState),(E=mn||Lc(r,l,E,d,F,S,M))?(O||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(r.flags|=4194308)):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=S),C.props=d,C.state=S,C.context=M,d=E):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{C=r.stateNode,uc(n,r),E=r.memoizedProps,M=r.type===r.elementType?E:Pt(r.type,E),C.props=M,O=r.pendingProps,F=C.context,S=l.contextType,typeof S=="object"&&S!==null?S=St(S):(S=ct(l)?Rn:nt.current,S=ir(r,S));var j=l.getDerivedStateFromProps;(V=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E!==O||F!==S)&&Vc(r,C,d,S),mn=!1,F=r.memoizedState,C.state=F,li(r,d,C,p);var Q=r.memoizedState;E!==O||F!==Q||ut.current||mn?(typeof j=="function"&&(Cl(r,l,j,d),Q=r.memoizedState),(M=mn||Lc(r,l,M,d,F,Q,S)||!1)?(V||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,Q,S),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,Q,S)),typeof C.componentDidUpdate=="function"&&(r.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof C.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Q),C.props=d,C.state=Q,C.context=S,d=M):(typeof C.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),d=!1)}return wl(n,r,l,d,y,p)}function wl(n,r,l,d,p,y){Wc(n,r);var C=(r.flags&128)!==0;if(!d&&!C)return p&&Qu(r,l,!1),Qt(n,r,y);d=r.stateNode,Wh.current=r;var E=C&&typeof l.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,n!==null&&C?(r.child=ur(r,n.child,null,y),r.child=ur(r,null,E,y)):st(n,r,E,y),r.memoizedState=d.state,p&&Qu(r,l,!0),r.child}function jc(n){var r=n.stateNode;r.pendingContext?Ku(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Ku(n,r.context,!1),al(n,r.containerInfo)}function Jc(n,r,l,d,p){return ar(),tl(p),r.flags|=256,st(n,r,l,d),r.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function Nl(n){return{baseLanes:n,cachePool:null,transitions:null}}function Kc(n,r,l){var d=r.pendingProps,p=be.current,y=!1,C=(r.flags&128)!==0,E;if((E=C)||(E=n!==null&&n.memoizedState===null?!1:(p&2)!==0),E?(y=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Me(be,p&1),n===null)return el(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(C=d.children,n=d.fallback,y?(d=r.mode,y=r.child,C={mode:"hidden",children:C},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=C):y=ki(C,d,0,null),n=zn(n,d,l,null),y.return=r,n.return=r,y.sibling=n,r.child=y,r.child.memoizedState=Nl(l),r.memoizedState=Il,n):kl(r,C));if(p=n.memoizedState,p!==null&&(E=p.dehydrated,E!==null))return Yh(n,r,C,d,E,p,l);if(y){y=d.fallback,C=r.mode,p=n.child,E=p.sibling;var S={mode:"hidden",children:d.children};return(C&1)===0&&r.child!==p?(d=r.child,d.childLanes=0,d.pendingProps=S,r.deletions=null):(d=_n(p,S),d.subtreeFlags=p.subtreeFlags&14680064),E!==null?y=_n(E,y):(y=zn(y,C,l,null),y.flags|=2),y.return=r,d.return=r,d.sibling=y,r.child=d,d=y,y=r.child,C=n.child.memoizedState,C=C===null?Nl(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},y.memoizedState=C,y.childLanes=n.childLanes&~l,r.memoizedState=Il,d}return y=n.child,n=y.sibling,d=_n(y,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=l),d.return=r,d.sibling=null,n!==null&&(l=r.deletions,l===null?(r.deletions=[n],r.flags|=16):l.push(n)),r.child=d,r.memoizedState=null,d}function kl(n,r){return r=ki({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function hi(n,r,l,d){return d!==null&&tl(d),ur(r,n.child,null,l),n=kl(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Yh(n,r,l,d,p,y,C){if(l)return r.flags&256?(r.flags&=-257,d=Tl(Error(e(422))),hi(n,r,C,d)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(y=d.fallback,p=r.mode,d=ki({mode:"visible",children:d.children},p,0,null),y=zn(y,p,C,null),y.flags|=2,d.return=r,y.return=r,d.sibling=y,r.child=d,(r.mode&1)!==0&&ur(r,n.child,null,C),r.child.memoizedState=Nl(C),r.memoizedState=Il,y);if((r.mode&1)===0)return hi(n,r,C,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var E=d.dgst;return d=E,y=Error(e(419)),d=Tl(y,d,void 0),hi(n,r,C,d)}if(E=(C&n.childLanes)!==0,dt||E){if(d=Qe,d!==null){switch(C&-C){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|C))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Kt(n,p),Ft(d,n,p,-1))}return $l(),d=Tl(Error(e(421))),hi(n,r,C,d)}return p.data==="$?"?(r.flags|=128,r.child=n.child,r=sg.bind(null,n),p._reactRetry=r,null):(n=y.treeContext,xt=cn(p.nextSibling),vt=r,Ue=!0,Mt=null,n!==null&&(Tt[Et++]=jt,Tt[Et++]=Jt,Tt[Et++]=Mn,jt=n.id,Jt=n.overflow,Mn=r),r=kl(r,d.children),r.flags|=4096,r)}function Zc(n,r,l){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),il(n.return,r,l)}function Al(n,r,l,d,p){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function Qc(n,r,l){var d=r.pendingProps,p=d.revealOrder,y=d.tail;if(st(n,r,d.children,l),d=be.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zc(n,l,r);else if(n.tag===19)Zc(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Me(be,d),(r.mode&1)===0)r.memoizedState=null;else switch(p){case"forwards":for(l=r.child,p=null;l!==null;)n=l.alternate,n!==null&&ai(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=r.child,r.child=null):(p=l.sibling,l.sibling=null),Al(r,!1,p,l,y);break;case"backwards":for(l=null,p=r.child,r.child=null;p!==null;){if(n=p.alternate,n!==null&&ai(n)===null){r.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}Al(r,!0,l,null,y);break;case"together":Al(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function gi(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Qt(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Vn|=r.lanes,(l&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(e(153));if(r.child!==null){for(n=r.child,l=_n(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=_n(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function jh(n,r,l){switch(r.tag){case 3:jc(r),ar();break;case 5:fc(r);break;case 1:ct(r.type)&&Qo(r);break;case 4:al(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,p=r.memoizedProps.value;Me(oi,d._currentValue),d._currentValue=p;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(Me(be,be.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?Kc(n,r,l):(Me(be,be.current&1),n=Qt(n,r,l),n!==null?n.sibling:null);Me(be,be.current&1);break;case 19:if(d=(l&r.childLanes)!==0,(n.flags&128)!==0){if(d)return Qc(n,r,l);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Me(be,be.current),d)break;return null;case 22:case 23:return r.lanes=0,qc(n,r,l)}return Qt(n,r,l)}var Xc,Rl,ed,td;Xc=function(n,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Rl=function(){},ed=function(n,r,l,d){var p=n.memoizedProps;if(p!==d){n=r.stateNode,Ln(Ot.current);var y=null;switch(l){case"input":p=is(n,p),d=is(n,d),y=[];break;case"select":p=z({},p,{value:void 0}),d=z({},d,{value:void 0}),y=[];break;case"textarea":p=as(n,p),d=as(n,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Jo)}cs(l,d);var C;l=null;for(M in p)if(!d.hasOwnProperty(M)&&p.hasOwnProperty(M)&&p[M]!=null)if(M==="style"){var E=p[M];for(C in E)E.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?y||(y=[]):(y=y||[]).push(M,null));for(M in d){var S=d[M];if(E=p!=null?p[M]:void 0,d.hasOwnProperty(M)&&S!==E&&(S!=null||E!=null))if(M==="style")if(E){for(C in E)!E.hasOwnProperty(C)||S&&S.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in S)S.hasOwnProperty(C)&&E[C]!==S[C]&&(l||(l={}),l[C]=S[C])}else l||(y||(y=[]),y.push(M,l)),l=S;else M==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,E=E?E.__html:void 0,S!=null&&E!==S&&(y=y||[]).push(M,S)):M==="children"?typeof S!="string"&&typeof S!="number"||(y=y||[]).push(M,""+S):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(s.hasOwnProperty(M)?(S!=null&&M==="onScroll"&&Pe("scroll",n),y||E===S||(y=[])):(y=y||[]).push(M,S))}l&&(y=y||[]).push("style",l);var M=y;(r.updateQueue=M)&&(r.flags|=4)}},td=function(n,r,l,d){l!==d&&(r.flags|=4)};function uo(n,r){if(!Ue)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function ot(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(r)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=d,n.childLanes=l,r}function Jh(n,r,l){var d=r.pendingProps;switch(Qs(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ct(r.type)&&Zo(),ot(r),null;case 3:return d=r.stateNode,fr(),De(ut),De(nt),dl(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(ni(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Mt!==null&&(Bl(Mt),Mt=null))),Rl(n,r),ot(r),null;case 5:ul(r);var p=Ln(oo.current);if(l=r.type,n!==null&&r.stateNode!=null)ed(n,r,l,d,p),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(e(166));return ot(r),null}if(n=Ln(Ot.current),ni(r)){d=r.stateNode,l=r.type;var y=r.memoizedProps;switch(d[bt]=r,d[Xr]=y,n=(r.mode&1)!==0,l){case"dialog":Pe("cancel",d),Pe("close",d);break;case"iframe":case"object":case"embed":Pe("load",d);break;case"video":case"audio":for(p=0;p<Kr.length;p++)Pe(Kr[p],d);break;case"source":Pe("error",d);break;case"img":case"image":case"link":Pe("error",d),Pe("load",d);break;case"details":Pe("toggle",d);break;case"input":Fa(d,y),Pe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Pe("invalid",d);break;case"textarea":ba(d,y),Pe("invalid",d)}cs(l,y),p=null;for(var C in y)if(y.hasOwnProperty(C)){var E=y[C];C==="children"?typeof E=="string"?d.textContent!==E&&(y.suppressHydrationWarning!==!0&&jo(d.textContent,E,n),p=["children",E]):typeof E=="number"&&d.textContent!==""+E&&(y.suppressHydrationWarning!==!0&&jo(d.textContent,E,n),p=["children",""+E]):s.hasOwnProperty(C)&&E!=null&&C==="onScroll"&&Pe("scroll",d)}switch(l){case"input":wo(d),Ua(d,y,!0);break;case"textarea":wo(d),za(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Jo)}d=p,r.updateQueue=d,d!==null&&(r.flags|=4)}else{C=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ba(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=C.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=C.createElement(l,{is:d.is}):(n=C.createElement(l),l==="select"&&(C=n,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):n=C.createElementNS(n,l),n[bt]=r,n[Xr]=d,Xc(n,r,!1,!1),r.stateNode=n;e:{switch(C=ds(l,d),l){case"dialog":Pe("cancel",n),Pe("close",n),p=d;break;case"iframe":case"object":case"embed":Pe("load",n),p=d;break;case"video":case"audio":for(p=0;p<Kr.length;p++)Pe(Kr[p],n);p=d;break;case"source":Pe("error",n),p=d;break;case"img":case"image":case"link":Pe("error",n),Pe("load",n),p=d;break;case"details":Pe("toggle",n),p=d;break;case"input":Fa(n,d),p=is(n,d),Pe("invalid",n);break;case"option":p=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=z({},d,{value:void 0}),Pe("invalid",n);break;case"textarea":ba(n,d),p=as(n,d),Pe("invalid",n);break;default:p=d}cs(l,p),E=p;for(y in E)if(E.hasOwnProperty(y)){var S=E[y];y==="style"?$a(n,S):y==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Ga(n,S)):y==="children"?typeof S=="string"?(l!=="textarea"||S!=="")&&Mr(n,S):typeof S=="number"&&Mr(n,""+S):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?S!=null&&y==="onScroll"&&Pe("scroll",n):S!=null&&q(n,y,S,C))}switch(l){case"input":wo(n),Ua(n,d,!1);break;case"textarea":wo(n),za(n);break;case"option":d.value!=null&&n.setAttribute("value",""+ke(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?Yn(n,!!d.multiple,y,!1):d.defaultValue!=null&&Yn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Jo)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return ot(r),null;case 6:if(n&&r.stateNode!=null)td(n,r,n.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(e(166));if(l=Ln(oo.current),Ln(Ot.current),ni(r)){if(d=r.stateNode,l=r.memoizedProps,d[bt]=r,(y=d.nodeValue!==l)&&(n=vt,n!==null))switch(n.tag){case 3:jo(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&jo(d.nodeValue,l,(n.mode&1)!==0)}y&&(r.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[bt]=r,r.stateNode=d}return ot(r),null;case 13:if(De(be),d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ue&&xt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)oc(),ar(),r.flags|=98560,y=!1;else if(y=ni(r),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[bt]=r}else ar(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),y=!1}else Mt!==null&&(Bl(Mt),Mt=null),y=!0;if(!y)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(be.current&1)!==0?Ke===0&&(Ke=3):$l())),r.updateQueue!==null&&(r.flags|=4),ot(r),null);case 4:return fr(),Rl(n,r),n===null&&Zr(r.stateNode.containerInfo),ot(r),null;case 10:return ol(r.type._context),ot(r),null;case 17:return ct(r.type)&&Zo(),ot(r),null;case 19:if(De(be),y=r.memoizedState,y===null)return ot(r),null;if(d=(r.flags&128)!==0,C=y.rendering,C===null)if(d)uo(y,!1);else{if(Ke!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(C=ai(n),C!==null){for(r.flags|=128,uo(y,!1),d=C.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=l,l=r.child;l!==null;)y=l,n=d,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,n=C.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Me(be,be.current&1|2),r.child}n=n.sibling}y.tail!==null&&He()>gr&&(r.flags|=128,d=!0,uo(y,!1),r.lanes=4194304)}else{if(!d)if(n=ai(C),n!==null){if(r.flags|=128,d=!0,l=n.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),uo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Ue)return ot(r),null}else 2*He()-y.renderingStartTime>gr&&l!==1073741824&&(r.flags|=128,d=!0,uo(y,!1),r.lanes=4194304);y.isBackwards?(C.sibling=r.child,r.child=C):(l=y.last,l!==null?l.sibling=C:r.child=C,y.last=C)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=He(),r.sibling=null,l=be.current,Me(be,d?l&1|2:l&1),r):(ot(r),null);case 22:case 23:return Hl(),d=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(Ct&1073741824)!==0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),null;case 24:return null;case 25:return null}throw Error(e(156,r.tag))}function Kh(n,r){switch(Qs(r),r.tag){case 1:return ct(r.type)&&Zo(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return fr(),De(ut),De(nt),dl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ul(r),null;case 13:if(De(be),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(e(340));ar()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return De(be),null;case 4:return fr(),null;case 10:return ol(r.type._context),null;case 22:case 23:return Hl(),null;case 24:return null;default:return null}}var yi=!1,it=!1,Zh=typeof WeakSet=="function"?WeakSet:Set,J=null;function mr(n,r){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Ge(n,r,d)}else l.current=null}function Ml(n,r,l){try{l()}catch(d){Ge(n,r,d)}}var nd=!1;function Qh(n,r){if(Hs=Uo,n=Lu(),Fs(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var C=0,E=-1,S=-1,M=0,V=0,O=n,F=null;t:for(;;){for(var j;O!==l||p!==0&&O.nodeType!==3||(E=C+p),O!==y||d!==0&&O.nodeType!==3||(S=C+d),O.nodeType===3&&(C+=O.nodeValue.length),(j=O.firstChild)!==null;)F=O,O=j;for(;;){if(O===n)break t;if(F===l&&++M===p&&(E=C),F===y&&++V===d&&(S=C),(j=O.nextSibling)!==null)break;O=F,F=O.parentNode}O=j}l=E===-1||S===-1?null:{start:E,end:S}}else l=null}l=l||{start:0,end:0}}else l=null;for($s={focusedElem:n,selectionRange:l},Uo=!1,J=r;J!==null;)if(r=J,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,J=n;else for(;J!==null;){r=J;try{var Q=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var ee=Q.memoizedProps,$e=Q.memoizedState,A=r.stateNode,I=A.getSnapshotBeforeUpdate(r.elementType===r.type?ee:Pt(r.type,ee),$e);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=r.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(G){Ge(r,r.return,G)}if(n=r.sibling,n!==null){n.return=r.return,J=n;break}J=r.return}return Q=nd,nd=!1,Q}function co(n,r,l){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&n)===n){var y=p.destroy;p.destroy=void 0,y!==void 0&&Ml(r,l,y)}p=p.next}while(p!==d)}}function vi(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==r)}}function Pl(n){var r=n.ref;if(r!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof r=="function"?r(n):r.current=n}}function rd(n){var r=n.alternate;r!==null&&(n.alternate=null,rd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[bt],delete r[Xr],delete r[js],delete r[Lh],delete r[Fh])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function od(n){return n.tag===5||n.tag===3||n.tag===4}function id(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||od(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Dl(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(n,r):l.insertBefore(n,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(n,l)):(r=l,r.appendChild(n)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Jo));else if(d!==4&&(n=n.child,n!==null))for(Dl(n,r,l),n=n.sibling;n!==null;)Dl(n,r,l),n=n.sibling}function Ll(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Ll(n,r,l),n=n.sibling;n!==null;)Ll(n,r,l),n=n.sibling}var et=null,Dt=!1;function gn(n,r,l){for(l=l.child;l!==null;)sd(n,r,l),l=l.sibling}function sd(n,r,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Mo,l)}catch{}switch(l.tag){case 5:it||mr(l,r);case 6:var d=et,p=Dt;et=null,gn(n,r,l),et=d,Dt=p,et!==null&&(Dt?(n=et,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):et.removeChild(l.stateNode));break;case 18:et!==null&&(Dt?(n=et,l=l.stateNode,n.nodeType===8?Ys(n.parentNode,l):n.nodeType===1&&Ys(n,l),Gr(n)):Ys(et,l.stateNode));break;case 4:d=et,p=Dt,et=l.stateNode.containerInfo,Dt=!0,gn(n,r,l),et=d,Dt=p;break;case 0:case 11:case 14:case 15:if(!it&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,C=y.destroy;y=y.tag,C!==void 0&&((y&2)!==0||(y&4)!==0)&&Ml(l,r,C),p=p.next}while(p!==d)}gn(n,r,l);break;case 1:if(!it&&(mr(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(E){Ge(l,r,E)}gn(n,r,l);break;case 21:gn(n,r,l);break;case 22:l.mode&1?(it=(d=it)||l.memoizedState!==null,gn(n,r,l),it=d):gn(n,r,l);break;default:gn(n,r,l)}}function ld(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Zh),r.forEach(function(d){var p=lg.bind(null,n,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Lt(n,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=n,C=r,E=C;e:for(;E!==null;){switch(E.tag){case 5:et=E.stateNode,Dt=!1;break e;case 3:et=E.stateNode.containerInfo,Dt=!0;break e;case 4:et=E.stateNode.containerInfo,Dt=!0;break e}E=E.return}if(et===null)throw Error(e(160));sd(y,C,p),et=null,Dt=!1;var S=p.alternate;S!==null&&(S.return=null),p.return=null}catch(M){Ge(p,r,M)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ad(r,n),r=r.sibling}function ad(n,r){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Lt(r,n),Bt(n),d&4){try{co(3,n,n.return),vi(3,n)}catch(ee){Ge(n,n.return,ee)}try{co(5,n,n.return)}catch(ee){Ge(n,n.return,ee)}}break;case 1:Lt(r,n),Bt(n),d&512&&l!==null&&mr(l,l.return);break;case 5:if(Lt(r,n),Bt(n),d&512&&l!==null&&mr(l,l.return),n.flags&32){var p=n.stateNode;try{Mr(p,"")}catch(ee){Ge(n,n.return,ee)}}if(d&4&&(p=n.stateNode,p!=null)){var y=n.memoizedProps,C=l!==null?l.memoizedProps:y,E=n.type,S=n.updateQueue;if(n.updateQueue=null,S!==null)try{E==="input"&&y.type==="radio"&&y.name!=null&&Va(p,y),ds(E,C);var M=ds(E,y);for(C=0;C<S.length;C+=2){var V=S[C],O=S[C+1];V==="style"?$a(p,O):V==="dangerouslySetInnerHTML"?Ga(p,O):V==="children"?Mr(p,O):q(p,V,O,M)}switch(E){case"input":ss(p,y);break;case"textarea":Oa(p,y);break;case"select":var F=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var j=y.value;j!=null?Yn(p,!!y.multiple,j,!1):F!==!!y.multiple&&(y.defaultValue!=null?Yn(p,!!y.multiple,y.defaultValue,!0):Yn(p,!!y.multiple,y.multiple?[]:"",!1))}p[Xr]=y}catch(ee){Ge(n,n.return,ee)}}break;case 6:if(Lt(r,n),Bt(n),d&4){if(n.stateNode===null)throw Error(e(162));p=n.stateNode,y=n.memoizedProps;try{p.nodeValue=y}catch(ee){Ge(n,n.return,ee)}}break;case 3:if(Lt(r,n),Bt(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Gr(r.containerInfo)}catch(ee){Ge(n,n.return,ee)}break;case 4:Lt(r,n),Bt(n);break;case 13:Lt(r,n),Bt(n),p=n.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Ul=He())),d&4&&ld(n);break;case 22:if(V=l!==null&&l.memoizedState!==null,n.mode&1?(it=(M=it)||V,Lt(r,n),it=M):Lt(r,n),Bt(n),d&8192){if(M=n.memoizedState!==null,(n.stateNode.isHidden=M)&&!V&&(n.mode&1)!==0)for(J=n,V=n.child;V!==null;){for(O=J=V;J!==null;){switch(F=J,j=F.child,F.tag){case 0:case 11:case 14:case 15:co(4,F,F.return);break;case 1:mr(F,F.return);var Q=F.stateNode;if(typeof Q.componentWillUnmount=="function"){d=F,l=F.return;try{r=d,Q.props=r.memoizedProps,Q.state=r.memoizedState,Q.componentWillUnmount()}catch(ee){Ge(d,l,ee)}}break;case 5:mr(F,F.return);break;case 22:if(F.memoizedState!==null){dd(O);continue}}j!==null?(j.return=F,J=j):dd(O)}V=V.sibling}e:for(V=null,O=n;;){if(O.tag===5){if(V===null){V=O;try{p=O.stateNode,M?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(E=O.stateNode,S=O.memoizedProps.style,C=S!=null&&S.hasOwnProperty("display")?S.display:null,E.style.display=Ha("display",C))}catch(ee){Ge(n,n.return,ee)}}}else if(O.tag===6){if(V===null)try{O.stateNode.nodeValue=M?"":O.memoizedProps}catch(ee){Ge(n,n.return,ee)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===n)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===n)break e;for(;O.sibling===null;){if(O.return===null||O.return===n)break e;V===O&&(V=null),O=O.return}V===O&&(V=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Lt(r,n),Bt(n),d&4&&ld(n);break;case 21:break;default:Lt(r,n),Bt(n)}}function Bt(n){var r=n.flags;if(r&2){try{e:{for(var l=n.return;l!==null;){if(od(l)){var d=l;break e}l=l.return}throw Error(e(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Mr(p,""),d.flags&=-33);var y=id(n);Ll(n,y,p);break;case 3:case 4:var C=d.stateNode.containerInfo,E=id(n);Dl(n,E,C);break;default:throw Error(e(161))}}catch(S){Ge(n,n.return,S)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Xh(n,r,l){J=n,ud(n)}function ud(n,r,l){for(var d=(n.mode&1)!==0;J!==null;){var p=J,y=p.child;if(p.tag===22&&d){var C=p.memoizedState!==null||yi;if(!C){var E=p.alternate,S=E!==null&&E.memoizedState!==null||it;E=yi;var M=it;if(yi=C,(it=S)&&!M)for(J=p;J!==null;)C=J,S=C.child,C.tag===22&&C.memoizedState!==null?fd(p):S!==null?(S.return=C,J=S):fd(p);for(;y!==null;)J=y,ud(y),y=y.sibling;J=p,yi=E,it=M}cd(n)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,J=y):cd(n)}}function cd(n){for(;J!==null;){var r=J;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:it||vi(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!it)if(l===null)d.componentDidMount();else{var p=r.elementType===r.type?l.memoizedProps:Pt(r.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=r.updateQueue;y!==null&&dc(r,y,d);break;case 3:var C=r.updateQueue;if(C!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}dc(r,C,l)}break;case 5:var E=r.stateNode;if(l===null&&r.flags&4){l=E;var S=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&l.focus();break;case"img":S.src&&(l.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var M=r.alternate;if(M!==null){var V=M.memoizedState;if(V!==null){var O=V.dehydrated;O!==null&&Gr(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}it||r.flags&512&&Pl(r)}catch(F){Ge(r,r.return,F)}}if(r===n){J=null;break}if(l=r.sibling,l!==null){l.return=r.return,J=l;break}J=r.return}}function dd(n){for(;J!==null;){var r=J;if(r===n){J=null;break}var l=r.sibling;if(l!==null){l.return=r.return,J=l;break}J=r.return}}function fd(n){for(;J!==null;){var r=J;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{vi(4,r)}catch(S){Ge(r,l,S)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var p=r.return;try{d.componentDidMount()}catch(S){Ge(r,p,S)}}var y=r.return;try{Pl(r)}catch(S){Ge(r,y,S)}break;case 5:var C=r.return;try{Pl(r)}catch(S){Ge(r,C,S)}}}catch(S){Ge(r,r.return,S)}if(r===n){J=null;break}var E=r.sibling;if(E!==null){E.return=r.return,J=E;break}J=r.return}}var eg=Math.ceil,xi=K.ReactCurrentDispatcher,Fl=K.ReactCurrentOwner,It=K.ReactCurrentBatchConfig,Te=0,Qe=null,qe=null,tt=0,Ct=0,hr=dn(0),Ke=0,fo=null,Vn=0,Ci=0,Vl=0,po=null,ft=null,Ul=0,gr=1/0,Xt=null,_i=!1,bl=null,yn=null,Ti=!1,vn=null,Ei=0,mo=0,Ol=null,Si=-1,wi=0;function lt(){return(Te&6)!==0?He():Si!==-1?Si:Si=He()}function xn(n){return(n.mode&1)===0?1:(Te&2)!==0&&tt!==0?tt&-tt:Uh.transition!==null?(wi===0&&(wi=iu()),wi):(n=Ae,n!==0||(n=window.event,n=n===void 0?16:mu(n.type)),n)}function Ft(n,r,l,d){if(50<mo)throw mo=0,Ol=null,Error(e(185));Ur(n,l,d),((Te&2)===0||n!==Qe)&&(n===Qe&&((Te&2)===0&&(Ci|=l),Ke===4&&Cn(n,tt)),pt(n,d),l===1&&Te===0&&(r.mode&1)===0&&(gr=He()+500,Xo&&pn()))}function pt(n,r){var l=n.callbackNode;Um(n,r);var d=Lo(n,n===Qe?tt:0);if(d===0)l!==null&&nu(l),n.callbackNode=null,n.callbackPriority=0;else if(r=d&-d,n.callbackPriority!==r){if(l!=null&&nu(l),r===1)n.tag===0?Vh(md.bind(null,n)):Xu(md.bind(null,n)),Ph(function(){(Te&6)===0&&pn()}),l=null;else{switch(su(d)){case 1:l=vs;break;case 4:l=ru;break;case 16:l=Ro;break;case 536870912:l=ou;break;default:l=Ro}l=Td(l,pd.bind(null,n))}n.callbackPriority=r,n.callbackNode=l}}function pd(n,r){if(Si=-1,wi=0,(Te&6)!==0)throw Error(e(327));var l=n.callbackNode;if(yr()&&n.callbackNode!==l)return null;var d=Lo(n,n===Qe?tt:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||r)r=Ii(n,d);else{r=d;var p=Te;Te|=2;var y=gd();(Qe!==n||tt!==r)&&(Xt=null,gr=He()+500,bn(n,r));do try{rg();break}catch(E){hd(n,E)}while(!0);rl(),xi.current=y,Te=p,qe!==null?r=0:(Qe=null,tt=0,r=Ke)}if(r!==0){if(r===2&&(p=xs(n),p!==0&&(d=p,r=zl(n,p))),r===1)throw l=fo,bn(n,0),Cn(n,d),pt(n,He()),l;if(r===6)Cn(n,d);else{if(p=n.current.alternate,(d&30)===0&&!tg(p)&&(r=Ii(n,d),r===2&&(y=xs(n),y!==0&&(d=y,r=zl(n,y))),r===1))throw l=fo,bn(n,0),Cn(n,d),pt(n,He()),l;switch(n.finishedWork=p,n.finishedLanes=d,r){case 0:case 1:throw Error(e(345));case 2:On(n,ft,Xt);break;case 3:if(Cn(n,d),(d&130023424)===d&&(r=Ul+500-He(),10<r)){if(Lo(n,0)!==0)break;if(p=n.suspendedLanes,(p&d)!==d){lt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Ws(On.bind(null,n,ft,Xt),r);break}On(n,ft,Xt);break;case 4:if(Cn(n,d),(d&4194240)===d)break;for(r=n.eventTimes,p=-1;0<d;){var C=31-At(d);y=1<<C,C=r[C],C>p&&(p=C),d&=~y}if(d=p,d=He()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*eg(d/1960))-d,10<d){n.timeoutHandle=Ws(On.bind(null,n,ft,Xt),d);break}On(n,ft,Xt);break;case 5:On(n,ft,Xt);break;default:throw Error(e(329))}}}return pt(n,He()),n.callbackNode===l?pd.bind(null,n):null}function zl(n,r){var l=po;return n.current.memoizedState.isDehydrated&&(bn(n,r).flags|=256),n=Ii(n,r),n!==2&&(r=ft,ft=l,r!==null&&Bl(r)),n}function Bl(n){ft===null?ft=n:ft.push.apply(ft,n)}function tg(n){for(var r=n;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Rt(y(),p))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Cn(n,r){for(r&=~Vl,r&=~Ci,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var l=31-At(r),d=1<<l;n[l]=-1,r&=~d}}function md(n){if((Te&6)!==0)throw Error(e(327));yr();var r=Lo(n,0);if((r&1)===0)return pt(n,He()),null;var l=Ii(n,r);if(n.tag!==0&&l===2){var d=xs(n);d!==0&&(r=d,l=zl(n,d))}if(l===1)throw l=fo,bn(n,0),Cn(n,r),pt(n,He()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,On(n,ft,Xt),pt(n,He()),null}function Gl(n,r){var l=Te;Te|=1;try{return n(r)}finally{Te=l,Te===0&&(gr=He()+500,Xo&&pn())}}function Un(n){vn!==null&&vn.tag===0&&(Te&6)===0&&yr();var r=Te;Te|=1;var l=It.transition,d=Ae;try{if(It.transition=null,Ae=1,n)return n()}finally{Ae=d,It.transition=l,Te=r,(Te&6)===0&&pn()}}function Hl(){Ct=hr.current,De(hr)}function bn(n,r){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,Mh(l)),qe!==null)for(l=qe.return;l!==null;){var d=l;switch(Qs(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Zo();break;case 3:fr(),De(ut),De(nt),dl();break;case 5:ul(d);break;case 4:fr();break;case 13:De(be);break;case 19:De(be);break;case 10:ol(d.type._context);break;case 22:case 23:Hl()}l=l.return}if(Qe=n,qe=n=_n(n.current,null),tt=Ct=r,Ke=0,fo=null,Vl=Ci=Vn=0,ft=po=null,Dn!==null){for(r=0;r<Dn.length;r++)if(l=Dn[r],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var C=y.next;y.next=p,d.next=C}l.pending=d}Dn=null}return n}function hd(n,r){do{var l=qe;try{if(rl(),ui.current=pi,ci){for(var d=Oe.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}ci=!1}if(Fn=0,Ze=Je=Oe=null,io=!1,so=0,Fl.current=null,l===null||l.return===null){Ke=1,fo=r,qe=null;break}e:{var y=n,C=l.return,E=l,S=r;if(r=tt,E.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var M=S,V=E,O=V.tag;if((V.mode&1)===0&&(O===0||O===11||O===15)){var F=V.alternate;F?(V.updateQueue=F.updateQueue,V.memoizedState=F.memoizedState,V.lanes=F.lanes):(V.updateQueue=null,V.memoizedState=null)}var j=zc(C);if(j!==null){j.flags&=-257,Bc(j,C,E,y,r),j.mode&1&&Oc(y,M,r),r=j,S=M;var Q=r.updateQueue;if(Q===null){var ee=new Set;ee.add(S),r.updateQueue=ee}else Q.add(S);break e}else{if((r&1)===0){Oc(y,M,r),$l();break e}S=Error(e(426))}}else if(Ue&&E.mode&1){var $e=zc(C);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),Bc($e,C,E,y,r),tl(pr(S,E));break e}}y=S=pr(S,E),Ke!==4&&(Ke=2),po===null?po=[y]:po.push(y),y=C;do{switch(y.tag){case 3:y.flags|=65536,r&=-r,y.lanes|=r;var A=Uc(y,S,r);cc(y,A);break e;case 1:E=S;var I=y.type,R=y.stateNode;if((y.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(yn===null||!yn.has(R)))){y.flags|=65536,r&=-r,y.lanes|=r;var G=bc(y,E,r);cc(y,G);break e}}y=y.return}while(y!==null)}vd(l)}catch(te){r=te,qe===l&&l!==null&&(qe=l=l.return);continue}break}while(!0)}function gd(){var n=xi.current;return xi.current=pi,n===null?pi:n}function $l(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||(Vn&268435455)===0&&(Ci&268435455)===0||Cn(Qe,tt)}function Ii(n,r){var l=Te;Te|=2;var d=gd();(Qe!==n||tt!==r)&&(Xt=null,bn(n,r));do try{ng();break}catch(p){hd(n,p)}while(!0);if(rl(),Te=l,xi.current=d,qe!==null)throw Error(e(261));return Qe=null,tt=0,Ke}function ng(){for(;qe!==null;)yd(qe)}function rg(){for(;qe!==null&&!km();)yd(qe)}function yd(n){var r=_d(n.alternate,n,Ct);n.memoizedProps=n.pendingProps,r===null?vd(n):qe=r,Fl.current=null}function vd(n){var r=n;do{var l=r.alternate;if(n=r.return,(r.flags&32768)===0){if(l=Jh(l,r,Ct),l!==null){qe=l;return}}else{if(l=Kh(l,r),l!==null){l.flags&=32767,qe=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ke=6,qe=null;return}}if(r=r.sibling,r!==null){qe=r;return}qe=r=n}while(r!==null);Ke===0&&(Ke=5)}function On(n,r,l){var d=Ae,p=It.transition;try{It.transition=null,Ae=1,og(n,r,l,d)}finally{It.transition=p,Ae=d}return null}function og(n,r,l,d){do yr();while(vn!==null);if((Te&6)!==0)throw Error(e(327));l=n.finishedWork;var p=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(bm(n,y),n===Qe&&(qe=Qe=null,tt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ti||(Ti=!0,Td(Ro,function(){return yr(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=It.transition,It.transition=null;var C=Ae;Ae=1;var E=Te;Te|=4,Fl.current=null,Qh(n,l),ad(l,n),Sh($s),Uo=!!Hs,$s=Hs=null,n.current=l,Xh(l),Am(),Te=E,Ae=C,It.transition=y}else n.current=l;if(Ti&&(Ti=!1,vn=n,Ei=p),y=n.pendingLanes,y===0&&(yn=null),Pm(l.stateNode),pt(n,He()),r!==null)for(d=n.onRecoverableError,l=0;l<r.length;l++)p=r[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(_i)throw _i=!1,n=bl,bl=null,n;return(Ei&1)!==0&&n.tag!==0&&yr(),y=n.pendingLanes,(y&1)!==0?n===Ol?mo++:(mo=0,Ol=n):mo=0,pn(),null}function yr(){if(vn!==null){var n=su(Ei),r=It.transition,l=Ae;try{if(It.transition=null,Ae=16>n?16:n,vn===null)var d=!1;else{if(n=vn,vn=null,Ei=0,(Te&6)!==0)throw Error(e(331));var p=Te;for(Te|=4,J=n.current;J!==null;){var y=J,C=y.child;if((J.flags&16)!==0){var E=y.deletions;if(E!==null){for(var S=0;S<E.length;S++){var M=E[S];for(J=M;J!==null;){var V=J;switch(V.tag){case 0:case 11:case 15:co(8,V,y)}var O=V.child;if(O!==null)O.return=V,J=O;else for(;J!==null;){V=J;var F=V.sibling,j=V.return;if(rd(V),V===M){J=null;break}if(F!==null){F.return=j,J=F;break}J=j}}}var Q=y.alternate;if(Q!==null){var ee=Q.child;if(ee!==null){Q.child=null;do{var $e=ee.sibling;ee.sibling=null,ee=$e}while(ee!==null)}}J=y}}if((y.subtreeFlags&2064)!==0&&C!==null)C.return=y,J=C;else e:for(;J!==null;){if(y=J,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:co(9,y,y.return)}var A=y.sibling;if(A!==null){A.return=y.return,J=A;break e}J=y.return}}var I=n.current;for(J=I;J!==null;){C=J;var R=C.child;if((C.subtreeFlags&2064)!==0&&R!==null)R.return=C,J=R;else e:for(C=I;J!==null;){if(E=J,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:vi(9,E)}}catch(te){Ge(E,E.return,te)}if(E===C){J=null;break e}var G=E.sibling;if(G!==null){G.return=E.return,J=G;break e}J=E.return}}if(Te=p,pn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Mo,n)}catch{}d=!0}return d}finally{Ae=l,It.transition=r}}return!1}function xd(n,r,l){r=pr(l,r),r=Uc(n,r,1),n=hn(n,r,1),r=lt(),n!==null&&(Ur(n,1,r),pt(n,r))}function Ge(n,r,l){if(n.tag===3)xd(n,n,l);else for(;r!==null;){if(r.tag===3){xd(r,n,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(yn===null||!yn.has(d))){n=pr(l,n),n=bc(r,n,1),r=hn(r,n,1),n=lt(),r!==null&&(Ur(r,1,n),pt(r,n));break}}r=r.return}}function ig(n,r,l){var d=n.pingCache;d!==null&&d.delete(r),r=lt(),n.pingedLanes|=n.suspendedLanes&l,Qe===n&&(tt&l)===l&&(Ke===4||Ke===3&&(tt&130023424)===tt&&500>He()-Ul?bn(n,0):Vl|=l),pt(n,r)}function Cd(n,r){r===0&&((n.mode&1)===0?r=1:(r=Do,Do<<=1,(Do&130023424)===0&&(Do=4194304)));var l=lt();n=Kt(n,r),n!==null&&(Ur(n,r,l),pt(n,l))}function sg(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Cd(n,l)}function lg(n,r){var l=0;switch(n.tag){case 13:var d=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(e(314))}d!==null&&d.delete(r),Cd(n,l)}var _d;_d=function(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps||ut.current)dt=!0;else{if((n.lanes&l)===0&&(r.flags&128)===0)return dt=!1,jh(n,r,l);dt=(n.flags&131072)!==0}else dt=!1,Ue&&(r.flags&1048576)!==0&&ec(r,ti,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;gi(n,r),n=r.pendingProps;var p=ir(r,nt.current);dr(r,l),p=ml(null,r,d,n,p,l);var y=hl();return r.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ct(d)?(y=!0,Qo(r)):y=!1,r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,ll(r),p.updater=mi,r.stateNode=p,p._reactInternals=r,_l(r,d,n,l),r=wl(null,r,d,!0,y,l)):(r.tag=0,Ue&&y&&Zs(r),st(null,r,p,l),r=r.child),r;case 16:d=r.elementType;e:{switch(gi(n,r),n=r.pendingProps,p=d._init,d=p(d._payload),r.type=d,p=r.tag=ug(d),n=Pt(d,n),p){case 0:r=Sl(null,r,d,n,l);break e;case 1:r=Yc(null,r,d,n,l);break e;case 11:r=Gc(null,r,d,n,l);break e;case 14:r=Hc(null,r,d,Pt(d.type,n),l);break e}throw Error(e(306,d,""))}return r;case 0:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),Sl(n,r,d,p,l);case 1:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),Yc(n,r,d,p,l);case 3:e:{if(jc(r),n===null)throw Error(e(387));d=r.pendingProps,y=r.memoizedState,p=y.element,uc(n,r),li(r,d,null,l);var C=r.memoizedState;if(d=C.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){p=pr(Error(e(423)),r),r=Jc(n,r,d,l,p);break e}else if(d!==p){p=pr(Error(e(424)),r),r=Jc(n,r,d,l,p);break e}else for(xt=cn(r.stateNode.containerInfo.firstChild),vt=r,Ue=!0,Mt=null,l=lc(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ar(),d===p){r=Qt(n,r,l);break e}st(n,r,d,l)}r=r.child}return r;case 5:return fc(r),n===null&&el(r),d=r.type,p=r.pendingProps,y=n!==null?n.memoizedProps:null,C=p.children,qs(d,p)?C=null:y!==null&&qs(d,y)&&(r.flags|=32),Wc(n,r),st(n,r,C,l),r.child;case 6:return n===null&&el(r),null;case 13:return Kc(n,r,l);case 4:return al(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=ur(r,null,d,l):st(n,r,d,l),r.child;case 11:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),Gc(n,r,d,p,l);case 7:return st(n,r,r.pendingProps,l),r.child;case 8:return st(n,r,r.pendingProps.children,l),r.child;case 12:return st(n,r,r.pendingProps.children,l),r.child;case 10:e:{if(d=r.type._context,p=r.pendingProps,y=r.memoizedProps,C=p.value,Me(oi,d._currentValue),d._currentValue=C,y!==null)if(Rt(y.value,C)){if(y.children===p.children&&!ut.current){r=Qt(n,r,l);break e}}else for(y=r.child,y!==null&&(y.return=r);y!==null;){var E=y.dependencies;if(E!==null){C=y.child;for(var S=E.firstContext;S!==null;){if(S.context===d){if(y.tag===1){S=Zt(-1,l&-l),S.tag=2;var M=y.updateQueue;if(M!==null){M=M.shared;var V=M.pending;V===null?S.next=S:(S.next=V.next,V.next=S),M.pending=S}}y.lanes|=l,S=y.alternate,S!==null&&(S.lanes|=l),il(y.return,l,r),E.lanes|=l;break}S=S.next}}else if(y.tag===10)C=y.type===r.type?null:y.child;else if(y.tag===18){if(C=y.return,C===null)throw Error(e(341));C.lanes|=l,E=C.alternate,E!==null&&(E.lanes|=l),il(C,l,r),C=y.sibling}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===r){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}st(n,r,p.children,l),r=r.child}return r;case 9:return p=r.type,d=r.pendingProps.children,dr(r,l),p=St(p),d=d(p),r.flags|=1,st(n,r,d,l),r.child;case 14:return d=r.type,p=Pt(d,r.pendingProps),p=Pt(d.type,p),Hc(n,r,d,p,l);case 15:return $c(n,r,r.type,r.pendingProps,l);case 17:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),gi(n,r),r.tag=1,ct(d)?(n=!0,Qo(r)):n=!1,dr(r,l),Fc(r,d,p),_l(r,d,p,l),wl(null,r,d,!0,n,l);case 19:return Qc(n,r,l);case 22:return qc(n,r,l)}throw Error(e(156,r.tag))};function Td(n,r){return tu(n,r)}function ag(n,r,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(n,r,l,d){return new ag(n,r,l,d)}function ql(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ug(n){if(typeof n=="function")return ql(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ye)return 11;if(n===Ye)return 14}return 2}function _n(n,r){var l=n.alternate;return l===null?(l=Nt(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Ni(n,r,l,d,p,y){var C=2;if(d=n,typeof n=="function")ql(n)&&(C=1);else if(typeof n=="string")C=5;else e:switch(n){case oe:return zn(l.children,p,y,r);case _e:C=8,p|=8;break;case se:return n=Nt(12,l,r,p|2),n.elementType=se,n.lanes=y,n;case Ne:return n=Nt(13,l,r,p),n.elementType=Ne,n.lanes=y,n;case Ce:return n=Nt(19,l,r,p),n.elementType=Ce,n.lanes=y,n;case re:return ki(l,p,y,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pe:C=10;break e;case Be:C=9;break e;case ye:C=11;break e;case Ye:C=14;break e;case je:C=16,d=null;break e}throw Error(e(130,n==null?n:typeof n,""))}return r=Nt(C,l,r,p),r.elementType=n,r.type=d,r.lanes=y,r}function zn(n,r,l,d){return n=Nt(7,n,d,r),n.lanes=l,n}function ki(n,r,l,d){return n=Nt(22,n,d,r),n.elementType=re,n.lanes=l,n.stateNode={isHidden:!1},n}function Wl(n,r,l){return n=Nt(6,n,null,r),n.lanes=l,n}function Yl(n,r,l){return r=Nt(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function cg(n,r,l,d,p){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cs(0),this.expirationTimes=Cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function jl(n,r,l,d,p,y,C,E,S){return n=new cg(n,r,l,E,S),r===1?(r=1,y===!0&&(r|=8)):r=0,y=Nt(3,null,null,r),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},ll(y),n}function dg(n,r,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:n,containerInfo:r,implementation:l}}function Ed(n){if(!n)return fn;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(e(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ct(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(ct(l))return Zu(n,l,r)}return r}function Sd(n,r,l,d,p,y,C,E,S){return n=jl(l,d,!0,n,p,y,C,E,S),n.context=Ed(null),l=n.current,d=lt(),p=xn(l),y=Zt(d,p),y.callback=r??null,hn(l,y,p),n.current.lanes=p,Ur(n,p,d),pt(n,d),n}function Ai(n,r,l,d){var p=r.current,y=lt(),C=xn(p);return l=Ed(l),r.context===null?r.context=l:r.pendingContext=l,r=Zt(y,C),r.payload={element:n},d=d===void 0?null:d,d!==null&&(r.callback=d),n=hn(p,r,C),n!==null&&(Ft(n,p,C,y),si(n,p,C)),C}function Ri(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wd(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Jl(n,r){wd(n,r),(n=n.alternate)&&wd(n,r)}function fg(){return null}var Id=typeof reportError=="function"?reportError:function(n){console.error(n)};function Kl(n){this._internalRoot=n}Mi.prototype.render=Kl.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(e(409));Ai(n,r,null,null)},Mi.prototype.unmount=Kl.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Un(function(){Ai(null,n,null,null)}),r[Wt]=null}};function Mi(n){this._internalRoot=n}Mi.prototype.unstable_scheduleHydration=function(n){if(n){var r=uu();n={blockedOn:null,target:n,priority:r};for(var l=0;l<ln.length&&r!==0&&r<ln[l].priority;l++);ln.splice(l,0,n),l===0&&fu(n)}};function Zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pi(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Nd(){}function pg(n,r,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var M=Ri(C);y.call(M)}}var C=Sd(r,d,n,0,null,!1,!1,"",Nd);return n._reactRootContainer=C,n[Wt]=C.current,Zr(n.nodeType===8?n.parentNode:n),Un(),C}for(;p=n.lastChild;)n.removeChild(p);if(typeof d=="function"){var E=d;d=function(){var M=Ri(S);E.call(M)}}var S=jl(n,0,!1,null,null,!1,!1,"",Nd);return n._reactRootContainer=S,n[Wt]=S.current,Zr(n.nodeType===8?n.parentNode:n),Un(function(){Ai(r,S,l,d)}),S}function Di(n,r,l,d,p){var y=l._reactRootContainer;if(y){var C=y;if(typeof p=="function"){var E=p;p=function(){var S=Ri(C);E.call(S)}}Ai(r,C,n,p)}else C=pg(l,r,n,p,d);return Ri(C)}lu=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var l=Vr(r.pendingLanes);l!==0&&(_s(r,l|1),pt(r,He()),(Te&6)===0&&(gr=He()+500,pn()))}break;case 13:Un(function(){var d=Kt(n,1);if(d!==null){var p=lt();Ft(d,n,1,p)}}),Jl(n,1)}},Ts=function(n){if(n.tag===13){var r=Kt(n,134217728);if(r!==null){var l=lt();Ft(r,n,134217728,l)}Jl(n,134217728)}},au=function(n){if(n.tag===13){var r=xn(n),l=Kt(n,r);if(l!==null){var d=lt();Ft(l,n,r,d)}Jl(n,r)}},uu=function(){return Ae},cu=function(n,r){var l=Ae;try{return Ae=n,r()}finally{Ae=l}},ms=function(n,r,l){switch(r){case"input":if(ss(n,l),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==n&&d.form===n.form){var p=Ko(d);if(!p)throw Error(e(90));La(d),ss(d,p)}}}break;case"textarea":Oa(n,l);break;case"select":r=l.value,r!=null&&Yn(n,!!l.multiple,r,!1)}},ja=Gl,Ja=Un;var mg={usingClientEntryPoint:!1,Events:[eo,rr,Ko,Wa,Ya,Gl]},ho={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hg={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Xa(n),n===null?null:n.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Li.isDisabled&&Li.supportsFiber)try{Mo=Li.inject(hg),Ut=Li}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg,mt.createPortal=function(n,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zl(r))throw Error(e(200));return dg(n,r,null,l)},mt.createRoot=function(n,r){if(!Zl(n))throw Error(e(299));var l=!1,d="",p=Id;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),r=jl(n,1,!1,null,null,l,!1,d,p),n[Wt]=r.current,Zr(n.nodeType===8?n.parentNode:n),new Kl(r)},mt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=Xa(r),n=n===null?null:n.stateNode,n},mt.flushSync=function(n){return Un(n)},mt.hydrate=function(n,r,l){if(!Pi(r))throw Error(e(200));return Di(null,n,r,!0,l)},mt.hydrateRoot=function(n,r,l){if(!Zl(n))throw Error(e(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",C=Id;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),r=Sd(r,null,n,1,l??null,p,!1,y,C),n[Wt]=r.current,Zr(n),d)for(n=0;n<d.length;n++)l=d[n],p=l._getVersion,p=p(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,p]:r.mutableSourceEagerHydrationData.push(l,p);return new Mi(r)},mt.render=function(n,r,l){if(!Pi(r))throw Error(e(200));return Di(null,n,r,!1,l)},mt.unmountComponentAtNode=function(n){if(!Pi(n))throw Error(e(40));return n._reactRootContainer?(Un(function(){Di(null,null,n,!1,function(){n._reactRootContainer=null,n[Wt]=null})}),!0):!1},mt.unstable_batchedUpdates=Gl,mt.unstable_renderSubtreeIntoContainer=function(n,r,l,d){if(!Pi(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Di(n,r,l,!1,d)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var Fd;function yp(){if(Fd)return ea.exports;Fd=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),ea.exports=Eg(),ea.exports}var Vd;function Sg(){if(Vd)return Fi;Vd=1;var o=yp();return Fi.createRoot=o.createRoot,Fi.hydrateRoot=o.hydrateRoot,Fi}var vp=Sg(),B=Aa();const Nr=yg(B),xp="japanese-analyzer-history-v2",Cp="japanese-analyzer-review-deck",la="japanese-analyzer-unsaved-title",aa="japanese-analyzer-unsaved-text",_p="japanese-analyzer-analysis-depth",Tp="theme",Ep="furigana-hidden",Sp="color-coding-hidden",wp="pitch-accent-hidden",Ip="japanese-analyzer-font-size",Np="japanese-analyzer-new-words-per-day",Hi="japanese-analyzer-user-api-key",$i=[{label:"XX-Small",value:"0.75"},{label:"X-Small",value:"0.85"},{label:"Small",value:"1.0"},{label:"Medium",value:"1.15"},{label:"Large",value:"1.3"},{label:"X-Large",value:"1.5"}],kp=2;var Le=(o=>(o.Editor="EDITOR",o.Reader="READER",o.ReadingMode="READING_MODE",o.Review="REVIEW",o))(Le||{});const Bn=o=>{try{localStorage.setItem(xp,JSON.stringify(o))}catch(t){console.error("Failed to save history to localStorage",t)}},ra=o=>{try{o.sort((t,e)=>t.addedAt-e.addedAt),localStorage.setItem(Cp,JSON.stringify(o))}catch(t){console.error("Failed to save review deck to localStorage",t)}},Ap={view:"EDITOR",currentTextEntryId:null,editingEntryId:null,selectedSentence:null,history:[],reviewDeck:[]},wg=(o,t)=>{switch(t.type){case"INITIALIZE_DATA":return{...o,...t.payload};case"SET_VIEW":return{...o,view:t.payload,selectedSentence:null};case"START_EDITING":return{...o,view:"EDITOR",editingEntryId:t.payload,currentTextEntryId:t.payload,selectedSentence:null};case"RESET_VIEW":return localStorage.removeItem(la),localStorage.removeItem(aa),{...o,view:"EDITOR",currentTextEntryId:null,selectedSentence:null,editingEntryId:null};case"SET_CURRENT_TEXT_ENTRY_ID":return{...o,currentTextEntryId:t.payload,selectedSentence:null};case"SET_SELECTED_SENTENCE":return{...o,selectedSentence:t.payload};case"SET_HISTORY":return Bn(t.payload),{...o,history:t.payload};case"ADD_OR_UPDATE_TEXT_ENTRY":{const e=t.payload,i=o.history.findIndex(a=>a.id===e.id);let s;return i>-1?(s=[...o.history],s[i]=e):s=[e,...o.history],s.sort((a,f)=>f.updatedAt-a.updatedAt),Bn(s),{...o,history:s,editingEntryId:null}}case"REMOVE_TEXT_ENTRY":{const e=o.history.filter(s=>s.id!==t.payload);Bn(e);const i=o.currentTextEntryId===t.payload;return{...o,history:e,currentTextEntryId:i?null:o.currentTextEntryId,view:i?"EDITOR":o.view,selectedSentence:i?null:o.selectedSentence}}case"CLEAR_HISTORY":return Bn([]),{...o,history:[],currentTextEntryId:null,view:"EDITOR",selectedSentence:null};case"SET_REVIEW_DECK":return ra(t.payload),{...o,reviewDeck:t.payload};case"ADD_OR_UPDATE_REVIEW_ITEM":{const e=t.payload,i=o.reviewDeck.findIndex(a=>a.id===e.id);let s;return i>-1?(s=[...o.reviewDeck],s[i]=e):s=[...o.reviewDeck,e],ra(s),{...o,reviewDeck:s}}case"REMOVE_REVIEW_ITEM":{const e=o.reviewDeck.filter(i=>i.id!==t.payload);return ra(e),{...o,reviewDeck:e}}case"NAVIGATE_SENTENCE":{if(!o.currentTextEntryId)return o;const e=o.history.findIndex(g=>g.id===o.currentTextEntryId);if(e===-1)return o;const i=[...o.history],s={...i[e]},a=s.text.split(`
`).flatMap(g=>{var h;return((h=g.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:h.filter(x=>x==null?void 0:x.trim()))||[]}),m=s.readingProgress+(t.payload.direction==="next"?1:-1);return m>=0&&m<a.length?(s.readingProgress=m,i[e]=s,Bn(i),{...o,history:i}):o}case"JUMP_TO_SENTENCE":{if(!o.currentTextEntryId)return o;const e=o.history.findIndex(m=>m.id===o.currentTextEntryId);if(e===-1)return o;const i=[...o.history],s={...i[e]},a=s.text.split(`
`).flatMap(m=>{var g;return((g=m.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:g.filter(h=>h==null?void 0:h.trim()))||[]}),f=t.payload.index;return f>=0&&f<a.length?(s.readingProgress=f,i[e]=s,Bn(i),{...o,history:i}):o}case"CACHE_ANALYSIS":{const{entryId:e,sentence:i,depth:s,analysis:a}=t.payload,f=o.history.findIndex(T=>T.id===e);if(f===-1)return o;const m=[...o.history],g=m[f],h={...g.analyzedSentences[i]||{},[s]:a},x={...g.analyzedSentences,[i]:h},_={...g,analyzedSentences:x};return m[f]=_,Bn(m),{...o,history:m}}default:return o}},Rp=B.createContext({state:Ap,dispatch:()=>null});function Mp({children:o}){const[t,e]=B.useReducer(wg,Ap);return B.useEffect(()=>{try{const i=JSON.parse(localStorage.getItem(xp)||"[]"),a=JSON.parse(localStorage.getItem(Cp)||"[]").map(f=>{if(f.hasOwnProperty("easeFactor")||!f.hasOwnProperty("srsStage")){console.log(`Migrating item ${f.id} to new SRS format.`);const{id:m,type:g,content:h,textEntryId:x,addedAt:_}=f;return{id:m,type:g,content:h,textEntryId:x,addedAt:_,srsStage:0,incorrectAnswerCount:0,nextReviewDate:new Date().setHours(0,0,0,0)}}return f});e({type:"INITIALIZE_DATA",payload:{history:i,reviewDeck:a}})}catch(i){console.error("Failed to load app data from localStorage",i)}},[]),v.jsx(Rp.Provider,{value:{state:t,dispatch:e},children:o})}const _t=()=>B.useContext(Rp),Ud=["low","medium","high"],Pp={theme:"light",showFurigana:!0,showColorCoding:!0,showPitchAccent:!0,analysisDepth:"medium",fontSizeIndex:kp,newWordsPerDay:10,userApiKey:null},Ig=(o,t)=>{switch(t.type){case"INITIALIZE_SETTINGS":return t.payload;case"UPDATE_SETTINGS":{const e={...o,...t.payload};if(localStorage.setItem(Tp,e.theme),localStorage.setItem(Ep,String(!e.showFurigana)),localStorage.setItem(Sp,String(!e.showColorCoding)),localStorage.setItem(wp,String(!e.showPitchAccent)),localStorage.setItem(_p,e.analysisDepth),localStorage.setItem(Ip,String(e.fontSizeIndex)),localStorage.setItem(Np,String(e.newWordsPerDay)),typeof e.userApiKey=="string"&&e.userApiKey.trim().length>0){const i=e.userApiKey.trim();localStorage.setItem(Hi,i),e.userApiKey=i}else localStorage.removeItem(Hi),e.userApiKey=null;return document.documentElement.classList.toggle("dark",e.theme==="dark"),document.documentElement.style.setProperty("--font-size-multiplier",$i[e.fontSizeIndex].value),e}default:return o}},Dp=B.createContext({state:Pp,dispatch:()=>null});function Lp({children:o}){const[t,e]=B.useReducer(Ig,Pp);return B.useEffect(()=>{try{const i={theme:localStorage.getItem(Tp)||"light",showFurigana:localStorage.getItem(Ep)!=="true",showColorCoding:localStorage.getItem(Sp)!=="true",showPitchAccent:localStorage.getItem(wp)!=="true",analysisDepth:localStorage.getItem(_p)||"medium",fontSizeIndex:parseInt(localStorage.getItem(Ip)||String(kp),10),newWordsPerDay:parseInt(localStorage.getItem(Np)||"10",10),userApiKey:localStorage.getItem(Hi)||null};document.documentElement.classList.toggle("dark",i.theme==="dark"),document.documentElement.style.setProperty("--font-size-multiplier",$i[i.fontSizeIndex].value),e({type:"INITIALIZE_SETTINGS",payload:i})}catch(i){console.error("Failed to load settings from localStorage",i)}},[]),v.jsx(Dp.Provider,{value:{state:t,dispatch:e},children:o})}const tn=()=>B.useContext(Dp),Co={isHistoryPanelOpen:!1,tooltip:{visible:!1,content:null,position:{top:0,left:0},pinned:!1,targetElement:null},bottomSheet:{visible:!1,content:{title:"",body:null},targetElement:null}},Ng=(o,t)=>{switch(t.type){case"SET_HISTORY_PANEL_OPEN":return{...o,isHistoryPanelOpen:t.payload};case"SHOW_TOOLTIP":return o.tooltip.pinned?o:{...o,tooltip:{...o.tooltip,visible:!0,pinned:!1,...t.payload}};case"HIDE_TOOLTIP":return{...o,tooltip:{...Co.tooltip}};case"PIN_TOOLTIP":return o.tooltip.targetElement===t.payload.targetElement&&o.tooltip.pinned?{...o,tooltip:{...Co.tooltip}}:{...o,tooltip:{visible:!0,pinned:!0,...t.payload}};case"SHOW_BOTTOM_SHEET":return document.body.classList.add("overflow-hidden","md:overflow-auto"),{...o,bottomSheet:{visible:!0,...t.payload}};case"HIDE_BOTTOM_SHEET":return document.body.classList.remove("overflow-hidden","md:overflow-auto"),{...o,bottomSheet:{...Co.bottomSheet}};default:return o}},Fp=B.createContext({state:Co,dispatch:()=>null});function Vp({children:o}){const[t,e]=B.useReducer(Ng,Co);return v.jsx(Fp.Provider,{value:{state:t,dispatch:e},children:o})}const nn=()=>B.useContext(Fp);var es=yp();const Up=B.createContext(void 0);function bp({children:o}){const[t,e]=B.useState({isOpen:!1,message:""}),i=()=>{e({isOpen:!1,message:""})},s=()=>{var g;(g=t.onConfirm)==null||g.call(t),i()},a=()=>{var g;(g=t.onCancel)==null||g.call(t),i()},f=B.useCallback((g,h,x={})=>{e({isOpen:!0,message:g,onConfirm:h,onCancel:()=>{},confirmText:x.confirmText||"Confirm",confirmClass:x.confirmClass||"bg-destructive hover:bg-destructive-hover",cancelText:x.cancelText||"Cancel",isAlert:!1})},[]),m=B.useCallback((g,h={})=>{e({isOpen:!0,message:g,onConfirm:h.onOk,confirmText:"OK",confirmClass:"bg-accent hover:bg-accent/90",isAlert:!0})},[]);return v.jsxs(Up.Provider,{value:{showConfirmation:f,showAlert:m},children:[o,t.isOpen&&es.createPortal(v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 transition-opacity animate-fade-in",children:v.jsxs("div",{className:"glass-morphism rounded-2xl shadow-2xl p-8 w-full max-w-md transform transition-all animate-slide-in",children:[v.jsx("p",{className:"text-text-secondary text-lg mb-8",children:t.message}),v.jsxs("div",{className:"flex justify-end gap-4",children:[!t.isAlert&&v.jsx("button",{onClick:a,className:"px-5 py-3 rounded-xl text-base font-medium text-text-secondary bg-surface-subtle hover:bg-surface-hover transition-colors shadow-sm",children:t.cancelText}),v.jsx("button",{onClick:s,className:`px-5 py-3 rounded-xl text-base font-medium text-primary-text transition-colors shadow-lg ${t.confirmClass}`,children:t.confirmText})]})]})}),document.body)]})}const kr=()=>{const o=B.useContext(Up);if(o===void 0)throw new Error("useModal must be used within a ModalProvider");return o};function bd(){const{state:o,dispatch:t}=_t(),{state:e}=tn(),{showAlert:i}=kr(),[s,a]=B.useState(""),[f,m]=B.useState(""),g=!!e.userApiKey,h=o.editingEntryId?o.history.find(_=>_.id===o.editingEntryId):null;B.useEffect(()=>{if(h)a(h.title),m(h.text);else{const _=localStorage.getItem(la)||"",T=localStorage.getItem(aa)||"";a(_),m(T)}},[h]),B.useEffect(()=>{h||localStorage.setItem(la,s)},[s,h]),B.useEffect(()=>{h||localStorage.setItem(aa,f)},[f,h]);const x=()=>{if(!g){i("API Key is not configured. Please add your key in the settings menu.");return}const _=f.trim();if(!_)return;const T=s.trim()||_.substring(0,40)+"...";if(h){const w=h.analyzedSentences,k={};_.split(`
`).flatMap(b=>{var $;return(($=b.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:$.filter(q=>q==null?void 0:q.trim()))||[]}).forEach(b=>{w[b]&&(k[b]=w[b])});const D={...h,title:T,text:_,updatedAt:Date.now(),analyzedSentences:k,readingProgress:0};t({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:D}),t({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:D.id}),t({type:"SET_VIEW",payload:Le.Reader})}else{const w={id:Date.now().toString(),title:T,text:_,createdAt:Date.now(),updatedAt:Date.now(),analyzedSentences:{},readingProgress:0};t({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:w}),t({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:w.id}),t({type:"SET_VIEW",payload:Le.Reader})}};return v.jsx("div",{className:"h-screen md:h-auto input-area p-6 bg-gradient-to-b from-background/50 to-surface",children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"text-title-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Title"}),v.jsx("input",{type:"text",id:"text-title-input",placeholder:"Enter a title for your text...",className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-lg font-medium px-4 py-3",value:s,onChange:_=>a(_.target.value)})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sentence-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Japanese Text"}),v.jsx("textarea",{id:"sentence-input",placeholder:"Enter Japanese text here. e.g., 猫が大好きです。犬も好きです。",rows:6,className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-base px-4 py-3 font-japanese resize-none transition-all duration-200",value:f,onChange:_=>m(_.target.value)})]}),v.jsxs("button",{onClick:x,className:"w-full btn-primary text-lg flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!f.trim()||!g,title:g?"":"API Key not configured. Please add one in settings.",children:[v.jsx("i",{className:"bi bi-search"}),"Analyze Text"]})]})})}var Ie;(function(o){o.assertEqual=s=>{};function t(s){}o.assertIs=t;function e(s){throw new Error}o.assertNever=e,o.arrayToEnum=s=>{const a={};for(const f of s)a[f]=f;return a},o.getValidEnumValues=s=>{const a=o.objectKeys(s).filter(m=>typeof s[s[m]]!="number"),f={};for(const m of a)f[m]=s[m];return o.objectValues(f)},o.objectValues=s=>o.objectKeys(s).map(function(a){return s[a]}),o.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const f in s)Object.prototype.hasOwnProperty.call(s,f)&&a.push(f);return a},o.find=(s,a)=>{for(const f of s)if(a(f))return f},o.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function i(s,a=" | "){return s.map(f=>typeof f=="string"?`'${f}'`:f).join(a)}o.joinValues=i,o.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Ie||(Ie={}));var Od;(function(o){o.mergeShapes=(t,e)=>({...t,...e})})(Od||(Od={}));const X=Ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),En=o=>{switch(typeof o){case"undefined":return X.undefined;case"string":return X.string;case"number":return Number.isNaN(o)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(o)?X.array:o===null?X.null:o.then&&typeof o.then=="function"&&o.catch&&typeof o.catch=="function"?X.promise:typeof Map<"u"&&o instanceof Map?X.map:typeof Set<"u"&&o instanceof Set?X.set:typeof Date<"u"&&o instanceof Date?X.date:X.object;default:return X.unknown}},H=Ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class en extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(a){return a.message},i={_errors:[]},s=a=>{for(const f of a.issues)if(f.code==="invalid_union")f.unionErrors.map(s);else if(f.code==="invalid_return_type")s(f.returnTypeError);else if(f.code==="invalid_arguments")s(f.argumentsError);else if(f.path.length===0)i._errors.push(e(f));else{let m=i,g=0;for(;g<f.path.length;){const h=f.path[g];g===f.path.length-1?(m[h]=m[h]||{_errors:[]},m[h]._errors.push(e(f))):m[h]=m[h]||{_errors:[]},m=m[h],g++}}};return s(this),i}static assert(t){if(!(t instanceof en))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},i=[];for(const s of this.issues)s.path.length>0?(e[s.path[0]]=e[s.path[0]]||[],e[s.path[0]].push(t(s))):i.push(t(s));return{formErrors:i,fieldErrors:e}}get formErrors(){return this.flatten()}}en.create=o=>new en(o);const ua=(o,t)=>{let e;switch(o.code){case H.invalid_type:o.received===X.undefined?e="Required":e=`Expected ${o.expected}, received ${o.received}`;break;case H.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(o.expected,Ie.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:e=`Unrecognized key(s) in object: ${Ie.joinValues(o.keys,", ")}`;break;case H.invalid_union:e="Invalid input";break;case H.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${Ie.joinValues(o.options)}`;break;case H.invalid_enum_value:e=`Invalid enum value. Expected ${Ie.joinValues(o.options)}, received '${o.received}'`;break;case H.invalid_arguments:e="Invalid function arguments";break;case H.invalid_return_type:e="Invalid function return type";break;case H.invalid_date:e="Invalid date";break;case H.invalid_string:typeof o.validation=="object"?"includes"in o.validation?(e=`Invalid input: must include "${o.validation.includes}"`,typeof o.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${o.validation.position}`)):"startsWith"in o.validation?e=`Invalid input: must start with "${o.validation.startsWith}"`:"endsWith"in o.validation?e=`Invalid input: must end with "${o.validation.endsWith}"`:Ie.assertNever(o.validation):o.validation!=="regex"?e=`Invalid ${o.validation}`:e="Invalid";break;case H.too_small:o.type==="array"?e=`Array must contain ${o.exact?"exactly":o.inclusive?"at least":"more than"} ${o.minimum} element(s)`:o.type==="string"?e=`String must contain ${o.exact?"exactly":o.inclusive?"at least":"over"} ${o.minimum} character(s)`:o.type==="number"?e=`Number must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${o.minimum}`:o.type==="date"?e=`Date must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(o.minimum))}`:e="Invalid input";break;case H.too_big:o.type==="array"?e=`Array must contain ${o.exact?"exactly":o.inclusive?"at most":"less than"} ${o.maximum} element(s)`:o.type==="string"?e=`String must contain ${o.exact?"exactly":o.inclusive?"at most":"under"} ${o.maximum} character(s)`:o.type==="number"?e=`Number must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="bigint"?e=`BigInt must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="date"?e=`Date must be ${o.exact?"exactly":o.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(o.maximum))}`:e="Invalid input";break;case H.custom:e="Invalid input";break;case H.invalid_intersection_types:e="Intersection results could not be merged";break;case H.not_multiple_of:e=`Number must be a multiple of ${o.multipleOf}`;break;case H.not_finite:e="Number must be finite";break;default:e=t.defaultError,Ie.assertNever(o)}return{message:e}};let kg=ua;function Ag(){return kg}const Rg=o=>{const{data:t,path:e,errorMaps:i,issueData:s}=o,a=[...e,...s.path||[]],f={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let m="";const g=i.filter(h=>!!h).slice().reverse();for(const h of g)m=h(f,{data:t,defaultError:m}).message;return{...s,path:a,message:m}};function Y(o,t){const e=Ag(),i=Rg({issueData:t,data:o.data,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,e,e===ua?void 0:ua].filter(s=>!!s)});o.common.issues.push(i)}class at{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const i=[];for(const s of e){if(s.status==="aborted")return fe;s.status==="dirty"&&t.dirty(),i.push(s.value)}return{status:t.value,value:i}}static async mergeObjectAsync(t,e){const i=[];for(const s of e){const a=await s.key,f=await s.value;i.push({key:a,value:f})}return at.mergeObjectSync(t,i)}static mergeObjectSync(t,e){const i={};for(const s of e){const{key:a,value:f}=s;if(a.status==="aborted"||f.status==="aborted")return fe;a.status==="dirty"&&t.dirty(),f.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof f.value<"u"||s.alwaysSet)&&(i[a.value]=f.value)}return{status:t.value,value:i}}}const fe=Object.freeze({status:"aborted"}),vo=o=>({status:"dirty",value:o}),kt=o=>({status:"valid",value:o}),zd=o=>o.status==="aborted",Bd=o=>o.status==="dirty",_r=o=>o.status==="valid",qi=o=>typeof Promise<"u"&&o instanceof Promise;var ne;(function(o){o.errToObj=t=>typeof t=="string"?{message:t}:t||{},o.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ne||(ne={}));class qt{constructor(t,e,i,s){this._cachedPath=[],this.parent=t,this.data=e,this._path=i,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gd=(o,t)=>{if(_r(t))return{success:!0,data:t.value};if(!o.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new en(o.common.issues);return this._error=e,this._error}}};function me(o){if(!o)return{};const{errorMap:t,invalid_type_error:e,required_error:i,description:s}=o;if(t&&(e||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(f,m)=>{const{message:g}=o;return f.code==="invalid_enum_value"?{message:g??m.defaultError}:typeof m.data>"u"?{message:g??i??m.defaultError}:f.code!=="invalid_type"?{message:m.defaultError}:{message:g??e??m.defaultError}},description:s}}class xe{get description(){return this._def.description}_getType(t){return En(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:En(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new at,ctx:{common:t.parent.common,data:t.data,parsedType:En(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(qi(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const i=this.safeParse(t,e);if(i.success)return i.data;throw i.error}safeParse(t,e){const i={common:{issues:[],async:(e==null?void 0:e.async)??!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:En(t)},s=this._parseSync({data:t,path:i.path,parent:i});return Gd(i,s)}"~validate"(t){var i,s;const e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:En(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:e});return _r(a)?{value:a.value}:{issues:e.common.issues}}catch(a){(s=(i=a==null?void 0:a.message)==null?void 0:i.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:e}).then(a=>_r(a)?{value:a.value}:{issues:e.common.issues})}async parseAsync(t,e){const i=await this.safeParseAsync(t,e);if(i.success)return i.data;throw i.error}async safeParseAsync(t,e){const i={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:En(t)},s=this._parse({data:t,path:i.path,parent:i}),a=await(qi(s)?s:Promise.resolve(s));return Gd(i,a)}refine(t,e){const i=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,a)=>{const f=t(s),m=()=>a.addIssue({code:H.custom,...i(s)});return typeof Promise<"u"&&f instanceof Promise?f.then(g=>g?!0:(m(),!1)):f?!0:(m(),!1)})}refinement(t,e){return this._refinement((i,s)=>t(i)?!0:(s.addIssue(typeof e=="function"?e(i,s):e),!1))}_refinement(t){return new Sr({schema:this,typeName:de.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Sn.create(this,this._def)}nullable(){return wr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $t.create(this)}promise(){return Ki.create(this,this._def)}or(t){return Yi.create([this,t],this._def)}and(t){return ji.create(this,t,this._def)}transform(t){return new Sr({...me(this._def),schema:this,typeName:de.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new pa({...me(this._def),innerType:this,defaultValue:e,typeName:de.ZodDefault})}brand(){return new Xg({typeName:de.ZodBranded,type:this,...me(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new ma({...me(this._def),innerType:this,catchValue:e,typeName:de.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return Ra.create(this,t)}readonly(){return ha.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Mg=/^c[^\s-]{8,}$/i,Pg=/^[0-9a-z]+$/,Dg=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Lg=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Fg=/^[a-z0-9_-]{21}$/i,Vg=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ug=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bg=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Og="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let oa;const zg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Bg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Gg=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Hg=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$g=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,qg=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Op="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Wg=new RegExp(`^${Op}$`);function zp(o){let t="[0-5]\\d";o.precision?t=`${t}\\.\\d{${o.precision}}`:o.precision==null&&(t=`${t}(\\.\\d+)?`);const e=o.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e}`}function Yg(o){return new RegExp(`^${zp(o)}$`)}function jg(o){let t=`${Op}T${zp(o)}`;const e=[];return e.push(o.local?"Z?":"Z"),o.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function Jg(o,t){return!!((t==="v4"||!t)&&zg.test(o)||(t==="v6"||!t)&&Gg.test(o))}function Kg(o,t){if(!Vg.test(o))return!1;try{const[e]=o.split("."),i=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),s=JSON.parse(atob(i));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function Zg(o,t){return!!((t==="v4"||!t)&&Bg.test(o)||(t==="v6"||!t)&&Hg.test(o))}class Ht extends xe{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==X.string){const a=this._getOrReturnCtx(t);return Y(a,{code:H.invalid_type,expected:X.string,received:a.parsedType}),fe}const i=new at;let s;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(s=this._getOrReturnCtx(t,s),Y(s,{code:H.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")t.data.length>a.value&&(s=this._getOrReturnCtx(t,s),Y(s,{code:H.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const f=t.data.length>a.value,m=t.data.length<a.value;(f||m)&&(s=this._getOrReturnCtx(t,s),f?Y(s,{code:H.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):m&&Y(s,{code:H.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")bg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"email",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")oa||(oa=new RegExp(Og,"u")),oa.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"emoji",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")Lg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"uuid",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")Fg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"nanoid",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")Mg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"cuid",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")Pg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"cuid2",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")Dg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"ulid",code:H.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Y(s,{validation:"url",code:H.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"regex",code:H.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(t,s),Y(s,{code:H.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(s=this._getOrReturnCtx(t,s),Y(s,{code:H.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(s=this._getOrReturnCtx(t,s),Y(s,{code:H.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?jg(a).test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{code:H.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?Wg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{code:H.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?Yg(a).test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{code:H.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?Ug.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"duration",code:H.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?Jg(t.data,a.version)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"ip",code:H.invalid_string,message:a.message}),i.dirty()):a.kind==="jwt"?Kg(t.data,a.alg)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"jwt",code:H.invalid_string,message:a.message}),i.dirty()):a.kind==="cidr"?Zg(t.data,a.version)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"cidr",code:H.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?$g.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"base64",code:H.invalid_string,message:a.message}),i.dirty()):a.kind==="base64url"?qg.test(t.data)||(s=this._getOrReturnCtx(t,s),Y(s,{validation:"base64url",code:H.invalid_string,message:a.message}),i.dirty()):Ie.assertNever(a);return{status:i.value,value:t.data}}_regex(t,e,i){return this.refinement(s=>t.test(s),{validation:e,code:H.invalid_string,...ne.errToObj(i)})}_addCheck(t){return new Ht({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ne.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ne.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ne.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ne.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ne.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ne.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ne.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ne.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ne.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ne.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ne.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ne.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ne.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...ne.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ne.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ne.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...ne.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...ne.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...ne.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...ne.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...ne.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...ne.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...ne.errToObj(e)})}nonempty(t){return this.min(1,ne.errToObj(t))}trim(){return new Ht({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ht({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ht({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Ht.create=o=>new Ht({checks:[],typeName:de.ZodString,coerce:(o==null?void 0:o.coerce)??!1,...me(o)});function Qg(o,t){const e=(o.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,s=e>i?e:i,a=Number.parseInt(o.toFixed(s).replace(".","")),f=Number.parseInt(t.toFixed(s).replace(".",""));return a%f/10**s}class Hn extends xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==X.number){const a=this._getOrReturnCtx(t);return Y(a,{code:H.invalid_type,expected:X.number,received:a.parsedType}),fe}let i;const s=new at;for(const a of this._def.checks)a.kind==="int"?Ie.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{code:H.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(i=this._getOrReturnCtx(t,i),Y(i,{code:H.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(i=this._getOrReturnCtx(t,i),Y(i,{code:H.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?Qg(t.data,a.value)!==0&&(i=this._getOrReturnCtx(t,i),Y(i,{code:H.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{code:H.not_finite,message:a.message}),s.dirty()):Ie.assertNever(a);return{status:s.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,ne.toString(e))}gt(t,e){return this.setLimit("min",t,!1,ne.toString(e))}lte(t,e){return this.setLimit("max",t,!0,ne.toString(e))}lt(t,e){return this.setLimit("max",t,!1,ne.toString(e))}setLimit(t,e,i,s){return new Hn({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:ne.toString(s)}]})}_addCheck(t){return new Hn({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ne.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ne.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ne.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ne.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ne.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:ne.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:ne.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ne.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ne.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ie.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(e===null||i.value>e)&&(e=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Hn.create=o=>new Hn({checks:[],typeName:de.ZodNumber,coerce:(o==null?void 0:o.coerce)||!1,...me(o)});class $n extends xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==X.bigint)return this._getInvalidInput(t);let i;const s=new at;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(i=this._getOrReturnCtx(t,i),Y(i,{code:H.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(i=this._getOrReturnCtx(t,i),Y(i,{code:H.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),Y(i,{code:H.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Ie.assertNever(a);return{status:s.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return Y(e,{code:H.invalid_type,expected:X.bigint,received:e.parsedType}),fe}gte(t,e){return this.setLimit("min",t,!0,ne.toString(e))}gt(t,e){return this.setLimit("min",t,!1,ne.toString(e))}lte(t,e){return this.setLimit("max",t,!0,ne.toString(e))}lt(t,e){return this.setLimit("max",t,!1,ne.toString(e))}setLimit(t,e,i,s){return new $n({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:ne.toString(s)}]})}_addCheck(t){return new $n({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ne.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ne.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ne.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ne.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:ne.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}$n.create=o=>new $n({checks:[],typeName:de.ZodBigInt,coerce:(o==null?void 0:o.coerce)??!1,...me(o)});class Wi extends xe{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==X.boolean){const i=this._getOrReturnCtx(t);return Y(i,{code:H.invalid_type,expected:X.boolean,received:i.parsedType}),fe}return kt(t.data)}}Wi.create=o=>new Wi({typeName:de.ZodBoolean,coerce:(o==null?void 0:o.coerce)||!1,...me(o)});class Tr extends xe{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==X.date){const a=this._getOrReturnCtx(t);return Y(a,{code:H.invalid_type,expected:X.date,received:a.parsedType}),fe}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Y(a,{code:H.invalid_date}),fe}const i=new at;let s;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(s=this._getOrReturnCtx(t,s),Y(s,{code:H.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(s=this._getOrReturnCtx(t,s),Y(s,{code:H.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):Ie.assertNever(a);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Tr({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:ne.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:ne.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}Tr.create=o=>new Tr({checks:[],coerce:(o==null?void 0:o.coerce)||!1,typeName:de.ZodDate,...me(o)});class Hd extends xe{_parse(t){if(this._getType(t)!==X.symbol){const i=this._getOrReturnCtx(t);return Y(i,{code:H.invalid_type,expected:X.symbol,received:i.parsedType}),fe}return kt(t.data)}}Hd.create=o=>new Hd({typeName:de.ZodSymbol,...me(o)});class $d extends xe{_parse(t){if(this._getType(t)!==X.undefined){const i=this._getOrReturnCtx(t);return Y(i,{code:H.invalid_type,expected:X.undefined,received:i.parsedType}),fe}return kt(t.data)}}$d.create=o=>new $d({typeName:de.ZodUndefined,...me(o)});class qd extends xe{_parse(t){if(this._getType(t)!==X.null){const i=this._getOrReturnCtx(t);return Y(i,{code:H.invalid_type,expected:X.null,received:i.parsedType}),fe}return kt(t.data)}}qd.create=o=>new qd({typeName:de.ZodNull,...me(o)});class Wd extends xe{constructor(){super(...arguments),this._any=!0}_parse(t){return kt(t.data)}}Wd.create=o=>new Wd({typeName:de.ZodAny,...me(o)});class ca extends xe{constructor(){super(...arguments),this._unknown=!0}_parse(t){return kt(t.data)}}ca.create=o=>new ca({typeName:de.ZodUnknown,...me(o)});class wn extends xe{_parse(t){const e=this._getOrReturnCtx(t);return Y(e,{code:H.invalid_type,expected:X.never,received:e.parsedType}),fe}}wn.create=o=>new wn({typeName:de.ZodNever,...me(o)});class Yd extends xe{_parse(t){if(this._getType(t)!==X.undefined){const i=this._getOrReturnCtx(t);return Y(i,{code:H.invalid_type,expected:X.void,received:i.parsedType}),fe}return kt(t.data)}}Yd.create=o=>new Yd({typeName:de.ZodVoid,...me(o)});class $t extends xe{_parse(t){const{ctx:e,status:i}=this._processInputParams(t),s=this._def;if(e.parsedType!==X.array)return Y(e,{code:H.invalid_type,expected:X.array,received:e.parsedType}),fe;if(s.exactLength!==null){const f=e.data.length>s.exactLength.value,m=e.data.length<s.exactLength.value;(f||m)&&(Y(e,{code:f?H.too_big:H.too_small,minimum:m?s.exactLength.value:void 0,maximum:f?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(s.minLength!==null&&e.data.length<s.minLength.value&&(Y(e,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),s.maxLength!==null&&e.data.length>s.maxLength.value&&(Y(e,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),e.common.async)return Promise.all([...e.data].map((f,m)=>s.type._parseAsync(new qt(e,f,e.path,m)))).then(f=>at.mergeArray(i,f));const a=[...e.data].map((f,m)=>s.type._parseSync(new qt(e,f,e.path,m)));return at.mergeArray(i,a)}get element(){return this._def.type}min(t,e){return new $t({...this._def,minLength:{value:t,message:ne.toString(e)}})}max(t,e){return new $t({...this._def,maxLength:{value:t,message:ne.toString(e)}})}length(t,e){return new $t({...this._def,exactLength:{value:t,message:ne.toString(e)}})}nonempty(t){return this.min(1,t)}}$t.create=(o,t)=>new $t({type:o,minLength:null,maxLength:null,exactLength:null,typeName:de.ZodArray,...me(t)});function xr(o){if(o instanceof We){const t={};for(const e in o.shape){const i=o.shape[e];t[e]=Sn.create(xr(i))}return new We({...o._def,shape:()=>t})}else return o instanceof $t?new $t({...o._def,type:xr(o.element)}):o instanceof Sn?Sn.create(xr(o.unwrap())):o instanceof wr?wr.create(xr(o.unwrap())):o instanceof qn?qn.create(o.items.map(t=>xr(t))):o}class We extends xe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=Ie.objectKeys(t);return this._cached={shape:t,keys:e},this._cached}_parse(t){if(this._getType(t)!==X.object){const h=this._getOrReturnCtx(t);return Y(h,{code:H.invalid_type,expected:X.object,received:h.parsedType}),fe}const{status:i,ctx:s}=this._processInputParams(t),{shape:a,keys:f}=this._getCached(),m=[];if(!(this._def.catchall instanceof wn&&this._def.unknownKeys==="strip"))for(const h in s.data)f.includes(h)||m.push(h);const g=[];for(const h of f){const x=a[h],_=s.data[h];g.push({key:{status:"valid",value:h},value:x._parse(new qt(s,_,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof wn){const h=this._def.unknownKeys;if(h==="passthrough")for(const x of m)g.push({key:{status:"valid",value:x},value:{status:"valid",value:s.data[x]}});else if(h==="strict")m.length>0&&(Y(s,{code:H.unrecognized_keys,keys:m}),i.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const x of m){const _=s.data[x];g.push({key:{status:"valid",value:x},value:h._parse(new qt(s,_,s.path,x)),alwaysSet:x in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const x of g){const _=await x.key,T=await x.value;h.push({key:_,value:T,alwaysSet:x.alwaysSet})}return h}).then(h=>at.mergeObjectSync(i,h)):at.mergeObjectSync(i,g)}get shape(){return this._def.shape()}strict(t){return ne.errToObj,new We({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,i)=>{var a,f;const s=((f=(a=this._def).errorMap)==null?void 0:f.call(a,e,i).message)??i.defaultError;return e.code==="unrecognized_keys"?{message:ne.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(t){return new We({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new We({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:de.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new We({...this._def,catchall:t})}pick(t){const e={};for(const i of Ie.objectKeys(t))t[i]&&this.shape[i]&&(e[i]=this.shape[i]);return new We({...this._def,shape:()=>e})}omit(t){const e={};for(const i of Ie.objectKeys(this.shape))t[i]||(e[i]=this.shape[i]);return new We({...this._def,shape:()=>e})}deepPartial(){return xr(this)}partial(t){const e={};for(const i of Ie.objectKeys(this.shape)){const s=this.shape[i];t&&!t[i]?e[i]=s:e[i]=s.optional()}return new We({...this._def,shape:()=>e})}required(t){const e={};for(const i of Ie.objectKeys(this.shape))if(t&&!t[i])e[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof Sn;)a=a._def.innerType;e[i]=a}return new We({...this._def,shape:()=>e})}keyof(){return Bp(Ie.objectKeys(this.shape))}}We.create=(o,t)=>new We({shape:()=>o,unknownKeys:"strip",catchall:wn.create(),typeName:de.ZodObject,...me(t)});We.strictCreate=(o,t)=>new We({shape:()=>o,unknownKeys:"strict",catchall:wn.create(),typeName:de.ZodObject,...me(t)});We.lazycreate=(o,t)=>new We({shape:o,unknownKeys:"strip",catchall:wn.create(),typeName:de.ZodObject,...me(t)});class Yi extends xe{_parse(t){const{ctx:e}=this._processInputParams(t),i=this._def.options;function s(a){for(const m of a)if(m.result.status==="valid")return m.result;for(const m of a)if(m.result.status==="dirty")return e.common.issues.push(...m.ctx.common.issues),m.result;const f=a.map(m=>new en(m.ctx.common.issues));return Y(e,{code:H.invalid_union,unionErrors:f}),fe}if(e.common.async)return Promise.all(i.map(async a=>{const f={...e,common:{...e.common,issues:[]},parent:null};return{result:await a._parseAsync({data:e.data,path:e.path,parent:f}),ctx:f}})).then(s);{let a;const f=[];for(const g of i){const h={...e,common:{...e.common,issues:[]},parent:null},x=g._parseSync({data:e.data,path:e.path,parent:h});if(x.status==="valid")return x;x.status==="dirty"&&!a&&(a={result:x,ctx:h}),h.common.issues.length&&f.push(h.common.issues)}if(a)return e.common.issues.push(...a.ctx.common.issues),a.result;const m=f.map(g=>new en(g));return Y(e,{code:H.invalid_union,unionErrors:m}),fe}}get options(){return this._def.options}}Yi.create=(o,t)=>new Yi({options:o,typeName:de.ZodUnion,...me(t)});function da(o,t){const e=En(o),i=En(t);if(o===t)return{valid:!0,data:o};if(e===X.object&&i===X.object){const s=Ie.objectKeys(t),a=Ie.objectKeys(o).filter(m=>s.indexOf(m)!==-1),f={...o,...t};for(const m of a){const g=da(o[m],t[m]);if(!g.valid)return{valid:!1};f[m]=g.data}return{valid:!0,data:f}}else if(e===X.array&&i===X.array){if(o.length!==t.length)return{valid:!1};const s=[];for(let a=0;a<o.length;a++){const f=o[a],m=t[a],g=da(f,m);if(!g.valid)return{valid:!1};s.push(g.data)}return{valid:!0,data:s}}else return e===X.date&&i===X.date&&+o==+t?{valid:!0,data:o}:{valid:!1}}class ji extends xe{_parse(t){const{status:e,ctx:i}=this._processInputParams(t),s=(a,f)=>{if(zd(a)||zd(f))return fe;const m=da(a.value,f.value);return m.valid?((Bd(a)||Bd(f))&&e.dirty(),{status:e.value,value:m.data}):(Y(i,{code:H.invalid_intersection_types}),fe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,f])=>s(a,f)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}ji.create=(o,t,e)=>new ji({left:o,right:t,typeName:de.ZodIntersection,...me(e)});class qn extends xe{_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==X.array)return Y(i,{code:H.invalid_type,expected:X.array,received:i.parsedType}),fe;if(i.data.length<this._def.items.length)return Y(i,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fe;!this._def.rest&&i.data.length>this._def.items.length&&(Y(i,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const a=[...i.data].map((f,m)=>{const g=this._def.items[m]||this._def.rest;return g?g._parse(new qt(i,f,i.path,m)):null}).filter(f=>!!f);return i.common.async?Promise.all(a).then(f=>at.mergeArray(e,f)):at.mergeArray(e,a)}get items(){return this._def.items}rest(t){return new qn({...this._def,rest:t})}}qn.create=(o,t)=>{if(!Array.isArray(o))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qn({items:o,typeName:de.ZodTuple,rest:null,...me(t)})};class Ji extends xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==X.object)return Y(i,{code:H.invalid_type,expected:X.object,received:i.parsedType}),fe;const s=[],a=this._def.keyType,f=this._def.valueType;for(const m in i.data)s.push({key:a._parse(new qt(i,m,i.path,m)),value:f._parse(new qt(i,i.data[m],i.path,m)),alwaysSet:m in i.data});return i.common.async?at.mergeObjectAsync(e,s):at.mergeObjectSync(e,s)}get element(){return this._def.valueType}static create(t,e,i){return e instanceof xe?new Ji({keyType:t,valueType:e,typeName:de.ZodRecord,...me(i)}):new Ji({keyType:Ht.create(),valueType:t,typeName:de.ZodRecord,...me(e)})}}class jd extends xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==X.map)return Y(i,{code:H.invalid_type,expected:X.map,received:i.parsedType}),fe;const s=this._def.keyType,a=this._def.valueType,f=[...i.data.entries()].map(([m,g],h)=>({key:s._parse(new qt(i,m,i.path,[h,"key"])),value:a._parse(new qt(i,g,i.path,[h,"value"]))}));if(i.common.async){const m=new Map;return Promise.resolve().then(async()=>{for(const g of f){const h=await g.key,x=await g.value;if(h.status==="aborted"||x.status==="aborted")return fe;(h.status==="dirty"||x.status==="dirty")&&e.dirty(),m.set(h.value,x.value)}return{status:e.value,value:m}})}else{const m=new Map;for(const g of f){const h=g.key,x=g.value;if(h.status==="aborted"||x.status==="aborted")return fe;(h.status==="dirty"||x.status==="dirty")&&e.dirty(),m.set(h.value,x.value)}return{status:e.value,value:m}}}}jd.create=(o,t,e)=>new jd({valueType:t,keyType:o,typeName:de.ZodMap,...me(e)});class Eo extends xe{_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==X.set)return Y(i,{code:H.invalid_type,expected:X.set,received:i.parsedType}),fe;const s=this._def;s.minSize!==null&&i.data.size<s.minSize.value&&(Y(i,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),e.dirty()),s.maxSize!==null&&i.data.size>s.maxSize.value&&(Y(i,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),e.dirty());const a=this._def.valueType;function f(g){const h=new Set;for(const x of g){if(x.status==="aborted")return fe;x.status==="dirty"&&e.dirty(),h.add(x.value)}return{status:e.value,value:h}}const m=[...i.data.values()].map((g,h)=>a._parse(new qt(i,g,i.path,h)));return i.common.async?Promise.all(m).then(g=>f(g)):f(m)}min(t,e){return new Eo({...this._def,minSize:{value:t,message:ne.toString(e)}})}max(t,e){return new Eo({...this._def,maxSize:{value:t,message:ne.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}Eo.create=(o,t)=>new Eo({valueType:o,minSize:null,maxSize:null,typeName:de.ZodSet,...me(t)});class fa extends xe{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}fa.create=(o,t)=>new fa({getter:o,typeName:de.ZodLazy,...me(t)});class Jd extends xe{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return Y(e,{received:e.data,code:H.invalid_literal,expected:this._def.value}),fe}return{status:"valid",value:t.data}}get value(){return this._def.value}}Jd.create=(o,t)=>new Jd({value:o,typeName:de.ZodLiteral,...me(t)});function Bp(o,t){return new Er({values:o,typeName:de.ZodEnum,...me(t)})}class Er extends xe{_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),i=this._def.values;return Y(e,{expected:Ie.joinValues(i),received:e.parsedType,code:H.invalid_type}),fe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const e=this._getOrReturnCtx(t),i=this._def.values;return Y(e,{received:e.data,code:H.invalid_enum_value,options:i}),fe}return kt(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return Er.create(t,{...this._def,...e})}exclude(t,e=this._def){return Er.create(this.options.filter(i=>!t.includes(i)),{...this._def,...e})}}Er.create=Bp;class Kd extends xe{_parse(t){const e=Ie.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==X.string&&i.parsedType!==X.number){const s=Ie.objectValues(e);return Y(i,{expected:Ie.joinValues(s),received:i.parsedType,code:H.invalid_type}),fe}if(this._cache||(this._cache=new Set(Ie.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Ie.objectValues(e);return Y(i,{received:i.data,code:H.invalid_enum_value,options:s}),fe}return kt(t.data)}get enum(){return this._def.values}}Kd.create=(o,t)=>new Kd({values:o,typeName:de.ZodNativeEnum,...me(t)});class Ki extends xe{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==X.promise&&e.common.async===!1)return Y(e,{code:H.invalid_type,expected:X.promise,received:e.parsedType}),fe;const i=e.parsedType===X.promise?e.data:Promise.resolve(e.data);return kt(i.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}}Ki.create=(o,t)=>new Ki({type:o,typeName:de.ZodPromise,...me(t)});class Sr extends xe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===de.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:i}=this._processInputParams(t),s=this._def.effect||null,a={addIssue:f=>{Y(i,f),f.fatal?e.abort():e.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const f=s.transform(i.data,a);if(i.common.async)return Promise.resolve(f).then(async m=>{if(e.value==="aborted")return fe;const g=await this._def.schema._parseAsync({data:m,path:i.path,parent:i});return g.status==="aborted"?fe:g.status==="dirty"||e.value==="dirty"?vo(g.value):g});{if(e.value==="aborted")return fe;const m=this._def.schema._parseSync({data:f,path:i.path,parent:i});return m.status==="aborted"?fe:m.status==="dirty"||e.value==="dirty"?vo(m.value):m}}if(s.type==="refinement"){const f=m=>{const g=s.refinement(m,a);if(i.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return m};if(i.common.async===!1){const m=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return m.status==="aborted"?fe:(m.status==="dirty"&&e.dirty(),f(m.value),{status:e.value,value:m.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(m=>m.status==="aborted"?fe:(m.status==="dirty"&&e.dirty(),f(m.value).then(()=>({status:e.value,value:m.value}))))}if(s.type==="transform")if(i.common.async===!1){const f=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!_r(f))return fe;const m=s.transform(f.value,a);if(m instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:m}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(f=>_r(f)?Promise.resolve(s.transform(f.value,a)).then(m=>({status:e.value,value:m})):fe);Ie.assertNever(s)}}Sr.create=(o,t,e)=>new Sr({schema:o,typeName:de.ZodEffects,effect:t,...me(e)});Sr.createWithPreprocess=(o,t,e)=>new Sr({schema:t,effect:{type:"preprocess",transform:o},typeName:de.ZodEffects,...me(e)});class Sn extends xe{_parse(t){return this._getType(t)===X.undefined?kt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Sn.create=(o,t)=>new Sn({innerType:o,typeName:de.ZodOptional,...me(t)});class wr extends xe{_parse(t){return this._getType(t)===X.null?kt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}wr.create=(o,t)=>new wr({innerType:o,typeName:de.ZodNullable,...me(t)});class pa extends xe{_parse(t){const{ctx:e}=this._processInputParams(t);let i=e.data;return e.parsedType===X.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}pa.create=(o,t)=>new pa({innerType:o,typeName:de.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...me(t)});class ma extends xe{_parse(t){const{ctx:e}=this._processInputParams(t),i={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return qi(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new en(i.common.issues)},input:i.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new en(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}ma.create=(o,t)=>new ma({innerType:o,typeName:de.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...me(t)});class Zd extends xe{_parse(t){if(this._getType(t)!==X.nan){const i=this._getOrReturnCtx(t);return Y(i,{code:H.invalid_type,expected:X.nan,received:i.parsedType}),fe}return{status:"valid",value:t.data}}}Zd.create=o=>new Zd({typeName:de.ZodNaN,...me(o)});class Xg extends xe{_parse(t){const{ctx:e}=this._processInputParams(t),i=e.data;return this._def.type._parse({data:i,path:e.path,parent:e})}unwrap(){return this._def.type}}class Ra extends xe{_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?fe:a.status==="dirty"?(e.dirty(),vo(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const s=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?fe:s.status==="dirty"?(e.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:i.path,parent:i})}}static create(t,e){return new Ra({in:t,out:e,typeName:de.ZodPipeline})}}class ha extends xe{_parse(t){const e=this._def.innerType._parse(t),i=s=>(_r(s)&&(s.value=Object.freeze(s.value)),s);return qi(e)?e.then(s=>i(s)):i(e)}unwrap(){return this._def.innerType}}ha.create=(o,t)=>new ha({innerType:o,typeName:de.ZodReadonly,...me(t)});var de;(function(o){o.ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly"})(de||(de={}));const Gn=Ht.create,Qd=Hn.create;$n.create;const ey=Wi.create;Tr.create;const Xd=ca.create;wn.create;const xo=$t.create,ty=We.create,ny=Yi.create;ji.create;qn.create;const ry=Ji.create,oy=fa.create,iy=Er.create;Ki.create;Sn.create;wr.create;const vr={string:o=>Ht.create({...o,coerce:!0}),number:o=>Hn.create({...o,coerce:!0}),boolean:o=>Wi.create({...o,coerce:!0}),bigint:o=>$n.create({...o,coerce:!0}),date:o=>Tr.create({...o,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sy,ly;function ay(){return{geminiUrl:sy,vertexUrl:ly}}function uy(o,t,e){var i,s,a;if(!(!((i=o.httpOptions)===null||i===void 0)&&i.baseUrl)){const f=ay();return o.vertexai?(s=f.vertexUrl)!==null&&s!==void 0?s:t:(a=f.geminiUrl)!==null&&a!==void 0?a:e}return o.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class So{}function ce(o,t){const e=/\{([^}]+)\}/g;return o.replace(e,(i,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(o,t,e){for(let a=0;a<t.length-1;a++){const f=t[a];if(f.endsWith("[]")){const m=f.slice(0,-2);if(!(m in o))if(Array.isArray(e))o[m]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(o[m])){const g=o[m];if(Array.isArray(e))for(let h=0;h<g.length;h++){const x=g[h];c(x,t.slice(a+1),e[h])}else for(const h of g)c(h,t.slice(a+1),e)}return}else if(f.endsWith("[0]")){const m=f.slice(0,-3);m in o||(o[m]=[{}]);const g=o[m];c(g[0],t.slice(a+1),e);return}(!o[f]||typeof o[f]!="object")&&(o[f]={}),o=o[f]}const i=t[t.length-1],s=o[i];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else o[i]=e}function u(o,t){try{if(t.length===1&&t[0]==="_self")return o;for(let e=0;e<t.length;e++){if(typeof o!="object"||o===null)return;const i=t[e];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in o){const a=o[s];return Array.isArray(a)?a.map(f=>u(f,t.slice(e+1))):void 0}else return}else o=o[i]}return o}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ef;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ef||(ef={}));var tf;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(tf||(tf={}));var nf;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(nf||(nf={}));var rf;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(rf||(rf={}));var of;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(of||(of={}));var Gt;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT"})(Gt||(Gt={}));var sf;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(sf||(sf={}));var lf;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(lf||(lf={}));var af;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY"})(af||(af={}));var uf;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(uf||(uf={}));var cf;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cf||(cf={}));var df;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(df||(df={}));var ff;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ff||(ff={}));var Zi;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(Zi||(Zi={}));var pf;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(pf||(pf={}));var ga;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ga||(ga={}));var mf;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mf||(mf={}));var hf;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(hf||(hf={}));var gf;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.BLOCKING="BLOCKING",o.NON_BLOCKING="NON_BLOCKING"})(gf||(gf={}));var yf;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(yf||(yf={}));var vf;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(vf||(vf={}));var xf;(function(o){o.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",o.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",o.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(xf||(xf={}));var Cf;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(Cf||(Cf={}));var _f;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(_f||(_f={}));var Tf;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(Tf||(Tf={}));var Ef;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ef||(Ef={}));var Sf;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Sf||(Sf={}));var wf;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wf||(wf={}));var If;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(If||(If={}));var Nf;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(Nf||(Nf={}));var kf;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(kf||(kf={}));var Af;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(Af||(Af={}));var Rf;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rf||(Rf={}));var Mf;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mf||(Mf={}));var Pf;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(Pf||(Pf={}));var Df;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Df||(Df={}));var Lf;(function(o){o.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",o.SILENT="SILENT",o.WHEN_IDLE="WHEN_IDLE",o.INTERRUPT="INTERRUPT"})(Lf||(Lf={}));var Ff;(function(o){o.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",o.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",o.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",o.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",o.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",o.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",o.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",o.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",o.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",o.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",o.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",o.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",o.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ff||(Ff={}));var Vf;(function(o){o.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",o.QUALITY="QUALITY",o.DIVERSITY="DIVERSITY"})(Vf||(Vf={}));var Cr;(function(o){o.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",o.PLAY="PLAY",o.PAUSE="PAUSE",o.STOP="STOP",o.RESET_CONTEXT="RESET_CONTEXT"})(Cr||(Cr={}));class yo{get text(){var t,e,i,s,a,f,m,g;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",x=!1;const _=[];for(const T of(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)!==null&&g!==void 0?g:[]){for(const[w,k]of Object.entries(T))w!=="text"&&w!=="thought"&&(k!==null||k!==void 0)&&_.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?h:void 0}get data(){var t,e,i,s,a,f,m,g;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const x=[];for(const _ of(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)!==null&&g!==void 0?g:[]){for(const[T,w]of Object.entries(_))T!=="inlineData"&&(w!==null||w!==void 0)&&x.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var t,e,i,s,a,f,m,g;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var t,e,i,s,a,f,m,g,h;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(h=x==null?void 0:x[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var t,e,i,s,a,f,m,g,h;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(h=x==null?void 0:x[0])===null||h===void 0?void 0:h.output}}class Uf{}class bf{}class cy{}class dy{}class Of{}class zf{}class Bf{}class fy{}class Gf{}class Hf{}class $f{}class py{}class ya{constructor(t){const e={};for(const i of t.headers.entries())e[i[0]]=i[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class my{}class hy{}class gy{get text(){var t,e,i;let s="",a=!1;const f=[];for(const m of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&h!==null&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;a=!0,s+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var t,e,i;let s="";const a=[];for(const f of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&g!==null&&a.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(s+=atob(f.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class yy{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(o,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Gp(o,t){const e=Fe(o,t);return e?e.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:e.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${e}`:e:""}function Hp(o,t){return Array.isArray(t)?t.map(e=>Qi(o,e)):[Qi(o,t)]}function Qi(o,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function vy(o,t){const e=Qi(o,t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xy(o,t){const e=Qi(o,t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qf(o,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function $p(o,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>qf(o,e)):[qf(o,t)]}function va(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function Wf(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function Yf(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function ht(o,t){if(t==null)throw new Error("ContentUnion is required");return va(t)?t:{role:"user",parts:$p(o,t)}}function qp(o,t){if(!t)return[];if(o.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const i=ht(o,e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(o.isVertexAI()){const e=ht(o,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>ht(o,e)):[ht(o,t)]}function Vt(o,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Wf(t)||Yf(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(o,t)]}const e=[],i=[],s=va(t[0]);for(const a of t){const f=va(a);if(f!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(a);else{if(Wf(a)||Yf(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return s||e.push({role:"user",parts:$p(o,i)}),e}const jf=iy(["string","number","integer","object","array","boolean","null"]),Cy=ny([jf,xo(jf)]);function _y(o=!0){const t=oy(()=>{const e=ty({type:Cy.optional(),format:Gn().optional(),title:Gn().optional(),description:Gn().optional(),default:Xd().optional(),items:t.optional(),minItems:vr.string().optional(),maxItems:vr.string().optional(),enum:xo(Xd()).optional(),properties:ry(Gn(),t).optional(),required:xo(Gn()).optional(),minProperties:vr.string().optional(),maxProperties:vr.string().optional(),propertyOrdering:xo(Gn()).optional(),minimum:Qd().optional(),maximum:Qd().optional(),minLength:vr.string().optional(),maxLength:vr.string().optional(),pattern:Gn().optional(),anyOf:xo(t).optional(),additionalProperties:ey().optional()});return o?e.strict():e});return t}function Ty(o,t){o.includes("null")&&(t.nullable=!0);const e=o.filter(i=>i!=="null");if(e.length===1)t.type=Object.keys(Gt).includes(e[0].toUpperCase())?Gt[e[0].toUpperCase()]:Gt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of e)t.anyOf.push({type:Object.keys(Gt).includes(i.toUpperCase())?Gt[i.toUpperCase()]:Gt.TYPE_UNSPECIFIED})}}function _o(o){const t={},e=["items"],i=["anyOf"],s=["properties"];if(o.type&&o.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=o.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,o=a[1]):a[1].type==="null"&&(t.nullable=!0,o=a[0])),o.type instanceof Array&&Ty(o.type,t);for(const[f,m]of Object.entries(o))if(m!=null)if(f=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;t.type=Object.keys(Gt).includes(m.toUpperCase())?m.toUpperCase():Gt.TYPE_UNSPECIFIED}else if(e.includes(f))t[f]=_o(m);else if(i.includes(f)){const g=[];for(const h of m){if(h.type=="null"){t.nullable=!0;continue}g.push(_o(h))}t[f]=g}else if(s.includes(f)){const g={};for(const[h,x]of Object.entries(m))g[h]=_o(x);t[f]=g}else{if(f==="additionalProperties")continue;t[f]=m}return t}function Xi(o,t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=_y().parse(t);return _o(e)}else return _o(t)}function Wp(o,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Yp(o,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ts(o,t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Xi(o,e.parameters)),e.response&&(e.response=Xi(o,e.response));return t}function ns(o,t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function Ey(o,t,e,i=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===i;return o.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${o.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}`:s?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function In(o,t){if(typeof t!="string")throw new Error("name must be a string");return Ey(o,t,"cachedContents")}function jp(o,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Nn(o,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Sy(o){return o!=null&&typeof o=="object"&&"name"in o}function wy(o){return o!=null&&typeof o=="object"&&"video"in o}function Iy(o){return o!=null&&typeof o=="object"&&"uri"in o}function Jp(o,t){var e;let i;if(Sy(t)&&(i=t.name),!(Iy(t)&&(i=t.uri,i===void 0))&&!(wy(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Kp(o,t){let e;return o.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function Zp(o,t){for(const e of["models","tunedModels","publisherModels"])if(Ny(t,e))return t[e];return[]}function Ny(o,t){return o!==null&&typeof o=="object"&&t in o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ky(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function Ay(o,t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["data"]);i!=null&&c(e,["data"],i);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Ry(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],ky(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],Ay(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Jf(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Ry(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function My(o,t){const e={},i=u(t,["behavior"]);i!=null&&c(e,["behavior"],i);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const a=u(t,["name"]);a!=null&&c(e,["name"],a);const f=u(t,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],m),e}function Py(o,t){const e={},i=u(t,["startTime"]);i!=null&&c(e,["startTime"],i);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Dy(o,t){const e={},i=u(t,["timeRangeFilter"]);return i!=null&&c(e,["timeRangeFilter"],Py(o,i)),e}function Ly(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Fy(o,t){const e={},i=u(t,["dynamicRetrievalConfig"]);return i!=null&&c(e,["dynamicRetrievalConfig"],Ly(o,i)),e}function Vy(){return{}}function Uy(o,t){const e={},i=u(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>My(o,h))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],Dy(o,s));const a=u(t,["googleSearchRetrieval"]);if(a!=null&&c(e,["googleSearchRetrieval"],Fy(o,a)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],Vy());const m=u(t,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function by(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function Oy(o,t){const e={},i=u(t,["latitude"]);i!=null&&c(e,["latitude"],i);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function zy(o,t){const e={},i=u(t,["latLng"]);return i!=null&&c(e,["latLng"],Oy(o,i)),e}function By(o,t){const e={},i=u(t,["functionCallingConfig"]);i!=null&&c(e,["functionCallingConfig"],by(o,i));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],zy(o,s)),e}function Gy(o,t,e){const i={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&c(e,["expireTime"],a);const f=u(t,["displayName"]);e!==void 0&&f!=null&&c(e,["displayName"],f);const m=u(t,["contents"]);if(e!==void 0&&m!=null){let _=Vt(o,m);Array.isArray(_)&&(_=_.map(T=>Jf(o,T))),c(e,["contents"],_)}const g=u(t,["systemInstruction"]);e!==void 0&&g!=null&&c(e,["systemInstruction"],Jf(o,ht(o,g)));const h=u(t,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>Uy(o,T))),c(e,["tools"],_)}const x=u(t,["toolConfig"]);if(e!==void 0&&x!=null&&c(e,["toolConfig"],By(o,x)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function Hy(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["model"],Gp(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],Gy(o,s,e)),e}function $y(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],In(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function qy(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],In(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Wy(o,t,e){const i={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&c(e,["expireTime"],a),i}function Yy(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],In(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],Wy(o,s,e)),e}function jy(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&c(e,["_query","pageToken"],a),i}function Jy(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],jy(o,i,e)),e}function Ky(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function Zy(o,t){const e={},i=u(t,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function Qy(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],Ky(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],Zy(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Kf(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Qy(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Xy(o,t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=u(t,["description"]);i!=null&&c(e,["description"],i);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const f=u(t,["response"]);return f!=null&&c(e,["response"],f),e}function ev(o,t){const e={},i=u(t,["startTime"]);i!=null&&c(e,["startTime"],i);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function tv(o,t){const e={},i=u(t,["timeRangeFilter"]);return i!=null&&c(e,["timeRangeFilter"],ev(o,i)),e}function nv(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function rv(o,t){const e={},i=u(t,["dynamicRetrievalConfig"]);return i!=null&&c(e,["dynamicRetrievalConfig"],nv(o,i)),e}function ov(){return{}}function iv(o,t){const e={},i=u(t,["apiKeyString"]);return i!=null&&c(e,["apiKeyString"],i),e}function sv(o,t){const e={},i=u(t,["apiKeyConfig"]);i!=null&&c(e,["apiKeyConfig"],iv(o,i));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const a=u(t,["googleServiceAccountConfig"]);a!=null&&c(e,["googleServiceAccountConfig"],a);const f=u(t,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(t,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const g=u(t,["oidcConfig"]);return g!=null&&c(e,["oidcConfig"],g),e}function lv(o,t){const e={},i=u(t,["authConfig"]);return i!=null&&c(e,["authConfig"],sv(o,i)),e}function av(o,t){const e={},i=u(t,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(_=>Xy(o,_))),c(e,["functionDeclarations"],x)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const a=u(t,["googleSearch"]);a!=null&&c(e,["googleSearch"],tv(o,a));const f=u(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],rv(o,f)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],ov());const g=u(t,["googleMaps"]);if(g!=null&&c(e,["googleMaps"],lv(o,g)),u(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const h=u(t,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function uv(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function cv(o,t){const e={},i=u(t,["latitude"]);i!=null&&c(e,["latitude"],i);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function dv(o,t){const e={},i=u(t,["latLng"]);return i!=null&&c(e,["latLng"],cv(o,i)),e}function fv(o,t){const e={},i=u(t,["functionCallingConfig"]);i!=null&&c(e,["functionCallingConfig"],uv(o,i));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],dv(o,s)),e}function pv(o,t,e){const i={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&c(e,["expireTime"],a);const f=u(t,["displayName"]);e!==void 0&&f!=null&&c(e,["displayName"],f);const m=u(t,["contents"]);if(e!==void 0&&m!=null){let T=Vt(o,m);Array.isArray(T)&&(T=T.map(w=>Kf(o,w))),c(e,["contents"],T)}const g=u(t,["systemInstruction"]);e!==void 0&&g!=null&&c(e,["systemInstruction"],Kf(o,ht(o,g)));const h=u(t,["tools"]);if(e!==void 0&&h!=null){let T=h;Array.isArray(T)&&(T=T.map(w=>av(o,w))),c(e,["tools"],T)}const x=u(t,["toolConfig"]);e!==void 0&&x!=null&&c(e,["toolConfig"],fv(o,x));const _=u(t,["kmsKeyName"]);return e!==void 0&&_!=null&&c(e,["encryption_spec","kmsKeyName"],_),i}function mv(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["model"],Gp(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],pv(o,s,e)),e}function hv(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],In(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function gv(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],In(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function yv(o,t,e){const i={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&c(e,["expireTime"],a),i}function vv(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],In(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],yv(o,s,e)),e}function xv(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&c(e,["_query","pageToken"],a),i}function Cv(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],xv(o,i,e)),e}function Oi(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["model"]);a!=null&&c(e,["model"],a);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const m=u(t,["updateTime"]);m!=null&&c(e,["updateTime"],m);const g=u(t,["expireTime"]);g!=null&&c(e,["expireTime"],g);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function _v(){return{}}function Tv(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>Oi(o,f))),c(e,["cachedContents"],a)}return e}function zi(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["model"]);a!=null&&c(e,["model"],a);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const m=u(t,["updateTime"]);m!=null&&c(e,["updateTime"],m);const g=u(t,["expireTime"]);g!=null&&c(e,["expireTime"],g);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function Ev(){return{}}function Sv(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>zi(o,f))),c(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ir;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ir||(Ir={}));class rs{constructor(t,e,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,i,s)}init(t,e,i){var s,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let f={config:{}};i?typeof i=="object"?f=Object.assign({},i):f=i:f={config:{}},f.config&&(f.config.pageToken=e.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(a=(s=f.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wv extends So{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new rs(Ir.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(e),e)}async create(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=mv(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>zi(this.apiClient,x))}else{const h=Hy(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>Oi(this.apiClient,x))}}async get(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=hv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>zi(this.apiClient,x))}else{const h=$y(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>Oi(this.apiClient,x))}}async delete(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=gv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(()=>{const x=Ev(),_=new Hf;return Object.assign(_,x),_})}else{const h=qy(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(()=>{const x=_v(),_=new Hf;return Object.assign(_,x),_})}}async update(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=vv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>zi(this.apiClient,x))}else{const h=Yy(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>Oi(this.apiClient,x))}}async listInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Cv(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Sv(this.apiClient,x),T=new $f;return Object.assign(T,_),T})}else{const h=Jy(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Tv(this.apiClient,x),T=new $f;return Object.assign(T,_),T})}}}function Zf(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],i=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(o){return this instanceof ze?(this.v=o,this):new ze(o)}function To(o,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(o,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),s[Symbol.asyncIterator]=function(){return this},s;function f(w){return function(k){return Promise.resolve(k).then(w,_)}}function m(w,k){i[w]&&(s[w]=function(P){return new Promise(function(D,b){a.push([w,P,D,b])>1||g(w,P)})},k&&(s[w]=k(s[w])))}function g(w,k){try{h(i[w](k))}catch(P){T(a[0][3],P)}}function h(w){w.value instanceof ze?Promise.resolve(w.value.v).then(x,_):T(a[0][2],w)}function x(w){g("next",w)}function _(w){g("throw",w)}function T(w,k){w(k),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Bi(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=o[Symbol.asyncIterator],e;return t?t.call(o):(o=typeof Zf=="function"?Zf(o):o[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=o[a]&&function(f){return new Promise(function(m,g){f=o[a](f),s(m,g,f.done,f.value)})}}function s(a,f,m,g){Promise.resolve(g).then(function(h){a({value:h,done:m})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iv(o){var t;if(o.candidates==null||o.candidates.length===0)return!1;const e=(t=o.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:Qp(e)}function Qp(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const t of o.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function Nv(o){if(o.length!==0){for(const t of o)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Qf(o){if(o===void 0||o.length===0)return[];const t=[],e=o.length;let i=0;for(;i<e;)if(o[i].role==="user")t.push(o[i]),i++;else{const s=[];let a=!0;for(;i<e&&o[i].role==="model";)s.push(o[i]),a&&!Qp(o[i])&&(a=!1),i++;a?t.push(...s):t.pop()}return t}class kv{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Av(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Av{constructor(t,e,i,s={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Nv(a)}async sendMessage(t){var e;await this.sendPromise;const i=ht(this.apiClient,t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,f,m;const g=await s,h=(f=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content,x=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];x!=null&&(T=(m=x.slice(_))!==null&&m!==void 0?m:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise,s}async sendMessageStream(t){var e;await this.sendPromise;const i=ht(this.apiClient,t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(t=!1){const e=t?Qf(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var i,s;return To(this,arguments,function*(){var f,m,g,h;const x=[];try{for(var _=!0,T=Bi(t),w;w=yield ze(T.next()),f=w.done,!f;_=!0){h=w.value,_=!1;const k=h;if(Iv(k)){const P=(s=(i=k.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;P!==void 0&&x.push(P)}yield yield ze(k)}}catch(k){m={error:k}}finally{try{!_&&!f&&(g=T.return)&&(yield ze(g.call(T)))}finally{if(m)throw m.error}}this.recordHistory(e,x)})}recordHistory(t,e,i){let s=[];e.length>0&&e.every(a=>a.role!==void 0)?s=e:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Qf(i)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rv(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&c(e,["_query","pageToken"],a),i}function Mv(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],Rv(o,i,e)),e}function Pv(o,t){const e={},i=u(t,["details"]);i!=null&&c(e,["details"],i);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const a=u(t,["code"]);return a!=null&&c(e,["code"],a),e}function Dv(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["mimeType"]);a!=null&&c(e,["mimeType"],a);const f=u(t,["sizeBytes"]);f!=null&&c(e,["sizeBytes"],f);const m=u(t,["createTime"]);m!=null&&c(e,["createTime"],m);const g=u(t,["expirationTime"]);g!=null&&c(e,["expirationTime"],g);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const x=u(t,["sha256Hash"]);x!=null&&c(e,["sha256Hash"],x);const _=u(t,["uri"]);_!=null&&c(e,["uri"],_);const T=u(t,["downloadUri"]);T!=null&&c(e,["downloadUri"],T);const w=u(t,["state"]);w!=null&&c(e,["state"],w);const k=u(t,["source"]);k!=null&&c(e,["source"],k);const P=u(t,["videoMetadata"]);P!=null&&c(e,["videoMetadata"],P);const D=u(t,["error"]);return D!=null&&c(e,["error"],Pv(o,D)),e}function Lv(o,t){const e={},i=u(t,["file"]);i!=null&&c(e,["file"],Dv(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Fv(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","file"],Jp(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Vv(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","file"],Jp(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Uv(o,t){const e={},i=u(t,["details"]);i!=null&&c(e,["details"],i);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const a=u(t,["code"]);return a!=null&&c(e,["code"],a),e}function xa(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["mimeType"]);a!=null&&c(e,["mimeType"],a);const f=u(t,["sizeBytes"]);f!=null&&c(e,["sizeBytes"],f);const m=u(t,["createTime"]);m!=null&&c(e,["createTime"],m);const g=u(t,["expirationTime"]);g!=null&&c(e,["expirationTime"],g);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const x=u(t,["sha256Hash"]);x!=null&&c(e,["sha256Hash"],x);const _=u(t,["uri"]);_!=null&&c(e,["uri"],_);const T=u(t,["downloadUri"]);T!=null&&c(e,["downloadUri"],T);const w=u(t,["state"]);w!=null&&c(e,["state"],w);const k=u(t,["source"]);k!=null&&c(e,["source"],k);const P=u(t,["videoMetadata"]);P!=null&&c(e,["videoMetadata"],P);const D=u(t,["error"]);return D!=null&&c(e,["error"],Uv(o,D)),e}function bv(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>xa(o,f))),c(e,["files"],a)}return e}function Ov(){return{}}function zv(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bv extends So{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new rs(Ir.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>xa(this.apiClient,e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Mv(this.apiClient,t);return a=ce("files",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=bv(this.apiClient,g),x=new py;return Object.assign(x,h),x})}}async createInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Lv(this.apiClient,t);return a=ce("upload/v1beta/files",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(()=>{const g=Ov(),h=new my;return Object.assign(h,g),h})}}async get(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Fv(this.apiClient,t);return a=ce("files/{file}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>xa(this.apiClient,g))}}async delete(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Vv(this.apiClient,t);return a=ce("files/{file}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(()=>{const g=zv(),h=new hy;return Object.assign(h,g),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gv(o,t){const e={},i=u(t,["voiceName"]);return i!=null&&c(e,["voiceName"],i),e}function Hv(o,t){const e={},i=u(t,["voiceName"]);return i!=null&&c(e,["voiceName"],i),e}function Xp(o,t){const e={},i=u(t,["prebuiltVoiceConfig"]);return i!=null&&c(e,["prebuiltVoiceConfig"],Gv(o,i)),e}function $v(o,t){const e={},i=u(t,["prebuiltVoiceConfig"]);return i!=null&&c(e,["prebuiltVoiceConfig"],Hv(o,i)),e}function qv(o,t){const e={},i=u(t,["speaker"]);i!=null&&c(e,["speaker"],i);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],Xp(o,s)),e}function Wv(o,t){const e={},i=u(t,["speakerVoiceConfigs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>qv(o,a))),c(e,["speakerVoiceConfigs"],s)}return e}function Yv(o,t){const e={},i=u(t,["voiceConfig"]);i!=null&&c(e,["voiceConfig"],Xp(o,i));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],Wv(o,s));const a=u(t,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function jv(o,t){const e={},i=u(t,["voiceConfig"]);if(i!=null&&c(e,["voiceConfig"],$v(o,i)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Jv(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function Kv(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function Zv(o,t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["data"]);i!=null&&c(e,["data"],i);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Qv(o,t){const e={},i=u(t,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function Xv(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],Jv(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],Zv(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function ex(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],Kv(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],Qv(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function tx(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Xv(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function nx(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>ex(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function rx(o,t){const e={},i=u(t,["behavior"]);i!=null&&c(e,["behavior"],i);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const a=u(t,["name"]);a!=null&&c(e,["name"],a);const f=u(t,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],m),e}function ox(o,t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=u(t,["description"]);i!=null&&c(e,["description"],i);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const f=u(t,["response"]);return f!=null&&c(e,["response"],f),e}function ix(o,t){const e={},i=u(t,["startTime"]);i!=null&&c(e,["startTime"],i);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function sx(o,t){const e={},i=u(t,["startTime"]);i!=null&&c(e,["startTime"],i);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function lx(o,t){const e={},i=u(t,["timeRangeFilter"]);return i!=null&&c(e,["timeRangeFilter"],ix(o,i)),e}function ax(o,t){const e={},i=u(t,["timeRangeFilter"]);return i!=null&&c(e,["timeRangeFilter"],sx(o,i)),e}function ux(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function cx(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function dx(o,t){const e={},i=u(t,["dynamicRetrievalConfig"]);return i!=null&&c(e,["dynamicRetrievalConfig"],ux(o,i)),e}function fx(o,t){const e={},i=u(t,["dynamicRetrievalConfig"]);return i!=null&&c(e,["dynamicRetrievalConfig"],cx(o,i)),e}function px(){return{}}function mx(o,t){const e={},i=u(t,["apiKeyString"]);return i!=null&&c(e,["apiKeyString"],i),e}function hx(o,t){const e={},i=u(t,["apiKeyConfig"]);i!=null&&c(e,["apiKeyConfig"],mx(o,i));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const a=u(t,["googleServiceAccountConfig"]);a!=null&&c(e,["googleServiceAccountConfig"],a);const f=u(t,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(t,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const g=u(t,["oidcConfig"]);return g!=null&&c(e,["oidcConfig"],g),e}function gx(o,t){const e={},i=u(t,["authConfig"]);return i!=null&&c(e,["authConfig"],hx(o,i)),e}function yx(){return{}}function vx(o,t){const e={},i=u(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>rx(o,h))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],lx(o,s));const a=u(t,["googleSearchRetrieval"]);if(a!=null&&c(e,["googleSearchRetrieval"],dx(o,a)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],yx());const m=u(t,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function xx(o,t){const e={},i=u(t,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(_=>ox(o,_))),c(e,["functionDeclarations"],x)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const a=u(t,["googleSearch"]);a!=null&&c(e,["googleSearch"],ax(o,a));const f=u(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],fx(o,f)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],px());const g=u(t,["googleMaps"]);if(g!=null&&c(e,["googleMaps"],gx(o,g)),u(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const h=u(t,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Cx(o,t){const e={},i=u(t,["handle"]);if(i!=null&&c(e,["handle"],i),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _x(o,t){const e={},i=u(t,["handle"]);i!=null&&c(e,["handle"],i);const s=u(t,["transparent"]);return s!=null&&c(e,["transparent"],s),e}function Xf(){return{}}function ep(){return{}}function Tx(o,t){const e={},i=u(t,["disabled"]);i!=null&&c(e,["disabled"],i);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const a=u(t,["endOfSpeechSensitivity"]);a!=null&&c(e,["endOfSpeechSensitivity"],a);const f=u(t,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(t,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function Ex(o,t){const e={},i=u(t,["disabled"]);i!=null&&c(e,["disabled"],i);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const a=u(t,["endOfSpeechSensitivity"]);a!=null&&c(e,["endOfSpeechSensitivity"],a);const f=u(t,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(t,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function Sx(o,t){const e={},i=u(t,["automaticActivityDetection"]);i!=null&&c(e,["automaticActivityDetection"],Tx(o,i));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const a=u(t,["turnCoverage"]);return a!=null&&c(e,["turnCoverage"],a),e}function wx(o,t){const e={},i=u(t,["automaticActivityDetection"]);i!=null&&c(e,["automaticActivityDetection"],Ex(o,i));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const a=u(t,["turnCoverage"]);return a!=null&&c(e,["turnCoverage"],a),e}function Ix(o,t){const e={},i=u(t,["targetTokens"]);return i!=null&&c(e,["targetTokens"],i),e}function Nx(o,t){const e={},i=u(t,["targetTokens"]);return i!=null&&c(e,["targetTokens"],i),e}function kx(o,t){const e={},i=u(t,["triggerTokens"]);i!=null&&c(e,["triggerTokens"],i);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],Ix(o,s)),e}function Ax(o,t){const e={},i=u(t,["triggerTokens"]);i!=null&&c(e,["triggerTokens"],i);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],Nx(o,s)),e}function Rx(o,t){const e={},i=u(t,["proactiveAudio"]);return i!=null&&c(e,["proactiveAudio"],i),e}function Mx(o,t){const e={},i=u(t,["proactiveAudio"]);return i!=null&&c(e,["proactiveAudio"],i),e}function Px(o,t,e){const i={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","responseModalities"],a);const f=u(t,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(t,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const g=u(t,["topK"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","topK"],g);const h=u(t,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const x=u(t,["mediaResolution"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","mediaResolution"],x);const _=u(t,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],Yv(o,Yp(o,T)));const w=u(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=u(t,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],tx(o,ht(o,k)));const P=u(t,["tools"]);if(e!==void 0&&P!=null){let ie=ns(o,P);Array.isArray(ie)&&(ie=ie.map(oe=>vx(o,ts(o,oe)))),c(e,["setup","tools"],ie)}const D=u(t,["sessionResumption"]);e!==void 0&&D!=null&&c(e,["setup","sessionResumption"],Cx(o,D));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&c(e,["setup","inputAudioTranscription"],Xf());const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","outputAudioTranscription"],Xf());const q=u(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&c(e,["setup","realtimeInputConfig"],Sx(o,q));const K=u(t,["contextWindowCompression"]);e!==void 0&&K!=null&&c(e,["setup","contextWindowCompression"],kx(o,K));const Z=u(t,["proactivity"]);return e!==void 0&&Z!=null&&c(e,["setup","proactivity"],Rx(o,Z)),i}function Dx(o,t,e){const i={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","responseModalities"],a);const f=u(t,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(t,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const g=u(t,["topK"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","topK"],g);const h=u(t,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const x=u(t,["mediaResolution"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","mediaResolution"],x);const _=u(t,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],jv(o,Yp(o,T)));const w=u(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=u(t,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],nx(o,ht(o,k)));const P=u(t,["tools"]);if(e!==void 0&&P!=null){let ie=ns(o,P);Array.isArray(ie)&&(ie=ie.map(oe=>xx(o,ts(o,oe)))),c(e,["setup","tools"],ie)}const D=u(t,["sessionResumption"]);e!==void 0&&D!=null&&c(e,["setup","sessionResumption"],_x(o,D));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&c(e,["setup","inputAudioTranscription"],ep());const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","outputAudioTranscription"],ep());const q=u(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&c(e,["setup","realtimeInputConfig"],wx(o,q));const K=u(t,["contextWindowCompression"]);e!==void 0&&K!=null&&c(e,["setup","contextWindowCompression"],Ax(o,K));const Z=u(t,["proactivity"]);return e!==void 0&&Z!=null&&c(e,["setup","proactivity"],Mx(o,Z)),i}function Lx(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["setup","model"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],Px(o,s,e)),e}function Fx(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["setup","model"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],Dx(o,s,e)),e}function Vx(){return{}}function Ux(){return{}}function bx(){return{}}function Ox(){return{}}function zx(o,t){const e={},i=u(t,["media"]);i!=null&&c(e,["mediaChunks"],Hp(o,i));const s=u(t,["audio"]);s!=null&&c(e,["audio"],xy(o,s));const a=u(t,["audioStreamEnd"]);a!=null&&c(e,["audioStreamEnd"],a);const f=u(t,["video"]);f!=null&&c(e,["video"],vy(o,f));const m=u(t,["text"]);return m!=null&&c(e,["text"],m),u(t,["activityStart"])!=null&&c(e,["activityStart"],Vx()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],bx()),e}function Bx(o,t){const e={},i=u(t,["media"]);if(i!=null&&c(e,["mediaChunks"],Hp(o,i)),u(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=u(t,["audioStreamEnd"]);if(s!=null&&c(e,["audioStreamEnd"],s),u(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(u(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return u(t,["activityStart"])!=null&&c(e,["activityStart"],Ux()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],Ox()),e}function em(o,t){const e={},i=u(t,["text"]);i!=null&&c(e,["text"],i);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function Gx(o,t){const e={},i=u(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>em(o,a))),c(e,["weightedPrompts"],s)}return e}function tm(o,t){const e={},i=u(t,["temperature"]);i!=null&&c(e,["temperature"],i);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const a=u(t,["seed"]);a!=null&&c(e,["seed"],a);const f=u(t,["guidance"]);f!=null&&c(e,["guidance"],f);const m=u(t,["bpm"]);m!=null&&c(e,["bpm"],m);const g=u(t,["density"]);g!=null&&c(e,["density"],g);const h=u(t,["brightness"]);h!=null&&c(e,["brightness"],h);const x=u(t,["scale"]);x!=null&&c(e,["scale"],x);const _=u(t,["muteBass"]);_!=null&&c(e,["muteBass"],_);const T=u(t,["muteDrums"]);T!=null&&c(e,["muteDrums"],T);const w=u(t,["onlyBassAndDrums"]);w!=null&&c(e,["onlyBassAndDrums"],w);const k=u(t,["musicGenerationMode"]);return k!=null&&c(e,["musicGenerationMode"],k),e}function Hx(o,t){const e={},i=u(t,["musicGenerationConfig"]);return i!=null&&c(e,["musicGenerationConfig"],tm(o,i)),e}function nm(o,t){const e={},i=u(t,["model"]);return i!=null&&c(e,["model"],i),e}function rm(o,t){const e={},i=u(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>em(o,a))),c(e,["weightedPrompts"],s)}return e}function Ca(o,t){const e={},i=u(t,["setup"]);i!=null&&c(e,["setup"],nm(o,i));const s=u(t,["clientContent"]);s!=null&&c(e,["clientContent"],rm(o,s));const a=u(t,["musicGenerationConfig"]);a!=null&&c(e,["musicGenerationConfig"],tm(o,a));const f=u(t,["playbackControl"]);return f!=null&&c(e,["playbackControl"],f),e}function $x(){return{}}function qx(){return{}}function Wx(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function Yx(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function jx(o,t){const e={},i=u(t,["data"]);i!=null&&c(e,["data"],i);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Jx(o,t){const e={},i=u(t,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function Kx(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],Wx(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],jx(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Zx(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],Yx(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],Jx(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Qx(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Kx(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Xx(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Zx(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function tp(o,t){const e={},i=u(t,["text"]);i!=null&&c(e,["text"],i);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function np(o,t){const e={},i=u(t,["text"]);i!=null&&c(e,["text"],i);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function eC(o,t){const e={},i=u(t,["retrievedUrl"]);i!=null&&c(e,["retrievedUrl"],i);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function tC(o,t){const e={},i=u(t,["urlMetadata"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>eC(o,a))),c(e,["urlMetadata"],s)}return e}function nC(o,t){const e={},i=u(t,["modelTurn"]);i!=null&&c(e,["modelTurn"],Qx(o,i));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const a=u(t,["interrupted"]);a!=null&&c(e,["interrupted"],a);const f=u(t,["groundingMetadata"]);f!=null&&c(e,["groundingMetadata"],f);const m=u(t,["generationComplete"]);m!=null&&c(e,["generationComplete"],m);const g=u(t,["inputTranscription"]);g!=null&&c(e,["inputTranscription"],tp(o,g));const h=u(t,["outputTranscription"]);h!=null&&c(e,["outputTranscription"],tp(o,h));const x=u(t,["urlContextMetadata"]);return x!=null&&c(e,["urlContextMetadata"],tC(o,x)),e}function rC(o,t){const e={},i=u(t,["modelTurn"]);i!=null&&c(e,["modelTurn"],Xx(o,i));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const a=u(t,["interrupted"]);a!=null&&c(e,["interrupted"],a);const f=u(t,["groundingMetadata"]);f!=null&&c(e,["groundingMetadata"],f);const m=u(t,["generationComplete"]);m!=null&&c(e,["generationComplete"],m);const g=u(t,["inputTranscription"]);g!=null&&c(e,["inputTranscription"],np(o,g));const h=u(t,["outputTranscription"]);return h!=null&&c(e,["outputTranscription"],np(o,h)),e}function oC(o,t){const e={},i=u(t,["id"]);i!=null&&c(e,["id"],i);const s=u(t,["args"]);s!=null&&c(e,["args"],s);const a=u(t,["name"]);return a!=null&&c(e,["name"],a),e}function iC(o,t){const e={},i=u(t,["args"]);i!=null&&c(e,["args"],i);const s=u(t,["name"]);return s!=null&&c(e,["name"],s),e}function sC(o,t){const e={},i=u(t,["functionCalls"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>oC(o,a))),c(e,["functionCalls"],s)}return e}function lC(o,t){const e={},i=u(t,["functionCalls"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>iC(o,a))),c(e,["functionCalls"],s)}return e}function aC(o,t){const e={},i=u(t,["ids"]);return i!=null&&c(e,["ids"],i),e}function uC(o,t){const e={},i=u(t,["ids"]);return i!=null&&c(e,["ids"],i),e}function Vi(o,t){const e={},i=u(t,["modality"]);i!=null&&c(e,["modality"],i);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Ui(o,t){const e={},i=u(t,["modality"]);i!=null&&c(e,["modality"],i);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function cC(o,t){const e={},i=u(t,["promptTokenCount"]);i!=null&&c(e,["promptTokenCount"],i);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const a=u(t,["responseTokenCount"]);a!=null&&c(e,["responseTokenCount"],a);const f=u(t,["toolUsePromptTokenCount"]);f!=null&&c(e,["toolUsePromptTokenCount"],f);const m=u(t,["thoughtsTokenCount"]);m!=null&&c(e,["thoughtsTokenCount"],m);const g=u(t,["totalTokenCount"]);g!=null&&c(e,["totalTokenCount"],g);const h=u(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(k=>Vi(o,k))),c(e,["promptTokensDetails"],w)}const x=u(t,["cacheTokensDetails"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(k=>Vi(o,k))),c(e,["cacheTokensDetails"],w)}const _=u(t,["responseTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(k=>Vi(o,k))),c(e,["responseTokensDetails"],w)}const T=u(t,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(k=>Vi(o,k))),c(e,["toolUsePromptTokensDetails"],w)}return e}function dC(o,t){const e={},i=u(t,["promptTokenCount"]);i!=null&&c(e,["promptTokenCount"],i);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const a=u(t,["candidatesTokenCount"]);a!=null&&c(e,["responseTokenCount"],a);const f=u(t,["toolUsePromptTokenCount"]);f!=null&&c(e,["toolUsePromptTokenCount"],f);const m=u(t,["thoughtsTokenCount"]);m!=null&&c(e,["thoughtsTokenCount"],m);const g=u(t,["totalTokenCount"]);g!=null&&c(e,["totalTokenCount"],g);const h=u(t,["promptTokensDetails"]);if(h!=null){let k=h;Array.isArray(k)&&(k=k.map(P=>Ui(o,P))),c(e,["promptTokensDetails"],k)}const x=u(t,["cacheTokensDetails"]);if(x!=null){let k=x;Array.isArray(k)&&(k=k.map(P=>Ui(o,P))),c(e,["cacheTokensDetails"],k)}const _=u(t,["candidatesTokensDetails"]);if(_!=null){let k=_;Array.isArray(k)&&(k=k.map(P=>Ui(o,P))),c(e,["responseTokensDetails"],k)}const T=u(t,["toolUsePromptTokensDetails"]);if(T!=null){let k=T;Array.isArray(k)&&(k=k.map(P=>Ui(o,P))),c(e,["toolUsePromptTokensDetails"],k)}const w=u(t,["trafficType"]);return w!=null&&c(e,["trafficType"],w),e}function fC(o,t){const e={},i=u(t,["timeLeft"]);return i!=null&&c(e,["timeLeft"],i),e}function pC(o,t){const e={},i=u(t,["timeLeft"]);return i!=null&&c(e,["timeLeft"],i),e}function mC(o,t){const e={},i=u(t,["newHandle"]);i!=null&&c(e,["newHandle"],i);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const a=u(t,["lastConsumedClientMessageIndex"]);return a!=null&&c(e,["lastConsumedClientMessageIndex"],a),e}function hC(o,t){const e={},i=u(t,["newHandle"]);i!=null&&c(e,["newHandle"],i);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const a=u(t,["lastConsumedClientMessageIndex"]);return a!=null&&c(e,["lastConsumedClientMessageIndex"],a),e}function gC(o,t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],$x());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],nC(o,s));const a=u(t,["toolCall"]);a!=null&&c(e,["toolCall"],sC(o,a));const f=u(t,["toolCallCancellation"]);f!=null&&c(e,["toolCallCancellation"],aC(o,f));const m=u(t,["usageMetadata"]);m!=null&&c(e,["usageMetadata"],cC(o,m));const g=u(t,["goAway"]);g!=null&&c(e,["goAway"],fC(o,g));const h=u(t,["sessionResumptionUpdate"]);return h!=null&&c(e,["sessionResumptionUpdate"],mC(o,h)),e}function yC(o,t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],qx());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],rC(o,s));const a=u(t,["toolCall"]);a!=null&&c(e,["toolCall"],lC(o,a));const f=u(t,["toolCallCancellation"]);f!=null&&c(e,["toolCallCancellation"],uC(o,f));const m=u(t,["usageMetadata"]);m!=null&&c(e,["usageMetadata"],dC(o,m));const g=u(t,["goAway"]);g!=null&&c(e,["goAway"],pC(o,g));const h=u(t,["sessionResumptionUpdate"]);return h!=null&&c(e,["sessionResumptionUpdate"],hC(o,h)),e}function vC(){return{}}function xC(o,t){const e={},i=u(t,["text"]);i!=null&&c(e,["text"],i);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function CC(o,t){const e={},i=u(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>xC(o,a))),c(e,["weightedPrompts"],s)}return e}function _C(o,t){const e={},i=u(t,["temperature"]);i!=null&&c(e,["temperature"],i);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const a=u(t,["seed"]);a!=null&&c(e,["seed"],a);const f=u(t,["guidance"]);f!=null&&c(e,["guidance"],f);const m=u(t,["bpm"]);m!=null&&c(e,["bpm"],m);const g=u(t,["density"]);g!=null&&c(e,["density"],g);const h=u(t,["brightness"]);h!=null&&c(e,["brightness"],h);const x=u(t,["scale"]);x!=null&&c(e,["scale"],x);const _=u(t,["muteBass"]);_!=null&&c(e,["muteBass"],_);const T=u(t,["muteDrums"]);T!=null&&c(e,["muteDrums"],T);const w=u(t,["onlyBassAndDrums"]);w!=null&&c(e,["onlyBassAndDrums"],w);const k=u(t,["musicGenerationMode"]);return k!=null&&c(e,["musicGenerationMode"],k),e}function TC(o,t){const e={},i=u(t,["clientContent"]);i!=null&&c(e,["clientContent"],CC(o,i));const s=u(t,["musicGenerationConfig"]);return s!=null&&c(e,["musicGenerationConfig"],_C(o,s)),e}function EC(o,t){const e={},i=u(t,["data"]);i!=null&&c(e,["data"],i);const s=u(t,["mimeType"]);s!=null&&c(e,["mimeType"],s);const a=u(t,["sourceMetadata"]);return a!=null&&c(e,["sourceMetadata"],TC(o,a)),e}function SC(o,t){const e={},i=u(t,["audioChunks"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>EC(o,a))),c(e,["audioChunks"],s)}return e}function wC(o,t){const e={},i=u(t,["text"]);i!=null&&c(e,["text"],i);const s=u(t,["filteredReason"]);return s!=null&&c(e,["filteredReason"],s),e}function IC(o,t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],vC());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],SC(o,s));const a=u(t,["filteredPrompt"]);return a!=null&&c(e,["filteredPrompt"],wC(o,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NC(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function kC(o,t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["data"]);i!=null&&c(e,["data"],i);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function AC(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],NC(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],kC(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function os(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>AC(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function RC(o,t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(t,["category"]);i!=null&&c(e,["category"],i);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function MC(o,t){const e={},i=u(t,["behavior"]);i!=null&&c(e,["behavior"],i);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const a=u(t,["name"]);a!=null&&c(e,["name"],a);const f=u(t,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],m),e}function PC(o,t){const e={},i=u(t,["startTime"]);i!=null&&c(e,["startTime"],i);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function DC(o,t){const e={},i=u(t,["timeRangeFilter"]);return i!=null&&c(e,["timeRangeFilter"],PC(o,i)),e}function LC(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function FC(o,t){const e={},i=u(t,["dynamicRetrievalConfig"]);return i!=null&&c(e,["dynamicRetrievalConfig"],LC(o,i)),e}function VC(){return{}}function UC(o,t){const e={},i=u(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>MC(o,h))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],DC(o,s));const a=u(t,["googleSearchRetrieval"]);if(a!=null&&c(e,["googleSearchRetrieval"],FC(o,a)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],VC());const m=u(t,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function bC(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function OC(o,t){const e={},i=u(t,["latitude"]);i!=null&&c(e,["latitude"],i);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function zC(o,t){const e={},i=u(t,["latLng"]);return i!=null&&c(e,["latLng"],OC(o,i)),e}function BC(o,t){const e={},i=u(t,["functionCallingConfig"]);i!=null&&c(e,["functionCallingConfig"],bC(o,i));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],zC(o,s)),e}function GC(o,t){const e={},i=u(t,["voiceName"]);return i!=null&&c(e,["voiceName"],i),e}function om(o,t){const e={},i=u(t,["prebuiltVoiceConfig"]);return i!=null&&c(e,["prebuiltVoiceConfig"],GC(o,i)),e}function HC(o,t){const e={},i=u(t,["speaker"]);i!=null&&c(e,["speaker"],i);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],om(o,s)),e}function $C(o,t){const e={},i=u(t,["speakerVoiceConfigs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>HC(o,a))),c(e,["speakerVoiceConfigs"],s)}return e}function qC(o,t){const e={},i=u(t,["voiceConfig"]);i!=null&&c(e,["voiceConfig"],om(o,i));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],$C(o,s));const a=u(t,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function WC(o,t){const e={},i=u(t,["includeThoughts"]);i!=null&&c(e,["includeThoughts"],i);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function YC(o,t,e){const i={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],os(o,ht(o,s)));const a=u(t,["temperature"]);a!=null&&c(i,["temperature"],a);const f=u(t,["topP"]);f!=null&&c(i,["topP"],f);const m=u(t,["topK"]);m!=null&&c(i,["topK"],m);const g=u(t,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const h=u(t,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const x=u(t,["stopSequences"]);x!=null&&c(i,["stopSequences"],x);const _=u(t,["responseLogprobs"]);_!=null&&c(i,["responseLogprobs"],_);const T=u(t,["logprobs"]);T!=null&&c(i,["logprobs"],T);const w=u(t,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const k=u(t,["frequencyPenalty"]);k!=null&&c(i,["frequencyPenalty"],k);const P=u(t,["seed"]);P!=null&&c(i,["seed"],P);const D=u(t,["responseMimeType"]);D!=null&&c(i,["responseMimeType"],D);const b=u(t,["responseSchema"]);if(b!=null&&c(i,["responseSchema"],Xi(o,b)),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=u(t,["safetySettings"]);if(e!==void 0&&$!=null){let pe=$;Array.isArray(pe)&&(pe=pe.map(Be=>RC(o,Be))),c(e,["safetySettings"],pe)}const q=u(t,["tools"]);if(e!==void 0&&q!=null){let pe=ns(o,q);Array.isArray(pe)&&(pe=pe.map(Be=>UC(o,ts(o,Be)))),c(e,["tools"],pe)}const K=u(t,["toolConfig"]);if(e!==void 0&&K!=null&&c(e,["toolConfig"],BC(o,K)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=u(t,["cachedContent"]);e!==void 0&&Z!=null&&c(e,["cachedContent"],In(o,Z));const ie=u(t,["responseModalities"]);ie!=null&&c(i,["responseModalities"],ie);const oe=u(t,["mediaResolution"]);oe!=null&&c(i,["mediaResolution"],oe);const _e=u(t,["speechConfig"]);if(_e!=null&&c(i,["speechConfig"],qC(o,Wp(o,_e))),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const se=u(t,["thinkingConfig"]);return se!=null&&c(i,["thinkingConfig"],WC(o,se)),i}function rp(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);if(s!=null){let f=Vt(o,s);Array.isArray(f)&&(f=f.map(m=>os(o,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["generationConfig"],YC(o,a,e)),e}function jC(o,t,e){const i={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&c(e,["requests[]","title"],a);const f=u(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&c(e,["requests[]","outputDimensionality"],f),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function JC(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);s!=null&&c(e,["requests[]","content"],qp(o,s));const a=u(t,["config"]);a!=null&&c(e,["config"],jC(o,a,e));const f=u(t,["model"]);return f!==void 0&&c(e,["requests[]","model"],Fe(o,f)),e}function KC(o,t,e){const i={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&c(e,["parameters","aspectRatio"],a);const f=u(t,["guidanceScale"]);if(e!==void 0&&f!=null&&c(e,["parameters","guidanceScale"],f),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const g=u(t,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const h=u(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&c(e,["parameters","includeSafetyAttributes"],h);const x=u(t,["includeRaiReason"]);e!==void 0&&x!=null&&c(e,["parameters","includeRaiReason"],x);const _=u(t,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const T=u(t,["outputMimeType"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","mimeType"],T);const w=u(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&c(e,["parameters","outputOptions","compressionQuality"],w),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function ZC(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["config"]);return a!=null&&c(e,["config"],KC(o,a,e)),e}function QC(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","name"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function XC(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);e!==void 0&&f!=null&&c(e,["_query","filter"],f);const m=u(t,["queryBase"]);return e!==void 0&&m!=null&&c(e,["_url","models_url"],Kp(o,m)),i}function e_(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],XC(o,i,e)),e}function t_(o,t,e){const i={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&c(e,["description"],a);const f=u(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&c(e,["defaultCheckpointId"],f),i}function n_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","name"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],t_(o,s,e)),e}function r_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","name"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function o_(o,t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function i_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);if(s!=null){let f=Vt(o,s);Array.isArray(f)&&(f=f.map(m=>os(o,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["config"],o_(o,a)),e}function s_(o,t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=u(t,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Nn(o,i));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function l_(o,t,e){const i={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=u(t,["durationSeconds"]);if(e!==void 0&&a!=null&&c(e,["parameters","durationSeconds"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(t,["aspectRatio"]);if(e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const m=u(t,["personGeneration"]);if(e!==void 0&&m!=null&&c(e,["parameters","personGeneration"],m),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=u(t,["negativePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","negativePrompt"],g),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function a_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["image"]);a!=null&&c(e,["instances[0]","image"],s_(o,a));const f=u(t,["config"]);return f!=null&&c(e,["config"],l_(o,f,e)),e}function u_(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function c_(o,t){const e={},i=u(t,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function d_(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],u_(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],c_(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Ar(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>d_(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function f_(o,t){const e={},i=u(t,["featureSelectionPreference"]);return i!=null&&c(e,["featureSelectionPreference"],i),e}function p_(o,t){const e={},i=u(t,["method"]);i!=null&&c(e,["method"],i);const s=u(t,["category"]);s!=null&&c(e,["category"],s);const a=u(t,["threshold"]);return a!=null&&c(e,["threshold"],a),e}function m_(o,t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=u(t,["description"]);i!=null&&c(e,["description"],i);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const f=u(t,["response"]);return f!=null&&c(e,["response"],f),e}function h_(o,t){const e={},i=u(t,["startTime"]);i!=null&&c(e,["startTime"],i);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function g_(o,t){const e={},i=u(t,["timeRangeFilter"]);return i!=null&&c(e,["timeRangeFilter"],h_(o,i)),e}function y_(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function v_(o,t){const e={},i=u(t,["dynamicRetrievalConfig"]);return i!=null&&c(e,["dynamicRetrievalConfig"],y_(o,i)),e}function x_(){return{}}function C_(o,t){const e={},i=u(t,["apiKeyString"]);return i!=null&&c(e,["apiKeyString"],i),e}function __(o,t){const e={},i=u(t,["apiKeyConfig"]);i!=null&&c(e,["apiKeyConfig"],C_(o,i));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const a=u(t,["googleServiceAccountConfig"]);a!=null&&c(e,["googleServiceAccountConfig"],a);const f=u(t,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(t,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const g=u(t,["oidcConfig"]);return g!=null&&c(e,["oidcConfig"],g),e}function T_(o,t){const e={},i=u(t,["authConfig"]);return i!=null&&c(e,["authConfig"],__(o,i)),e}function im(o,t){const e={},i=u(t,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(_=>m_(o,_))),c(e,["functionDeclarations"],x)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const a=u(t,["googleSearch"]);a!=null&&c(e,["googleSearch"],g_(o,a));const f=u(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],v_(o,f)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],x_());const g=u(t,["googleMaps"]);if(g!=null&&c(e,["googleMaps"],T_(o,g)),u(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const h=u(t,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function E_(o,t){const e={},i=u(t,["mode"]);i!=null&&c(e,["mode"],i);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function S_(o,t){const e={},i=u(t,["latitude"]);i!=null&&c(e,["latitude"],i);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function w_(o,t){const e={},i=u(t,["latLng"]);return i!=null&&c(e,["latLng"],S_(o,i)),e}function I_(o,t){const e={},i=u(t,["functionCallingConfig"]);i!=null&&c(e,["functionCallingConfig"],E_(o,i));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],w_(o,s)),e}function N_(o,t){const e={},i=u(t,["voiceName"]);return i!=null&&c(e,["voiceName"],i),e}function k_(o,t){const e={},i=u(t,["prebuiltVoiceConfig"]);return i!=null&&c(e,["prebuiltVoiceConfig"],N_(o,i)),e}function A_(o,t){const e={},i=u(t,["voiceConfig"]);if(i!=null&&c(e,["voiceConfig"],k_(o,i)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function R_(o,t){const e={},i=u(t,["includeThoughts"]);i!=null&&c(e,["includeThoughts"],i);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function M_(o,t,e){const i={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Ar(o,ht(o,s)));const a=u(t,["temperature"]);a!=null&&c(i,["temperature"],a);const f=u(t,["topP"]);f!=null&&c(i,["topP"],f);const m=u(t,["topK"]);m!=null&&c(i,["topK"],m);const g=u(t,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const h=u(t,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const x=u(t,["stopSequences"]);x!=null&&c(i,["stopSequences"],x);const _=u(t,["responseLogprobs"]);_!=null&&c(i,["responseLogprobs"],_);const T=u(t,["logprobs"]);T!=null&&c(i,["logprobs"],T);const w=u(t,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const k=u(t,["frequencyPenalty"]);k!=null&&c(i,["frequencyPenalty"],k);const P=u(t,["seed"]);P!=null&&c(i,["seed"],P);const D=u(t,["responseMimeType"]);D!=null&&c(i,["responseMimeType"],D);const b=u(t,["responseSchema"]);b!=null&&c(i,["responseSchema"],Xi(o,b));const $=u(t,["routingConfig"]);$!=null&&c(i,["routingConfig"],$);const q=u(t,["modelSelectionConfig"]);q!=null&&c(i,["modelConfig"],f_(o,q));const K=u(t,["safetySettings"]);if(e!==void 0&&K!=null){let Ce=K;Array.isArray(Ce)&&(Ce=Ce.map(Ye=>p_(o,Ye))),c(e,["safetySettings"],Ce)}const Z=u(t,["tools"]);if(e!==void 0&&Z!=null){let Ce=ns(o,Z);Array.isArray(Ce)&&(Ce=Ce.map(Ye=>im(o,ts(o,Ye)))),c(e,["tools"],Ce)}const ie=u(t,["toolConfig"]);e!==void 0&&ie!=null&&c(e,["toolConfig"],I_(o,ie));const oe=u(t,["labels"]);e!==void 0&&oe!=null&&c(e,["labels"],oe);const _e=u(t,["cachedContent"]);e!==void 0&&_e!=null&&c(e,["cachedContent"],In(o,_e));const se=u(t,["responseModalities"]);se!=null&&c(i,["responseModalities"],se);const pe=u(t,["mediaResolution"]);pe!=null&&c(i,["mediaResolution"],pe);const Be=u(t,["speechConfig"]);Be!=null&&c(i,["speechConfig"],A_(o,Wp(o,Be)));const ye=u(t,["audioTimestamp"]);ye!=null&&c(i,["audioTimestamp"],ye);const Ne=u(t,["thinkingConfig"]);return Ne!=null&&c(i,["thinkingConfig"],R_(o,Ne)),i}function op(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);if(s!=null){let f=Vt(o,s);Array.isArray(f)&&(f=f.map(m=>Ar(o,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["generationConfig"],M_(o,a,e)),e}function P_(o,t,e){const i={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&c(e,["instances[]","title"],a);const f=u(t,["outputDimensionality"]);e!==void 0&&f!=null&&c(e,["parameters","outputDimensionality"],f);const m=u(t,["mimeType"]);e!==void 0&&m!=null&&c(e,["instances[]","mimeType"],m);const g=u(t,["autoTruncate"]);return e!==void 0&&g!=null&&c(e,["parameters","autoTruncate"],g),i}function D_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);s!=null&&c(e,["instances[]","content"],qp(o,s));const a=u(t,["config"]);return a!=null&&c(e,["config"],P_(o,a,e)),e}function L_(o,t,e){const i={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&c(e,["parameters","negativePrompt"],a);const f=u(t,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&c(e,["parameters","aspectRatio"],m);const g=u(t,["guidanceScale"]);e!==void 0&&g!=null&&c(e,["parameters","guidanceScale"],g);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const x=u(t,["safetyFilterLevel"]);e!==void 0&&x!=null&&c(e,["parameters","safetySetting"],x);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const T=u(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const w=u(t,["includeRaiReason"]);e!==void 0&&w!=null&&c(e,["parameters","includeRaiReason"],w);const k=u(t,["language"]);e!==void 0&&k!=null&&c(e,["parameters","language"],k);const P=u(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const D=u(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&c(e,["parameters","outputOptions","compressionQuality"],D);const b=u(t,["addWatermark"]);e!==void 0&&b!=null&&c(e,["parameters","addWatermark"],b);const $=u(t,["enhancePrompt"]);return e!==void 0&&$!=null&&c(e,["parameters","enhancePrompt"],$),i}function F_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["config"]);return a!=null&&c(e,["config"],L_(o,a,e)),e}function Ma(o,t){const e={},i=u(t,["gcsUri"]);i!=null&&c(e,["gcsUri"],i);const s=u(t,["imageBytes"]);s!=null&&c(e,["bytesBase64Encoded"],Nn(o,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function V_(o,t){const e={},i=u(t,["maskMode"]);i!=null&&c(e,["maskMode"],i);const s=u(t,["segmentationClasses"]);s!=null&&c(e,["maskClasses"],s);const a=u(t,["maskDilation"]);return a!=null&&c(e,["dilation"],a),e}function U_(o,t){const e={},i=u(t,["controlType"]);i!=null&&c(e,["controlType"],i);const s=u(t,["enableControlImageComputation"]);return s!=null&&c(e,["computeControl"],s),e}function b_(o,t){const e={},i=u(t,["styleDescription"]);return i!=null&&c(e,["styleDescription"],i),e}function O_(o,t){const e={},i=u(t,["subjectType"]);i!=null&&c(e,["subjectType"],i);const s=u(t,["subjectDescription"]);return s!=null&&c(e,["subjectDescription"],s),e}function z_(o,t){const e={},i=u(t,["referenceImage"]);i!=null&&c(e,["referenceImage"],Ma(o,i));const s=u(t,["referenceId"]);s!=null&&c(e,["referenceId"],s);const a=u(t,["referenceType"]);a!=null&&c(e,["referenceType"],a);const f=u(t,["maskImageConfig"]);f!=null&&c(e,["maskImageConfig"],V_(o,f));const m=u(t,["controlImageConfig"]);m!=null&&c(e,["controlImageConfig"],U_(o,m));const g=u(t,["styleImageConfig"]);g!=null&&c(e,["styleImageConfig"],b_(o,g));const h=u(t,["subjectImageConfig"]);return h!=null&&c(e,["subjectImageConfig"],O_(o,h)),e}function B_(o,t,e){const i={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&c(e,["parameters","negativePrompt"],a);const f=u(t,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&c(e,["parameters","aspectRatio"],m);const g=u(t,["guidanceScale"]);e!==void 0&&g!=null&&c(e,["parameters","guidanceScale"],g);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const x=u(t,["safetyFilterLevel"]);e!==void 0&&x!=null&&c(e,["parameters","safetySetting"],x);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const T=u(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const w=u(t,["includeRaiReason"]);e!==void 0&&w!=null&&c(e,["parameters","includeRaiReason"],w);const k=u(t,["language"]);e!==void 0&&k!=null&&c(e,["parameters","language"],k);const P=u(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const D=u(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&c(e,["parameters","outputOptions","compressionQuality"],D);const b=u(t,["editMode"]);e!==void 0&&b!=null&&c(e,["parameters","editMode"],b);const $=u(t,["baseSteps"]);return e!==void 0&&$!=null&&c(e,["parameters","editConfig","baseSteps"],$),i}function G_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["referenceImages"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>z_(o,g))),c(e,["instances[0]","referenceImages"],m)}const f=u(t,["config"]);return f!=null&&c(e,["config"],B_(o,f,e)),e}function H_(o,t,e){const i={},s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&c(e,["parameters","outputOptions","mimeType"],a);const f=u(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","compressionQuality"],f);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);const g=u(t,["mode"]);return e!==void 0&&g!=null&&c(e,["parameters","mode"],g),i}function $_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["image"]);s!=null&&c(e,["instances[0]","image"],Ma(o,s));const a=u(t,["upscaleFactor"]);a!=null&&c(e,["parameters","upscaleConfig","upscaleFactor"],a);const f=u(t,["config"]);return f!=null&&c(e,["config"],H_(o,f,e)),e}function q_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","name"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function W_(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);e!==void 0&&f!=null&&c(e,["_query","filter"],f);const m=u(t,["queryBase"]);return e!==void 0&&m!=null&&c(e,["_url","models_url"],Kp(o,m)),i}function Y_(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],W_(o,i,e)),e}function j_(o,t,e){const i={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&c(e,["description"],a);const f=u(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&c(e,["defaultCheckpointId"],f),i}function J_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],j_(o,s,e)),e}function K_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","name"],Fe(o,i));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Z_(o,t,e){const i={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Ar(o,ht(o,s)));const a=u(t,["tools"]);if(e!==void 0&&a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>im(o,g))),c(e,["tools"],m)}const f=u(t,["generationConfig"]);return e!==void 0&&f!=null&&c(e,["generationConfig"],f),i}function Q_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);if(s!=null){let f=Vt(o,s);Array.isArray(f)&&(f=f.map(m=>Ar(o,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["config"],Z_(o,a,e)),e}function X_(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["contents"]);if(s!=null){let f=Vt(o,s);Array.isArray(f)&&(f=f.map(m=>Ar(o,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["config"],a),e}function eT(o,t,e){const i={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&c(e,["parameters","storageUri"],a);const f=u(t,["fps"]);e!==void 0&&f!=null&&c(e,["parameters","fps"],f);const m=u(t,["durationSeconds"]);e!==void 0&&m!=null&&c(e,["parameters","durationSeconds"],m);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const h=u(t,["aspectRatio"]);e!==void 0&&h!=null&&c(e,["parameters","aspectRatio"],h);const x=u(t,["resolution"]);e!==void 0&&x!=null&&c(e,["parameters","resolution"],x);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const T=u(t,["pubsubTopic"]);e!==void 0&&T!=null&&c(e,["parameters","pubsubTopic"],T);const w=u(t,["negativePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","negativePrompt"],w);const k=u(t,["enhancePrompt"]);return e!==void 0&&k!=null&&c(e,["parameters","enhancePrompt"],k),i}function tT(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["_url","model"],Fe(o,i));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["image"]);a!=null&&c(e,["instances[0]","image"],Ma(o,a));const f=u(t,["config"]);return f!=null&&c(e,["config"],eT(o,f,e)),e}function nT(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function rT(o,t){const e={},i=u(t,["data"]);i!=null&&c(e,["data"],i);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function oT(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],nT(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],rT(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function iT(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>oT(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function sT(o,t){const e={},i=u(t,["citationSources"]);return i!=null&&c(e,["citations"],i),e}function lT(o,t){const e={},i=u(t,["retrievedUrl"]);i!=null&&c(e,["retrievedUrl"],i);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function aT(o,t){const e={},i=u(t,["urlMetadata"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>lT(o,a))),c(e,["urlMetadata"],s)}return e}function uT(o,t){const e={},i=u(t,["content"]);i!=null&&c(e,["content"],iT(o,i));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],sT(o,s));const a=u(t,["tokenCount"]);a!=null&&c(e,["tokenCount"],a);const f=u(t,["finishReason"]);f!=null&&c(e,["finishReason"],f);const m=u(t,["urlContextMetadata"]);m!=null&&c(e,["urlContextMetadata"],aT(o,m));const g=u(t,["avgLogprobs"]);g!=null&&c(e,["avgLogprobs"],g);const h=u(t,["groundingMetadata"]);h!=null&&c(e,["groundingMetadata"],h);const x=u(t,["index"]);x!=null&&c(e,["index"],x);const _=u(t,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const T=u(t,["safetyRatings"]);return T!=null&&c(e,["safetyRatings"],T),e}function ip(o,t){const e={},i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(g=>uT(o,g))),c(e,["candidates"],m)}const s=u(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const a=u(t,["promptFeedback"]);a!=null&&c(e,["promptFeedback"],a);const f=u(t,["usageMetadata"]);return f!=null&&c(e,["usageMetadata"],f),e}function cT(o,t){const e={},i=u(t,["values"]);return i!=null&&c(e,["values"],i),e}function dT(){return{}}function fT(o,t){const e={},i=u(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>cT(o,f))),c(e,["embeddings"],a)}return u(t,["metadata"])!=null&&c(e,["metadata"],dT()),e}function pT(o,t){const e={},i=u(t,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],Nn(o,i));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function sm(o,t){const e={},i=u(t,["safetyAttributes","categories"]);i!=null&&c(e,["categories"],i);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&c(e,["contentType"],a),e}function mT(o,t){const e={},i=u(t,["_self"]);i!=null&&c(e,["image"],pT(o,i));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const a=u(t,["_self"]);return a!=null&&c(e,["safetyAttributes"],sm(o,a)),e}function hT(o,t){const e={},i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>mT(o,f))),c(e,["generatedImages"],a)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],sm(o,s)),e}function gT(o,t){const e={},i=u(t,["baseModel"]);i!=null&&c(e,["baseModel"],i);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&c(e,["updateTime"],a),e}function _a(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);a!=null&&c(e,["description"],a);const f=u(t,["version"]);f!=null&&c(e,["version"],f);const m=u(t,["_self"]);m!=null&&c(e,["tunedModelInfo"],gT(o,m));const g=u(t,["inputTokenLimit"]);g!=null&&c(e,["inputTokenLimit"],g);const h=u(t,["outputTokenLimit"]);h!=null&&c(e,["outputTokenLimit"],h);const x=u(t,["supportedGenerationMethods"]);return x!=null&&c(e,["supportedActions"],x),e}function yT(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["_self"]);if(s!=null){let a=Zp(o,s);Array.isArray(a)&&(a=a.map(f=>_a(o,f))),c(e,["models"],a)}return e}function vT(){return{}}function xT(o,t){const e={},i=u(t,["totalTokens"]);i!=null&&c(e,["totalTokens"],i);const s=u(t,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function CT(o,t){const e={},i=u(t,["video","uri"]);i!=null&&c(e,["uri"],i);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Nn(o,s));const a=u(t,["encoding"]);return a!=null&&c(e,["mimeType"],a),e}function _T(o,t){const e={},i=u(t,["_self"]);return i!=null&&c(e,["video"],CT(o,i)),e}function TT(o,t){const e={},i=u(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>_T(o,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function ET(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response","generateVideoResponse"]);return m!=null&&c(e,["response"],TT(o,m)),e}function ST(o,t){const e={},i=u(t,["fps"]);i!=null&&c(e,["fps"],i);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function wT(o,t){const e={},i=u(t,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function IT(o,t){const e={},i=u(t,["videoMetadata"]);i!=null&&c(e,["videoMetadata"],ST(o,i));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],wT(o,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function NT(o,t){const e={},i=u(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>IT(o,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function kT(o,t){const e={},i=u(t,["citations"]);return i!=null&&c(e,["citations"],i),e}function AT(o,t){const e={},i=u(t,["content"]);i!=null&&c(e,["content"],NT(o,i));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],kT(o,s));const a=u(t,["finishMessage"]);a!=null&&c(e,["finishMessage"],a);const f=u(t,["finishReason"]);f!=null&&c(e,["finishReason"],f);const m=u(t,["avgLogprobs"]);m!=null&&c(e,["avgLogprobs"],m);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const h=u(t,["index"]);h!=null&&c(e,["index"],h);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function sp(o,t){const e={},i=u(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(x=>AT(o,x))),c(e,["candidates"],h)}const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(t,["responseId"]);a!=null&&c(e,["responseId"],a);const f=u(t,["modelVersion"]);f!=null&&c(e,["modelVersion"],f);const m=u(t,["promptFeedback"]);m!=null&&c(e,["promptFeedback"],m);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function RT(o,t){const e={},i=u(t,["truncated"]);i!=null&&c(e,["truncated"],i);const s=u(t,["token_count"]);return s!=null&&c(e,["tokenCount"],s),e}function MT(o,t){const e={},i=u(t,["values"]);i!=null&&c(e,["values"],i);const s=u(t,["statistics"]);return s!=null&&c(e,["statistics"],RT(o,s)),e}function PT(o,t){const e={},i=u(t,["billableCharacterCount"]);return i!=null&&c(e,["billableCharacterCount"],i),e}function DT(o,t){const e={},i=u(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>MT(o,f))),c(e,["embeddings"],a)}const s=u(t,["metadata"]);return s!=null&&c(e,["metadata"],PT(o,s)),e}function LT(o,t){const e={},i=u(t,["gcsUri"]);i!=null&&c(e,["gcsUri"],i);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["imageBytes"],Nn(o,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function lm(o,t){const e={},i=u(t,["safetyAttributes","categories"]);i!=null&&c(e,["categories"],i);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&c(e,["contentType"],a),e}function Pa(o,t){const e={},i=u(t,["_self"]);i!=null&&c(e,["image"],LT(o,i));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const a=u(t,["_self"]);a!=null&&c(e,["safetyAttributes"],lm(o,a));const f=u(t,["prompt"]);return f!=null&&c(e,["enhancedPrompt"],f),e}function FT(o,t){const e={},i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Pa(o,f))),c(e,["generatedImages"],a)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],lm(o,s)),e}function VT(o,t){const e={},i=u(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Pa(o,a))),c(e,["generatedImages"],s)}return e}function UT(o,t){const e={},i=u(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Pa(o,a))),c(e,["generatedImages"],s)}return e}function bT(o,t){const e={},i=u(t,["endpoint"]);i!=null&&c(e,["name"],i);const s=u(t,["deployedModelId"]);return s!=null&&c(e,["deployedModelId"],s),e}function OT(o,t){const e={},i=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&c(e,["baseModel"],i);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&c(e,["updateTime"],a),e}function zT(o,t){const e={},i=u(t,["checkpointId"]);i!=null&&c(e,["checkpointId"],i);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const a=u(t,["step"]);return a!=null&&c(e,["step"],a),e}function Ta(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);a!=null&&c(e,["description"],a);const f=u(t,["versionId"]);f!=null&&c(e,["version"],f);const m=u(t,["deployedModels"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(w=>bT(o,w))),c(e,["endpoints"],T)}const g=u(t,["labels"]);g!=null&&c(e,["labels"],g);const h=u(t,["_self"]);h!=null&&c(e,["tunedModelInfo"],OT(o,h));const x=u(t,["defaultCheckpointId"]);x!=null&&c(e,["defaultCheckpointId"],x);const _=u(t,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(w=>zT(o,w))),c(e,["checkpoints"],T)}return e}function BT(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["_self"]);if(s!=null){let a=Zp(o,s);Array.isArray(a)&&(a=a.map(f=>Ta(o,f))),c(e,["models"],a)}return e}function GT(){return{}}function HT(o,t){const e={},i=u(t,["totalTokens"]);return i!=null&&c(e,["totalTokens"],i),e}function $T(o,t){const e={},i=u(t,["tokensInfo"]);return i!=null&&c(e,["tokensInfo"],i),e}function qT(o,t){const e={},i=u(t,["gcsUri"]);i!=null&&c(e,["uri"],i);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Nn(o,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function WT(o,t){const e={},i=u(t,["_self"]);return i!=null&&c(e,["video"],qT(o,i)),e}function YT(o,t){const e={},i=u(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>WT(o,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function jT(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],YT(o,m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JT="Content-Type",KT="X-Server-Timeout",ZT="User-Agent",Ea="x-goog-api-client",QT="0.15.0",XT=`google-genai-sdk/${QT}`,eE="v1beta1",tE="v1beta",lp=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class am extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class Sa extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class nE{constructor(t){var e,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:eE,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:tE,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,i){const s=[this.getRequestUrlInternal(e)];return i&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,i);if(t.queryParams)for(const[f,m]of Object.entries(t.queryParams))s.searchParams.append(f,String(m));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,t.abortSignal),this.unaryApiCall(s,a,t.httpMethod)}patchHttpOptions(t,e){const i=JSON.parse(JSON.stringify(t));for(const[s,a]of Object.entries(e))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,t.abortSignal),this.streamApiCall(s,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,i){if(e&&e.timeout||i){const s=new AbortController,a=s.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>s.abort(),e.timeout),i&&i.addEventListener("abort",()=>{s.abort()}),t.signal=a}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async s=>(await ap(s),new ya(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async s=>(await ap(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){var e;return To(this,arguments,function*(){const s=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let f="";for(;;){const{done:m,value:g}=yield ze(s.read());if(m){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(g);try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),w=T.status,k=T.code,P=`got status: ${w}. ${JSON.stringify(_)}`;if(k>=400&&k<500)throw new am(P);if(k>=500&&k<600)throw new Sa(P)}}catch(_){const T=_;if(T.name==="ClientError"||T.name==="ServerError")throw _}f+=h;let x=f.match(lp);for(;x;){const _=x[1];try{const T=new Response(_,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ze(new ya(T)),f=f.slice(x[0].length),x=f.match(lp)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},e=XT+" "+this.clientOptions.userAgentExtra;return t[ZT]=e,t[Ea]=e,t[JT]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[i,s]of Object.entries(t.headers))e.append(i,s);t.timeout&&t.timeout>0&&e.append(KT,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var i;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,f=await a.stat(t);s.sizeBytes=String(f.size);const m=(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:f.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=m;const g=await this.fetchUploadUrl(s,e);return a.upload(t,g,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var i;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const a={file:t},f=await this.request({path:ce("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(i=f==null?void 0:f.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function ap(o){var t;if(o===void 0)throw new Sa("response is undefined");if(!o.ok){const e=o.status,i=o.statusText;let s;!((t=o.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await o.json():s={error:{message:await o.text(),code:o.status,status:o.statusText}};const a=`got status: ${e} ${i}. ${JSON.stringify(s)}`;throw e>=400&&e<500?new am(a):e>=500&&e<600?new Sa(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rE="mcp_used/unknown";function wa(o){for(const t of o)if(Da(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function Ia(o){var t;o[Ea]=(((t=o[Ea])!==null&&t!==void 0?t:"")+` ${rE}`).trimStart()}function oE(o){var t,e,i;return(i=(e=(t=o.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>Da(s)))!==null&&i!==void 0?i:!1}function iE(o){var t,e,i;return(i=(e=(t=o.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>!Da(s)))!==null&&i!==void 0?i:!1}function Da(o){return o!==null&&typeof o=="object"&&"tool"in o&&"callTool"in o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sE(o,t,e){const i=new yy,s=JSON.parse(e.data),a=IC(o,s);Object.assign(i,a),t(i)}class lE{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i}async connect(t){var e,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),f=cE(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${m}`;let h=()=>{};const x=new Promise(q=>{h=q}),_=t.callbacks,T=function(){h({})},w=this.apiClient,k={onopen:T,onmessage:q=>{sE(w,_.onmessage,q)},onerror:(e=_==null?void 0:_.onerror)!==null&&e!==void 0?e:function(q){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(q){}},P=this.webSocketFactory.create(g,uE(f),k);P.connect(),await x;const D=Fe(this.apiClient,t.model),b=nm(this.apiClient,{model:D}),$=Ca(this.apiClient,{setup:b});return P.send(JSON.stringify($)),new aE(P,this.apiClient)}}class aE{constructor(t,e){this.conn=t,this.apiClient=e}async setClientContent(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=Gx(this.apiClient,t),i=rm(this.apiClient,e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=Hx(this.apiClient,t),i=Ca(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const e=Ca(this.apiClient,{playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Cr.PLAY)}pause(){this.sendPlaybackControl(Cr.PAUSE)}stop(){this.sendPlaybackControl(Cr.STOP)}resetContext(){this.sendPlaybackControl(Cr.RESET_CONTEXT)}close(){this.conn.close()}}function uE(o){const t={};return o.forEach((e,i)=>{t[i]=e}),t}function cE(o){const t=new Headers;for(const[e,i]of Object.entries(o))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fE(o,t,e){const i=new gy;let s;if(e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),o.isVertexAI()){const a=yC(o,s);Object.assign(i,a)}else{const a=gC(o,s);Object.assign(i,a)}t(i)}class pE{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i,this.music=new lE(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,i,s,a,f,m;const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let x;const _=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&wa(t.config.tools)&&Ia(_);const T=yE(_);if(this.apiClient.isVertexAI())x=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const se=this.apiClient.getApiKey();x=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.BidiGenerateContent?key=${se}`}let w=()=>{};const k=new Promise(se=>{w=se}),P=t.callbacks,D=function(){var se;(se=P==null?void 0:P.onopen)===null||se===void 0||se.call(P),w({})},b=this.apiClient,$={onopen:D,onmessage:se=>{fE(b,P.onmessage,se)},onerror:(e=P==null?void 0:P.onerror)!==null&&e!==void 0?e:function(se){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(se){}},q=this.webSocketFactory.create(x,gE(T),$);q.connect(),await k;let K=Fe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){const se=this.apiClient.getProject(),pe=this.apiClient.getLocation();K=`projects/${se}/locations/${pe}/`+K}let Z={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Zi.AUDIO]}:t.config.responseModalities=[Zi.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(m=(f=t.config)===null||f===void 0?void 0:f.tools)!==null&&m!==void 0?m:[],oe=[];for(const se of ie)if(this.isCallableTool(se)){const pe=se;oe.push(await pe.tool())}else oe.push(se);oe.length>0&&(t.config.tools=oe);const _e={model:K,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Z=Fx(this.apiClient,_e):Z=Lx(this.apiClient,_e),delete Z.config,q.send(JSON.stringify(Z)),new hE(q,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const mE={turnComplete:!0};class hE{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let i=[];try{i=Vt(t,e.turns),t.isVertexAI()?i=i.map(s=>Ar(t,s)):i=i.map(s=>os(t,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:i,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let i=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?i=e.functionResponses:i=[e.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(dE)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},mE),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:Bx(this.apiClient,t)}:e={realtimeInput:zx(this.apiClient,t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function gE(o){const t={};return o.forEach((e,i)=>{t[i]=e}),t}function yE(o){const t=new Headers;for(const[e,i]of Object.entries(o))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const up=10;function cp(o){var t,e,i;if(!((t=o==null?void 0:o.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const f of(e=o==null?void 0:o.tools)!==null&&e!==void 0?e:[])if(Gi(f)){s=!0;break}if(!s)return!0;const a=(i=o==null?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Gi(o){return"callTool"in o&&typeof o.callTool=="function"}function dp(o){var t;return!(!((t=o==null?void 0:o.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vE extends So{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var i,s,a,f,m;if(e.config&&e.config.tools&&wa(e.config.tools)&&(e.config.httpOptions||(e.config.httpOptions={}),e.config.httpOptions.headers||(e.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),Ia(e.config.httpOptions.headers)),!oE(e)||cp(e.config))return await this.generateContentInternal(e);if(iE(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");const g=await this.transformCallableTools(e);let h,x;const _=Vt(this.apiClient,g.contents),T=(a=(s=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:up;let w=0;for(;w<T&&(h=await this.generateContentInternal(g),!(!h.functionCalls||h.functionCalls.length===0));){const k=h.candidates[0].content,P=[];for(const D of(m=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&m!==void 0?m:[])if(Gi(D)){const $=await D.callTool(h.functionCalls);P.push(...$)}w++,x={role:"user",parts:P},g.contents=Vt(this.apiClient,g.contents),g.contents.push(k),g.contents.push(x),dp(g.config)&&(_.push(k),_.push(x))}return dp(g.config)&&(h.automaticFunctionCallingHistory=_),h},this.generateContentStream=async e=>{if(e.config&&e.config.tools&&wa(e.config.tools)&&(e.config.httpOptions||(e.config.httpOptions={}),e.config.httpOptions.headers||(e.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),Ia(e.config.httpOptions.headers)),cp(e.config)){const i=await this.transformCallableTools(e);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(i=>{var s;let a;const f=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:f.push(g);let m;return a?m={generatedImages:f,positivePromptSafetyAttributes:a}:m={generatedImages:f},m}),this.list=async e=>{var i;const f={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((i=f.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new rs(Ir.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(f),f)},this.editImage=async e=>{const i={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(i.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async e=>{let i={numberOfImages:1,mode:"upscale"};e.config&&(i=Object.assign(Object.assign({},i),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:i};return await this.upscaleImageInternal(s)}}async transformCallableTools(t){var e;const i=(e=t.config)===null||e===void 0?void 0:e.tools;if(!i)return t;const s=await Promise.all(i.map(async f=>Gi(f)?await f.tool():f)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};return a.config.tools=s,a}async initAfcToolsMap(t){var e,i,s;const a=new Map;for(const f of(i=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&i!==void 0?i:[])if(Gi(f)){const m=f,g=await m.tool();for(const h of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,m)}}return a}async processAfcStream(t){var e,i,s;const a=(s=(i=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:up;let f=!1,m=0;const g=await this.initAfcToolsMap(t);return function(h,x,_){var T,w;return To(this,arguments,function*(){for(var k,P,D,b;m<a;){f&&(m++,f=!1);const Z=yield ze(h.transformCallableTools(_)),ie=yield ze(h.generateContentStreamInternal(Z)),oe=[],_e=[];try{for(var $=!0,q=(P=void 0,Bi(ie)),K;K=yield ze(q.next()),k=K.done,!k;$=!0){b=K.value,$=!1;const se=b;if(yield yield ze(se),se.candidates&&(!((T=se.candidates[0])===null||T===void 0)&&T.content)){_e.push(se.candidates[0].content);for(const pe of(w=se.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(m<a&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(pe.functionCall.name)){const Be=yield ze(x.get(pe.functionCall.name).callTool([pe.functionCall]));oe.push(...Be)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(se){P={error:se}}finally{try{!$&&!k&&(D=q.return)&&(yield ze(D.call(q)))}finally{if(P)throw P.error}}if(oe.length>0){f=!0;const se=new yo;se.candidates=[{content:{role:"user",parts:oe}}],yield yield ze(se);const pe=[];pe.push(..._e),pe.push({role:"user",parts:oe});const Be=Vt(h.apiClient,_.contents).concat(pe);_.contents=Be}else break}})}(this,g,t)}async generateContentInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=op(this.apiClient,t);return m=ce("{model}:generateContent",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=sp(this.apiClient,x),T=new yo;return Object.assign(T,_),T})}else{const h=rp(this.apiClient,t);return m=ce("{model}:generateContent",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=ip(this.apiClient,x),T=new yo;return Object.assign(T,_),T})}}async generateContentStreamInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=op(this.apiClient,t);m=ce("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h.config,delete h._url,delete h._query;const x=this.apiClient;return f=x.requestStream({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),f.then(function(_){return To(this,arguments,function*(){var T,w,k,P;try{for(var D=!0,b=Bi(_),$;$=yield ze(b.next()),T=$.done,!T;D=!0){P=$.value,D=!1;const K=sp(x,yield ze(P.json())),Z=new yo;Object.assign(Z,K),yield yield ze(Z)}}catch(q){w={error:q}}finally{try{!D&&!T&&(k=b.return)&&(yield ze(k.call(b)))}finally{if(w)throw w.error}}})})}else{const h=rp(this.apiClient,t);m=ce("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h.config,delete h._url,delete h._query;const x=this.apiClient;return f=x.requestStream({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),f.then(function(_){return To(this,arguments,function*(){var T,w,k,P;try{for(var D=!0,b=Bi(_),$;$=yield ze(b.next()),T=$.done,!T;D=!0){P=$.value,D=!1;const K=ip(x,yield ze(P.json())),Z=new yo;Object.assign(Z,K),yield yield ze(Z)}}catch(q){w={error:q}}finally{try{!D&&!T&&(k=b.return)&&(yield ze(k.call(b)))}finally{if(w)throw w.error}}})})}}async embedContent(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=D_(this.apiClient,t);return m=ce("{model}:predict",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=DT(this.apiClient,x),T=new Uf;return Object.assign(T,_),T})}else{const h=JC(this.apiClient,t);return m=ce("{model}:batchEmbedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=fT(this.apiClient,x),T=new Uf;return Object.assign(T,_),T})}}async generateImagesInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=F_(this.apiClient,t);return m=ce("{model}:predict",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=FT(this.apiClient,x),T=new bf;return Object.assign(T,_),T})}else{const h=ZC(this.apiClient,t);return m=ce("{model}:predict",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=hT(this.apiClient,x),T=new bf;return Object.assign(T,_),T})}}async editImageInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=G_(this.apiClient,t);return a=ce("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=VT(this.apiClient,g),x=new cy;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=$_(this.apiClient,t);return a=ce("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=UT(this.apiClient,g),x=new dy;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=q_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>Ta(this.apiClient,x))}else{const h=QC(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>_a(this.apiClient,x))}}async listInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Y_(this.apiClient,t);return m=ce("{models_url}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=BT(this.apiClient,x),T=new Of;return Object.assign(T,_),T})}else{const h=e_(this.apiClient,t);return m=ce("{models_url}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=yT(this.apiClient,x),T=new Of;return Object.assign(T,_),T})}}async update(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=J_(this.apiClient,t);return m=ce("{model}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>Ta(this.apiClient,x))}else{const h=n_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>_a(this.apiClient,x))}}async delete(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=K_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(()=>{const x=GT(),_=new zf;return Object.assign(_,x),_})}else{const h=r_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(()=>{const x=vT(),_=new zf;return Object.assign(_,x),_})}}async countTokens(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Q_(this.apiClient,t);return m=ce("{model}:countTokens",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=HT(this.apiClient,x),T=new Bf;return Object.assign(T,_),T})}else{const h=i_(this.apiClient,t);return m=ce("{model}:countTokens",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=xT(this.apiClient,x),T=new Bf;return Object.assign(T,_),T})}}async computeTokens(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=X_(this.apiClient,t);return a=ce("{model}:computeTokens",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=$T(this.apiClient,g),x=new fy;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=tT(this.apiClient,t);return m=ce("{model}:predictLongRunning",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>jT(this.apiClient,x))}else{const h=a_(this.apiClient,t);return m=ce("{model}:predictLongRunning",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>ET(this.apiClient,x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xE(o,t){const e={},i=u(t,["operationName"]);i!=null&&c(e,["_url","operationName"],i);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function CE(o,t){const e={},i=u(t,["operationName"]);i!=null&&c(e,["_url","operationName"],i);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function _E(o,t){const e={},i=u(t,["operationName"]);i!=null&&c(e,["operationName"],i);const s=u(t,["resourceName"]);s!=null&&c(e,["_url","resourceName"],s);const a=u(t,["config"]);return a!=null&&c(e,["config"],a),e}function TE(o,t){const e={},i=u(t,["video","uri"]);i!=null&&c(e,["uri"],i);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Nn(o,s));const a=u(t,["encoding"]);return a!=null&&c(e,["mimeType"],a),e}function EE(o,t){const e={},i=u(t,["_self"]);return i!=null&&c(e,["video"],TE(o,i)),e}function SE(o,t){const e={},i=u(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>EE(o,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function wE(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response","generateVideoResponse"]);return m!=null&&c(e,["response"],SE(o,m)),e}function IE(o,t){const e={},i=u(t,["gcsUri"]);i!=null&&c(e,["uri"],i);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Nn(o,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function NE(o,t){const e={},i=u(t,["_self"]);return i!=null&&c(e,["video"],IE(o,i)),e}function kE(o,t){const e={},i=u(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>NE(o,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function fp(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],kE(o,m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AE extends So{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let a;return i&&"httpOptions"in i&&(a=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:e.name,config:i})}async getVideosOperationInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=CE(this.apiClient,t);return m=ce("{operationName}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>fp(this.apiClient,x))}else{const h=xE(this.apiClient,t);return m=ce("{operationName}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>wE(this.apiClient,x))}}async fetchPredictVideosOperationInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=_E(this.apiClient,t);return a=ce("{resourceName}:fetchPredictOperation",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>fp(this.apiClient,g))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RE(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],i);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function ME(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);return e!==void 0&&f!=null&&c(e,["_query","filter"],f),i}function PE(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],ME(o,i,e)),e}function DE(o,t){const e={},i=u(t,["textInput"]);i!=null&&c(e,["textInput"],i);const s=u(t,["output"]);return s!=null&&c(e,["output"],s),e}function LE(o,t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=u(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>DE(o,a))),c(e,["examples","examples"],s)}return e}function FE(o,t,e){const i={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=u(t,["epochCount"]);e!==void 0&&a!=null&&c(e,["tuningTask","hyperparameters","epochCount"],a);const f=u(t,["learningRateMultiplier"]);if(f!=null&&c(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=u(t,["batchSize"]);e!==void 0&&m!=null&&c(e,["tuningTask","hyperparameters","batchSize"],m);const g=u(t,["learningRate"]);return e!==void 0&&g!=null&&c(e,["tuningTask","hyperparameters","learningRate"],g),i}function VE(o,t){const e={},i=u(t,["baseModel"]);i!=null&&c(e,["baseModel"],i);const s=u(t,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],LE(o,s));const a=u(t,["config"]);return a!=null&&c(e,["config"],FE(o,a,e)),e}function UE(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["_url","name"],i);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function bE(o,t,e){const i={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);return e!==void 0&&f!=null&&c(e,["_query","filter"],f),i}function OE(o,t){const e={},i=u(t,["config"]);return i!=null&&c(e,["config"],bE(o,i,e)),e}function zE(o,t,e){const i={},s=u(t,["gcsUri"]);if(e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function BE(o,t){const e={},i=u(t,["gcsUri"]);return i!=null&&c(e,["validationDatasetUri"],i),e}function GE(o,t,e){const i={},s=u(t,["validationDataset"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec"],BE(o,s));const a=u(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&c(e,["tunedModelDisplayName"],a);const f=u(t,["description"]);e!==void 0&&f!=null&&c(e,["description"],f);const m=u(t,["epochCount"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const g=u(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g);const h=u(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const x=u(t,["adapterSize"]);if(e!==void 0&&x!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function HE(o,t){const e={},i=u(t,["baseModel"]);i!=null&&c(e,["baseModel"],i);const s=u(t,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],zE(o,s,e));const a=u(t,["config"]);return a!=null&&c(e,["config"],GE(o,a,e)),e}function $E(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["model"],i);const s=u(t,["name"]);return s!=null&&c(e,["endpoint"],s),e}function um(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["state"]);s!=null&&c(e,["state"],jp(o,s));const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const f=u(t,["tuningTask","startTime"]);f!=null&&c(e,["startTime"],f);const m=u(t,["tuningTask","completeTime"]);m!=null&&c(e,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const h=u(t,["description"]);h!=null&&c(e,["description"],h);const x=u(t,["baseModel"]);x!=null&&c(e,["baseModel"],x);const _=u(t,["_self"]);_!=null&&c(e,["tunedModel"],$E(o,_));const T=u(t,["distillationSpec"]);T!=null&&c(e,["distillationSpec"],T);const w=u(t,["experiment"]);w!=null&&c(e,["experiment"],w);const k=u(t,["labels"]);k!=null&&c(e,["labels"],k);const P=u(t,["pipelineJob"]);P!=null&&c(e,["pipelineJob"],P);const D=u(t,["tunedModelDisplayName"]);return D!=null&&c(e,["tunedModelDisplayName"],D),e}function qE(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>um(o,f))),c(e,["tuningJobs"],a)}return e}function WE(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);return f!=null&&c(e,["error"],f),e}function YE(o,t){const e={},i=u(t,["checkpointId"]);i!=null&&c(e,["checkpointId"],i);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const a=u(t,["step"]);a!=null&&c(e,["step"],a);const f=u(t,["endpoint"]);return f!=null&&c(e,["endpoint"],f),e}function jE(o,t){const e={},i=u(t,["model"]);i!=null&&c(e,["model"],i);const s=u(t,["endpoint"]);s!=null&&c(e,["endpoint"],s);const a=u(t,["checkpoints"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>YE(o,m))),c(e,["checkpoints"],f)}return e}function Na(o,t){const e={},i=u(t,["name"]);i!=null&&c(e,["name"],i);const s=u(t,["state"]);s!=null&&c(e,["state"],jp(o,s));const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const f=u(t,["startTime"]);f!=null&&c(e,["startTime"],f);const m=u(t,["endTime"]);m!=null&&c(e,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const h=u(t,["error"]);h!=null&&c(e,["error"],h);const x=u(t,["description"]);x!=null&&c(e,["description"],x);const _=u(t,["baseModel"]);_!=null&&c(e,["baseModel"],_);const T=u(t,["tunedModel"]);T!=null&&c(e,["tunedModel"],jE(o,T));const w=u(t,["supervisedTuningSpec"]);w!=null&&c(e,["supervisedTuningSpec"],w);const k=u(t,["tuningDataStats"]);k!=null&&c(e,["tuningDataStats"],k);const P=u(t,["encryptionSpec"]);P!=null&&c(e,["encryptionSpec"],P);const D=u(t,["partnerModelTuningSpec"]);D!=null&&c(e,["partnerModelTuningSpec"],D);const b=u(t,["distillationSpec"]);b!=null&&c(e,["distillationSpec"],b);const $=u(t,["experiment"]);$!=null&&c(e,["experiment"],$);const q=u(t,["labels"]);q!=null&&c(e,["labels"],q);const K=u(t,["pipelineJob"]);K!=null&&c(e,["pipelineJob"],K);const Z=u(t,["tunedModelDisplayName"]);return Z!=null&&c(e,["tunedModelDisplayName"],Z),e}function JE(o,t){const e={},i=u(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>Na(o,f))),c(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KE extends So{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new rs(Ir.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const i=await this.tuneMldevInternal(e);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:ga.JOB_STATE_QUEUED}}}}async getInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=UE(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>Na(this.apiClient,x))}else{const h=RE(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>um(this.apiClient,x))}}async listInternal(t){var e,i,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=OE(this.apiClient,t);return m=ce("tuningJobs",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),f.then(x=>{const _=JE(this.apiClient,x),T=new Gf;return Object.assign(T,_),T})}else{const h=PE(this.apiClient,t);return m=ce("tunedModels",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=qE(this.apiClient,x),T=new Gf;return Object.assign(T,_),T})}}async tuneInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=HE(this.apiClient,t);return a=ce("tuningJobs",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>Na(this.apiClient,g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,i;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=VE(this.apiClient,t);return a=ce("tunedModels",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>WE(this.apiClient,g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZE{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const QE=1024*1024*8,XE=3,eS=1e3,tS=2,ia="x-goog-upload-status";async function nS(o,t,e){var i,s,a;let f=0,m=0,g=new ya(new Response),h="upload";for(f=o.size;m<f;){const _=Math.min(QE,f-m),T=o.slice(m,m+_);m+_>=f&&(h+=", finalize");let w=0,k=eS;for(;w<XE&&(g=await e.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(m),"Content-Length":String(_)}}}),!(!((i=g==null?void 0:g.headers)===null||i===void 0)&&i[ia]));)w++,await oS(k),k=k*tS;if(m+=_,((s=g==null?void 0:g.headers)===null||s===void 0?void 0:s[ia])!=="active")break;if(f<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await(g==null?void 0:g.json());if(((a=g==null?void 0:g.headers)===null||a===void 0?void 0:a[ia])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function rS(o){return{size:o.size,type:o.type}}function oS(o){return new Promise(t=>setTimeout(t,o))}class iS{async upload(t,e,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await nS(t,e,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await rS(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sS{create(t,e,i){return new lS(t,e,i)}}class lS{constructor(t,e,i){this.url=t,this.headers=e,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pp="x-goog-api-key";class aS{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(pp)===null&&t.append(pp,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uS="gl-node/";class cS{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const i=uy(t,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const s=new aS(this.apiKey);this.apiClient=new nE({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:uS+"web",uploader:new iS,downloader:new ZE}),this.models=new vE(this.apiClient),this.live=new pE(this.apiClient,s,new sS),this.chats=new kv(this.models,this.apiClient),this.caches=new wv(this.apiClient),this.files=new Bv(this.apiClient),this.operations=new AE(this.apiClient),this.tunings=new KE(this.apiClient)}}const dS={low:"Identify only the most essential and defining grammar patterns of the sentence. Focus on major conjunctions, verb conjugations (tense/politeness), and sentence-ending particles. Avoid breaking down common compound words or very simple phrases.",medium:"Provide a balanced analysis. Identify all major grammar patterns, common set phrases, and important vocabulary usage. This is the standard level of detail suitable for most learners.",high:"Perform an exhaustive analysis. Identify every possible grammatical pattern, nuance, idiomatic expression, and compound word structure, no matter how small or common. Deconstruct everything for a very detailed view for advanced study."};function fS(o){return`You are an advanced linguistic analysis model, acting as a patient, insightful teacher of the Japanese language.
Your primary task is to take a single Japanese sentence and produce a detailed, structured analysis according to the specified JSON schema. Your explanations should be clear enough for a language learner.

Detailed Task Breakdown:
1.  **Sentence Analysis**: Deconstruct the input sentence into its smallest meaningful components (words, particles, etc.).
    For each component in the 'analysis' array:
    *   **Grammatical Category**: Assign a highly specific category. Use the format \`BASE_TYPE-FORM-TENSE-POLARITY\`.
        *   Examples: \`VERB_GODAN-TE-PAST-AFFIRMATIVE\`, \`ADJECTIVE_I-PLAIN-PRESENT-NEGATIVE\`, \`NOUN_COMMON\`.
        *   Available Categories: NOUN_COMMON, NOUN_PROPER, NOUN_PRONOUN, NOUN_COUNTER, VERB_ICHIDAN, VERB_GODAN, VERB_IRREGULAR, VERB_SURU, ADJECTIVE_I, ADJECTIVE_NA, ADVERB, PARTICLE, AUXILIARY_VERB, GRAMMATICAL_AUXILIARY, CONJUNCTION, INTERJECTION, SUFFIX, PREFIX, PUNCTUATION.
    *   **Reading**: Provide the reading in Hiragana or Katakana.
    *   **English Equivalent**: Provide a concise English meaning.
    *   **Pitch Accent**: THIS IS A CRITICAL, MANDATORY FIELD.
        *   Provide the standard Tokyo-dialect pitch accent as a string of 'H' (High) and 'L' (Low).
        *   **RULE: The length of the 'pitch_accent' string MUST EXACTLY match the character length of the 'reading' string.**
        *   Example: If 'reading' is 'ねこ' (2 chars), 'pitch_accent' MUST be 'LH' (2 chars).
        *   Example: If 'reading' is 'ともだち' (4 chars), 'pitch_accent' (heiban) MUST be 'LHHH' (4 chars).
        *   For particles or single-mora words with no accent drop, use the appropriate single letter ('H' or 'L').
        *   If pitch is truly not applicable (like punctuation), provide an empty string "". DO NOT OMIT THE FIELD. Avoid common pitfalls like providing a pattern shorter than the reading.

2.  **Full Translation**: Provide a natural, fluent English translation of the entire sentence.

3.  **Grammar & Phrase Explanations**: In the 'grammar_patterns' array, identify and explain all notable grammar points, set phrases, or nuanced vocabulary.
    *   **Analysis Thoroughness Level: ${o.toUpperCase()}**
    *   **Instruction: ${dS[o]}**
    *   For each pattern, provide its name, a clear explanation for a learner, and the 'constituent_indices' that form the pattern in the 'analysis' array. This section must be comprehensive according to the specified thoroughness level.

Input is a single Japanese sentence. You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function pS(){return`You are a Japanese language teaching assistant.
Your task is to provide 2-3 simple, distinct, and pedagogically useful example sentences for the Japanese grammar pattern provided as the user input.

For each example sentence, you MUST provide:
1.  'japanese': The full sentence in Japanese, using Kanji where appropriate.
2.  'reading': The complete furigana reading of the sentence in Hiragana.
3.  'english': A natural and accurate English translation.
4.  'highlight_indices': A two-element array \`[startIndex, endIndex]\` indicating the exact location of the grammar pattern within the 'japanese' string. 'startIndex' is the zero-based index of the first character of the pattern, and 'endIndex' is the zero-based index of the character immediately AFTER the last character of the pattern.

Example for pattern "〜について":
If the user input is "〜について" and a sentence is "日本の文化について話します。", the pattern "について" starts at index 5 and ends at index 9. So, 'highlight_indices' would be [5, 9].

Respond ONLY with a JSON object that adheres to the provided schema. Do not add any extra text or markdown fences.`}const mS={type:"OBJECT",properties:{original_japanese_sentence:{type:"STRING",description:"The original Japanese sentence provided by the user."},analysis:{type:"ARRAY",description:"An array of objects, each representing a segmented component of the Japanese sentence.",items:{type:"OBJECT",properties:{japanese_segment:{type:"STRING",description:"The individual Japanese segment (word, particle, etc.)."},reading:{type:"STRING",description:"The reading of the Japanese segment in Hiragana or Katakana."},category:{type:"STRING",description:"A highly specific grammatical category label for the segment (e.g., 'NOUN_COMMON', 'VERB_ICHIDAN-TE-PAST-AFFIRMATIVE')."},english_equivalent:{type:"STRING",description:"A direct, concise English equivalent of the segment."},pitch_accent:{type:"STRING",description:`CRITICAL: A string representing the pitch accent pattern using 'H' for high and 'L' for low. This string's length MUST exactly match the character length of the 'reading' field. For heiban words, use 'L' followed by all 'H's (e.g., reading 'ともだち' -> pitch 'LHHH'). For non-applicable segments like punctuation, this MUST be an empty string "". Do not omit this field.`}},required:["japanese_segment","reading","category","english_equivalent","pitch_accent"]}},grammar_patterns:{type:"ARRAY",description:"A comprehensive array of identified grammatical patterns, idiomatic phrases, or nuanced vocabulary in the sentence.",items:{type:"OBJECT",properties:{pattern_name:{type:"STRING",description:"The name of the grammatical pattern or the phrase being explained (e.g., '〜なければならない', 'よろしくお願いします')."},explanation:{type:"STRING",description:"A detailed explanation of the pattern's meaning, usage, and nuance for a language learner."},constituent_indices:{type:"ARRAY",description:"An array of zero-based indices from the 'analysis' array that form this pattern.",items:{type:"NUMBER"}}},required:["pattern_name","explanation","constituent_indices"]}},english_translation:{type:"STRING",description:"The complete, natural-sounding English translation of the entire Japanese sentence."}},required:["original_japanese_sentence","analysis","grammar_patterns","english_translation"]},hS={type:"ARRAY",description:"An array of 2-3 simple example sentences for the given grammar pattern.",items:{type:"OBJECT",properties:{japanese:{type:"STRING",description:"The full example sentence in Japanese, including Kanji."},reading:{type:"STRING",description:"The complete reading of the Japanese sentence in Hiragana."},english:{type:"STRING",description:"The natural English translation of the sentence."},highlight_indices:{type:"ARRAY",description:"A two-element array [startIndex, endIndex] indicating the character position of the grammar pattern within the 'japanese' string. startIndex is inclusive, endIndex is exclusive.",items:{type:"NUMBER"},minItems:2,maxItems:2}},required:["japanese","reading","english","highlight_indices"]}},cm=()=>{const t=localStorage.getItem(Hi)||void 0;if(!t)throw new Error("API Key is not configured. Please set your key in the settings menu or ensure the default key is present.");return new cS({apiKey:t})},dm=o=>{var s;const t=o.text;if(typeof t!="string"||t.trim()===""){const a=(s=o.candidates)==null?void 0:s[0];throw a&&a.finishReason!=="STOP"?new Error(`The AI model's response was incomplete. Reason: ${a.finishReason}.`):new Error("The AI model returned an empty response.")}const e=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,i=t.trim().match(e);return i?i[1].trim():t.trim()},fm=o=>{const[t,e]=B.useState(!1),[i,s]=B.useState(null),[a,f]=B.useState(null),m=B.useCallback(async(...g)=>{e(!0),s(null),f(null);try{const h=await o(...g);return f(h),h}catch(h){s(h)}finally{e(!1)}},[o]);return{isLoading:t,error:i,data:a,execute:m}},gS=async(o,t,e=!1)=>{const i=cm(),s=o.trim().replace(/^[「『]/,"").replace(/[」』]$/,"").trim();if(!s)return{original_japanese_sentence:o,analysis:[{japanese_segment:o,reading:o,category:"PUNCTUATION",english_equivalent:"Punctuation/Quotes",pitch_accent:""}],grammar_patterns:[],english_translation:"(Sentence consists only of punctuation)"};const a=await i.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:s,config:{systemInstruction:fS(t),responseMimeType:"application/json",responseSchema:mS,temperature:.1,seed:42}}),f=dm(a),m=JSON.parse(f),g=Array.isArray(m)?m[0]:m;return g.original_japanese_sentence=o,g},yS=async o=>{const e=await cm().models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:o,config:{systemInstruction:pS(),responseMimeType:"application/json",responseSchema:hS,temperature:.01,seed:42}}),i=dm(e);return JSON.parse(i)},pm=()=>{const o=B.useCallback(gS,[]);return fm(o)},vS=()=>{const o=B.useCallback(yS,[]);return fm(o)},mm=(o,t)=>{const{state:e,dispatch:i}=_t(),{state:s}=tn(),{isLoading:a,error:f,data:m,execute:g}=pm(),h=B.useMemo(()=>o?e.history.find(w=>w.id===o):null,[o,e.history]),x=s.analysisDepth,_=B.useMemo(()=>{var w;return!h||!t?null:((w=h.analyzedSentences[t])==null?void 0:w[x])||null},[h,t,x]),T=B.useCallback(()=>{t&&g(t,x,!0)},[t,x,g]);return B.useEffect(()=>{t&&!_&&!a&&!m&&!f&&g(t,x)},[t,_,a,m,g,x,f]),B.useEffect(()=>{m&&t&&o&&!_&&i({type:"CACHE_ANALYSIS",payload:{entryId:o,sentence:t,depth:x,analysis:m}})},[m,t,o,_,i,x]),{analysis:_||m,isLoading:a||!!t&&!_&&!f,error:f,reanalyze:T}};let ka=null;function mp(o){ka=o}function xS(){if(!("speechSynthesis"in window)){document.body.classList.remove("tts-available");return}const o=()=>{const t=window.speechSynthesis.getVoices().filter(a=>a.lang==="ja-JP");if(t.length===0){mp(null),document.body.classList.remove("tts-available");return}const e=t.find(a=>a.name.includes("Google")),i=t.find(a=>!a.localService),s=e||i||t[0]||null;mp(s),document.body.classList.toggle("tts-available",!!s)};o(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=o)}function CS(o){if(!("speechSynthesis"in window)||!ka){console.warn("Speech synthesis not available or no Japanese voice found.");return}window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(o);t.voice=ka,t.lang="ja-JP",t.rate=.9,t.pitch=1,window.speechSynthesis.speak(t)}const _S=({text:o,title:t="Read aloud"})=>v.jsx("button",{className:"tts-button btn-ghost p-1 text-text-muted hover:text-text-primary",title:t,onClick:e=>{e.stopPropagation(),CS(o)},children:v.jsx("i",{className:"bi bi-volume-up text-base"})}),sa=Nr.memo(function({text:t}){const e=B.useMemo(()=>t.split("").map((i,s)=>/[一-龯]/.test(i)?v.jsx("a",{href:`https://jisho.org/search/${encodeURIComponent(i)}%20%23kanji`,target:"_blank",rel:"noopener noreferrer",className:"underline decoration-text-muted/50 decoration-1 underline-offset-2 hover:text-accent hover:decoration-accent transition",onClick:a=>a.stopPropagation(),children:i},s):i),[t]);return v.jsx(v.Fragment,{children:e})}),Wn=Nr.memo(function({base:t,reading:e,interactiveKanji:i=!1}){const{state:s}=tn(),{showFurigana:a}=s,f=B.useMemo(()=>{if(!a||!e||t===e)return i?v.jsx(sa,{text:t}):t;const m=[];let g=0,h=0;for(;h<t.length;){const x=t[h];if(/[一-龯]/.test(x)){let _=x,T=h+1;for(;T<t.length&&/[一-龯]/.test(t[T]);)_+=t[T],T++;let w="",k=T;for(;k<t.length&&!/[一-龯]/.test(t[k]);)w+=t[k],k++;let P="";const D=w?e.indexOf(w,g):-1;if(D!==-1)P=e.substring(g,D);else{const $=t.substring(h),q=e.substring(g);$.length===1?P=q:P=q.slice(0,q.length-($.length-_.length))}const b=i?v.jsx(sa,{text:_}):_;m.push(v.jsxs("ruby",{children:[b,v.jsx("rt",{className:"text-xs text-text-muted select-none",children:P})]},h)),g+=P.length,h+=_.length}else m.push(x),g++,h++}return m},[t,e,i,a]);return a?v.jsx(v.Fragment,{children:f}):i?v.jsx(sa,{text:t}):t}),hm=Nr.memo(function({reading:t,pitchAccent:e}){const{state:i}=tn();if(!i.showPitchAccent||!t||!e||t.length!==e.length)return null;const s=e.split("").map((a,f)=>({x:100/t.length*(f+.5),y:a==="H"?2:8}));return v.jsxs("svg",{className:"pitch-accent-svg absolute top-0 left-0 w-full h-[14px] overflow-visible pointer-events-none",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:[s.length>1&&v.jsx("polyline",{points:s.map(a=>`${a.x},${a.y}`).join(" "),className:"fill-none stroke-text-muted",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.map((a,f)=>v.jsx("circle",{cx:a.x,cy:a.y,r:"1.2",className:"fill-text-muted"},f))]})});function gm({itemId:o,itemType:t,itemContent:e}){const{state:i,dispatch:s}=_t(),{showAlert:a}=kr(),f=!!i.reviewDeck.find(g=>g.id===o),m=g=>{g.stopPropagation();const{currentTextEntryId:h}=i;if(!h){a("Cannot add an item to the deck without first saving the text.");return}const x=f?"REMOVE_REVIEW_ITEM":"ADD_OR_UPDATE_REVIEW_ITEM";if(x==="REMOVE_REVIEW_ITEM")s({type:x,payload:o});else{const _={id:o,type:t,content:e,textEntryId:h,srsStage:0,incorrectAnswerCount:0,nextReviewDate:new Date().setHours(0,0,0,0),addedAt:Date.now()};s({type:x,payload:_})}};return f?v.jsxs("button",{onClick:m,className:"in-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent bg-accent-subtle-bg hover:bg-destructive-subtle-bg hover:text-destructive hover:border-destructive transition inline-flex items-center gap-2",title:"Remove from Review Deck",children:[v.jsx("i",{className:"bi bi-check-lg text-base"}),"In Deck"]}):v.jsxs("button",{onClick:m,className:"add-to-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-primary-subtle-text text-primary-subtle-text hover:bg-primary-subtle-bg hover:text-primary-subtle-text/80 transition inline-flex items-center gap-2",title:"Add to Review Deck",children:[v.jsx("i",{className:"bi bi-plus-lg text-base"}),"Add to Deck"]})}function TS(o){const t=(o||"unknown").split(/[-_]/)[0].toLowerCase(),e={noun:"bg-pos-noun-bg text-pos-noun-text",verb:"bg-pos-verb-bg text-pos-verb-text",particle:"bg-pos-particle-bg text-pos-particle-text",adjective:"bg-pos-adjective-bg text-pos-adjective-text",adverb:"bg-pos-adverb-bg text-pos-adverb-text",auxiliary:"bg-pos-auxiliary-bg text-pos-auxiliary-text",grammatical:"bg-pos-auxiliary-bg text-pos-auxiliary-text",conjunction:"bg-pos-conjunction-bg text-pos-conjunction-text",suffix:"bg-pos-suffix-bg text-pos-suffix-text",punctuation:"bg-transparent",unknown:"bg-surface-soft"};return e[t]||e.unknown}const ES=({segment:o})=>v.jsxs("div",{children:[v.jsx("div",{className:"text-lg font-japanese font-semibold mb-3 pb-2 border-b border-border-subtle",children:v.jsx(Wn,{base:o.japanese_segment,reading:o.reading||"",interactiveKanji:!0})}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Meaning:"})," ",o.english_equivalent]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",v.jsx("span",{className:"capitalize",children:o.category.replace(/_/g," ").toLowerCase()})]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",o.reading]})]}),v.jsx("div",{className:"mt-4 pt-3 border-t border-border-subtle",children:v.jsx(gm,{itemId:`word-${o.japanese_segment}-${o.reading}`,itemType:"word",itemContent:o})})]}),SS=({segment:o})=>{const{state:t}=tn(),{state:e,dispatch:i}=nn(),{japanese_segment:s,reading:a,category:f,pitch_accent:m,patterns:g}=o,h=w=>{const k=w.currentTarget,P=v.jsx(ES,{segment:o});if(window.innerWidth<768)e.bottomSheet.visible&&e.bottomSheet.targetElement===k?i({type:"HIDE_BOTTOM_SHEET"}):i({type:"SHOW_BOTTOM_SHEET",payload:{content:{title:s,body:P},targetElement:k}});else{const D=k.getBoundingClientRect(),b={top:D.top-10,left:D.left+D.width/2};i({type:"PIN_TOOLTIP",payload:{content:P,position:b,targetElement:k}})}},x=B.useMemo(()=>{if(!g||g.length===0)return{};const w=3,k=2,P=w+k,D=g.map(Z=>`linear-gradient(to right, rgb(var(--color-pattern-${Z.colorIndex}-rgb)), rgb(var(--color-pattern-${Z.colorIndex}-rgb)))`).join(", "),b=g.map((Z,ie)=>`0 calc(100% - ${ie*P}px)`).join(", "),$=g.map(()=>`100% ${w}px`).join(", "),q=4,K=g.length*P-k;return{backgroundImage:D,backgroundPosition:b,backgroundSize:$,paddingBottom:`${q+K}px`}},[g]),_=["segment","relative","inline-block","rounded-md","px-2","cursor-pointer","transition-transform","duration-200","hover:-translate-y-0.5","leading-loose",t.showColorCoding?TS(f):"bg-surface-soft",g&&g.length>0?"grammar-pattern":""].filter(Boolean).join(" "),T={paddingTop:t.showPitchAccent?"18px":"0.25rem",paddingBottom:"0.25rem",...x};return v.jsxs("span",{className:_,style:T,onClick:h,children:[v.jsx(hm,{reading:a,pitchAccent:m}),v.jsx("div",{children:v.jsx(Wn,{base:s,reading:a})})]})};function wS({pattern:o,onNoteClick:t,isFocused:e}){const{isLoading:i,error:s,data:a,execute:f}=vS(),[m,g]=B.useState(!1),h=w=>{w.stopPropagation(),a?g(!m):(f(o.pattern_name),g(!0))},x=`grammar-${o.pattern_name}`,_=(o.constituent_indices||[]).map(w=>o.fullAnalysis.analysis[w].japanese_segment).join(""),T={pattern_name:o.pattern_name,explanation:o.explanation,original_sentence:o.fullAnalysis.original_japanese_sentence,constituent_text:_};return v.jsxs("li",{className:`flex gap-4 p-4 rounded-lg bg-surface-subtle cursor-pointer transition-all duration-200 ${e?"is-focused ring-2 ring-focus-ring bg-surface-soft":""}`,"data-pattern-id":o.idClass,onClick:()=>t(o),children:[v.jsx("span",{className:`flex-shrink-0 w-1.5 rounded-full bg-pattern-${o.colorIndex}`}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("strong",{className:"font-semibold text-accent",children:o.pattern_name}),v.jsx("p",{className:"text-sm text-text-muted mt-1",children:o.explanation}),v.jsxs("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[v.jsxs("button",{className:"show-examples-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent hover:bg-accent hover:text-primary-text transition inline-flex items-center gap-2 disabled:opacity-50",onClick:h,disabled:i,children:[i?v.jsx("i",{className:"bi bi-arrow-repeat text-base animate-spin"}):v.jsx("i",{className:"bi bi-card-list text-base"}),v.jsx("span",{className:"button-text",children:m&&a?"Hide":"Examples"})]}),v.jsx(gm,{itemId:x,itemType:"grammar",itemContent:T})]}),m&&v.jsxs("div",{className:"examples-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:[s&&v.jsx("p",{className:"text-xs text-destructive-subtle-text",children:s.message}),a&&v.jsx("dl",{className:"flex flex-col gap-4",children:a.map((w,k)=>v.jsxs(Nr.Fragment,{children:[v.jsx("dt",{children:v.jsx("span",{className:"text-lg font-jp",children:v.jsx(Wn,{base:w.japanese,reading:w.reading})})}),v.jsx("dd",{className:"text-sm text-text-muted -mt-1",children:w.english})]},k))})]})]})]})}const IS=()=>v.jsxs("div",{className:"mt-6 p-4 border-t border-border-subtle text-center",children:[v.jsx("h4",{className:"text-xs font-bold uppercase text-text-muted tracking-wider mb-3",children:"Hotkeys"}),v.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-xs text-text-secondary",children:[v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"F"})," Furigana"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"C"})," Colors"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"T"})," Translate"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"S"})," Speak"]}),v.jsx("div",{className:"w-px h-4 bg-border mx-2 self-center"}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"J"}),"/",v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"K"})," Nav"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"E"})," Examples"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"Esc"})," Deselect"]})]})]});function ym({analysis:o,onReanalyze:t}){const[e,i]=B.useState(null),[s,a]=B.useState(!1),f=B.useMemo(()=>{if(!o.grammar_patterns)return o.analysis.map(h=>({...h,patterns:[]}));const g=new Map;return o.grammar_patterns.forEach((h,x)=>{var w;const _=x%12,T=`pattern-${_}`;(w=h.constituent_indices)==null||w.forEach(k=>{g.has(k)||g.set(k,[]),g.get(k).push({...h,idClass:T,colorIndex:_})})}),o.analysis.map((h,x)=>({...h,patterns:g.get(x)||[]}))},[o]),m=g=>{i(h=>(h==null?void 0:h.idClass)===g.idClass?null:g)};return v.jsxs("div",{className:"analysis-view-container animate-fade-in max-w-4xl mx-auto w-full",children:[v.jsxs("div",{id:"analysis-header",className:"relative sticky top-0 z-20 bg-surface-soft rounded-lg transition-colors duration-300 p-4 min-h-36",children:[v.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl max-h-[50vh] overflow-y-auto no-scrollbar pr-8",children:f.map((g,h)=>v.jsx("div",{className:`transition-opacity duration-300 ${e&&!g.patterns.some(x=>x.idClass===e.idClass)?"opacity-30":"opacity-100"}`,children:v.jsx(SS,{segment:g})},h))}),s&&v.jsx("div",{className:"translation-text-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:v.jsx("p",{className:"text-text-primary text-base",children:o.english_translation})}),v.jsxs("div",{className:"absolute top-4 right-4 flex flex-col items-center gap-2",children:[v.jsx(_S,{text:o.original_japanese_sentence,title:"Read sentence (S)"}),v.jsx("button",{onClick:t,title:"Force re-analysis",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:v.jsx("i",{className:"bi bi-arrow-clockwise text-base"})}),v.jsx("button",{id:"toggle-translation-button",onClick:()=>a(g=>!g),title:"Toggle translation (T)",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:v.jsx("i",{className:"bi bi-translate text-base"})})]})]}),v.jsx("div",{className:"p-4 space-y-4",children:o.grammar_patterns&&o.grammar_patterns.length>0&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold uppercase text-text-muted mb-3 tracking-wider",children:"Grammar & Phrases"}),v.jsx("ul",{className:"space-y-3",children:o.grammar_patterns.map((g,h)=>{const x=h%12,_=`pattern-${x}`,T={...g,idClass:_,colorIndex:x,fullAnalysis:o};return v.jsx(wS,{pattern:T,onNoteClick:m,isFocused:(e==null?void 0:e.idClass)===_},h)})})]})}),v.jsx(IS,{})]})}const vm=({message:o,detail:t,onRetry:e})=>v.jsx("div",{role:"alert",className:"p-4 bg-destructive-subtle-bg border-l-4 border-destructive rounded-r-lg shadow-md my-4 transition-all duration-300",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("i",{className:"bi bi-x-circle-fill text-xl text-destructive","aria-hidden":"true"})}),v.jsxs("div",{className:"ml-3 flex-1",children:[v.jsx("p",{className:"text-sm font-semibold text-destructive-subtle-text",children:o}),t&&v.jsx("div",{className:"mt-2 text-sm text-destructive-subtle-text/80",children:v.jsx("p",{children:t})}),e&&v.jsx("button",{onClick:e,className:"mt-3 text-xs font-semibold px-2 py-1 rounded-md border border-destructive-subtle-text text-destructive-subtle-text hover:bg-destructive-subtle-text/10 transition",children:"Try Again"})]})]})}),xm=({sentence:o,isLoading:t=!0})=>v.jsxs("div",{className:"relative p-4 bg-surface-soft rounded-lg min-h-36 animate-fade-in",children:[v.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl pr-8",children:v.jsx("p",{className:`text-2xl text-text-muted font-japanese transition-opacity duration-500 ${t?"opacity-50":"opacity-100"}`,children:o})}),t&&v.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:v.jsx("i",{className:"bi bi-arrow-repeat text-lg text-text-muted animate-spin"})})]}),NS=({entry:o,onExit:t,onSentenceChange:e,totalSentences:i,isVisible:s})=>{const a=o.readingProgress,[f,m]=B.useState(String(a+1));B.useEffect(()=>{m(String(a+1))},[a]);const g=()=>{let x=parseInt(f,10);(isNaN(x)||x<1)&&(x=1),x>i&&(x=i),e(x-1),m(String(x))},h=x=>{x.key==="Enter"&&(g(),x.currentTarget.blur())};return v.jsx("header",{className:`fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl z-30 bg-surface/90 backdrop-blur-md shadow-sm rounded-b-lg transition-transform duration-250 ease-in-out ${s?"translate-y-0":"-translate-y-full"}`,children:v.jsx("div",{className:"p-2",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("button",{onClick:t,title:"Exit Reading Mode",className:"p-2 rounded-full hover:bg-surface-hover transition-colors",children:v.jsx("i",{className:"bi bi-box-arrow-right text-2xl text-text-secondary"})}),v.jsxs("div",{className:"font-medium text-text-secondary flex items-center gap-1",children:[v.jsx("input",{type:"number",value:f,onChange:x=>m(x.target.value),onBlur:g,onKeyDown:h,min:"1",max:i,title:"Enter sentence number and press Enter",className:"w-12 text-center bg-surface-subtle rounded-md p-1 focus:ring-2 focus:ring-focus-ring focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),v.jsxs("span",{children:["/ ",i]})]})]})})})},kS=({isVisible:o,onNav:t,sentenceIndex:e,totalSentences:i})=>v.jsx("div",{className:`fixed top-3/4 -translate-y-1/2 left-0 right-0 z-20 pointer-events-none transition-all duration-300 ${o?"opacity-100":"opacity-0"}`,children:v.jsxs("div",{className:"w-full max-w-4xl mx-auto relative h-0",children:[v.jsx("button",{id:"reading-nav-prev",onClick:()=>t("prev"),disabled:e===0,"aria-label":"Previous sentence",className:`absolute top-0 left-2 md:left-auto md:right-full md:mr-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${o?"scale-100":"scale-90"}`,children:"←"}),v.jsx("button",{id:"reading-nav-next",onClick:()=>t("next"),disabled:e>=i-1,"aria-label":"Next sentence",className:`absolute top-0 right-2 md:right-auto md:left-full md:ml-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${o?"scale-100":"scale-90"}`,children:"→"})]})}),AS=()=>{const{state:o,dispatch:t}=_t(),{state:e}=tn(),{dispatch:i}=nn(),[s,a]=B.useState(!1),[f,m]=B.useState(!0),g=B.useRef(null),h=B.useRef(null),x=B.useRef({x:0,y:0,time:0}),_=B.useRef(null),T=o.history.find(ye=>ye.id===o.currentTextEntryId),w=B.useMemo(()=>(T==null?void 0:T.text.split(`
`).flatMap(ye=>{var Ne;return((Ne=ye.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:Ne.filter(Ce=>Ce==null?void 0:Ce.trim()))||[]}))||[],[T==null?void 0:T.text]),k=(T==null?void 0:T.readingProgress)??0,P=w[k],D=w[k+1],{analysis:b,isLoading:$,error:q,reanalyze:K}=mm(T==null?void 0:T.id,P),{execute:Z}=pm(),ie=B.useCallback(()=>{a(!0),g.current&&window.clearTimeout(g.current),g.current=window.setTimeout(()=>{a(!1)},4e3)},[]),oe=B.useCallback(()=>{m(!0),h.current&&window.clearTimeout(h.current),h.current=window.setTimeout(()=>{m(!1)},1500)},[]),_e=B.useCallback(ye=>{const Ne=ye==="prev"&&k>0,Ce=ye==="next"&&k<w.length-1;(Ne||Ce)&&(t({type:"NAVIGATE_SENTENCE",payload:{direction:ye}}),navigator.vibrate&&navigator.vibrate(10),oe())},[t,k,w.length,oe]),se=B.useCallback(ye=>{t({type:"JUMP_TO_SENTENCE",payload:{index:ye}})},[t]);B.useEffect(()=>{i({type:"HIDE_BOTTOM_SHEET"}),i({type:"HIDE_TOOLTIP"}),oe()},[P,i,oe]),B.useEffect(()=>{oe();const ye=_.current;return ye&&ye.addEventListener("scroll",oe,{passive:!0}),()=>{g.current&&window.clearTimeout(g.current),h.current&&window.clearTimeout(h.current),ye&&ye.removeEventListener("scroll",oe)}},[oe]);const pe=ye=>{oe();const Ne=ye.touches[0];x.current={x:Ne.clientX,y:Ne.clientY,time:Date.now()}},Be=ye=>{const Ne=ye.changedTouches[0],{x:Ce,y:Ye,time:je}=x.current,{clientX:re,clientY:U}=Ne,W=Date.now()-je,z=re-Ce,N=U-Ye;if(Ye<50&&N>30&&Math.abs(z)<30){ie();return}if(W<500&&Math.abs(z)>50&&Math.abs(N)<50){_e(z>0?"prev":"next");return}if(W<250&&Math.abs(z)<10&&Math.abs(N)<10){const L=re/window.innerWidth;L<.25?_e("prev"):L>.75?_e("next"):oe();return}};return B.useEffect(()=>{var ye;T&&D&&((ye=T.analyzedSentences[D])!=null&&ye[e.analysisDepth]||Z(D,e.analysisDepth).then(Ce=>{Ce&&T&&t({type:"CACHE_ANALYSIS",payload:{entryId:T.id,sentence:D,depth:e.analysisDepth,analysis:Ce}})}))},[D,T,e.analysisDepth,Z,t]),T?v.jsxs("div",{className:"reading-mode-view h-screen flex flex-col bg-surface",onTouchStart:pe,onTouchEnd:Be,onClick:oe,children:[v.jsx("div",{className:"fixed top-0 left-0 right-0 h-5 z-40",onClick:ie}),v.jsx(NS,{entry:T,onExit:()=>t({type:"SET_VIEW",payload:Le.Reader}),onSentenceChange:se,totalSentences:w.length,isVisible:s}),v.jsx(kS,{isVisible:f,onNav:_e,sentenceIndex:k,totalSentences:w.length}),v.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:v.jsx("div",{ref:_,className:"flex-1 overflow-y-auto min-h-0 no-scrollbar",children:P?q?v.jsx(vm,{message:q.message,onRetry:K}):b?v.jsx(ym,{analysis:b,onReanalyze:K}):v.jsx(xm,{sentence:P,isLoading:$}):v.jsx("div",{className:"text-center p-8 text-text-muted",children:"End of text."})})})]}):v.jsx("div",{children:"Error: No text selected."})},RS=()=>{const{state:o,dispatch:t}=_t(),e=o.history.find(_=>_.id===o.currentTextEntryId),{analysis:i,isLoading:s,error:a,reanalyze:f}=mm(e==null?void 0:e.id,o.selectedSentence),m=B.useCallback(_=>{t({type:"SET_SELECTED_SENTENCE",payload:_})},[t]);if(!e)return B.useEffect(()=>{t({type:"RESET_VIEW"})},[t]),null;const g=()=>{e&&t({type:"START_EDITING",payload:e.id})},h=()=>{if(!e)return;const _=e.text.split(`
`).flatMap(k=>{var P;return((P=k.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:P.filter(D=>D==null?void 0:D.trim()))||[]}),T=o.selectedSentence?_.indexOf(o.selectedSentence):-1,w=T!==-1?T:e.readingProgress||0;t({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:{...e,readingProgress:w}}),t({type:"SET_VIEW",payload:Le.ReadingMode})},x=e.text.split(`
`).map(_=>{var T;return((T=_.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:T.filter(w=>w==null?void 0:w.trim()))||[]});return v.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto md:grid md:grid-cols-2 md:overflow-hidden",children:[v.jsxs("div",{className:"p-6 flex flex-col min-h-0 md:h-full md:overflow-y-auto no-scrollbar",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[v.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",title:e.title,children:e.title}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:g,title:"Edit Text",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-pencil-square text-xl"})}),v.jsx("button",{id:"start-reading-button",onClick:h,title:"Start Reading Mode",className:"inline-flex items-center justify-center p-2.5 rounded-full text-primary-text bg-accent hover:bg-accent/90 focus-ring shadow-sm",children:v.jsx("i",{className:"bi bi-book text-2xl"})})]})]}),v.jsx("div",{id:"reader-view-text-container",className:"reader-view-text bg-surface-soft border border-border rounded-lg p-4 sm:p-6 flex-grow",children:x.map((_,T)=>v.jsx("p",{className:"text-lg sm:text-xl leading-relaxed mb-4 last:mb-0",children:_.length>0?_.map((w,k)=>{const P=o.selectedSentence===w,D=!!(e!=null&&e.analyzedSentences[w]),b=["clickable-sentence","cursor-pointer","rounded","p-1","-m-1","transition-colors","duration-200","hover:bg-accent-selected-bg/50"];return P?b.push("selected","bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","font-semibold"):D&&b.push("has-analysis"),v.jsxs(Nr.Fragment,{children:[v.jsx("span",{className:b.join(" "),onClick:()=>m(w),children:w})," "]},k)}):v.jsx(v.Fragment,{children:" "})},T))})]}),v.jsx("div",{className:"md:h-full md:overflow-y-auto no-scrollbar md:border-l border-border",children:v.jsx("div",{className:"p-6 md:h-full",children:v.jsx("div",{id:"analysis-view",className:"md:h-full",children:o.selectedSentence?a?v.jsx(vm,{message:a.message,onRetry:f}):i?v.jsx(ym,{analysis:i,onReanalyze:f}):v.jsx(xm,{sentence:o.selectedSentence,isLoading:s}):v.jsx("div",{className:"text-center p-8 text-text-muted md:h-full flex items-center justify-center",children:"Select a sentence to begin."})})})})]})},MS=[0,4,8,24,48,168,336,720,2880];function hp(o,t){const e={...o};let i=o.srsStage;if(t===1){e.incorrectAnswerCount=(o.incorrectAnswerCount||0)+1;const s=Math.ceil(e.incorrectAnswerCount/2),a=o.srsStage>=5?2:1,f=s*a;i=Math.max(1,o.srsStage-f)}else e.incorrectAnswerCount=0,t===2||(i=o.srsStage+1);if(i>=9)e.srsStage=9,e.nextReviewDate=new Date("9999-12-31").getTime();else{e.srsStage=i;const s=MS[e.srsStage],a=new Date;e.nextReviewDate=new Date(a.getTime()+s*60*60*1e3).getTime()}return e}const PS=({onExit:o})=>v.jsx("div",{className:"w-full flex justify-end mb-4",children:v.jsx("button",{"data-action":"review-exit",onClick:o,title:"Exit Review Session",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})}),DS=({item:o,onReview:t,onExit:e})=>{const{type:i,content:s}=o,[a,f]=B.useState(!1);B.useEffect(()=>{f(!1)},[o]);let m,g;if(i==="word")m=v.jsx("div",{className:"text-5xl md:text-7xl font-japanese font-semibold text-center text-text-primary p-8",children:s.japanese_segment}),g=v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:v.jsx(Wn,{base:s.japanese_segment,reading:s.reading||""})}),v.jsx("div",{className:"text-lg text-text-secondary mb-6",children:s.english_equivalent}),v.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",s.category.replace(/_/g," ").replace(/-/g,", ")]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",s.reading]})]})]});else{const{original_sentence:x,constituent_text:_,pattern_name:T,explanation:w}=s,k=x&&_?x.replace(_,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${_}</span>`):T;m=v.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-8 leading-relaxed",dangerouslySetInnerHTML:{__html:k}}),g=v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:T}),v.jsx("p",{className:"text-lg text-text-secondary",children:w})]})}const h=x=>{t(x),f(!1)};return v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[v.jsx(PS,{onExit:e}),v.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:a?g:m}),v.jsx("div",{className:"mt-8 w-full",children:a?v.jsxs("div",{children:[v.jsx("p",{className:"text-center text-text-muted mb-4 text-sm",children:"How well did you remember?"}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[v.jsxs("button",{onClick:()=>h(1),"data-action":"review-quality-1",className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:["Again ",v.jsx("span",{className:"text-xs font-normal",children:"(1)"})]}),v.jsxs("button",{onClick:()=>h(2),"data-action":"review-quality-2",className:"text-lg font-bold py-4 px-4 rounded-xl bg-pos-auxiliary-bg text-pos-auxiliary-text hover:opacity-80 focus-ring transition",children:["Hard ",v.jsx("span",{className:"text-xs font-normal",children:"(2)"})]}),v.jsxs("button",{onClick:()=>h(3),"data-action":"review-quality-3",className:"text-lg font-bold py-4 px-4 rounded-xl bg-surface-hover text-text-secondary hover:bg-surface-hover/80 focus-ring transition",children:["Good ",v.jsx("span",{className:"text-xs font-normal",children:"(3)"})]}),v.jsxs("button",{onClick:()=>h(4),"data-action":"review-quality-4",className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:["Easy ",v.jsx("span",{className:"text-xs font-normal",children:"(4)"})]})]})]}):v.jsxs("button",{onClick:()=>f(!0),"data-action":"review-show-answer",className:"w-full max-w-xs mx-auto btn-primary text-lg",children:["Show Answer ",v.jsx("span",{className:"text-sm font-normal text-primary-text/80 ml-2",children:"(Space)"})]})})]})},LS=o=>{if(o===null||!isFinite(o))return"";const t=Date.now(),e=o-t;if(e<=0)return"soon";const i=e/(1e3*60),s=i/60,a=s/24;return a>=2?`in ${Math.round(a)} days`:a>=1?"tomorrow":s>=2?`in ${Math.round(s)} hours`:s>=1?"in an hour":i>=2?`in ${Math.round(i)} minutes`:"in a minute"},FS=({learnedCount:o,reviewedCount:t,onManage:e,onExit:i,nextReviewTimestamp:s})=>{const f=o+t>0,m=LS(s);return v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[v.jsx("i",{className:"bi bi-check-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:f?"Session Complete!":"All Caught Up!"}),f?v.jsxs("div",{className:"mt-2 text-text-secondary space-y-1",children:[v.jsx("p",{children:"Great work! You finished your session for today."}),v.jsxs("p",{children:["You learned ",v.jsx("strong",{className:"text-primary",children:o})," new items and reviewed ",v.jsx("strong",{className:"text-accent",children:t})," items."]}),m&&v.jsxs("p",{children:["Your next review is due ",m,"."]})]}):v.jsxs("p",{className:"mt-2 text-text-secondary",children:["There are no new words or reviews due right now.",m&&` Your next review is due ${m}.`]}),v.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsx("button",{onClick:i,className:"btn-secondary",children:"Back to Analyzer"}),v.jsx("button",{onClick:e,className:"btn-ghost",children:"Manage Deck"})]})]})},VS=({onManage:o,onExit:t})=>v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[v.jsx("i",{className:"bi bi-journal-bookmark text-6xl text-text-muted/50 mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Review Deck is Empty"}),v.jsx("p",{className:"mt-2 text-text-secondary",children:'Add items by clicking the "Add to Deck" button on words or grammar patterns.'}),v.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsx("button",{onClick:t,className:"btn-secondary",children:"Back to Analyzer"}),v.jsx("button",{onClick:o,className:"btn-ghost",children:"Manage Deck"})]})]}),US=({item:o,onDelete:t})=>{const[e,i]=Nr.useState(!1);let s,a;if(o.type==="word"){const{japanese_segment:f,english_equivalent:m,reading:g,category:h,pitch_accent:x}=o.content;s=v.jsxs(v.Fragment,{children:[v.jsx("strong",{className:"font-japanese text-lg",children:f})," ",v.jsxs("span",{className:"text-text-muted",children:["- ",m]})]}),a=v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative inline-block text-xl font-japanese font-semibold p-2 bg-surface-subtle rounded-lg",style:{paddingTop:"22px"},children:[v.jsx(hm,{reading:g,pitchAccent:x}),v.jsx(Wn,{base:f,reading:g,interactiveKanji:!0})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3 text-sm mt-2",children:[v.jsxs("div",{children:[v.jsx("strong",{className:"font-medium text-text-secondary block",children:"Meaning"}),v.jsx("p",{className:"text-text-primary",children:m})]}),v.jsxs("div",{children:[v.jsx("strong",{className:"font-medium text-text-secondary block",children:"Category"}),v.jsx("p",{className:"text-text-primary capitalize",children:h.replace(/_/g," ").toLowerCase()})]}),v.jsxs("div",{className:"sm:col-span-2",children:[v.jsx("strong",{className:"font-medium text-text-secondary block",children:"Reading"}),v.jsx("p",{className:"text-text-primary font-japanese",children:g})]})]})]})}else{const{pattern_name:f,constituent_text:m,explanation:g}=o.content;m?s=v.jsxs(v.Fragment,{children:[v.jsx("strong",{className:"font-japanese text-lg",children:m})," ",v.jsxs("span",{className:"text-text-muted",children:["- ",f]})]}):s=v.jsx("strong",{className:"font-japanese text-lg",children:f}),a=v.jsx("p",{className:"text-sm text-text-secondary",children:g})}return v.jsxs("li",{className:"deck-item bg-surface-soft rounded-lg shadow-sm transition-shadow hover:shadow-md",children:[v.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>i(!e),children:[v.jsx("div",{className:"flex-grow pr-2",children:s}),v.jsxs("div",{className:"flex items-center flex-shrink-0 ml-4",children:[v.jsx("button",{onClick:f=>{f.stopPropagation(),t(o.id)},title:"Delete Item",className:"btn-ghost p-2 text-destructive/70 hover:bg-destructive-subtle-bg hover:text-destructive",children:v.jsx("i",{className:"bi bi-trash3 text-xl"})}),v.jsx("i",{className:`bi bi-chevron-down text-xl text-text-muted transition-transform ${e?"rotate-180":""}`})]})]}),e&&v.jsx("div",{className:"p-4 border-t border-border-subtle bg-surface",children:a})]})},bS=({items:o,onDelete:t,onExit:e,title:i})=>v.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("h2",{className:"text-2xl font-bold text-text-primary truncate pr-4",title:i,children:[i," (",o.length," items)"]}),v.jsx("button",{onClick:e,title:"Back to Analyzer",className:"btn-secondary flex-shrink-0",children:"Back"})]}),o.length===0?v.jsx("p",{className:"text-center text-text-muted p-8",children:"Your deck is empty."}):v.jsx("ul",{className:"space-y-3",children:o.map(s=>v.jsx(US,{item:s,onDelete:t},s.id))})]}),OS=({item:o})=>{if(o.type==="word")return v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:v.jsx(Wn,{base:o.content.japanese_segment,reading:o.content.reading||""})}),v.jsx("div",{className:"text-lg text-text-secondary mb-6",children:o.content.english_equivalent}),v.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",o.content.category.replace(/_/g," ").replace(/-/g,", ")]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",o.content.reading]})]})]});const{original_sentence:t,constituent_text:e,pattern_name:i,explanation:s}=o.content,a=t&&e?t.replace(e,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${e}</span>`):i;return v.jsxs("div",{className:"text-center",children:[(t||e)&&v.jsx("div",{className:"text-xl md:text-2xl font-japanese font-medium text-center text-text-primary p-2 leading-relaxed mb-6 pb-6 border-b border-border-subtle",dangerouslySetInnerHTML:{__html:a}}),v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:i}),v.jsx("p",{className:"text-lg text-text-secondary",children:s})]})},zS=({item:o,onExit:t,currentIndex:e,totalInChunk:i,onNext:s,onPrev:a,onStartQuiz:f})=>{const m=e===0,g=e===i-1;return v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[v.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[v.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[e+1," / ",i]}),v.jsx("button",{onClick:t,title:"Exit Review Session",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),v.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:v.jsx(OS,{item:o})}),v.jsxs("div",{className:"mt-8 w-full flex items-center justify-center gap-4",children:[v.jsx("button",{onClick:a,disabled:m,className:"p-4 rounded-full bg-surface-hover text-text-secondary disabled:opacity-50 transition",children:v.jsx("i",{className:"bi bi-arrow-left text-2xl"})}),g?v.jsx("button",{onClick:f,className:"btn-primary text-xl px-10 py-4",children:"Start Quiz!"}):v.jsx("button",{onClick:s,className:"p-4 rounded-full bg-surface-hover text-text-secondary transition",children:v.jsx("i",{className:"bi bi-arrow-right text-2xl"})})]})]})},BS=({item:o,isAnswerShown:t})=>{if(o.type==="word"){const{japanese_segment:e,english_equivalent:i,reading:s}=o.content;return v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-5xl md:text-7xl font-japanese font-semibold text-center text-text-primary mb-8",children:e}),t&&v.jsxs("div",{className:"animate-fade-in",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:v.jsx(Wn,{base:e,reading:s||""})}),v.jsx("div",{className:"text-lg text-text-secondary",children:i})]})]})}else{const{original_sentence:e,constituent_text:i,pattern_name:s,explanation:a}=o.content,f=e&&i?e.replace(i,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${i}</span>`):s;return v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-4 leading-relaxed",dangerouslySetInnerHTML:{__html:f}}),t&&v.jsxs("div",{className:"animate-fade-in mt-6",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:s}),v.jsx("p",{className:"text-lg text-text-secondary",children:a})]})]})}},GS=({item:o,onExit:t,onAnswer:e,remainingCount:i})=>{const[s,a]=B.useState(!1);return B.useEffect(()=>{a(!1)},[o]),v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[v.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[v.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[i," items left"]}),v.jsx("button",{onClick:t,title:"Exit Review Session",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),v.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:v.jsx(BS,{item:o,isAnswerShown:s})}),v.jsx("div",{className:"mt-8 w-full",children:s?v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("button",{onClick:()=>e(o,!1),className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:[v.jsx("i",{className:"bi bi-arrow-counterclockwise mr-2"})," I Forgot"]}),v.jsxs("button",{onClick:()=>e(o,!0),className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:[v.jsx("i",{className:"bi bi-check-lg mr-2"})," I Remembered"]})]}):v.jsx("button",{onClick:()=>a(!0),className:"w-full max-w-xs mx-auto btn-primary text-lg",children:"Show Answer"})})]})},HS=({onContinue:o,onExit:t,hasMoreChunks:e,hasReviews:i})=>{let s="Finish Session";return e?s="Next Chunk":i&&(s="Start Reviews"),v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto flex flex-col h-full justify-center",children:[v.jsx("i",{className:"bi bi-patch-check-fill text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Chunk Complete!"}),v.jsx("p",{className:"mt-2 text-text-secondary",children:"Great work! You've learned this set of items."}),v.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsx("button",{onClick:t,className:"btn-secondary",children:"Finish for Now"}),v.jsx("button",{onClick:o,className:"btn-primary text-lg",children:s})]})]})},gp=5,$S=({newCount:o,reviewCount:t,onStart:e})=>v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto flex flex-col h-full justify-center",children:[v.jsx("i",{className:"bi bi-play-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Ready for your session?"}),v.jsxs("div",{className:"mt-4 text-lg space-y-2 text-text-secondary",children:[v.jsx("p",{children:"Today's plan:"}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-bold text-primary",children:o})," new items to learn"]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-bold text-accent",children:t})," items to review"]})]}),v.jsx("div",{className:"mt-8",children:v.jsx("button",{onClick:e,className:"btn-primary text-xl px-10 py-4",children:"Start Session"})})]}),qS=()=>{const{state:o,dispatch:t}=_t(),{state:e}=tn(),{showConfirmation:i}=kr(),[s,a]=B.useState("LOADING"),[f,m]=B.useState("STUDY"),[g,h]=B.useState([]),[x,_]=B.useState([]),[T,w]=B.useState(0),[k,P]=B.useState(0),[D,b]=B.useState([]),[$,q]=B.useState({learned:0,reviewed:0}),[K,Z]=B.useState(0),ie=B.useMemo(()=>{const re=new Date;re.setHours(0,0,0,0);const U=o.reviewDeck.filter(N=>o.currentTextEntryId?N.textEntryId===o.currentTextEntryId||!N.textEntryId:!0),W=U.filter(N=>N.srsStage===0).sort((N,L)=>N.addedAt-L.addedAt),z=U.filter(N=>N.srsStage>0&&N.nextReviewDate<=re.getTime()).sort((N,L)=>N.nextReviewDate-L.nextReviewDate);return{newItemsForSession:W.slice(0,e.newWordsPerDay),allDueReviewItems:z}},[o.reviewDeck,o.currentTextEntryId,e.newWordsPerDay]),oe=B.useMemo(()=>{const U=o.reviewDeck.filter(z=>o.currentTextEntryId?z.textEntryId===o.currentTextEntryId||!z.textEntryId:!0).filter(z=>z.srsStage>0&&z.srsStage<9);if(U.length===0)return null;const W=U.map(z=>z.nextReviewDate);return Math.min(...W)},[o.reviewDeck,o.currentTextEntryId]),_e=B.useCallback(()=>{o.reviewDeck.filter(U=>o.currentTextEntryId?U.textEntryId===o.currentTextEntryId||!U.textEntryId:!0).length===0?a("EMPTY"):ie.newItemsForSession.length===0&&ie.allDueReviewItems.length===0?a("COMPLETE"):a("START")},[o.reviewDeck,o.currentTextEntryId,ie]);B.useEffect(()=>{if(s==="LOADING"||s!=="LEARNING"&&s!=="REVIEW"&&s!=="MANAGE"){const{newItemsForSession:re,allDueReviewItems:U}=ie,W=[];for(let z=0;z<re.length;z+=gp)W.push(re.slice(z,z+gp));h(W),_(U),w(0),P(0),b([]),Z(0),q({learned:0,reviewed:0}),m("STUDY"),_e()}},[ie,s,_e]);const se=()=>{o.currentTextEntryId?t({type:"SET_VIEW",payload:Le.Reader}):t({type:"RESET_VIEW"})},pe=()=>{g.length>0?a("LEARNING"):x.length>0?a("REVIEW"):a("COMPLETE")},Be=()=>{const re=g[T];re&&(b([...re].sort(()=>.5-Math.random())),m("QUIZ"))},ye=(re,U)=>{let W=[...D];if(U){const z=hp(re,3);t({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:z}),q(N=>({...N,learned:N.learned+1})),W=W.filter(N=>N.id!==re.id)}else W=W.filter(z=>z.id!==re.id),W.push(re);W.length===0?m("CHUNK_COMPLETE"):b(W)},Ne=()=>{T<g.length-1?(w(re=>re+1),P(0),m("STUDY")):x.length>0?a("REVIEW"):a("COMPLETE")},Ce=re=>{const U=x[K];if(!U)return;const W=hp(U,re);t({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:W}),q(z=>({...z,reviewed:z.reviewed+1})),K+1<x.length?Z(z=>z+1):a("COMPLETE")},Ye=re=>{i("Are you sure you want to delete this item?",()=>{t({type:"REMOVE_REVIEW_ITEM",payload:re})},{confirmText:"Delete"})},je=B.useMemo(()=>o.history.find(re=>re.id===o.currentTextEntryId),[o.history,o.currentTextEntryId]);switch(s){case"LOADING":return v.jsx("div",{className:"p-6 text-center text-text-muted",children:"Loading review session..."});case"START":return v.jsx($S,{newCount:ie.newItemsForSession.length,reviewCount:ie.allDueReviewItems.length,onStart:pe});case"LEARNING":{const re=g[T];if(!re)return x.length>0?a("REVIEW"):a("COMPLETE"),null;switch(f){case"STUDY":return v.jsx(zS,{item:re[k],onExit:se,currentIndex:k,totalInChunk:re.length,onNext:()=>P(U=>U+1),onPrev:()=>P(U=>U-1),onStartQuiz:Be});case"QUIZ":{const U=D[0];return U?v.jsx(GS,{item:U,onExit:se,onAnswer:ye,remainingCount:D.length}):null}case"CHUNK_COMPLETE":return v.jsx(HS,{onContinue:Ne,onExit:se,hasMoreChunks:T<g.length-1,hasReviews:x.length>0})}}case"REVIEW":{const re=x[K];return re?v.jsx(DS,{item:re,onReview:Ce,onExit:se}):(a("COMPLETE"),null)}case"COMPLETE":return v.jsx(FS,{learnedCount:$.learned,reviewedCount:$.reviewed,onManage:()=>a("MANAGE"),onExit:se,nextReviewTimestamp:oe});case"EMPTY":return v.jsx(VS,{onManage:()=>a("MANAGE"),onExit:se});case"MANAGE":{const re=o.reviewDeck.filter(W=>o.currentTextEntryId?W.textEntryId===o.currentTextEntryId||!W.textEntryId:!0),U=o.currentTextEntryId&&je?`Deck for "${je.title}"`:"Full Review Deck";return v.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto no-scrollbar",children:v.jsx(bS,{items:re,onDelete:Ye,onExit:_e,title:U})})}default:return v.jsx("div",{className:"p-6 text-center text-text-muted",children:"An unexpected error occurred."})}};function WS({entry:o}){const{dispatch:t}=_t(),{dispatch:e}=nn(),{showConfirmation:i}=kr(),s=()=>{e({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),t({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:o.id}),t({type:"SET_VIEW",payload:Le.Reader})},a=f=>{f.stopPropagation(),i(`Are you sure you want to delete "${o.title}"?`,()=>{t({type:"REMOVE_TEXT_ENTRY",payload:o.id})},{confirmText:"Delete"})};return v.jsxs("li",{className:"text-entry-item group p-4 hover:bg-surface-hover transition-colors flex justify-between items-center",children:[v.jsxs("div",{className:"flex-grow pr-4 truncate cursor-pointer",onClick:s,children:[v.jsx("span",{className:"font-medium text-sm pointer-events-none text-text-primary",title:o.title,children:o.title}),v.jsxs("span",{className:"block text-xs text-text-muted mt-1 pointer-events-none",children:["Updated: ",new Date(o.updatedAt).toLocaleString()]})]}),v.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:v.jsx("button",{className:"p-2 rounded-full hover:bg-destructive-subtle-bg text-destructive/70 hover:text-destructive transition-colors",title:"Delete Text",onClick:a,children:v.jsx("i",{className:"bi bi-trash3 text-xl"})})})]})}function YS(){const{state:o,dispatch:t}=_t(),{state:e,dispatch:i}=nn(),{showConfirmation:s}=kr(),a=()=>i({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),f=()=>{o.history.length!==0&&s("Are you sure you want to delete all your saved texts? This cannot be undone.",()=>{t({type:"CLEAR_HISTORY"})},{confirmText:"Delete All"})};return e.isHistoryPanelOpen?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30 transition-opacity",onClick:a}),v.jsxs("div",{className:"fixed top-0 right-0 h-full w-full max-w-md glass-morphism shadow-2xl z-40 flex flex-col border-l border-border transition-transform duration-300 ease-in-out",style:{transform:"translateX(0%)"},children:[v.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-border flex-shrink-0",children:[v.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"My Texts"}),v.jsxs("div",{className:"flex items-center gap-2",children:[o.history.length>0&&v.jsx("button",{title:"Delete All Texts",className:"p-2 rounded-lg text-text-muted hover:bg-destructive-subtle-bg hover:text-destructive transition-colors",onClick:f,children:v.jsx("i",{className:"bi bi-trash3 text-xl"})}),v.jsx("button",{title:"Close Panel",className:"btn-ghost",onClick:a,children:v.jsx("i",{className:"bi bi-x-lg text-xl"})})]})]}),v.jsx("div",{className:"flex-grow overflow-y-auto no-scrollbar",children:o.history.length>0?v.jsx("ul",{className:"divide-y divide-border",children:o.history.map(m=>v.jsx(WS,{entry:m},m.id))}):v.jsxs("div",{className:"text-center p-8",children:[v.jsx("i",{className:"bi bi-file-earmark-text text-5xl text-text-muted/50 mx-auto mb-4","aria-hidden":"true"}),v.jsx("p",{className:"text-text-muted",children:"You have no saved texts yet."}),v.jsx("p",{className:"text-sm text-text-muted/70 mt-1",children:"Start by analyzing some Japanese text!"})]})})]})]}):null}const bi=({label:o,shortcut:t,checked:e,onChange:i,id:s})=>v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("label",{htmlFor:s,className:"text-sm font-medium text-text-secondary cursor-pointer",children:[o," ",t&&v.jsxs("span",{className:"text-xs text-text-muted",children:["(",t,")"]})]}),v.jsxs("label",{htmlFor:s,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-surface-subtle transition-colors focus-within:outline-none focus-within:ring-2 focus-within:ring-focus-ring focus-within:ring-offset-2 cursor-pointer",children:[v.jsx("input",{type:"checkbox",id:s,className:"sr-only peer",checked:e,onChange:i}),v.jsx("span",{className:"ml-1 inline-block h-4 w-4 transform rounded-full bg-surface transition-transform peer-checked:translate-x-5 peer-checked:bg-primary shadow-sm"})]})]});function jS({setIsOpen:o}){const{state:t,dispatch:e}=tn(),{state:i,dispatch:s}=_t(),{showAlert:a,showConfirmation:f}=kr(),m=B.useRef(null),[g,h]=B.useState(""),[x,_]=B.useState(!1);B.useEffect(()=>{const b=$=>{m.current&&!m.current.contains($.target)&&o(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[o]),B.useEffect(()=>{h(t.userApiKey||"")},[t.userApiKey]);const T=b=>{e({type:"UPDATE_SETTINGS",payload:b})},w=()=>{T({userApiKey:g}),a("API Key settings updated.")},k=b=>{var K;const $=(K=b.target.files)==null?void 0:K[0];if(!$)return;const q=new FileReader;q.onload=Z=>{var ie;try{const oe=JSON.parse((ie=Z.target)==null?void 0:ie.result);if(!oe.history||!oe.settings)throw new Error("Invalid backup file structure.");f("Importing will overwrite your current history, review deck, and settings. Are you sure you want to continue?",()=>{s({type:"SET_HISTORY",payload:oe.history||[]}),s({type:"SET_REVIEW_DECK",payload:oe.reviewDeck||[]}),e({type:"UPDATE_SETTINGS",payload:oe.settings}),a("Import successful!"),s({type:"RESET_VIEW"})},{confirmText:"Import",confirmClass:"bg-accent hover:bg-accent/90"})}catch(oe){a(`Import failed: ${oe instanceof Error?oe.message:"Could not read file."}`)}finally{b.target.value=""}},q.readAsText($)},P=()=>{const b={version:"2.0-react",exportedAt:Date.now(),history:i.history,reviewDeck:i.reviewDeck,settings:t},$=JSON.stringify(b,null,2),q=new Blob([$],{type:"application/json"}),K=URL.createObjectURL(q),Z=document.createElement("a");Z.href=K;const ie=new Date().toISOString().split("T")[0];Z.download=`japanese-analyzer-backup-${ie}.json`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(K)},D=Ud.indexOf(t.analysisDepth);return v.jsx("div",{ref:m,className:"absolute top-full right-0 mt-3 w-[95vw] max-w-sm glass-morphism rounded-xl shadow-2xl ring-1 ring-border-subtle z-20 origin-top-right animate-fade-in",children:v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3",children:[v.jsx(bi,{id:"pitch-accent-checkbox",label:"Pitch Accent",checked:t.showPitchAccent,onChange:b=>T({showPitchAccent:b.target.checked})}),v.jsx(bi,{id:"furigana-checkbox",label:"Furigana",shortcut:"F",checked:t.showFurigana,onChange:b=>T({showFurigana:b.target.checked})}),v.jsx(bi,{id:"color-coding-checkbox",label:"POS Colors",shortcut:"C",checked:t.showColorCoding,onChange:b=>T({showColorCoding:b.target.checked})}),v.jsx(bi,{id:"theme-checkbox",label:"Dark Mode",checked:t.theme==="dark",onChange:b=>T({theme:b.target.checked?"dark":"light"})})]}),v.jsx("hr",{className:"border-border-subtle"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"analysis-depth-slider",className:"text-sm font-medium text-text-secondary",children:"Analysis Depth"}),v.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text capitalize",children:t.analysisDepth})]}),v.jsx("input",{type:"range",id:"analysis-depth-slider",min:"0",max:"2",step:"1",value:D,onChange:b=>T({analysisDepth:Ud[parseInt(b.target.value)]}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"font-size-slider",className:"text-sm font-medium text-text-secondary",children:"Font Size"}),v.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:$i[t.fontSizeIndex].label})]}),v.jsx("input",{type:"range",id:"font-size-slider",min:"0",max:$i.length-1,step:"1",value:t.fontSizeIndex,onChange:b=>T({fontSizeIndex:parseInt(b.target.value)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"new-words-slider",className:"text-sm font-medium text-text-secondary",children:"New Words Per Day"}),v.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:t.newWordsPerDay})]}),v.jsx("input",{type:"range",id:"new-words-slider",min:"5",max:"50",step:"5",value:t.newWordsPerDay,onChange:b=>T({newWordsPerDay:parseInt(b.target.value,10)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]})]}),v.jsx("hr",{className:"border-border-subtle"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"API Key Management"}),v.jsxs("div",{className:"relative flex items-center",children:[v.jsx("input",{type:x?"text":"password",value:g,onChange:b=>h(b.target.value),placeholder:"Enter your Gemini API Key",className:"w-full rounded-lg border-border-subtle bg-surface-soft shadow-sm focus-ring text-sm px-4 py-2 pr-10","aria-label":"Gemini API Key"}),v.jsx("button",{type:"button",className:"absolute right-2 text-text-muted hover:text-text-primary p-1",onClick:()=>_(!x),title:x?"Hide key":"Show key",children:v.jsx("i",{className:`bi ${x?"bi-eye-slash":"bi-eye"} text-base`})})]}),v.jsx("div",{className:"flex gap-2 mt-2",children:v.jsxs("button",{onClick:w,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-primary/80 text-primary-text hover:bg-primary transition-colors inline-flex items-center justify-center gap-2",children:[v.jsx("i",{className:"bi bi-save text-base"}),"Save Key"]})}),v.jsxs("p",{className:"text-xs text-text-muted mt-2 px-1",children:[t.userApiKey?"Using your custom API key.":"Using the default application key.","Your key is stored locally in your browser."]})]}),v.jsx("hr",{className:"border-border-subtle"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"Data Management"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:P,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors inline-flex items-center justify-center gap-2",children:[v.jsx("i",{className:"bi bi-download text-base"}),"Export"]}),v.jsxs("label",{className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors cursor-pointer inline-flex items-center justify-center gap-2",children:[v.jsx("i",{className:"bi bi-upload text-base"}),"Import",v.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:k})]})]})]})]})})}function JS(){const{state:o,dispatch:t}=_t(),{state:e,dispatch:i}=tn(),{state:s}=nn();B.useEffect(()=>{const a=f=>{var h,x,_,T,w,k,P,D,b;const m=f.target;if(["INPUT","TEXTAREA"].includes(m.tagName)||m.isContentEditable)return;switch(f.key.toLowerCase()==="f"&&(f.preventDefault(),i({type:"UPDATE_SETTINGS",payload:{showFurigana:!e.showFurigana}})),f.key.toLowerCase()==="c"&&(f.preventDefault(),i({type:"UPDATE_SETTINGS",payload:{showColorCoding:!e.showColorCoding}})),o.view){case Le.Review:f.key==="Escape"&&(f.preventDefault(),(h=document.querySelector('[data-action="review-exit"]'))==null||h.click());const $=document.querySelector('[data-action="review-show-answer"]');$&&(f.code==="Space"||f.key===" ")&&(f.preventDefault(),$.click()),$||(f.key==="1"?(f.preventDefault(),(x=document.querySelector('[data-action="review-quality-1"]'))==null||x.click()):f.key==="2"?(f.preventDefault(),(_=document.querySelector('[data-action="review-quality-2"]'))==null||_.click()):f.key==="3"?(f.preventDefault(),(T=document.querySelector('[data-action="review-quality-3"]'))==null||T.click()):f.key==="4"&&(f.preventDefault(),(w=document.querySelector('[data-action="review-quality-4"]'))==null||w.click()));return;case Le.ReadingMode:f.key==="ArrowRight"?(f.preventDefault(),(k=document.querySelector("#reading-nav-next"))==null||k.click()):f.key==="ArrowLeft"&&(f.preventDefault(),(P=document.querySelector("#reading-nav-prev"))==null||P.click());break}if(o.view===Le.Reader||o.view===Le.ReadingMode){if(f.key.toLowerCase()==="t"){const $=document.querySelector("#toggle-translation-button");$&&(f.preventDefault(),$.click())}if(f.key.toLowerCase()==="s"){const $=document.querySelector(".tts-button");$&&(f.preventDefault(),$.click())}}const g=document.querySelector(".analysis-view-container, .reading-mode-view");if(g){const $=g.querySelector(".is-focused");f.key==="Escape"&&$&&(f.preventDefault(),$.classList.remove("is-focused","ring-2","ring-focus-ring","bg-surface-soft"),g.querySelectorAll(".segment").forEach(K=>K.classList.remove("opacity-30")));const q=Array.from(g.querySelectorAll("[data-pattern-id]"));if(q.length>0){const K=q.findIndex(Z=>Z.classList.contains("is-focused"));if(f.key.toLowerCase()==="j"||f.key.toLowerCase()==="k"){f.preventDefault();let Z=K===-1?0:f.key==="j"?K+1:K-1;Z>=q.length&&(Z=0),Z<0&&(Z=q.length-1),(D=q[Z])==null||D.click()}f.key.toLowerCase()==="e"&&$&&(f.preventDefault(),(b=$.querySelector(".show-examples-button"))==null||b.click())}}};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[o,e,t,i])}function KS(){const{state:o,dispatch:t}=nn(),{visible:e,content:i,position:s}=o.tooltip,a=()=>{},f=()=>{o.tooltip.pinned||t({type:"HIDE_TOOLTIP"})};return e?es.createPortal(v.jsx("div",{className:"fixed z-50 max-w-sm rounded-xl glass-morphism border border-border/50 shadow-2xl p-4 text-base transition-all duration-200 max-h-96 overflow-y-auto no-scrollbar",style:{left:`${s.left}px`,top:`${s.top}px`,opacity:1},onMouseOver:a,onMouseOut:f,children:i}),document.body):null}const ZS=()=>{const{state:o,dispatch:t}=nn(),{visible:e,content:i,targetElement:s}=o.bottomSheet,a=B.useRef(null),[f,m]=B.useState(!1),[g,h]=B.useState(!1);B.useEffect(()=>{if(e){m(!0);const T=setTimeout(()=>{h(!0)},50);return()=>clearTimeout(T)}else h(!1)},[e]);const x=T=>{T.target===a.current&&T.propertyName==="transform"&&!g&&!e&&m(!1)},_=()=>{t({type:"HIDE_BOTTOM_SHEET"})};return B.useEffect(()=>{const T=k=>{k.target.closest(".segment")||a.current&&!a.current.contains(k.target)&&_()},w=k=>{k.key==="Escape"&&_()};return f&&e&&(document.addEventListener("mousedown",T),document.addEventListener("keydown",w)),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("keydown",w)}},[f,e]),B.useEffect(()=>{const T=document.querySelector(".segment-bottom-sheet-active");T&&T.classList.remove("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active"),s&&e&&s.classList.add("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active")},[s,e]),f?es.createPortal(v.jsxs(v.Fragment,{children:[v.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm z-10 transition-opacity duration-300 md:hidden ${g?"opacity-100":"opacity-0"}`,onClick:_,"aria-hidden":"true"}),v.jsxs("div",{ref:a,className:`fixed bottom-0 left-0 right-0 z-20 bg-surface border-t border-border rounded-t-2xl shadow-2xl-top transition-transform duration-300 ease-in-out max-h-[60vh] flex flex-col md:hidden ${g?"translate-y-0":"translate-y-full"}`,onTransitionEnd:x,children:[v.jsxs("header",{className:"flex-shrink-0 py-3 px-4 border-b border-border-subtle relative text-center",children:[v.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-10 h-1.5 bg-border rounded-full","aria-hidden":"true"}),v.jsx("h3",{className:"font-semibold text-lg text-text-primary font-japanese mt-2",children:i.title}),v.jsx("button",{title:"Close details (Esc)",className:"btn-ghost absolute top-1.5 right-2",onClick:_,children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),v.jsx("div",{className:"p-4 overflow-y-auto no-scrollbar flex-grow",children:i.body})]})]}),document.body):null};function QS(){const{state:o}=_t(),{state:t}=nn(),[e,i]=B.useState(!1),s=B.useCallback(()=>{const f=o.view===Le.ReadingMode,m=o.view===Le.Review;let g=!1;if(!m&&!t.bottomSheet.visible){if(f)g=window.scrollY>window.innerHeight/2;else if(o.view===Le.Reader&&o.selectedSentence){const h=document.getElementById("reader-view-text-container");if(h){const x=h.getBoundingClientRect();g=!(x.bottom>0&&x.top<window.innerHeight)}}}i(g)},[o.view,o.selectedSentence,t.bottomSheet.visible]);B.useEffect(()=>(window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)),[s]),B.useEffect(()=>{s()},[o.view,o.selectedSentence,t.bottomSheet.visible]);const a=()=>{if(o.view===Le.ReadingMode)window.scrollTo({top:0,behavior:"smooth"});else if(o.view===Le.Reader&&o.selectedSentence){const f=document.querySelector(".clickable-sentence.selected");f==null||f.scrollIntoView({behavior:"smooth",block:"center"})}};return e?es.createPortal(v.jsx("button",{className:`fixed bottom-5 right-5 w-12 h-12 bg-accent text-primary-text rounded-full shadow-lg flex items-center justify-center text-2xl font-bold transition-all duration-300 hover:bg-accent/90 z-50 ${e?"opacity-100 visible translate-y-0":"opacity-0 invisible translate-y-5"}`,onClick:a,title:o.view===Le.ReadingMode?"Scroll to top":"Back to analyzed sentence",children:"⇧"}),document.body):null}function XS(){const{state:o,dispatch:t}=_t(),{dispatch:e}=nn(),[i,s]=B.useState(!1),a=o.reviewDeck.filter(m=>{if(o.currentTextEntryId&&m.textEntryId&&m.textEntryId!==o.currentTextEntryId)return!1;const g=new Date;return g.setHours(0,0,0,0),m.nextReviewDate<=g.getTime()}).length,f=()=>{o.currentTextEntryId?t({type:"SET_VIEW",payload:Le.Reader}):t({type:"RESET_VIEW"})};return v.jsxs("header",{id:"app-header",className:"flex justify-between items-center px-4 py-3 border-b border-border bg-gradient-to-r from-background to-surface md:rounded-t-2xl flex-shrink-0",children:[v.jsx("div",{className:"flex items-center gap-4",children:v.jsx("button",{onClick:f,title:"Return to main screen",className:"px-4 py-1 bg-gradient-to-br from-primary to-purple-600 rounded-xl flex items-center justify-center shadow-lg focus-ring hover-lift",children:v.jsx("span",{className:"font-japanese font-bold text-primary-text text-xl select-none dark:text-white",children:"積読"})})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{title:"New Text",className:"btn-ghost",onClick:()=>t({type:"RESET_VIEW"}),children:v.jsx("i",{className:"bi bi-plus-lg text-xl"})}),v.jsx("button",{title:"My Texts",className:"btn-ghost",onClick:()=>e({type:"SET_HISTORY_PANEL_OPEN",payload:!0}),children:v.jsx("i",{className:"bi bi-clock-history text-xl"})}),v.jsx("div",{className:"relative",children:v.jsxs("button",{title:"Review Deck",className:"btn-ghost",onClick:()=>t({type:"SET_VIEW",payload:Le.Review}),children:[v.jsx("i",{className:"bi bi-stack text-xl"}),a>0&&v.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs rounded-full h-4 w-4 flex items-center justify-center pointer-events-none transition-opacity",children:a})]})}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{title:"Settings",className:"btn-ghost",onClick:()=>s(m=>!m),children:v.jsx("i",{className:"bi bi-gear text-xl"})}),i&&v.jsx(jS,{setIsOpen:s})]})]})]})}function Cm(){const{state:o}=_t();JS(),B.useEffect(()=>{xS()},[]);const t=()=>{switch(o.view){case Le.Editor:return v.jsx(bd,{});case Le.Reader:return v.jsx(RS,{});case Le.ReadingMode:return v.jsx(AS,{});case Le.Review:return v.jsx(qS,{});default:return v.jsx(bd,{})}},e=o.view===Le.ReadingMode;return v.jsxs("div",{className:`w-full h-full flex flex-col ${e?"":"md:container md:mx-auto md:px-4 md:py-6"}`,children:[v.jsxs("main",{id:"app",className:`bg-surface w-full flex-grow flex flex-col min-h-0 ${e?"":"md:rounded-2xl md:shadow-xl md:border border-border md:overflow-hidden"}`,children:[o.view!==Le.ReadingMode&&v.jsx(XS,{}),t()]}),v.jsx(YS,{}),v.jsx(KS,{}),v.jsx(ZS,{}),v.jsx(QS,{})]})}function e0(){return v.jsx(Lp,{children:v.jsx(Vp,{children:v.jsx(Mp,{children:v.jsx(bp,{children:v.jsx(Cm,{})})})})})}const t0=vp.createRoot(document.getElementById("root"));t0.render(v.jsx(e0,{}));function n0(){return v.jsx(Lp,{children:v.jsx(Vp,{children:v.jsx(Mp,{children:v.jsx(bp,{children:v.jsx(Cm,{})})})})})}const r0=vp.createRoot(document.getElementById("root"));r0.render(v.jsx(n0,{}));
