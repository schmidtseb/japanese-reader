import{e as Ee,r as Y,f as Ho}from"./index.prod-ijU6oP2D.js";var U;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const l of s)a[l]=l;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),l={};for(const u of a)l[u]=s[u];return t.objectValues(l)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&a.push(l);return a},t.find=(s,a)=>{for(const l of s)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function o(s,a=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=o,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(U||(U={}));var Pt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Pt||(Pt={}));const C=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oe=t=>{switch(typeof t){case"undefined":return C.undefined;case"string":return C.string;case"number":return Number.isNaN(t)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(t)?C.array:t===null?C.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?C.promise:typeof Map<"u"&&t instanceof Map?C.map:typeof Set<"u"&&t instanceof Set?C.set:typeof Date<"u"&&t instanceof Date?C.date:C.object;default:return C.unknown}},T=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ee extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},o={_errors:[]},s=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)o._errors.push(n(l));else{let u=o,d=0;for(;d<l.path.length;){const c=l.path[d];d===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(n(l))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return s(this),o}static assert(e){if(!(e instanceof ee))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},o=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];n[a]=n[a]||[],n[a].push(e(s))}else o.push(e(s));return{formErrors:o,fieldErrors:n}}get formErrors(){return this.flatten()}}ee.create=t=>new ee(t);const it=(t,e)=>{let n;switch(t.code){case T.invalid_type:t.received===C.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case T.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,U.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:n=`Unrecognized key(s) in object: ${U.joinValues(t.keys,", ")}`;break;case T.invalid_union:n="Invalid input";break;case T.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${U.joinValues(t.options)}`;break;case T.invalid_enum_value:n=`Invalid enum value. Expected ${U.joinValues(t.options)}, received '${t.received}'`;break;case T.invalid_arguments:n="Invalid function arguments";break;case T.invalid_return_type:n="Invalid function return type";break;case T.invalid_date:n="Invalid date";break;case T.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:U.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case T.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case T.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case T.custom:n="Invalid input";break;case T.invalid_intersection_types:n="Intersection results could not be merged";break;case T.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case T.not_finite:n="Number must be finite";break;default:n=e.defaultError,U.assertNever(t)}return{message:n}};let Yo=it;function Wo(){return Yo}const Ko=t=>{const{data:e,path:n,errorMaps:o,issueData:s}=t,a=[...n,...s.path||[]],l={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let u="";const d=o.filter(c=>!!c).slice().reverse();for(const c of d)u=c(l,{data:e,defaultError:u}).message;return{...s,path:a,message:u}};function v(t,e){const n=Wo(),o=Ko({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===it?void 0:it].filter(s=>!!s)});t.common.issues.push(o)}class b{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const o=[];for(const s of n){if(s.status==="aborted")return w;s.status==="dirty"&&e.dirty(),o.push(s.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,n){const o=[];for(const s of n){const a=await s.key,l=await s.value;o.push({key:a,value:l})}return b.mergeObjectSync(e,o)}static mergeObjectSync(e,n){const o={};for(const s of n){const{key:a,value:l}=s;if(a.status==="aborted"||l.status==="aborted")return w;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(o[a.value]=l.value)}return{status:e.value,value:o}}}const w=Object.freeze({status:"aborted"}),Ne=t=>({status:"dirty",value:t}),K=t=>({status:"valid",value:t}),Nt=t=>t.status==="aborted",kt=t=>t.status==="dirty",ye=t=>t.status==="valid",be=t=>typeof Promise<"u"&&t instanceof Promise;var _;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_||(_={}));class Q{constructor(e,n,o,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=o,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Dt=(t,e)=>{if(ye(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ee(t.common.issues);return this._error=n,this._error}}};function k(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:o,description:s}=t;if(e&&(n||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,u)=>{const{message:d}=t;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??o??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??n??u.defaultError}},description:s}}class D{get description(){return this._def.description}_getType(e){return oe(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new b,ctx:{common:e.parent.common,data:e.data,parsedType:oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(be(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const o=this.safeParse(e,n);if(o.success)return o.data;throw o.error}safeParse(e,n){const o={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)},s=this._parseSync({data:e,path:o.path,parent:o});return Dt(o,s)}"~validate"(e){var o,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return ye(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(o=a==null?void 0:a.message)==null?void 0:o.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>ye(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const o=await this.safeParseAsync(e,n);if(o.success)return o.data;throw o.error}async safeParseAsync(e,n){const o={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)},s=this._parse({data:e,path:o.path,parent:o}),a=await(be(s)?s:Promise.resolve(s));return Dt(o,a)}refine(e,n){const o=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const l=e(s),u=()=>a.addIssue({code:T.custom,...o(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((o,s)=>e(o)?!0:(s.addIssue(typeof n=="function"?n(o,s):n),!1))}_refinement(e){return new Ce({schema:this,typeName:R.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ie.create(this,this._def)}nullable(){return _e.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return X.create(this)}promise(){return Oe.create(this,this._def)}or(e){return Ye.create([this,e],this._def)}and(e){return We.create(this,e,this._def)}transform(e){return new Ce({...k(this._def),schema:this,typeName:R.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new lt({...k(this._def),innerType:this,defaultValue:n,typeName:R.ZodDefault})}brand(){return new gi({typeName:R.ZodBranded,type:this,...k(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ut({...k(this._def),innerType:this,catchValue:n,typeName:R.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Et.create(this,e)}readonly(){return ct.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Oo=/^c[^\s-]{8,}$/i,zo=/^[0-9a-z]+$/,Zo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Xo=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qo=/^[a-z0-9_-]{21}$/i,jo=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ei=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ti=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ni="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nt;const oi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ii=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ri=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,si=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ai=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,li=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,co="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ui=new RegExp(`^${co}$`);function fo(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ci(t){return new RegExp(`^${fo(t)}$`)}function di(t){let e=`${co}T${fo(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function fi(t,e){return!!((e==="v4"||!e)&&oi.test(t)||(e==="v6"||!e)&&ri.test(t))}function pi(t,e){if(!jo.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const o=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(o));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function mi(t,e){return!!((e==="v4"||!e)&&ii.test(t)||(e==="v6"||!e)&&si.test(t))}class z extends D{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){const a=this._getOrReturnCtx(e);return v(a,{code:T.invalid_type,expected:C.string,received:a.parsedType}),w}const o=new b;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),v(s,{code:T.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),o.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),v(s,{code:T.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),o.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(s=this._getOrReturnCtx(e,s),l?v(s,{code:T.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&v(s,{code:T.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),o.dirty())}else if(a.kind==="email")ti.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"email",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="emoji")nt||(nt=new RegExp(ni,"u")),nt.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"emoji",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="uuid")Xo.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"uuid",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="nanoid")Qo.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"nanoid",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="cuid")Oo.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"cuid",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="cuid2")zo.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"cuid2",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="ulid")Zo.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"ulid",code:T.invalid_string,message:a.message}),o.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),v(s,{validation:"url",code:T.invalid_string,message:a.message}),o.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"regex",code:T.invalid_string,message:a.message}),o.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),v(s,{code:T.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),o.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),v(s,{code:T.invalid_string,validation:{startsWith:a.value},message:a.message}),o.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),v(s,{code:T.invalid_string,validation:{endsWith:a.value},message:a.message}),o.dirty()):a.kind==="datetime"?di(a).test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{code:T.invalid_string,validation:"datetime",message:a.message}),o.dirty()):a.kind==="date"?ui.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{code:T.invalid_string,validation:"date",message:a.message}),o.dirty()):a.kind==="time"?ci(a).test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{code:T.invalid_string,validation:"time",message:a.message}),o.dirty()):a.kind==="duration"?ei.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"duration",code:T.invalid_string,message:a.message}),o.dirty()):a.kind==="ip"?fi(e.data,a.version)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"ip",code:T.invalid_string,message:a.message}),o.dirty()):a.kind==="jwt"?pi(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"jwt",code:T.invalid_string,message:a.message}),o.dirty()):a.kind==="cidr"?mi(e.data,a.version)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"cidr",code:T.invalid_string,message:a.message}),o.dirty()):a.kind==="base64"?ai.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"base64",code:T.invalid_string,message:a.message}),o.dirty()):a.kind==="base64url"?li.test(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{validation:"base64url",code:T.invalid_string,message:a.message}),o.dirty()):U.assertNever(a);return{status:o.value,value:e.data}}_regex(e,n,o){return this.refinement(s=>e.test(s),{validation:n,code:T.invalid_string,..._.errToObj(o)})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,..._.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,..._.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,..._.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,..._.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,..._.errToObj(n)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new z({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new z({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}z.create=t=>new z({checks:[],typeName:R.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...k(t)});function hi(t,e){const n=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,s=n>o?n:o,a=Number.parseInt(t.toFixed(s).replace(".","")),l=Number.parseInt(e.toFixed(s).replace(".",""));return a%l/10**s}class ae extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){const a=this._getOrReturnCtx(e);return v(a,{code:T.invalid_type,expected:C.number,received:a.parsedType}),w}let o;const s=new b;for(const a of this._def.checks)a.kind==="int"?U.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),v(o,{code:T.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(o=this._getOrReturnCtx(e,o),v(o,{code:T.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(o=this._getOrReturnCtx(e,o),v(o,{code:T.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?hi(e.data,a.value)!==0&&(o=this._getOrReturnCtx(e,o),v(o,{code:T.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),v(o,{code:T.not_finite,message:a.message}),s.dirty()):U.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_.toString(n))}setLimit(e,n,o,s){return new ae({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:_.toString(s)}]})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(n===null||o.value>n)&&(n=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ae.create=t=>new ae({checks:[],typeName:R.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...k(t)});class le extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==C.bigint)return this._getInvalidInput(e);let o;const s=new b;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(o=this._getOrReturnCtx(e,o),v(o,{code:T.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(o=this._getOrReturnCtx(e,o),v(o,{code:T.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),v(o,{code:T.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):U.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return v(n,{code:T.invalid_type,expected:C.bigint,received:n.parsedType}),w}gte(e,n){return this.setLimit("min",e,!0,_.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_.toString(n))}setLimit(e,n,o,s){return new le({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:_.toString(s)}]})}_addCheck(e){return new le({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}le.create=t=>new le({checks:[],typeName:R.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...k(t)});class He extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){const o=this._getOrReturnCtx(e);return v(o,{code:T.invalid_type,expected:C.boolean,received:o.parsedType}),w}return K(e.data)}}He.create=t=>new He({typeName:R.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...k(t)});class Te extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){const a=this._getOrReturnCtx(e);return v(a,{code:T.invalid_type,expected:C.date,received:a.parsedType}),w}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return v(a,{code:T.invalid_date}),w}const o=new b;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),v(s,{code:T.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),o.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),v(s,{code:T.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),o.dirty()):U.assertNever(a);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Te.create=t=>new Te({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:R.ZodDate,...k(t)});class Ut extends D{_parse(e){if(this._getType(e)!==C.symbol){const o=this._getOrReturnCtx(e);return v(o,{code:T.invalid_type,expected:C.symbol,received:o.parsedType}),w}return K(e.data)}}Ut.create=t=>new Ut({typeName:R.ZodSymbol,...k(t)});class Lt extends D{_parse(e){if(this._getType(e)!==C.undefined){const o=this._getOrReturnCtx(e);return v(o,{code:T.invalid_type,expected:C.undefined,received:o.parsedType}),w}return K(e.data)}}Lt.create=t=>new Lt({typeName:R.ZodUndefined,...k(t)});class Ft extends D{_parse(e){if(this._getType(e)!==C.null){const o=this._getOrReturnCtx(e);return v(o,{code:T.invalid_type,expected:C.null,received:o.parsedType}),w}return K(e.data)}}Ft.create=t=>new Ft({typeName:R.ZodNull,...k(t)});class Vt extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}Vt.create=t=>new Vt({typeName:R.ZodAny,...k(t)});class rt extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}rt.create=t=>new rt({typeName:R.ZodUnknown,...k(t)});class re extends D{_parse(e){const n=this._getOrReturnCtx(e);return v(n,{code:T.invalid_type,expected:C.never,received:n.parsedType}),w}}re.create=t=>new re({typeName:R.ZodNever,...k(t)});class Gt extends D{_parse(e){if(this._getType(e)!==C.undefined){const o=this._getOrReturnCtx(e);return v(o,{code:T.invalid_type,expected:C.void,received:o.parsedType}),w}return K(e.data)}}Gt.create=t=>new Gt({typeName:R.ZodVoid,...k(t)});class X extends D{_parse(e){const{ctx:n,status:o}=this._processInputParams(e),s=this._def;if(n.parsedType!==C.array)return v(n,{code:T.invalid_type,expected:C.array,received:n.parsedType}),w;if(s.exactLength!==null){const l=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(l||u)&&(v(n,{code:l?T.too_big:T.too_small,minimum:u?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),o.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(v(n,{code:T.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),o.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(v(n,{code:T.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),o.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>s.type._parseAsync(new Q(n,l,n.path,u)))).then(l=>b.mergeArray(o,l));const a=[...n.data].map((l,u)=>s.type._parseSync(new Q(n,l,n.path,u)));return b.mergeArray(o,a)}get element(){return this._def.type}min(e,n){return new X({...this._def,minLength:{value:e,message:_.toString(n)}})}max(e,n){return new X({...this._def,maxLength:{value:e,message:_.toString(n)}})}length(e,n){return new X({...this._def,exactLength:{value:e,message:_.toString(n)}})}nonempty(e){return this.min(1,e)}}X.create=(t,e)=>new X({type:t,minLength:null,maxLength:null,exactLength:null,typeName:R.ZodArray,...k(e)});function pe(t){if(t instanceof B){const e={};for(const n in t.shape){const o=t.shape[n];e[n]=ie.create(pe(o))}return new B({...t._def,shape:()=>e})}else return t instanceof X?new X({...t._def,type:pe(t.element)}):t instanceof ie?ie.create(pe(t.unwrap())):t instanceof _e?_e.create(pe(t.unwrap())):t instanceof ue?ue.create(t.items.map(e=>pe(e))):t}class B extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=U.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==C.object){const c=this._getOrReturnCtx(e);return v(c,{code:T.invalid_type,expected:C.object,received:c.parsedType}),w}const{status:o,ctx:s}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof re&&this._def.unknownKeys==="strip"))for(const c in s.data)l.includes(c)||u.push(c);const d=[];for(const c of l){const f=a[c],p=s.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new Q(s,p,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof re){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(c==="strict")u.length>0&&(v(s,{code:T.unrecognized_keys,keys:u}),o.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const p=s.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new Q(s,p,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const p=await f.key,m=await f.value;c.push({key:p,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>b.mergeObjectSync(o,c)):b.mergeObjectSync(o,d)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new B({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,o)=>{var a,l;const s=((l=(a=this._def).errorMap)==null?void 0:l.call(a,n,o).message)??o.defaultError;return n.code==="unrecognized_keys"?{message:_.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new B({...this._def,unknownKeys:"strip"})}passthrough(){return new B({...this._def,unknownKeys:"passthrough"})}extend(e){return new B({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new B({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:R.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new B({...this._def,catchall:e})}pick(e){const n={};for(const o of U.objectKeys(e))e[o]&&this.shape[o]&&(n[o]=this.shape[o]);return new B({...this._def,shape:()=>n})}omit(e){const n={};for(const o of U.objectKeys(this.shape))e[o]||(n[o]=this.shape[o]);return new B({...this._def,shape:()=>n})}deepPartial(){return pe(this)}partial(e){const n={};for(const o of U.objectKeys(this.shape)){const s=this.shape[o];e&&!e[o]?n[o]=s:n[o]=s.optional()}return new B({...this._def,shape:()=>n})}required(e){const n={};for(const o of U.objectKeys(this.shape))if(e&&!e[o])n[o]=this.shape[o];else{let a=this.shape[o];for(;a instanceof ie;)a=a._def.innerType;n[o]=a}return new B({...this._def,shape:()=>n})}keyof(){return po(U.objectKeys(this.shape))}}B.create=(t,e)=>new B({shape:()=>t,unknownKeys:"strip",catchall:re.create(),typeName:R.ZodObject,...k(e)});B.strictCreate=(t,e)=>new B({shape:()=>t,unknownKeys:"strict",catchall:re.create(),typeName:R.ZodObject,...k(e)});B.lazycreate=(t,e)=>new B({shape:t,unknownKeys:"strip",catchall:re.create(),typeName:R.ZodObject,...k(e)});class Ye extends D{_parse(e){const{ctx:n}=this._processInputParams(e),o=this._def.options;function s(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new ee(u.ctx.common.issues));return v(n,{code:T.invalid_union,unionErrors:l}),w}if(n.common.async)return Promise.all(o.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(s);{let a;const l=[];for(const d of o){const c={...n,common:{...n.common,issues:[]},parent:null},f=d._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new ee(d));return v(n,{code:T.invalid_union,unionErrors:u}),w}}get options(){return this._def.options}}Ye.create=(t,e)=>new Ye({options:t,typeName:R.ZodUnion,...k(e)});function st(t,e){const n=oe(t),o=oe(e);if(t===e)return{valid:!0,data:t};if(n===C.object&&o===C.object){const s=U.objectKeys(e),a=U.objectKeys(t).filter(u=>s.indexOf(u)!==-1),l={...t,...e};for(const u of a){const d=st(t[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(n===C.array&&o===C.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],d=st(l,u);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return n===C.date&&o===C.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class We extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e),s=(a,l)=>{if(Nt(a)||Nt(l))return w;const u=st(a.value,l.value);return u.valid?((kt(a)||kt(l))&&n.dirty(),{status:n.value,value:u.data}):(v(o,{code:T.invalid_intersection_types}),w)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([a,l])=>s(a,l)):s(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}We.create=(t,e,n)=>new We({left:t,right:e,typeName:R.ZodIntersection,...k(n)});class ue extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==C.array)return v(o,{code:T.invalid_type,expected:C.array,received:o.parsedType}),w;if(o.data.length<this._def.items.length)return v(o,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w;!this._def.rest&&o.data.length>this._def.items.length&&(v(o,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...o.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new Q(o,l,o.path,u)):null}).filter(l=>!!l);return o.common.async?Promise.all(a).then(l=>b.mergeArray(n,l)):b.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new ue({...this._def,rest:e})}}ue.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ue({items:t,typeName:R.ZodTuple,rest:null,...k(e)})};class Ke extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==C.object)return v(o,{code:T.invalid_type,expected:C.object,received:o.parsedType}),w;const s=[],a=this._def.keyType,l=this._def.valueType;for(const u in o.data)s.push({key:a._parse(new Q(o,u,o.path,u)),value:l._parse(new Q(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?b.mergeObjectAsync(n,s):b.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,o){return n instanceof D?new Ke({keyType:e,valueType:n,typeName:R.ZodRecord,...k(o)}):new Ke({keyType:z.create(),valueType:e,typeName:R.ZodRecord,...k(n)})}}class qt extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==C.map)return v(o,{code:T.invalid_type,expected:C.map,received:o.parsedType}),w;const s=this._def.keyType,a=this._def.valueType,l=[...o.data.entries()].map(([u,d],c)=>({key:s._parse(new Q(o,u,o.path,[c,"key"])),value:a._parse(new Q(o,d,o.path,[c,"value"]))}));if(o.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return w;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const d of l){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return w;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}}}}qt.create=(t,e,n)=>new qt({valueType:e,keyType:t,typeName:R.ZodMap,...k(n)});class Ue extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==C.set)return v(o,{code:T.invalid_type,expected:C.set,received:o.parsedType}),w;const s=this._def;s.minSize!==null&&o.data.size<s.minSize.value&&(v(o,{code:T.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&o.data.size>s.maxSize.value&&(v(o,{code:T.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function l(d){const c=new Set;for(const f of d){if(f.status==="aborted")return w;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const u=[...o.data.values()].map((d,c)=>a._parse(new Q(o,d,o.path,c)));return o.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,n){return new Ue({...this._def,minSize:{value:e,message:_.toString(n)}})}max(e,n){return new Ue({...this._def,maxSize:{value:e,message:_.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ue.create=(t,e)=>new Ue({valueType:t,minSize:null,maxSize:null,typeName:R.ZodSet,...k(e)});class at extends D{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}at.create=(t,e)=>new at({getter:t,typeName:R.ZodLazy,...k(e)});class Jt extends D{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return v(n,{received:n.data,code:T.invalid_literal,expected:this._def.value}),w}return{status:"valid",value:e.data}}get value(){return this._def.value}}Jt.create=(t,e)=>new Jt({value:t,typeName:R.ZodLiteral,...k(e)});function po(t,e){return new ve({values:t,typeName:R.ZodEnum,...k(e)})}class ve extends D{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),o=this._def.values;return v(n,{expected:U.joinValues(o),received:n.parsedType,code:T.invalid_type}),w}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),o=this._def.values;return v(n,{received:n.data,code:T.invalid_enum_value,options:o}),w}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ve.create(e,{...this._def,...n})}exclude(e,n=this._def){return ve.create(this.options.filter(o=>!e.includes(o)),{...this._def,...n})}}ve.create=po;class Bt extends D{_parse(e){const n=U.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==C.string&&o.parsedType!==C.number){const s=U.objectValues(n);return v(o,{expected:U.joinValues(s),received:o.parsedType,code:T.invalid_type}),w}if(this._cache||(this._cache=new Set(U.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=U.objectValues(n);return v(o,{received:o.data,code:T.invalid_enum_value,options:s}),w}return K(e.data)}get enum(){return this._def.values}}Bt.create=(t,e)=>new Bt({values:t,typeName:R.ZodNativeEnum,...k(e)});class Oe extends D{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==C.promise&&n.common.async===!1)return v(n,{code:T.invalid_type,expected:C.promise,received:n.parsedType}),w;const o=n.parsedType===C.promise?n.data:Promise.resolve(n.data);return K(o.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Oe.create=(t,e)=>new Oe({type:t,typeName:R.ZodPromise,...k(e)});class Ce extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===R.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:o}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:l=>{v(o,l),l.fatal?n.abort():n.dirty()},get path(){return o.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const l=s.transform(o.data,a);if(o.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return w;const d=await this._def.schema._parseAsync({data:u,path:o.path,parent:o});return d.status==="aborted"?w:d.status==="dirty"||n.value==="dirty"?Ne(d.value):d});{if(n.value==="aborted")return w;const u=this._def.schema._parseSync({data:l,path:o.path,parent:o});return u.status==="aborted"?w:u.status==="dirty"||n.value==="dirty"?Ne(u.value):u}}if(s.type==="refinement"){const l=u=>{const d=s.refinement(u,a);if(o.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(o.common.async===!1){const u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?w:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?w:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(o.common.async===!1){const l=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!ye(l))return w;const u=s.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(l=>ye(l)?Promise.resolve(s.transform(l.value,a)).then(u=>({status:n.value,value:u})):w);U.assertNever(s)}}Ce.create=(t,e,n)=>new Ce({schema:t,typeName:R.ZodEffects,effect:e,...k(n)});Ce.createWithPreprocess=(t,e,n)=>new Ce({schema:e,effect:{type:"preprocess",transform:t},typeName:R.ZodEffects,...k(n)});class ie extends D{_parse(e){return this._getType(e)===C.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ie.create=(t,e)=>new ie({innerType:t,typeName:R.ZodOptional,...k(e)});class _e extends D{_parse(e){return this._getType(e)===C.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_e.create=(t,e)=>new _e({innerType:t,typeName:R.ZodNullable,...k(e)});class lt extends D{_parse(e){const{ctx:n}=this._processInputParams(e);let o=n.data;return n.parsedType===C.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}lt.create=(t,e)=>new lt({innerType:t,typeName:R.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...k(e)});class ut extends D{_parse(e){const{ctx:n}=this._processInputParams(e),o={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return be(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ee(o.common.issues)},input:o.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ee(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}ut.create=(t,e)=>new ut({innerType:t,typeName:R.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...k(e)});class $t extends D{_parse(e){if(this._getType(e)!==C.nan){const o=this._getOrReturnCtx(e);return v(o,{code:T.invalid_type,expected:C.nan,received:o.parsedType}),w}return{status:"valid",value:e.data}}}$t.create=t=>new $t({typeName:R.ZodNaN,...k(t)});class gi extends D{_parse(e){const{ctx:n}=this._processInputParams(e),o=n.data;return this._def.type._parse({data:o,path:n.path,parent:n})}unwrap(){return this._def.type}}class Et extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return a.status==="aborted"?w:a.status==="dirty"?(n.dirty(),Ne(a.value)):this._def.out._parseAsync({data:a.value,path:o.path,parent:o})})();{const s=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?w:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:o.path,parent:o})}}static create(e,n){return new Et({in:e,out:n,typeName:R.ZodPipeline})}}class ct extends D{_parse(e){const n=this._def.innerType._parse(e),o=s=>(ye(s)&&(s.value=Object.freeze(s.value)),s);return be(n)?n.then(s=>o(s)):o(n)}unwrap(){return this._def.innerType}}ct.create=(t,e)=>new ct({innerType:t,typeName:R.ZodReadonly,...k(e)});var R;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(R||(R={}));const se=z.create,bt=ae.create;le.create;const yi=He.create;Te.create;const Ht=rt.create;re.create;const ke=X.create,Ti=B.create,vi=Ye.create;We.create;ue.create;const Ci=Ke.create,_i=at.create,Ei=ve.create;Oe.create;ie.create;_e.create;const fe={string:t=>z.create({...t,coerce:!0}),number:t=>ae.create({...t,coerce:!0}),boolean:t=>He.create({...t,coerce:!0}),bigint:t=>le.create({...t,coerce:!0}),date:t=>Te.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Si,Ai;function Ii(){return{geminiUrl:Si,vertexUrl:Ai}}function xi(t,e,n){var o,s,a;if(!(!((o=t.httpOptions)===null||o===void 0)&&o.baseUrl)){const l=Ii();return t.vertexai?(s=l.vertexUrl)!==null&&s!==void 0?s:e:(a=l.geminiUrl)!==null&&a!==void 0?a:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class de{}function S(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];r(f,e.slice(a+1),n[c])}else for(const c of d)r(c,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];r(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=n}function i(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(l=>i(l,e.slice(n+1))):void 0}else return}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yt;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Yt||(Yt={}));var Wt;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wt||(Wt={}));var Z;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Z||(Z={}));var Kt;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Kt||(Kt={}));var Ot;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ot||(Ot={}));var zt;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(zt||(zt={}));var Zt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Zt||(Zt={}));var Xt;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Xt||(Xt={}));var Qt;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Qt||(Qt={}));var jt;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(jt||(jt={}));var en;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(en||(en={}));var tn;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(tn||(tn={}));var nn;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(nn||(nn={}));var on;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(on||(on={}));var rn;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(rn||(rn={}));var sn;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sn||(sn={}));var ze;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ze||(ze={}));var an;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(an||(an={}));var dt;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dt||(dt={}));var ln;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ln||(ln={}));var un;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(un||(un={}));var cn;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(cn||(cn={}));var dn;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dn||(dn={}));var fn;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(fn||(fn={}));var pn;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(pn||(pn={}));var mn;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mn||(mn={}));var hn;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(hn||(hn={}));var gn;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gn||(gn={}));var yn;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yn||(yn={}));var Tn;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Tn||(Tn={}));var vn;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vn||(vn={}));var Cn;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Cn||(Cn={}));var _n;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_n||(_n={}));var En;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(En||(En={}));var Sn;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Sn||(Sn={}));var An;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(An||(An={}));var In;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(In||(In={}));var xn;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xn||(xn={}));var Mn;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mn||(Mn={}));var Rn;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Rn||(Rn={}));var wn;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wn||(wn={}));var me;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(me||(me={}));class ft{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pe{get text(){var e,n,o,s,a,l,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,a,l,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,a,l,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,a,l,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,a,l,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Pn{}class Nn{}class Mi{}class Ri{}class kn{}class Dn{}class Un{}class wi{}class Ln{}class Fn{}class Vn{}class Pi{}class Ni{}class ki{}class Gn{}class Di{get text(){var e,n,o;let s="",a=!1;const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,s+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,o;let s="";const a=[];for(const l of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Ui{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function mo(t,e){const n=G(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ho(t){return Array.isArray(t)?t.map(e=>Ze(e)):[Ze(t)]}function Ze(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function go(t){const e=Ze(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yo(t){const e=Ze(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qn(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function To(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>qn(e)):[qn(t)]}function pt(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Jn(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Bn(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function $(t){if(t==null)throw new Error("ContentUnion is required");return pt(t)?t:{role:"user",parts:To(t)}}function vo(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=$(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=$(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>$(n)):[$(e)]}function W(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Jn(t)||Bn(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$(t)]}const e=[],n=[],o=pt(t[0]);for(const s of t){const a=pt(s);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(Jn(s)||Bn(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:To(n)}),e}const Li=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),$n=Ei(["string","number","integer","object","array","boolean","null"]),Fi=vi([$n,ke($n)]);function Vi(t=!0){const e=_i(()=>{const n=Ti({type:Fi.optional(),format:se().optional(),title:se().optional(),description:se().optional(),default:Ht().optional(),items:e.optional(),minItems:fe.string().optional(),maxItems:fe.string().optional(),enum:ke(Ht()).optional(),properties:Ci(se(),e).optional(),required:ke(se()).optional(),minProperties:fe.string().optional(),maxProperties:fe.string().optional(),propertyOrdering:ke(se()).optional(),minimum:bt().optional(),maximum:bt().optional(),minLength:fe.string().optional(),maxLength:fe.string().optional(),pattern:se().optional(),anyOf:ke(e).optional(),additionalProperties:yi().optional()});return t?n.strict():n});return e}function Gi(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Z).includes(n[0].toUpperCase())?n[0].toUpperCase():Z.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Z).includes(o.toUpperCase())?o.toUpperCase():Z.TYPE_UNSPECIFIED})}}function he(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Gi(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Z).includes(u.toUpperCase())?u.toUpperCase():Z.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=he(u);else if(o.includes(l)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(he(c))}e[l]=d}else if(s.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=he(f);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Le(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Vi().parse(t);return he(e)}else return he(t)}function St(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function At(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Se(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Le(e.parameters)),e.response&&(e.response=Le(e.response));return t}function Ae(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function qi(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function te(t,e){if(typeof e!="string")throw new Error("name must be a string");return qi(t,e,"cachedContents")}function Co(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ne(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Ji(t){return t!=null&&typeof t=="object"&&"name"in t}function Bi(t){return t!=null&&typeof t=="object"&&"video"in t}function $i(t){return t!=null&&typeof t=="object"&&"uri"in t}function _o(t){var e;let n;if(Ji(t)&&(n=t.name),!($i(t)&&(n=t.uri,n===void 0))&&!(Bi(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Eo(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function So(t){for(const e of["models","tunedModels","publisherModels"])if(bi(t,e))return t[e];return[]}function bi(t,e){return t!==null&&typeof t=="object"&&e in t}function Hi(t,e={}){const n=t,o={name:n.name,description:n.description,parameters:he(Xe(n.inputSchema))};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Yi(t,e={}){const n=[],o=new Set;for(const s of t){const a=s.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const l=Hi(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Wi(t){const e=[];for(const n of t)e.push(Xe(n));return e}function Ki(t){const e={};for(const[n,o]of Object.entries(t)){const s=o;e[n]=Xe(s)}return e}function Xe(t){const e=new Set(["items"]),n=new Set(["anyOf"]),o=new Set(["properties"]),s={};for(const[a,l]of Object.entries(t))if(e.has(a))s[a]=Xe(l);else if(n.has(a))s[a]=Wi(l);else if(o.has(a))s[a]=Ki(l);else if(a==="type"){const u=l.toUpperCase();s[a]=Object.values(Z).includes(u)?u:Z.TYPE_UNSPECIFIED}else Li.has(a)&&(s[a]=l);return s}function Ao(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Oi(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ie(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Io(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zi(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Zi(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Xi(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Qi(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],zi(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Zi(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Xi(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function xo(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Qi(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function ji(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const a=i(t,["enum"]);a!=null&&r(e,["enum"],a);const l=i(t,["example"]);l!=null&&r(e,["example"],l);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const g=i(t,["minLength"]);g!=null&&r(e,["minLength"],g);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const E=i(t,["minimum"]);E!=null&&r(e,["minimum"],E);const A=i(t,["nullable"]);A!=null&&r(e,["nullable"],A);const I=i(t,["pattern"]);I!=null&&r(e,["pattern"],I);const x=i(t,["properties"]);x!=null&&r(e,["properties"],x);const P=i(t,["propertyOrdering"]);P!=null&&r(e,["propertyOrdering"],P);const M=i(t,["required"]);M!=null&&r(e,["required"],M);const L=i(t,["title"]);L!=null&&r(e,["title"],L);const F=i(t,["type"]);return F!=null&&r(e,["type"],F),e}function er(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function tr(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const a=i(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function nr(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function or(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],nr(n)),e}function ir(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function rr(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],ir(n)),e}function sr(){return{}}function ar(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>tr(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],or(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],rr(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],sr());const l=i(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=i(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function lr(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function ur(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function cr(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],ur(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function dr(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],lr(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],cr(o)),e}function fr(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Mo(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],fr(n)),e}function pr(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Mo(o)),e}function mr(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>pr(s))),r(e,["speakerVoiceConfigs"],o)}return e}function hr(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Mo(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],mr(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function gr(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function yr(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],xo($(s)));const a=i(e,["temperature"]);a!=null&&r(o,["temperature"],a);const l=i(e,["topP"]);l!=null&&r(o,["topP"],l);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const g=i(e,["frequencyPenalty"]);g!=null&&r(o,["frequencyPenalty"],g);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const E=i(e,["responseMimeType"]);E!=null&&r(o,["responseMimeType"],E);const A=i(e,["responseSchema"]);A!=null&&r(o,["responseSchema"],ji(Le(A)));const I=i(e,["responseJsonSchema"]);if(I!=null&&r(o,["responseJsonSchema"],I),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=i(e,["safetySettings"]);if(n!==void 0&&x!=null){let V=x;Array.isArray(V)&&(V=V.map(O=>er(O))),r(n,["safetySettings"],V)}const P=i(e,["tools"]);if(n!==void 0&&P!=null){let V=Ae(P);Array.isArray(V)&&(V=V.map(O=>ar(Se(O)))),r(n,["tools"],V)}const M=i(e,["toolConfig"]);if(n!==void 0&&M!=null&&r(n,["toolConfig"],dr(M)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=i(e,["cachedContent"]);n!==void 0&&L!=null&&r(n,["cachedContent"],te(t,L));const F=i(e,["responseModalities"]);F!=null&&r(o,["responseModalities"],F);const H=i(e,["mediaResolution"]);H!=null&&r(o,["mediaResolution"],H);const N=i(e,["speechConfig"]);if(N!=null&&r(o,["speechConfig"],hr(St(N))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=i(e,["thinkingConfig"]);return q!=null&&r(o,["thinkingConfig"],gr(q)),o}function Tr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["request","model"],G(t,o));const s=i(e,["contents"]);if(s!=null){let l=W(s);Array.isArray(l)&&(l=l.map(u=>xo(u))),r(n,["request","contents"],l)}const a=i(e,["config"]);return a!=null&&r(n,["request","generationConfig"],yr(t,a,n)),n}function vr(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&r(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Tr(t,l))),r(n,["requests","requests"],a)}return n}function Cr(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&r(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function _r(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],vr(t,Ao(t,s)));const a=i(e,["config"]);return a!=null&&r(n,["config"],Cr(a,n)),n}function Er(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ie(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Sr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ie(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ar(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Ir(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Ar(n,e)),e}function xr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ie(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Mr(t){const e={},n=i(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Rr(t){const e={},n=i(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function wr(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],Rr(Oi(s))),n}function Pr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],G(t,o));const s=i(e,["src"]);s!=null&&r(n,["inputConfig"],Mr(Ao(t,s)));const a=i(e,["config"]);return a!=null&&r(n,["config"],wr(a,n)),n}function Nr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ie(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function kr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ie(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Dr(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function Ur(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Dr(n,e)),e}function Lr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ie(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ro(){return{}}function Fr(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Vr(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Gr(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function qr(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Fr(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Vr(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Gr(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Jr(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>qr(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Br(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function $r(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function br(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>$r(s))),r(e,["urlMetadata"],o)}return e}function Hr(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Jr(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Br(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const a=i(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=i(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],br(l));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function Yr(t){const e={},n=i(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Hr(u))),r(e,["candidates"],l)}const o=i(t,["modelVersion"]);o!=null&&r(e,["modelVersion"],o);const s=i(t,["promptFeedback"]);s!=null&&r(e,["promptFeedback"],s);const a=i(t,["usageMetadata"]);return a!=null&&r(e,["usageMetadata"],a),e}function Wr(t){const e={},n=i(t,["response"]);return n!=null&&r(e,["response"],Yr(n)),i(t,["error"])!=null&&r(e,["error"],Ro()),e}function Kr(t){const e={},n=i(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Wr(a))),r(e,["inlinedResponses"],s)}return e}function mt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],Io(s));const a=i(t,["metadata","createTime"]);a!=null&&r(e,["createTime"],a);const l=i(t,["metadata","endTime"]);l!=null&&r(e,["endTime"],l);const u=i(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&r(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&r(e,["dest"],Kr(c)),e}function Or(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>mt(a))),r(e,["batchJobs"],s)}return e}function zr(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["done"]);return o!=null&&r(e,["done"],o),i(t,["error"])!=null&&r(e,["error"],Ro()),e}function wo(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["code"]);o!=null&&r(e,["code"],o);const s=i(t,["message"]);return s!=null&&r(e,["message"],s),e}function Zr(t){const e={},n=i(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function Xr(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function ht(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],Io(s));const a=i(t,["error"]);a!=null&&r(e,["error"],wo(a));const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=i(t,["startTime"]);u!=null&&r(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&r(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&r(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&r(e,["model"],f);const p=i(t,["inputConfig"]);p!=null&&r(e,["src"],Zr(p));const m=i(t,["outputConfig"]);return m!=null&&r(e,["dest"],Xr(m)),e}function Qr(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>ht(a))),r(e,["batchJobs"],s)}return e}function jr(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["done"]);o!=null&&r(e,["done"],o);const s=i(t,["error"]);return s!=null&&r(e,["error"],wo(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ce;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ce||(ce={}));class Fe{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};o?typeof o=="object"?l=Object.assign({},o):l=o:l={config:{}},l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class es extends de{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Fe(ce.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}async createInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Pr(this.apiClient,e);return u=S("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>ht(f))}else{const c=_r(this.apiClient,e);return u=S("{model}:batchGenerateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>mt(f))}}async get(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Nr(this.apiClient,e);return u=S("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>ht(f))}else{const c=Er(this.apiClient,e);return u=S("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>mt(f))}}async cancel(e){var n,o,s,a;let l="",u={};if(this.apiClient.isVertexAI()){const d=kr(this.apiClient,e);l=S("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Sr(this.apiClient,e);l=S("batches/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ur(e);return u=S("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Qr(f),m=new Gn;return Object.assign(m,p),m})}else{const c=Ir(e);return u=S("batches",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Or(f),m=new Gn;return Object.assign(m,p),m})}}async delete(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Lr(this.apiClient,e);return u=S("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>jr(f))}else{const c=xr(this.apiClient,e);return u=S("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>zr(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ts(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function ns(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function os(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function is(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ts(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],ns(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],os(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function bn(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>is(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function rs(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const a=i(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function ss(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function as(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],ss(n)),e}function ls(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function us(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],ls(n)),e}function cs(){return{}}function ds(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>rs(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],as(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],us(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],cs());const l=i(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=i(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function fs(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function ps(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function ms(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],ps(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function hs(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],fs(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],ms(o)),e}function gs(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const a=i(t,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const l=i(t,["contents"]);if(e!==void 0&&l!=null){let f=W(l);Array.isArray(f)&&(f=f.map(p=>bn(p))),r(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],bn($(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>ds(p))),r(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&r(e,["toolConfig"],hs(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ys(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],mo(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],gs(s,n)),n}function Ts(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],te(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function vs(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],te(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Cs(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function _s(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],te(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Cs(s,n)),n}function Es(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Ss(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Es(n,e)),e}function As(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Is(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function xs(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ms(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],As(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Is(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],xs(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Hn(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Ms(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Rs(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=i(t,["response"]);l!=null&&r(e,["response"],l);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function ws(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Ps(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],ws(n)),e}function Ns(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function ks(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ns(n)),e}function Ds(){return{}}function Us(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Ls(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Us(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const a=i(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=i(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Fs(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Ls(n)),e}function Vs(){return{}}function Gs(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Rs(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Ps(s));const a=i(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],ks(a)),i(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Ds());const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Fs(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Vs());const c=i(t,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const f=i(t,["computerUse"]);return f!=null&&r(e,["computerUse"],f),e}function qs(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Js(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function Bs(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Js(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function $s(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],qs(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],Bs(o)),e}function bs(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const a=i(t,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const l=i(t,["contents"]);if(e!==void 0&&l!=null){let p=W(l);Array.isArray(p)&&(p=p.map(m=>Hn(m))),r(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],Hn($(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Gs(m))),r(e,["tools"],p)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&r(e,["toolConfig"],$s(c));const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),n}function Hs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],mo(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],bs(s,n)),n}function Ys(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],te(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ws(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],te(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ks(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function Os(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],te(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Ks(s,n)),n}function zs(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Zs(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],zs(n,e)),e}function Je(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const l=i(t,["updateTime"]);l!=null&&r(e,["updateTime"],l);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Xs(){return{}}function Qs(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Je(a))),r(e,["cachedContents"],s)}return e}function Be(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const l=i(t,["updateTime"]);l!=null&&r(e,["updateTime"],l);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function js(){return{}}function ea(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Be(a))),r(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ta extends de{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fe(ce.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Hs(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Be(f))}else{const c=ys(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Je(f))}}async get(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ys(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Be(f))}else{const c=Ts(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Je(f))}}async delete(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ws(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(()=>{const f=js(),p=new Fn;return Object.assign(p,f),p})}else{const c=vs(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Xs(),p=new Fn;return Object.assign(p,f),p})}}async update(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Os(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Be(f))}else{const c=_s(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Je(f))}}async listInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Zs(e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=ea(f),m=new Vn;return Object.assign(m,p),m})}else{const c=Ss(e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Qs(f),m=new Vn;return Object.assign(m,p),m})}}}function Yn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(t){return this instanceof J?(this.v=t,this):new J(t)}function ge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(h){return function(g){return Promise.resolve(g).then(h,p)}}function u(h,g){o[h]&&(s[h]=function(y){return new Promise(function(E,A){a.push([h,y,E,A])>1||d(h,y)})},g&&(s[h]=g(s[h])))}function d(h,g){try{c(o[h](g))}catch(y){m(a[0][3],y)}}function c(h){h.value instanceof J?Promise.resolve(h.value.v).then(f,p):m(a[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,g){h(g),a.shift(),a.length&&d(a[0][0],a[0][1])}}function De(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Yn=="function"?Yn(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(l){return new Promise(function(u,d){l=t[a](l),s(u,d,l.done,l.value)})}}function s(a,l,u,d){Promise.resolve(d).then(function(c){a({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function na(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Po(n)}function Po(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function oa(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wn(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let a=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),a&&!Po(t[o])&&(a=!1),o++;a?e.push(...s):e.pop()}return e}class ia{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ra(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ra{constructor(e,n,o,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),oa(a)}async sendMessage(e){var n;await this.sendPromise;const o=$(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,u;const d=await s,c=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(o,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=$(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,o)}getHistory(e=!1){const n=e?Wn(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,s;return ge(this,arguments,function*(){var l,u,d,c;const f=[];try{for(var p=!0,m=De(e),h;h=yield J(m.next()),l=h.done,!l;p=!0){c=h.value,p=!1;const g=c;if(na(g)){const y=(s=(o=g.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;y!==void 0&&f.push(y)}yield yield J(g)}}catch(g){u={error:g}}finally{try{!p&&!l&&(d=m.return)&&(yield J(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Wn(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qe extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Qe.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sa(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function aa(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],sa(n,e)),e}function la(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function ua(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const a=i(t,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&r(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&r(e,["state"],m);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const g=i(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const y=i(t,["error"]);return y!=null&&r(e,["error"],la(y)),e}function ca(t){const e={},n=i(t,["file"]);n!=null&&r(e,["file"],ua(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function da(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],_o(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function fa(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],_o(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function pa(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function gt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const a=i(t,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&r(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&r(e,["state"],m);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const g=i(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const y=i(t,["error"]);return y!=null&&r(e,["error"],pa(y)),e}function ma(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>gt(a))),r(e,["files"],s)}return e}function ha(){return{}}function ga(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ya extends de{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fe(ce.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>gt(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aa(e);return a=S("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=ma(d),f=new Pi;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ca(e);return a=S("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=ha(),c=new Ni;return Object.assign(c,d),c})}}async get(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=da(e);return a=S("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>gt(d))}}async delete(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fa(e);return a=S("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=ga(),c=new ki;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ta(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function va(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function No(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Ta(n)),e}function Ca(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],va(n)),e}function _a(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],No(o)),e}function Ea(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>_a(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Sa(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],No(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],Ea(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Aa(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],Ca(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Ia(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function xa(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ma(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ra(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function wa(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Pa(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Na(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Ia(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ma(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],wa(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function ka(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],xa(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ra(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Pa(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Da(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Na(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ua(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>ka(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function La(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const a=i(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Fa(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=i(t,["response"]);l!=null&&r(e,["response"],l);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Va(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Ga(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function qa(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Va(n)),e}function Ja(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Ga(n)),e}function Ba(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function $a(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function ba(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ba(n)),e}function Ha(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],$a(n)),e}function Ya(){return{}}function Wa(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Ka(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Wa(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const a=i(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=i(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Oa(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Ka(n)),e}function za(){return{}}function Za(){return{}}function Xa(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>La(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],qa(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],ba(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],za());const l=i(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=i(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function Qa(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Fa(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Ja(s));const a=i(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],Ha(a)),i(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Ya());const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Oa(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Za());const c=i(t,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const f=i(t,["computerUse"]);return f!=null&&r(e,["computerUse"],f),e}function ja(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function el(t){const e={},n=i(t,["handle"]);n!=null&&r(e,["handle"],n);const o=i(t,["transparent"]);return o!=null&&r(e,["transparent"],o),e}function Kn(){return{}}function On(){return{}}function tl(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const a=i(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=i(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function nl(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const a=i(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=i(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function ol(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],tl(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function il(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],nl(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function rl(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function sl(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function al(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],rl(o)),e}function ll(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],sl(o)),e}function ul(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function cl(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function dl(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const a=i(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=i(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Sa(At(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],Da($(h)));const g=i(t,["tools"]);if(e!==void 0&&g!=null){let M=Ae(g);Array.isArray(M)&&(M=M.map(L=>Xa(Se(L)))),r(e,["setup","tools"],M)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],ja(y));const E=i(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],Kn());const A=i(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&r(e,["setup","outputAudioTranscription"],Kn());const I=i(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&r(e,["setup","realtimeInputConfig"],ol(I));const x=i(t,["contextWindowCompression"]);e!==void 0&&x!=null&&r(e,["setup","contextWindowCompression"],al(x));const P=i(t,["proactivity"]);return e!==void 0&&P!=null&&r(e,["setup","proactivity"],ul(P)),n}function fl(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const a=i(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=i(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Aa(At(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],Ua($(h)));const g=i(t,["tools"]);if(e!==void 0&&g!=null){let M=Ae(g);Array.isArray(M)&&(M=M.map(L=>Qa(Se(L)))),r(e,["setup","tools"],M)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],el(y));const E=i(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],On());const A=i(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&r(e,["setup","outputAudioTranscription"],On());const I=i(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&r(e,["setup","realtimeInputConfig"],il(I));const x=i(t,["contextWindowCompression"]);e!==void 0&&x!=null&&r(e,["setup","contextWindowCompression"],ll(x));const P=i(t,["proactivity"]);return e!==void 0&&P!=null&&r(e,["setup","proactivity"],cl(P)),n}function pl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],dl(s,n)),n}function ml(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],fl(s,n)),n}function hl(){return{}}function gl(){return{}}function yl(){return{}}function Tl(){return{}}function vl(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],ho(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],yo(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const a=i(t,["video"]);a!=null&&r(e,["video"],go(a));const l=i(t,["text"]);return l!=null&&r(e,["text"],l),i(t,["activityStart"])!=null&&r(e,["activityStart"],hl()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],yl()),e}function Cl(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],ho(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],yo(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const a=i(t,["video"]);a!=null&&r(e,["video"],go(a));const l=i(t,["text"]);return l!=null&&r(e,["text"],l),i(t,["activityStart"])!=null&&r(e,["activityStart"],gl()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],Tl()),e}function ko(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function _l(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ko(s))),r(e,["weightedPrompts"],o)}return e}function Do(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const a=i(t,["guidance"]);a!=null&&r(e,["guidance"],a);const l=i(t,["bpm"]);l!=null&&r(e,["bpm"],l);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&r(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);return m!=null&&r(e,["onlyBassAndDrums"],m),e}function El(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],Do(n)),e}function Uo(t){const e={},n=i(t,["model"]);return n!=null&&r(e,["model"],n),e}function Lo(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ko(s))),r(e,["weightedPrompts"],o)}return e}function yt(t){const e={},n=i(t,["setup"]);n!=null&&r(e,["setup"],Uo(n));const o=i(t,["clientContent"]);o!=null&&r(e,["clientContent"],Lo(o));const s=i(t,["musicGenerationConfig"]);s!=null&&r(e,["musicGenerationConfig"],Do(s));const a=i(t,["playbackControl"]);return a!=null&&r(e,["playbackControl"],a),e}function Sl(){return{}}function Al(t){const e={},n=i(t,["sessionId"]);return n!=null&&r(e,["sessionId"],n),e}function Il(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function xl(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ml(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Rl(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function wl(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Pl(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Nl(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Il(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ml(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],wl(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function kl(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],xl(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Rl(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Pl(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Dl(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Nl(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ul(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>kl(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function zn(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function Zn(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function Ll(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Fl(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ll(s))),r(e,["urlMetadata"],o)}return e}function Vl(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Dl(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const a=i(t,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const l=i(t,["generationComplete"]);l!=null&&r(e,["generationComplete"],l);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],zn(u));const d=i(t,["outputTranscription"]);d!=null&&r(e,["outputTranscription"],zn(d));const c=i(t,["urlContextMetadata"]);return c!=null&&r(e,["urlContextMetadata"],Fl(c)),e}function Gl(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Ul(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const a=i(t,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const l=i(t,["generationComplete"]);l!=null&&r(e,["generationComplete"],l);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],Zn(u));const d=i(t,["outputTranscription"]);return d!=null&&r(e,["outputTranscription"],Zn(d)),e}function ql(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);return s!=null&&r(e,["name"],s),e}function Jl(t){const e={},n=i(t,["args"]);n!=null&&r(e,["args"],n);const o=i(t,["name"]);return o!=null&&r(e,["name"],o),e}function Bl(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ql(s))),r(e,["functionCalls"],o)}return e}function $l(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Jl(s))),r(e,["functionCalls"],o)}return e}function bl(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function Hl(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function Ve(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Ge(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Yl(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["responseTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const a=i(t,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const l=i(t,["thoughtsTokenCount"]);l!=null&&r(e,["thoughtsTokenCount"],l);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>Ve(h))),r(e,["promptTokensDetails"],m)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Ve(h))),r(e,["cacheTokensDetails"],m)}const f=i(t,["responseTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>Ve(h))),r(e,["responseTokensDetails"],m)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>Ve(h))),r(e,["toolUsePromptTokensDetails"],m)}return e}function Wl(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const a=i(t,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const l=i(t,["thoughtsTokenCount"]);l!=null&&r(e,["thoughtsTokenCount"],l);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>Ge(g))),r(e,["promptTokensDetails"],h)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Ge(g))),r(e,["cacheTokensDetails"],h)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Ge(g))),r(e,["responseTokensDetails"],h)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>Ge(g))),r(e,["toolUsePromptTokensDetails"],h)}const m=i(t,["trafficType"]);return m!=null&&r(e,["trafficType"],m),e}function Kl(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Ol(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function zl(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function Zl(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function Xl(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],Sl());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Vl(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],Bl(s));const a=i(t,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],bl(a));const l=i(t,["usageMetadata"]);l!=null&&r(e,["usageMetadata"],Yl(l));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],Kl(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],zl(d)),e}function Ql(t){const e={},n=i(t,["setupComplete"]);n!=null&&r(e,["setupComplete"],Al(n));const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Gl(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],$l(s));const a=i(t,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],Hl(a));const l=i(t,["usageMetadata"]);l!=null&&r(e,["usageMetadata"],Wl(l));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],Ol(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],Zl(d)),e}function jl(){return{}}function eu(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function tu(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>eu(s))),r(e,["weightedPrompts"],o)}return e}function nu(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const a=i(t,["guidance"]);a!=null&&r(e,["guidance"],a);const l=i(t,["bpm"]);l!=null&&r(e,["bpm"],l);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&r(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);return m!=null&&r(e,["onlyBassAndDrums"],m),e}function ou(t){const e={},n=i(t,["clientContent"]);n!=null&&r(e,["clientContent"],tu(n));const o=i(t,["musicGenerationConfig"]);return o!=null&&r(e,["musicGenerationConfig"],nu(o)),e}function iu(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const s=i(t,["sourceMetadata"]);return s!=null&&r(e,["sourceMetadata"],ou(s)),e}function ru(t){const e={},n=i(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>iu(s))),r(e,["audioChunks"],o)}return e}function su(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["filteredReason"]);return o!=null&&r(e,["filteredReason"],o),e}function au(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],jl());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],ru(o));const s=i(t,["filteredPrompt"]);return s!=null&&r(e,["filteredPrompt"],su(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function uu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function cu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function du(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],lu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],uu(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],cu(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function je(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>du(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function fu(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const a=i(t,["enum"]);a!=null&&r(e,["enum"],a);const l=i(t,["example"]);l!=null&&r(e,["example"],l);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const g=i(t,["minLength"]);g!=null&&r(e,["minLength"],g);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const E=i(t,["minimum"]);E!=null&&r(e,["minimum"],E);const A=i(t,["nullable"]);A!=null&&r(e,["nullable"],A);const I=i(t,["pattern"]);I!=null&&r(e,["pattern"],I);const x=i(t,["properties"]);x!=null&&r(e,["properties"],x);const P=i(t,["propertyOrdering"]);P!=null&&r(e,["propertyOrdering"],P);const M=i(t,["required"]);M!=null&&r(e,["required"],M);const L=i(t,["title"]);L!=null&&r(e,["title"],L);const F=i(t,["type"]);return F!=null&&r(e,["type"],F),e}function pu(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function mu(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const a=i(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function hu(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function gu(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],hu(n)),e}function yu(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Tu(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],yu(n)),e}function vu(){return{}}function Cu(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>mu(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],gu(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Tu(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],vu());const l=i(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=i(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function _u(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Eu(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function Su(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Eu(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Au(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],_u(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],Su(o)),e}function Iu(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Fo(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Iu(n)),e}function xu(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Fo(o)),e}function Mu(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xu(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Ru(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Fo(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],Mu(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function wu(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function Pu(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],je($(s)));const a=i(e,["temperature"]);a!=null&&r(o,["temperature"],a);const l=i(e,["topP"]);l!=null&&r(o,["topP"],l);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const g=i(e,["frequencyPenalty"]);g!=null&&r(o,["frequencyPenalty"],g);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const E=i(e,["responseMimeType"]);E!=null&&r(o,["responseMimeType"],E);const A=i(e,["responseSchema"]);A!=null&&r(o,["responseSchema"],fu(Le(A)));const I=i(e,["responseJsonSchema"]);if(I!=null&&r(o,["responseJsonSchema"],I),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=i(e,["safetySettings"]);if(n!==void 0&&x!=null){let V=x;Array.isArray(V)&&(V=V.map(O=>pu(O))),r(n,["safetySettings"],V)}const P=i(e,["tools"]);if(n!==void 0&&P!=null){let V=Ae(P);Array.isArray(V)&&(V=V.map(O=>Cu(Se(O)))),r(n,["tools"],V)}const M=i(e,["toolConfig"]);if(n!==void 0&&M!=null&&r(n,["toolConfig"],Au(M)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=i(e,["cachedContent"]);n!==void 0&&L!=null&&r(n,["cachedContent"],te(t,L));const F=i(e,["responseModalities"]);F!=null&&r(o,["responseModalities"],F);const H=i(e,["mediaResolution"]);H!=null&&r(o,["mediaResolution"],H);const N=i(e,["speechConfig"]);if(N!=null&&r(o,["speechConfig"],Ru(St(N))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=i(e,["thinkingConfig"]);return q!=null&&r(o,["thinkingConfig"],wu(q)),o}function Xn(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);if(s!=null){let l=W(s);Array.isArray(l)&&(l=l.map(u=>je(u))),r(n,["contents"],l)}const a=i(e,["config"]);return a!=null&&r(n,["generationConfig"],Pu(t,a,n)),n}function Nu(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const a=i(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&r(e,["requests[]","outputDimensionality"],a),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ku(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);s!=null&&r(n,["requests[]","content"],vo(t,s));const a=i(e,["config"]);a!=null&&r(n,["config"],Nu(a,n));const l=i(e,["model"]);return l!==void 0&&r(n,["requests[]","model"],G(t,l)),n}function Du(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const a=i(t,["guidanceScale"]);if(e!==void 0&&a!=null&&r(e,["parameters","guidanceScale"],a),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&r(e,["parameters","safetySetting"],l);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&r(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&r(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&r(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Uu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const a=i(e,["config"]);return a!=null&&r(n,["config"],Du(a,n)),n}function Lu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Fu(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const a=i(e,["pageToken"]);n!==void 0&&a!=null&&r(n,["_query","pageToken"],a);const l=i(e,["filter"]);n!==void 0&&l!=null&&r(n,["_query","filter"],l);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],Eo(t,u)),o}function Vu(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Fu(t,o,n)),n}function Gu(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const a=i(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),n}function qu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Gu(s,n)),n}function Ju(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Bu(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $u(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);if(s!=null){let l=W(s);Array.isArray(l)&&(l=l.map(u=>je(u))),r(n,["contents"],l)}const a=i(e,["config"]);return a!=null&&r(n,["config"],Bu(a)),n}function bu(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],ne(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Hu(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["aspectRatio"]);if(e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a),i(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=i(t,["personGeneration"]);if(e!==void 0&&l!=null&&r(e,["parameters","personGeneration"],l),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=i(t,["negativePrompt"]);e!==void 0&&u!=null&&r(e,["parameters","negativePrompt"],u);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Yu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const a=i(e,["image"]);if(a!=null&&r(n,["instances[0]","image"],bu(a)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=i(e,["config"]);return l!=null&&r(n,["config"],Hu(l,n)),n}function Wu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ku(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ou(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function zu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Wu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ku(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Ou(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function xe(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>zu(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Zu(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const a=i(t,["enum"]);a!=null&&r(e,["enum"],a);const l=i(t,["example"]);l!=null&&r(e,["example"],l);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const g=i(t,["minLength"]);g!=null&&r(e,["minLength"],g);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const E=i(t,["minimum"]);E!=null&&r(e,["minimum"],E);const A=i(t,["nullable"]);A!=null&&r(e,["nullable"],A);const I=i(t,["pattern"]);I!=null&&r(e,["pattern"],I);const x=i(t,["properties"]);x!=null&&r(e,["properties"],x);const P=i(t,["propertyOrdering"]);P!=null&&r(e,["propertyOrdering"],P);const M=i(t,["required"]);M!=null&&r(e,["required"],M);const L=i(t,["title"]);L!=null&&r(e,["title"],L);const F=i(t,["type"]);return F!=null&&r(e,["type"],F),e}function Xu(t){const e={},n=i(t,["featureSelectionPreference"]);return n!=null&&r(e,["featureSelectionPreference"],n),e}function Qu(t){const e={},n=i(t,["method"]);n!=null&&r(e,["method"],n);const o=i(t,["category"]);o!=null&&r(e,["category"],o);const s=i(t,["threshold"]);return s!=null&&r(e,["threshold"],s),e}function ju(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=i(t,["response"]);l!=null&&r(e,["response"],l);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function ec(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function tc(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],ec(n)),e}function nc(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function oc(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],nc(n)),e}function ic(){return{}}function rc(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function sc(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],rc(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const a=i(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=i(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function ac(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],sc(n)),e}function lc(){return{}}function Vo(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>ju(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],tc(s));const a=i(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],oc(a)),i(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],ic());const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],ac(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],lc());const c=i(t,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const f=i(t,["computerUse"]);return f!=null&&r(e,["computerUse"],f),e}function uc(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function cc(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function dc(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],cc(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function fc(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],uc(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],dc(o)),e}function pc(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function mc(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],pc(n)),e}function hc(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],mc(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function gc(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function yc(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],xe($(s)));const a=i(e,["temperature"]);a!=null&&r(o,["temperature"],a);const l=i(e,["topP"]);l!=null&&r(o,["topP"],l);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const g=i(e,["frequencyPenalty"]);g!=null&&r(o,["frequencyPenalty"],g);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const E=i(e,["responseMimeType"]);E!=null&&r(o,["responseMimeType"],E);const A=i(e,["responseSchema"]);A!=null&&r(o,["responseSchema"],Zu(Le(A)));const I=i(e,["responseJsonSchema"]);I!=null&&r(o,["responseJsonSchema"],I);const x=i(e,["routingConfig"]);x!=null&&r(o,["routingConfig"],x);const P=i(e,["modelSelectionConfig"]);P!=null&&r(o,["modelConfig"],Xu(P));const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let j=M;Array.isArray(j)&&(j=j.map(tt=>Qu(tt))),r(n,["safetySettings"],j)}const L=i(e,["tools"]);if(n!==void 0&&L!=null){let j=Ae(L);Array.isArray(j)&&(j=j.map(tt=>Vo(Se(tt)))),r(n,["tools"],j)}const F=i(e,["toolConfig"]);n!==void 0&&F!=null&&r(n,["toolConfig"],fc(F));const H=i(e,["labels"]);n!==void 0&&H!=null&&r(n,["labels"],H);const N=i(e,["cachedContent"]);n!==void 0&&N!=null&&r(n,["cachedContent"],te(t,N));const q=i(e,["responseModalities"]);q!=null&&r(o,["responseModalities"],q);const V=i(e,["mediaResolution"]);V!=null&&r(o,["mediaResolution"],V);const O=i(e,["speechConfig"]);O!=null&&r(o,["speechConfig"],hc(St(O)));const Rt=i(e,["audioTimestamp"]);Rt!=null&&r(o,["audioTimestamp"],Rt);const wt=i(e,["thinkingConfig"]);return wt!=null&&r(o,["thinkingConfig"],gc(wt)),o}function Qn(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);if(s!=null){let l=W(s);Array.isArray(l)&&(l=l.map(u=>xe(u))),r(n,["contents"],l)}const a=i(e,["config"]);return a!=null&&r(n,["generationConfig"],yc(t,a,n)),n}function Tc(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const a=i(t,["outputDimensionality"]);e!==void 0&&a!=null&&r(e,["parameters","outputDimensionality"],a);const l=i(t,["mimeType"]);e!==void 0&&l!=null&&r(e,["instances[]","mimeType"],l);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function vc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);s!=null&&r(n,["instances[]","content"],vo(t,s));const a=i(e,["config"]);return a!=null&&r(n,["config"],Tc(a,n)),n}function Cc(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const a=i(t,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const g=i(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const E=i(t,["addWatermark"]);e!==void 0&&E!=null&&r(e,["parameters","addWatermark"],E);const A=i(t,["enhancePrompt"]);return e!==void 0&&A!=null&&r(e,["parameters","enhancePrompt"],A),n}function _c(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const a=i(e,["config"]);return a!=null&&r(n,["config"],Cc(a,n)),n}function et(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],ne(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ec(t){const e={},n=i(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&r(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function Sc(t){const e={},n=i(t,["controlType"]);n!=null&&r(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&r(e,["computeControl"],o),e}function Ac(t){const e={},n=i(t,["styleDescription"]);return n!=null&&r(e,["styleDescription"],n),e}function Ic(t){const e={},n=i(t,["subjectType"]);n!=null&&r(e,["subjectType"],n);const o=i(t,["subjectDescription"]);return o!=null&&r(e,["subjectDescription"],o),e}function xc(t){const e={},n=i(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],et(n));const o=i(t,["referenceId"]);o!=null&&r(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const a=i(t,["maskImageConfig"]);a!=null&&r(e,["maskImageConfig"],Ec(a));const l=i(t,["controlImageConfig"]);l!=null&&r(e,["controlImageConfig"],Sc(l));const u=i(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],Ac(u));const d=i(t,["subjectImageConfig"]);return d!=null&&r(e,["subjectImageConfig"],Ic(d)),e}function Mc(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const a=i(t,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const g=i(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const E=i(t,["editMode"]);e!==void 0&&E!=null&&r(e,["parameters","editMode"],E);const A=i(t,["baseSteps"]);return e!==void 0&&A!=null&&r(e,["parameters","editConfig","baseSteps"],A),n}function Rc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const a=i(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>xc(d))),r(n,["instances[0]","referenceImages"],u)}const l=i(e,["config"]);return l!=null&&r(n,["config"],Mc(l,n)),n}function wc(t,e){const n={},o=i(t,["includeRaiReason"]);e!==void 0&&o!=null&&r(e,["parameters","includeRaiReason"],o);const s=i(t,["outputMimeType"]);e!==void 0&&s!=null&&r(e,["parameters","outputOptions","mimeType"],s);const a=i(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&r(e,["parameters","outputOptions","compressionQuality"],a);const l=i(t,["enhanceInputImage"]);e!==void 0&&l!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],l);const u=i(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const d=i(t,["numberOfImages"]);e!==void 0&&d!=null&&r(e,["parameters","sampleCount"],d);const c=i(t,["mode"]);return e!==void 0&&c!=null&&r(e,["parameters","mode"],c),n}function Pc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["image"]);s!=null&&r(n,["instances[0]","image"],et(s));const a=i(e,["upscaleFactor"]);a!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=i(e,["config"]);return l!=null&&r(n,["config"],wc(l,n)),n}function Nc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function kc(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const a=i(e,["pageToken"]);n!==void 0&&a!=null&&r(n,["_query","pageToken"],a);const l=i(e,["filter"]);n!==void 0&&l!=null&&r(n,["_query","filter"],l);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],Eo(t,u)),o}function Dc(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],kc(t,o,n)),n}function Uc(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const a=i(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),n}function Lc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Uc(s,n)),n}function Fc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Vc(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&r(e,["systemInstruction"],xe($(o)));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Vo(u))),r(e,["tools"],l)}const a=i(t,["generationConfig"]);return e!==void 0&&a!=null&&r(e,["generationConfig"],a),n}function Gc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);if(s!=null){let l=W(s);Array.isArray(l)&&(l=l.map(u=>xe(u))),r(n,["contents"],l)}const a=i(e,["config"]);return a!=null&&r(n,["config"],Vc(a,n)),n}function qc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["contents"]);if(s!=null){let l=W(s);Array.isArray(l)&&(l=l.map(u=>xe(u))),r(n,["contents"],l)}const a=i(e,["config"]);return a!=null&&r(n,["config"],a),n}function Jc(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["bytesBase64Encoded"],ne(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Bc(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const a=i(t,["fps"]);e!==void 0&&a!=null&&r(e,["parameters","fps"],a);const l=i(t,["durationSeconds"]);e!==void 0&&l!=null&&r(e,["parameters","durationSeconds"],l);const u=i(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&r(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&r(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","negativePrompt"],m);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h);const g=i(t,["generateAudio"]);e!==void 0&&g!=null&&r(e,["parameters","generateAudio"],g);const y=i(t,["lastFrame"]);e!==void 0&&y!=null&&r(e,["instances[0]","lastFrame"],et(y));const E=i(t,["compressionQuality"]);return e!==void 0&&E!=null&&r(e,["parameters","compressionQuality"],E),n}function $c(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],G(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const a=i(e,["image"]);a!=null&&r(n,["instances[0]","image"],et(a));const l=i(e,["video"]);l!=null&&r(n,["instances[0]","video"],Jc(l));const u=i(e,["config"]);return u!=null&&r(n,["config"],Bc(u,n)),n}function bc(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Hc(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Yc(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Wc(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],bc(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Hc(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Yc(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Kc(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Wc(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Oc(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function zc(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Zc(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>zc(s))),r(e,["urlMetadata"],o)}return e}function Xc(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Kc(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Oc(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const a=i(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=i(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],Zc(l));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function jn(t){const e={},n=i(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Xc(u))),r(e,["candidates"],l)}const o=i(t,["modelVersion"]);o!=null&&r(e,["modelVersion"],o);const s=i(t,["promptFeedback"]);s!=null&&r(e,["promptFeedback"],s);const a=i(t,["usageMetadata"]);return a!=null&&r(e,["usageMetadata"],a),e}function Qc(t){const e={},n=i(t,["values"]);return n!=null&&r(e,["values"],n),e}function jc(){return{}}function ed(t){const e={},n=i(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Qc(a))),r(e,["embeddings"],s)}return i(t,["metadata"])!=null&&r(e,["metadata"],jc()),e}function td(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],ne(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Go(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function nd(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],td(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],Go(s)),e}function od(t){const e={},n=i(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>nd(a))),r(e,["generatedImages"],s)}const o=i(t,["positivePromptSafetyAttributes"]);return o!=null&&r(e,["positivePromptSafetyAttributes"],Go(o)),e}function id(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Tt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const a=i(t,["version"]);a!=null&&r(e,["version"],a);const l=i(t,["_self"]);l!=null&&r(e,["tunedModelInfo"],id(l));const u=i(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&r(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);return c!=null&&r(e,["supportedActions"],c),e}function rd(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["_self"]);if(o!=null){let s=So(o);Array.isArray(s)&&(s=s.map(a=>Tt(a))),r(e,["models"],s)}return e}function sd(){return{}}function ad(t){const e={},n=i(t,["totalTokens"]);n!=null&&r(e,["totalTokens"],n);const o=i(t,["cachedContentTokenCount"]);return o!=null&&r(e,["cachedContentTokenCount"],o),e}function ld(t){const e={},n=i(t,["video","uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&r(e,["videoBytes"],ne(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function ud(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],ld(n)),e}function cd(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>ud(l))),r(e,["generatedVideos"],a)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function dd(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const a=i(t,["error"]);a!=null&&r(e,["error"],a);const l=i(t,["response","generateVideoResponse"]);return l!=null&&r(e,["response"],cd(l)),e}function fd(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function pd(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function md(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function hd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],fd(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],pd(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],md(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function gd(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>hd(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function yd(t){const e={},n=i(t,["citations"]);return n!=null&&r(e,["citations"],n),e}function Td(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function vd(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Td(s))),r(e,["urlMetadata"],o)}return e}function Cd(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],gd(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],yd(o));const s=i(t,["finishMessage"]);s!=null&&r(e,["finishMessage"],s);const a=i(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=i(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],vd(l));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function eo(t){const e={},n=i(t,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Cd(c))),r(e,["candidates"],d)}const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["responseId"]);s!=null&&r(e,["responseId"],s);const a=i(t,["modelVersion"]);a!=null&&r(e,["modelVersion"],a);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function _d(t){const e={},n=i(t,["truncated"]);n!=null&&r(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&r(e,["tokenCount"],o),e}function Ed(t){const e={},n=i(t,["values"]);n!=null&&r(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&r(e,["statistics"],_d(o)),e}function Sd(t){const e={},n=i(t,["billableCharacterCount"]);return n!=null&&r(e,["billableCharacterCount"],n),e}function Ad(t){const e={},n=i(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Ed(a))),r(e,["embeddings"],s)}const o=i(t,["metadata"]);return o!=null&&r(e,["metadata"],Sd(o)),e}function Id(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],ne(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qo(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function It(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],Id(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],qo(s));const a=i(t,["prompt"]);return a!=null&&r(e,["enhancedPrompt"],a),e}function xd(t){const e={},n=i(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>It(a))),r(e,["generatedImages"],s)}const o=i(t,["positivePromptSafetyAttributes"]);return o!=null&&r(e,["positivePromptSafetyAttributes"],qo(o)),e}function Md(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>It(s))),r(e,["generatedImages"],o)}return e}function Rd(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>It(s))),r(e,["generatedImages"],o)}return e}function wd(t){const e={},n=i(t,["endpoint"]);n!=null&&r(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&r(e,["deployedModelId"],o),e}function Pd(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Nd(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);return s!=null&&r(e,["step"],s),e}function vt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const a=i(t,["versionId"]);a!=null&&r(e,["version"],a);const l=i(t,["deployedModels"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>wd(m))),r(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&r(e,["labels"],u);const d=i(t,["_self"]);d!=null&&r(e,["tunedModelInfo"],Pd(d));const c=i(t,["defaultCheckpointId"]);c!=null&&r(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>Nd(m))),r(e,["checkpoints"],p)}return e}function kd(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["_self"]);if(o!=null){let s=So(o);Array.isArray(s)&&(s=s.map(a=>vt(a))),r(e,["models"],s)}return e}function Dd(){return{}}function Ud(t){const e={},n=i(t,["totalTokens"]);return n!=null&&r(e,["totalTokens"],n),e}function Ld(t){const e={},n=i(t,["tokensInfo"]);return n!=null&&r(e,["tokensInfo"],n),e}function Fd(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],ne(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Vd(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],Fd(n)),e}function Gd(t){const e={},n=i(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Vd(l))),r(e,["generatedVideos"],a)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function qd(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const a=i(t,["error"]);a!=null&&r(e,["error"],a);const l=i(t,["response"]);return l!=null&&r(e,["response"],Gd(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jd="Content-Type",Bd="X-Server-Timeout",$d="User-Agent",Ct="x-goog-api-client",bd="1.8.0",Hd=`google-genai-sdk/${bd}`,Yd="v1beta1",Wd="v1beta",to=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Kd{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Yd,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Wd,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))s.searchParams.append(l,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?o[s]=Object.assign(Object.assign({},o[s]),a):a!==void 0&&(o[s]=a);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o){if(n&&n.timeout||o){const s=new AbortController,a=s.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>s.abort(),n.timeout),o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&Od(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await no(s),new ft(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await no(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return ge(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield J(s.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(d);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,g=m.code,y=`got status: ${h}. ${JSON.stringify(p)}`;if(g>=400&&g<600)throw new Qe({message:y,status:g})}}catch(p){if(p.name==="ApiError")throw p}l+=c;let f=l.match(to);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield J(new ft(m)),l=l.slice(f[0].length),f=l.match(to)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Hd+" "+this.clientOptions.userAgentExtra;return e[$d]=n,e[Ct]=n,e[Jd]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))n.append(o,s);e.timeout&&e.timeout>0&&n.append(Bd,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d=await this.fetchUploadUrl(s,n);return a.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:S("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=l==null?void 0:l.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function no(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Qe({message:s,status:n}):new Error(s)}}function Od(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,l){const u=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const c=l[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zd="mcp_used/unknown";function Jo(t){for(const e of t)if(xt(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Bo(t){var e;const n=(e=t[Ct])!==null&&e!==void 0?e:"";t[Ct]=(n+` ${zd}`).trimStart()}function Zd(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>xt(s)))!==null&&o!==void 0?o:!1}function Xd(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!xt(s)))!==null&&o!==void 0?o:!1}function xt(t){return t!==null&&typeof t=="object"&&t instanceof Mt}function Qd(t,e=100){return ge(this,arguments,function*(){let o,s=0;for(;s<e;){const a=yield J(t.listTools({cursor:o}));for(const l of a.tools)yield yield J(l),s++;if(!a.nextCursor)break;o=a.nextCursor}})}class Mt{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Mt(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,De(Qd(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const p=s;l.push(p);const m=p.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Yi(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:o.name,arguments:o.args},void 0,a);n.push({functionResponse:{name:o.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jd(t,e,n){const o=new Ui;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const a=au(s);Object.assign(o,a),e(o)}class ef{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=of(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(x=>{c=x}),p=e.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:x=>{jd(h,p.onmessage,x)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(x){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(x){}},y=this.webSocketFactory.create(d,nf(l),g);y.connect(),await f;const E=G(this.apiClient,e.model),A=Uo({model:E}),I=yt({setup:A});return y.send(JSON.stringify(I)),new tf(y,this.apiClient)}}class tf{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=_l(e),o=Lo(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=El(e),o=yt(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const n=yt({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(me.PLAY)}pause(){this.sendPlaybackControl(me.PAUSE)}stop(){this.sendPlaybackControl(me.STOP)}resetContext(){this.sendPlaybackControl(me.RESET_CONTEXT)}close(){this.conn.close()}}function nf(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function of(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rf="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function sf(t,e,n){const o=new Di;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=Ql(a);Object.assign(o,l)}else{const l=Xl(a);Object.assign(o,l)}e(o)}class af{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new ef(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,a,l,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Jo(e.config.tools)&&Bo(p);const m=df(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const N=this.apiClient.getApiKey();let q="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),q="BidiGenerateContentConstrained",V="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${q}?${V}=${N}`}let h=()=>{};const g=new Promise(N=>{h=N}),y=e.callbacks,E=function(){var N;(N=y==null?void 0:y.onopen)===null||N===void 0||N.call(y),h({})},A=this.apiClient,I={onopen:E,onmessage:N=>{sf(A,y.onmessage,N)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(N){},onclose:(o=y==null?void 0:y.onclose)!==null&&o!==void 0?o:function(N){}},x=this.webSocketFactory.create(f,cf(m),I);x.connect(),await g;let P=G(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const N=this.apiClient.getProject(),q=this.apiClient.getLocation();P=`projects/${N}/locations/${q}/`+P}let M={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ze.AUDIO]}:e.config.responseModalities=[ze.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],F=[];for(const N of L)if(this.isCallableTool(N)){const q=N;F.push(await q.tool())}else F.push(N);F.length>0&&(e.config.tools=F);const H={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=ml(this.apiClient,H):M=pl(this.apiClient,H),delete M.config,x.send(JSON.stringify(M)),new uf(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const lf={turnComplete:!0};class uf{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=W(n.turns),e.isVertexAI()?o=o.map(s=>xe(s)):o=o.map(s=>je(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(rf)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},lf),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Cl(e)}:n={realtimeInput:vl(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function cf(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function df(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oo=10;function io(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if($e(l)){s=!0;break}if(!s)return!0;const a=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function $e(t){return"callTool"in t&&typeof t.callTool=="function"}function ro(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ff extends de{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,a,l,u;const d=await this.processParamsForMcpUsage(n);if(!Zd(n)||io(n.config))return await this.generateContentInternal(d);if(Xd(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=W(d.contents),m=(a=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:oo;let h=0;for(;h<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,y=[];for(const E of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if($e(E)){const I=await E.callTool(c.functionCalls);y.push(...I)}h++,f={role:"user",parts:y},d.contents=W(d.contents),d.contents.push(g),d.contents.push(f),ro(d.config)&&(p.push(g),p.push(f))}return ro(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(io(n.config)){const o=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let a;const l=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async n=>{var o;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((o=l.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Fe(ce.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var n,o,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>$e(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Jo(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Bo(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const a=new Map;for(const l of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if($e(l)){const u=l,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,u)}}return a}async processAfcStream(e){var n,o,s;const a=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:oo;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,p){var m,h;return ge(this,arguments,function*(){for(var g,y,E,A;u<a;){l&&(u++,l=!1);const M=yield J(c.processParamsForMcpUsage(p)),L=yield J(c.generateContentStreamInternal(M)),F=[],H=[];try{for(var I=!0,x=(y=void 0,De(L)),P;P=yield J(x.next()),g=P.done,!g;I=!0){A=P.value,I=!1;const N=A;if(yield yield J(N),N.candidates&&(!((m=N.candidates[0])===null||m===void 0)&&m.content)){H.push(N.candidates[0].content);for(const q of(h=N.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<a&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(q.functionCall.name)){const V=yield J(f.get(q.functionCall.name).callTool([q.functionCall]));F.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(N){y={error:N}}finally{try{!I&&!g&&(E=x.return)&&(yield J(E.call(x)))}finally{if(y)throw y.error}}if(F.length>0){l=!0;const N=new Pe;N.candidates=[{content:{role:"user",parts:F}}],yield yield J(N);const q=[];q.push(...H),q.push({role:"user",parts:F});const V=W(p.contents).concat(q);p.contents=V}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Qn(this.apiClient,e);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=eo(f),m=new Pe;return Object.assign(m,p),m})}else{const c=Xn(this.apiClient,e);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=jn(f),m=new Pe;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Qn(this.apiClient,e);return u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(p){return ge(this,arguments,function*(){var m,h,g,y;try{for(var E=!0,A=De(p),I;I=yield J(A.next()),m=I.done,!m;E=!0){y=I.value,E=!1;const P=eo(yield J(y.json())),M=new Pe;Object.assign(M,P),yield yield J(M)}}catch(x){h={error:x}}finally{try{!E&&!m&&(g=A.return)&&(yield J(g.call(A)))}finally{if(h)throw h.error}}})})}else{const c=Xn(this.apiClient,e);return u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(p){return ge(this,arguments,function*(){var m,h,g,y;try{for(var E=!0,A=De(p),I;I=yield J(A.next()),m=I.done,!m;E=!0){y=I.value,E=!1;const P=jn(yield J(y.json())),M=new Pe;Object.assign(M,P),yield yield J(M)}}catch(x){h={error:x}}finally{try{!E&&!m&&(g=A.return)&&(yield J(g.call(A)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=vc(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ad(f),m=new Pn;return Object.assign(m,p),m})}else{const c=ku(this.apiClient,e);return u=S("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=ed(f),m=new Pn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=_c(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=xd(f),m=new Nn;return Object.assign(m,p),m})}else{const c=Uu(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=od(f),m=new Nn;return Object.assign(m,p),m})}}async editImageInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Rc(this.apiClient,e);return a=S("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Md(d),f=new Mi;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Pc(this.apiClient,e);return a=S("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Rd(d),f=new Ri;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Nc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>vt(f))}else{const c=Lu(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Tt(f))}}async listInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,e);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=kd(f),m=new kn;return Object.assign(m,p),m})}else{const c=Vu(this.apiClient,e);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=rd(f),m=new kn;return Object.assign(m,p),m})}}async update(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Lc(this.apiClient,e);return u=S("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>vt(f))}else{const c=qu(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Tt(f))}}async delete(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Fc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Dd(),p=new Dn;return Object.assign(p,f),p})}else{const c=Ju(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=sd(),p=new Dn;return Object.assign(p,f),p})}}async countTokens(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Gc(this.apiClient,e);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ud(f),m=new Un;return Object.assign(m,p),m})}else{const c=$u(this.apiClient,e);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=ad(f),m=new Un;return Object.assign(m,p),m})}}async computeTokens(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=qc(this.apiClient,e);return a=S("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Ld(d),f=new wi;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=$c(this.apiClient,e);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>qd(f))}else{const c=Yu(this.apiClient,e);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>dd(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pf(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function mf(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function hf(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["operationName"],n);const o=i(t,["resourceName"]);o!=null&&r(e,["_url","resourceName"],o);const s=i(t,["config"]);return s!=null&&r(e,["config"],s),e}function gf(t){const e={},n=i(t,["video","uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&r(e,["videoBytes"],ne(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function yf(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],gf(n)),e}function Tf(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>yf(l))),r(e,["generatedVideos"],a)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function vf(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const a=i(t,["error"]);a!=null&&r(e,["error"],a);const l=i(t,["response","generateVideoResponse"]);return l!=null&&r(e,["response"],Tf(l)),e}function Cf(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],ne(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function _f(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],Cf(n)),e}function Ef(t){const e={},n=i(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>_f(l))),r(e,["generatedVideos"],a)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function so(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const a=i(t,["error"]);a!=null&&r(e,["error"],a);const l=i(t,["response"]);return l!=null&&r(e,["response"],Ef(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sf extends de{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;return o&&"httpOptions"in o&&(a=o.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:n.name,config:o})}async getVideosOperationInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=mf(e);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>so(f))}else{const c=pf(e);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>vf(f))}}async fetchPredictVideosOperationInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=hf(e);return a=S("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>so(d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Af(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function $o(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Af(n)),e}function If(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],$o(o)),e}function xf(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>If(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Mf(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],$o(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],xf(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Rf(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function wf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Pf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Nf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Rf(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],wf(s));const a=i(t,["fileData"]);a!=null&&r(e,["fileData"],Pf(a));const l=i(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function kf(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Nf(a))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Df(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const a=i(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Uf(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Lf(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Uf(n)),e}function Ff(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Vf(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ff(n)),e}function Gf(){return{}}function qf(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Df(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Lf(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Vf(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],Gf());const l=i(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=i(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function Jf(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ao(){return{}}function Bf(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const a=i(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=i(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function $f(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Bf(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function bf(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Hf(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],bf(o)),e}function Yf(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Wf(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const a=i(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=i(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Mf(At(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],kf($(h)));const g=i(t,["tools"]);if(e!==void 0&&g!=null){let M=Ae(g);Array.isArray(M)&&(M=M.map(L=>qf(Se(L)))),r(e,["setup","tools"],M)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Jf(y));const E=i(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],ao());const A=i(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&r(e,["setup","outputAudioTranscription"],ao());const I=i(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&r(e,["setup","realtimeInputConfig"],$f(I));const x=i(t,["contextWindowCompression"]);e!==void 0&&x!=null&&r(e,["setup","contextWindowCompression"],Hf(x));const P=i(t,["proactivity"]);return e!==void 0&&P!=null&&r(e,["setup","proactivity"],Yf(P)),n}function Kf(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],G(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Wf(s,n)),n}function Of(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&r(n,["expireTime"],s);const a=i(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&r(n,["newSessionExpireTime"],a);const l=i(e,["uses"]);n!==void 0&&l!=null&&r(n,["uses"],l);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],Kf(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&r(n,["fieldMask"],d),o}function zf(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Of(t,o,n)),n}function Zf(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xf(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function Qf(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=Xf(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];a&&d.push(a),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class jf extends de{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=zf(this.apiClient,e);a=S("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=Qf(u,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>Zf(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ep(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function tp(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function np(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],tp(n,e)),e}function op(t){const e={},n=i(t,["textInput"]);n!=null&&r(e,["textInput"],n);const o=i(t,["output"]);return o!=null&&r(e,["output"],o),e}function ip(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>op(s))),r(e,["examples","examples"],o)}return e}function rp(t,e){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&r(e,["displayName"],o),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=i(t,["epochCount"]);e!==void 0&&s!=null&&r(e,["tuningTask","hyperparameters","epochCount"],s);const a=i(t,["learningRateMultiplier"]);if(a!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=i(t,["batchSize"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","batchSize"],l);const u=i(t,["learningRate"]);return e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","learningRate"],u),n}function sp(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&r(e,["tuningTask","trainingData"],ip(o));const s=i(t,["config"]);return s!=null&&r(e,["config"],rp(s,e)),e}function ap(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function lp(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function up(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],lp(n,e)),e}function cp(t,e){const n={},o=i(t,["gcsUri"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function dp(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&r(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function fp(t,e){const n={},o=i(t,["validationDataset"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec"],dp(o,n));const s=i(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&r(e,["tunedModelDisplayName"],s);const a=i(t,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);const l=i(t,["epochCount"]);e!==void 0&&l!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=i(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(t,["adapterSize"]);if(e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function pp(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],cp(o,e));const s=i(t,["config"]);return s!=null&&r(e,["config"],fp(s,e)),e}function mp(t){const e={},n=i(t,["name"]);n!=null&&r(e,["model"],n);const o=i(t,["name"]);return o!=null&&r(e,["endpoint"],o),e}function bo(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["state"]);o!=null&&r(e,["state"],Co(o));const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const a=i(t,["tuningTask","startTime"]);a!=null&&r(e,["startTime"],a);const l=i(t,["tuningTask","completeTime"]);l!=null&&r(e,["endTime"],l);const u=i(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["description"]);d!=null&&r(e,["description"],d);const c=i(t,["baseModel"]);c!=null&&r(e,["baseModel"],c);const f=i(t,["_self"]);f!=null&&r(e,["tunedModel"],mp(f));const p=i(t,["distillationSpec"]);p!=null&&r(e,["distillationSpec"],p);const m=i(t,["experiment"]);m!=null&&r(e,["experiment"],m);const h=i(t,["labels"]);h!=null&&r(e,["labels"],h);const g=i(t,["pipelineJob"]);g!=null&&r(e,["pipelineJob"],g);const y=i(t,["satisfiesPzi"]);y!=null&&r(e,["satisfiesPzi"],y);const E=i(t,["satisfiesPzs"]);E!=null&&r(e,["satisfiesPzs"],E);const A=i(t,["serviceAccount"]);A!=null&&r(e,["serviceAccount"],A);const I=i(t,["tunedModelDisplayName"]);return I!=null&&r(e,["tunedModelDisplayName"],I),e}function hp(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>bo(a))),r(e,["tuningJobs"],s)}return e}function gp(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const a=i(t,["error"]);return a!=null&&r(e,["error"],a),e}function yp(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);s!=null&&r(e,["step"],s);const a=i(t,["endpoint"]);return a!=null&&r(e,["endpoint"],a),e}function Tp(t){const e={},n=i(t,["model"]);n!=null&&r(e,["model"],n);const o=i(t,["endpoint"]);o!=null&&r(e,["endpoint"],o);const s=i(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>yp(l))),r(e,["checkpoints"],a)}return e}function _t(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["state"]);o!=null&&r(e,["state"],Co(o));const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const a=i(t,["startTime"]);a!=null&&r(e,["startTime"],a);const l=i(t,["endTime"]);l!=null&&r(e,["endTime"],l);const u=i(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["error"]);d!=null&&r(e,["error"],d);const c=i(t,["description"]);c!=null&&r(e,["description"],c);const f=i(t,["baseModel"]);f!=null&&r(e,["baseModel"],f);const p=i(t,["tunedModel"]);p!=null&&r(e,["tunedModel"],Tp(p));const m=i(t,["supervisedTuningSpec"]);m!=null&&r(e,["supervisedTuningSpec"],m);const h=i(t,["tuningDataStats"]);h!=null&&r(e,["tuningDataStats"],h);const g=i(t,["encryptionSpec"]);g!=null&&r(e,["encryptionSpec"],g);const y=i(t,["partnerModelTuningSpec"]);y!=null&&r(e,["partnerModelTuningSpec"],y);const E=i(t,["distillationSpec"]);E!=null&&r(e,["distillationSpec"],E);const A=i(t,["experiment"]);A!=null&&r(e,["experiment"],A);const I=i(t,["labels"]);I!=null&&r(e,["labels"],I);const x=i(t,["pipelineJob"]);x!=null&&r(e,["pipelineJob"],x);const P=i(t,["satisfiesPzi"]);P!=null&&r(e,["satisfiesPzi"],P);const M=i(t,["satisfiesPzs"]);M!=null&&r(e,["satisfiesPzs"],M);const L=i(t,["serviceAccount"]);L!=null&&r(e,["serviceAccount"],L);const F=i(t,["tunedModelDisplayName"]);return F!=null&&r(e,["tunedModelDisplayName"],F),e}function vp(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>_t(a))),r(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cp extends de{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Fe(ce.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const o=await this.tuneMldevInternal(n);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:dt.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ap(e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>_t(f))}else{const c=ep(e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>bo(f))}}async listInternal(e){var n,o,s,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=up(e);return u=S("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=vp(f),m=new Ln;return Object.assign(m,p),m})}else{const c=np(e);return u=S("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=hp(f),m=new Ln;return Object.assign(m,p),m})}}async tuneInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=pp(e);return a=S("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>_t(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sp(e);return a=S("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>gp(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _p{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ep=1024*1024*8,Sp=3,Ap=1e3,Ip=2,ot="x-goog-upload-status";async function xp(t,e,n){var o,s,a;let l=0,u=0,d=new ft(new Response),c="upload";for(l=t.size;u<l;){const p=Math.min(Ep,l-u),m=t.slice(u,u+p);u+p>=l&&(c+=", finalize");let h=0,g=Ap;for(;h<Sp&&(d=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[ot]));)h++,await Rp(g),g=g*Ip;if(u+=p,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[ot])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[ot])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Mp(t){return{size:t.size,type:t.type}}function Rp(t){return new Promise(e=>setTimeout(e,t))}class wp{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xp(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pp{create(e,n,o){return new Np(e,n,o)}}class Np{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lo="x-goog-api-key";class kp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(lo)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(lo,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dp="gl-node/";class uo{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=xi(e,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new kp(this.apiKey);this.apiClient=new Kd({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Dp+"web",uploader:new wp,downloader:new _p}),this.models=new ff(this.apiClient),this.live=new af(this.apiClient,s,new Pp),this.batches=new es(this.apiClient),this.chats=new ia(this.models,this.apiClient),this.caches=new ta(this.apiClient),this.files=new ya(this.apiClient),this.operations=new Sf(this.apiClient),this.authTokens=new jf(this.apiClient),this.tunings=new Cp(this.apiClient)}}const Up={low:"Identify only the most essential and defining grammar patterns of the sentence. Focus on major conjunctions, verb conjugations (tense/politeness), and sentence-ending particles. Avoid breaking down common compound words or very simple phrases.",medium:"Provide a balanced analysis. Identify all major grammar patterns, common set phrases, and important vocabulary usage. This is the standard level of detail suitable for most learners.",high:"Perform an exhaustive analysis. Identify every possible grammatical pattern, nuance, idiomatic expression, and compound word structure, no matter how small or common. Deconstruct everything for a very detailed view for advanced study."};function Lp(t){return`You are an advanced linguistic analysis model, acting as a patient, insightful teacher of the Japanese language.
Your primary task is to take a single Japanese sentence and produce a detailed, structured analysis according to the specified JSON schema. Your explanations should be clear enough for a language learner.

Detailed Task Breakdown:
1.  **Sentence Analysis**: Deconstruct the input sentence into its smallest meaningful components (words, particles, etc.).
    For each component in the 'analysis' array:
    *   **Grammatical Category**: Assign a highly specific category. Use the format \`BASE_TYPE-FORM-TENSE-POLARITY\`.
        *   Examples: \`VERB_GODAN-TE-PAST-AFFIRMATIVE\`, \`ADJECTIVE_I-PLAIN-PRESENT-NEGATIVE\`, \`NOUN_COMMON\`.
        *   Available Categories: NOUN_COMMON, NOUN_PROPER, NOUN_PRONOUN, NOUN_COUNTER, VERB_ICHIDAN, VERB_GODAN, VERB_IRREGULAR, VERB_SURU, ADJECTIVE_I, ADJECTIVE_NA, ADVERB, PARTICLE, AUXILIARY_VERB, GRAMMATICAL_AUXILIARY, CONJUNCTION, INTERJECTION, SUFFIX, PREFIX, PUNCTUATION.
    *   **Reading**: Provide the reading in Hiragana or Katakana.
    *   **English Equivalent**: Provide a concise English meaning.
    *   **Pitch Accent**: THIS IS A CRITICAL, MANDATORY FIELD.
        *   Provide the standard Tokyo-dialect pitch accent as a string of 'H' (High) and 'L' (Low).
        *   **RULE: The length of the 'pitch_accent' string MUST EXACTLY match the character length of the 'reading' string.**
        *   Example: If 'reading' is 'ねこ' (2 chars), 'pitch_accent' MUST be 'LH' (2 chars).
        *   Example: If 'reading' is 'ともだち' (4 chars), 'pitch_accent' (heiban) MUST be 'LHHH' (4 chars).
        *   For particles or single-mora words with no accent drop, use the appropriate single letter ('H' or 'L').
        *   If pitch is truly not applicable (like punctuation), provide an empty string "". DO NOT OMIT THE FIELD. Avoid common pitfalls like providing a pattern shorter than the reading.

2.  **Full Translation**: Provide a natural, fluent English translation of the entire sentence.

3.  **Grammar & Phrase Explanations**: In the 'grammar_patterns' array, identify and explain all notable grammar points, set phrases, or nuanced vocabulary.
    *   **Analysis Thoroughness Level: ${t.toUpperCase()}**
    *   **Instruction: ${Up[t]}**
    *   For each pattern, provide its name, a clear explanation for a learner, and the 'constituent_indices' that form the pattern in the 'analysis' array. This section must be comprehensive according to the specified thoroughness level.

Input is a single Japanese sentence. You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function Fp(){return`You are a Japanese language teaching assistant.
Your task is to provide 2-3 simple, distinct, and pedagogically useful example sentences for the Japanese grammar pattern provided as the user input.

For each example sentence, you MUST provide:
1.  'japanese': The full sentence in Japanese, using Kanji where appropriate.
2.  'reading': The complete furigana reading of the sentence in Hiragana.
3.  'english': A natural and accurate English translation.
4.  'highlight_indices': A two-element array \`[startIndex, endIndex]\` indicating the exact location of the grammar pattern within the 'japanese' string. 'startIndex' is the zero-based index of the first character of the pattern, and 'endIndex' is the zero-based index of the character immediately AFTER the last character of the pattern.

Example for pattern "〜について":
If the user input is "〜について" and a sentence is "日本の文化について話します。", the pattern "について" starts at index 5 and ends at index 9. So, 'highlight_indices' would be [5, 9].

Respond ONLY with a JSON object that adheres to the provided schema. Do not add any extra text or markdown fences.`}function Vp(){return`You are an expert web content extraction model. You will be given the full raw HTML of a webpage.
Your task is to perform the following actions:
1.  Identify the main article or content body of the HTML. Ignore navigation menus, sidebars, advertisements, footers, comment sections, and other boilerplate content.
2.  Extract the main title of the article from elements like \`<title>\` or \`<h1>\`.
3.  Extract the full text of the article.
4.  The extracted text MUST be in Japanese. If the main content is not in Japanese, you must treat it as if no content was found.
5.  Clean the extracted text by removing any remaining HTML tags and unnecessary whitespace, presenting it as clean paragraphs separated by single newline characters.

You must respond ONLY with a JSON object that adheres to the specified schema.
If no valid Japanese article text can be found on the page, the 'japanese_text' field in your JSON response must be an empty string. The 'title' can still be populated if found.
`}function Gp(){return`You are an expert Japanese lexicographer and teacher.
Your task is to take a single Japanese Kanji character and provide a detailed, structured analysis according to the specified JSON schema.

Detailed Task Breakdown:
1.  **Character Identification**: Confirm the Kanji character.
2.  **Meaning**: Provide the most common and important English meanings.
3.  **Readings**:
    *   **On'yomi**: Provide the Sino-Japanese readings in KATAKANA. If there are multiple, separate them with a comma.
    *   **Kun'yomi**: Provide the native Japanese readings in HIRAGANA. If there are multiple, separate them with a comma.
4.  **Details**:
    *   **JLPT Level**: State the JLPT level (N5, N4, N3, N2, N1). If it's not on the JLPT list, use "N/A".
    *   **Stroke Count**: Provide the correct stroke count for the character.
5.  **Example Words**: Provide 2-3 common and useful example words that use this Kanji. For each example, give the word, its reading in hiragana, and its English meaning.

Input is a single Kanji character. You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function qp(){return`You are a Japanese language dictionary and teacher.
Your task is to take a Japanese word and its reading, and provide a detailed, structured analysis according to the specified JSON schema.

Detailed Task Breakdown:
1.  **Word Identification**: Confirm the word and its reading.
2.  **Part of Speech**: Provide the primary part of speech for the word (e.g., 'Noun', 'Ichidan verb', 'Na-adjective').
3.  **Definition**: Provide a clear and concise English definition.
4.  **Example Sentences**: Provide 2-3 distinct and useful example sentences that use this word. For each example, give the full Japanese sentence, its complete reading in hiragana, and its English translation.

The user's input will be in the format: \`Analyze the word "WORD" with the reading "READING".\`

You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function Jp(){return`You are an expert Japanese language curriculum designer, specializing in creating JLPT-style reading comprehension questions.
You will be given a Japanese text as input.

Your task is to perform the following actions:
1.  **Analyze Difficulty**: Read the entire text and analyze its vocabulary, kanji, and grammatical complexity. Based on this analysis, determine the most appropriate JLPT level this text corresponds to (N5, N4, N3, N2, or N1).
2.  **Create Quiz**: Generate a short, multiple-choice quiz of 3-5 questions. The questions should be in English and test the reader's understanding of the text's content, purpose, and nuance. Do not ask about individual vocabulary words.
3.  **Generate Plausible Options**: For each question, create four possible answers (A, B, C, D). One answer must be correct, and the other three must be plausible but incorrect distractors based on the text.
4.  **Provide Explanations**: For each question, provide a brief explanation for why the correct answer is right, referencing details from the text.

You MUST respond ONLY with a JSON object that adheres to the specified schema. Do not add any conversational text or markdown fences.`}const Bp={type:"OBJECT",properties:{original_japanese_sentence:{type:"STRING",description:"The original Japanese sentence provided by the user."},analysis:{type:"ARRAY",description:"An array of objects, each representing a segmented component of the Japanese sentence.",items:{type:"OBJECT",properties:{japanese_segment:{type:"STRING",description:"The individual Japanese segment (word, particle, etc.)."},reading:{type:"STRING",description:"The reading of the Japanese segment in Hiragana or Katakana."},category:{type:"STRING",description:"A highly specific grammatical category label for the segment (e.g., 'NOUN_COMMON', 'VERB_ICHIDAN-TE-PAST-AFFIRMATIVE')."},english_equivalent:{type:"STRING",description:"A direct, concise English equivalent of the segment."},pitch_accent:{type:"STRING",description:`CRITICAL: A string representing the pitch accent pattern using 'H' for high and 'L' for low. This string's length MUST exactly match the character length of the 'reading' field. For heiban words, use 'L' followed by all 'H's (e.g., reading 'ともだち' -> pitch 'LHHH'). For non-applicable segments like punctuation, this MUST be an empty string "". Do not omit this field.`}},required:["japanese_segment","reading","category","english_equivalent","pitch_accent"]}},grammar_patterns:{type:"ARRAY",description:"A comprehensive array of identified grammatical patterns, idiomatic phrases, or nuanced vocabulary in the sentence.",items:{type:"OBJECT",properties:{pattern_name:{type:"STRING",description:"The name of the grammatical pattern or the phrase being explained (e.g., '〜なければならない', 'よろしくお願いします')."},explanation:{type:"STRING",description:"A detailed explanation of the pattern's meaning, usage, and nuance for a language learner."},constituent_indices:{type:"ARRAY",description:"An array of zero-based indices from the 'analysis' array that form this pattern.",items:{type:"NUMBER"}}},required:["pattern_name","explanation","constituent_indices"]}},english_translation:{type:"STRING",description:"The complete, natural-sounding English translation of the entire Japanese sentence."}},required:["original_japanese_sentence","analysis","grammar_patterns","english_translation"]},$p={type:"ARRAY",description:"An array of 2-3 simple example sentences for the given grammar pattern.",items:{type:"OBJECT",properties:{japanese:{type:"STRING",description:"The full example sentence in Japanese, including Kanji."},reading:{type:"STRING",description:"The complete reading of the Japanese sentence in Hiragana."},english:{type:"STRING",description:"The natural English translation of the sentence."},highlight_indices:{type:"ARRAY",description:"A two-element array [startIndex, endIndex] indicating the character position of the grammar pattern within the 'japanese' string. startIndex is inclusive, endIndex is exclusive.",items:{type:"NUMBER"},minItems:2,maxItems:2}},required:["japanese","reading","english","highlight_indices"]}},bp={type:"OBJECT",properties:{title:{type:"STRING",description:"The extracted main title of the article. Should be an empty string if no title is found."},japanese_text:{type:"STRING",description:"The extracted and cleaned main Japanese text of the article, formatted with paragraphs separated by newlines. Should be an empty string if no Japanese article is found."}},required:["title","japanese_text"]},Hp={type:"OBJECT",properties:{kanji:{type:"STRING",description:"The Kanji character that was analyzed."},meaning:{type:"STRING",description:"The primary English meaning(s) of the Kanji."},onyomi:{type:"STRING",description:"The On'yomi (Sino-Japanese) reading(s) of the Kanji in Katakana, separated by commas if multiple exist."},kunyomi:{type:"STRING",description:"The Kun'yomi (native Japanese) reading(s) of the Kanji in Hiragana, separated by commas if multiple exist."},jlpt_level:{type:"STRING",description:"The JLPT proficiency level associated with this Kanji (e.g., 'N5', 'N1'). Should be 'N/A' if not applicable."},stroke_count:{type:"NUMBER",description:"The number of strokes required to write the Kanji."},example_words:{type:"ARRAY",description:"An array of 2-3 common words that use this Kanji.",items:{type:"OBJECT",properties:{word:{type:"STRING",description:"The example word in Japanese (using Kanji)."},reading:{type:"STRING",description:"The reading of the example word in Hiragana."},meaning:{type:"STRING",description:"The English meaning of the example word."}},required:["word","reading","meaning"]}}},required:["kanji","meaning","onyomi","kunyomi","jlpt_level","stroke_count","example_words"]},Yp={type:"OBJECT",description:"A detailed analysis of a single Japanese word.",properties:{word:{type:"STRING",description:"The word that was analyzed."},reading:{type:"STRING",description:"The hiragana reading of the word."},part_of_speech:{type:"STRING",description:"The primary grammatical category of the word (e.g., 'Noun', 'Ichidan verb')."},definition:{type:"STRING",description:"A clear and concise English definition of the word."},example_sentences:{type:"ARRAY",description:"An array of 2-3 useful example sentences.",items:{type:"OBJECT",properties:{japanese:{type:"STRING",description:"The full example sentence in Japanese."},reading:{type:"STRING",description:"The complete hiragana reading of the example sentence."},english:{type:"STRING",description:"The English translation of the example sentence."}},required:["japanese","reading","english"]}}},required:["word","reading","part_of_speech","definition","example_sentences"]},Wp={type:"OBJECT",description:"An AI-generated reading comprehension quiz based on a Japanese text.",properties:{estimated_jlpt_level:{type:"STRING",description:"The estimated JLPT level of the provided text (e.g., N5, N4, N3, N2, N1)."},questions:{type:"ARRAY",description:"An array of 3-5 multiple-choice questions in English about the text.",items:{type:"OBJECT",properties:{question:{type:"STRING",description:"The text of the comprehension question."},options:{type:"ARRAY",description:"An array of 4 string options for the multiple-choice question.",items:{type:"STRING"}},correct_answer_index:{type:"NUMBER",description:"The 0-based index of the correct answer in the 'options' array."},explanation:{type:"STRING",description:"A brief explanation of why the correct answer is right, referencing the original text."}},required:["question","options","correct_answer_index","explanation"]}}},required:["estimated_jlpt_level","questions"]},qe=new Map,Me=async t=>{if(t){const{data:{session:n}}=await t.auth.getSession();if(n)try{const{data:o,error:s}=await t.functions.invoke("get-user-api-key");if(s)throw s;if(o!=null&&o.apiKey)return new uo({apiKey:o.apiKey})}catch(o){console.warn("Could not retrieve API key from account. Falling back to local/default keys.",o)}}const e=await Ho();if(e.userApiKey)return new uo({apiKey:e.userApiKey});throw new Error("API Key is not configured. Please add your key in the settings menu or ensure the default key is present.")},Re=t=>{var s;const e=t.text;if(typeof e!="string"||e.trim()===""){const a=(s=t.candidates)==null?void 0:s[0];throw a&&a.finishReason!=="STOP"?new Error(`The AI model's response was incomplete. Reason: ${a.finishReason}.`):new Error("The AI model returned an empty response.")}const n=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,o=e.trim().match(n);return o?o[1].trim():e.trim()},we=t=>{const[e,n]=Y.useState(!1),[o,s]=Y.useState(null),[a,l]=Y.useState(null),u=Y.useRef(!1),d=Y.useCallback(async(...f)=>{u.current=!0,n(!0),s(null),l(null);try{const p=await t(...f);return u.current&&l(p),p}catch(p){u.current&&s(p)}finally{u.current&&n(!1)}},[t]),c=Y.useCallback(()=>{u.current=!1,n(!1),s(null),l(null)},[]);return{isLoading:e,error:o,data:a,execute:d,reset:c}},Kp=(t,e,n,o=!1)=>{const s=`${n}:${e}`;if(!o&&qe.has(s))return qe.get(s);const a=(async()=>{try{const l=await Me(t),u=e.trim();if(!u)return{original_japanese_sentence:e,analysis:[],grammar_patterns:[],english_translation:"(Empty sentence)"};if(u.replace(/[「」『』。？！、\s]/g,"").length===0)return{original_japanese_sentence:e,analysis:[{japanese_segment:u,reading:u,category:"PUNCTUATION",english_equivalent:"Punctuation/Quotes",pitch_accent:""}],grammar_patterns:[],english_translation:"(Sentence consists only of punctuation)"};const c=await l.models.generateContent({model:"gemini-2.5-flash",contents:u,config:{systemInstruction:Lp(n),responseMimeType:"application/json",responseSchema:Bp,temperature:.1,seed:42}}),f=Re(c),p=JSON.parse(f),m=Array.isArray(p)?p[0]:p;return m.original_japanese_sentence=e,m}catch(l){throw qe.delete(s),l}})();return qe.set(s,a),a},Op=async(t,e)=>{const o=await(await Me(t)).models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:Fp(),responseMimeType:"application/json",responseSchema:$p,temperature:.01,seed:42}}),s=Re(o);return JSON.parse(s)},zp=async(t,e)=>{const o=await(await Me(t)).models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:Gp(),responseMimeType:"application/json",responseSchema:Hp,temperature:0,seed:42}}),s=Re(o);return JSON.parse(s)},Zp=async(t,e,n)=>{const s=await(await Me(t)).models.generateContent({model:"gemini-2.5-flash",contents:`Analyze the word "${e}" with the reading "${n}".`,config:{systemInstruction:qp(),responseMimeType:"application/json",responseSchema:Yp,temperature:.1,seed:42}}),a=Re(s);return JSON.parse(a)},Xp=async(t,e)=>{const o=await(await Me(t)).models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:Jp(),responseMimeType:"application/json",responseSchema:Wp,temperature:.3,seed:42}}),s=Re(o);return JSON.parse(s)},Qp=async(t,e)=>{let n="";const o=[f=>`https://api.allorigins.win/raw?url=${encodeURIComponent(f)}`,f=>`https://corsproxy.io/?${f}`];let a=null;for(const f of o){const p=f(e),m=new AbortController,h=setTimeout(()=>m.abort(),15e3);try{const g=await fetch(p,{signal:m.signal});if(clearTimeout(h),!g.ok)throw g.status===408||g.status===504?new Error("Proxy timed out waiting for the target website."):g.status===404?new Error("The requested URL was not found (404). Please check the URL."):g.status===403?new Error("Access to this website is forbidden (403). It may be blocking access."):g.status>=500?new Error("The website's server encountered an error. Please try again later."):new Error(`Failed to fetch content (status: ${g.status}).`);const y=await g.text();if(!y||y.trim()==="")throw new Error("Retrieved empty content. The page might be protected or require JavaScript.");n=y,a=null;break}catch(g){clearTimeout(h);const y=new URL(p).hostname;console.warn(`Proxy ${y} failed. Trying next...`,g),a=g instanceof Error?g:new Error("An unknown fetch error occurred"),a.name==="AbortError"&&(a=new Error(`The request to ${y} timed out.`))}}if(!n)throw new Error(`Failed to fetch from all proxies. Last error: ${(a==null?void 0:a.message)||"Unknown issue."}`);const u=await(await Me(t)).models.generateContent({model:"gemini-2.5-flash",contents:n,config:{systemInstruction:Vp(),responseMimeType:"application/json",responseSchema:bp,temperature:0,seed:42}}),d=Re(u),c=JSON.parse(d);if(!c.japanese_text||c.japanese_text.trim()==="")throw new Error("No Japanese article content could be found at the provided URL.");return c},em=()=>{const{supabase:t}=Ee(),e=Y.useCallback((n,o,s=!1)=>Kp(t,n,o,s),[t]);return we(e)},tm=()=>{const{supabase:t}=Ee(),e=Y.useCallback(n=>Op(t,n),[t]);return we(e)},nm=()=>{const{supabase:t}=Ee(),e=Y.useCallback(n=>zp(t,n),[t]);return we(e)},om=()=>{const{supabase:t}=Ee(),e=Y.useCallback((n,o)=>Zp(t,n,o),[t]);return we(e)},im=()=>{const{supabase:t}=Ee(),e=Y.useCallback(n=>Xp(t,n),[t]);return we(e)},rm=()=>{const{supabase:t}=Ee(),e=Y.useCallback(n=>Qp(t,n),[t]);return we(e)};export{im as a,em as b,om as c,tm as d,nm as e,rm as u};
