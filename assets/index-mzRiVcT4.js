(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function Ng(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ra={exports:{}},vi={},ia={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud;function kg(){if(Ud)return ge;Ud=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function T(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,M={};function D(N,L,he){this.props=N,this.context=L,this.refs=M,this.updater=he||S}D.prototype.isReactComponent={},D.prototype.setState=function(N,L){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,L,"setState")},D.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function H(){}H.prototype=D.prototype;function $(N,L,he){this.props=N,this.context=L,this.refs=M,this.updater=he||S}var q=$.prototype=new H;q.constructor=$,k(q,D.prototype),q.isPureReactComponent=!0;var J=Array.isArray,K=Object.prototype.hasOwnProperty,Q={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function xe(N,L,he){var ve,Ee={},Se=null,Re=null;if(L!=null)for(ve in L.ref!==void 0&&(Re=L.ref),L.key!==void 0&&(Se=""+L.key),L)K.call(L,ve)&&!te.hasOwnProperty(ve)&&(Ee[ve]=L[ve]);var ke=arguments.length-2;if(ke===1)Ee.children=he;else if(1<ke){for(var Ve=Array(ke),gt=0;gt<ke;gt++)Ve[gt]=arguments[gt+2];Ee.children=Ve}if(N&&N.defaultProps)for(ve in ke=N.defaultProps,ke)Ee[ve]===void 0&&(Ee[ve]=ke[ve]);return{$$typeof:i,type:N,key:Se,ref:Re,props:Ee,_owner:Q.current}}function se(N,L){return{$$typeof:i,type:N.type,key:L,ref:N.ref,props:N.props,_owner:N._owner}}function pe(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function Be(N){var L={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return L[he]})}var ye=/\/+/g;function Ne(N,L){return typeof N=="object"&&N!==null&&N.key!=null?Be(""+N.key):L.toString(36)}function _e(N,L,he,ve,Ee){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(Se){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case i:case t:Re=!0}}if(Re)return Re=N,Ee=Ee(Re),N=ve===""?"."+Ne(Re,0):ve,J(Ee)?(he="",N!=null&&(he=N.replace(ye,"$&/")+"/"),_e(Ee,L,he,"",function(gt){return gt})):Ee!=null&&(pe(Ee)&&(Ee=se(Ee,he+(!Ee.key||Re&&Re.key===Ee.key?"":(""+Ee.key).replace(ye,"$&/")+"/")+N)),L.push(Ee)),1;if(Re=0,ve=ve===""?".":ve+":",J(N))for(var ke=0;ke<N.length;ke++){Se=N[ke];var Ve=ve+Ne(Se,ke);Re+=_e(Se,L,he,Ve,Ee)}else if(Ve=T(N),typeof Ve=="function")for(N=Ve.call(N),ke=0;!(Se=N.next()).done;)Se=Se.value,Ve=ve+Ne(Se,ke++),Re+=_e(Se,L,he,Ve,Ee);else if(Se==="object")throw L=String(N),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Re}function je(N,L,he){if(N==null)return N;var ve=[],Ee=0;return _e(N,ve,"","",function(Se){return L.call(he,Se,Ee++)}),ve}function Ye(N){if(N._status===-1){var L=N._result;L=L(),L.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=L)}if(N._status===1)return N._result.default;throw N._result}var oe={current:null},U={transition:null},W={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:U,ReactCurrentOwner:Q};function z(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:je,forEach:function(N,L,he){je(N,function(){L.apply(this,arguments)},he)},count:function(N){var L=0;return je(N,function(){L++}),L},toArray:function(N){return je(N,function(L){return L})||[]},only:function(N){if(!pe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ge.Component=D,ge.Fragment=e,ge.Profiler=s,ge.PureComponent=$,ge.StrictMode=o,ge.Suspense=g,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,ge.act=z,ge.cloneElement=function(N,L,he){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ve=k({},N.props),Ee=N.key,Se=N.ref,Re=N._owner;if(L!=null){if(L.ref!==void 0&&(Se=L.ref,Re=Q.current),L.key!==void 0&&(Ee=""+L.key),N.type&&N.type.defaultProps)var ke=N.type.defaultProps;for(Ve in L)K.call(L,Ve)&&!te.hasOwnProperty(Ve)&&(ve[Ve]=L[Ve]===void 0&&ke!==void 0?ke[Ve]:L[Ve])}var Ve=arguments.length-2;if(Ve===1)ve.children=he;else if(1<Ve){ke=Array(Ve);for(var gt=0;gt<Ve;gt++)ke[gt]=arguments[gt+2];ve.children=ke}return{$$typeof:i,type:N.type,key:Ee,ref:Se,props:ve,_owner:Re}},ge.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},ge.createElement=xe,ge.createFactory=function(N){var L=xe.bind(null,N);return L.type=N,L},ge.createRef=function(){return{current:null}},ge.forwardRef=function(N){return{$$typeof:m,render:N}},ge.isValidElement=pe,ge.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:Ye}},ge.memo=function(N,L){return{$$typeof:h,type:N,compare:L===void 0?null:L}},ge.startTransition=function(N){var L=U.transition;U.transition={};try{N()}finally{U.transition=L}},ge.unstable_act=z,ge.useCallback=function(N,L){return oe.current.useCallback(N,L)},ge.useContext=function(N){return oe.current.useContext(N)},ge.useDebugValue=function(){},ge.useDeferredValue=function(N){return oe.current.useDeferredValue(N)},ge.useEffect=function(N,L){return oe.current.useEffect(N,L)},ge.useId=function(){return oe.current.useId()},ge.useImperativeHandle=function(N,L,he){return oe.current.useImperativeHandle(N,L,he)},ge.useInsertionEffect=function(N,L){return oe.current.useInsertionEffect(N,L)},ge.useLayoutEffect=function(N,L){return oe.current.useLayoutEffect(N,L)},ge.useMemo=function(N,L){return oe.current.useMemo(N,L)},ge.useReducer=function(N,L,he){return oe.current.useReducer(N,L,he)},ge.useRef=function(N){return oe.current.useRef(N)},ge.useState=function(N){return oe.current.useState(N)},ge.useSyncExternalStore=function(N,L,he){return oe.current.useSyncExternalStore(N,L,he)},ge.useTransition=function(){return oe.current.useTransition()},ge.version="18.3.1",ge}var bd;function La(){return bd||(bd=1,ia.exports=kg()),ia.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od;function Ag(){if(Od)return vi;Od=1;var i=La(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function f(m,g,h){var x,_={},T=null,S=null;h!==void 0&&(T=""+h),g.key!==void 0&&(T=""+g.key),g.ref!==void 0&&(S=g.ref);for(x in g)o.call(g,x)&&!a.hasOwnProperty(x)&&(_[x]=g[x]);if(m&&m.defaultProps)for(x in g=m.defaultProps,g)_[x]===void 0&&(_[x]=g[x]);return{$$typeof:t,type:m,key:T,ref:S,props:_,_owner:s.current}}return vi.Fragment=e,vi.jsx=f,vi.jsxs=f,vi}var zd;function Rg(){return zd||(zd=1,ra.exports=Ag()),ra.exports}var v=Rg(),bo={},oa={exports:{}},mt={},sa={exports:{}},la={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd;function Mg(){return Bd||(Bd=1,function(i){function t(U,W){var z=U.length;U.push(W);e:for(;0<z;){var N=z-1>>>1,L=U[N];if(0<s(L,W))U[N]=W,U[z]=L,z=N;else break e}}function e(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var W=U[0],z=U.pop();if(z!==W){U[0]=z;e:for(var N=0,L=U.length,he=L>>>1;N<he;){var ve=2*(N+1)-1,Ee=U[ve],Se=ve+1,Re=U[Se];if(0>s(Ee,z))Se<L&&0>s(Re,Ee)?(U[N]=Re,U[Se]=z,N=Se):(U[N]=Ee,U[ve]=z,N=ve);else if(Se<L&&0>s(Re,z))U[N]=Re,U[Se]=z,N=Se;else break e}}return W}function s(U,W){var z=U.sortIndex-W.sortIndex;return z!==0?z:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],h=[],x=1,_=null,T=3,S=!1,k=!1,M=!1,D=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(U){for(var W=e(h);W!==null;){if(W.callback===null)o(h);else if(W.startTime<=U)o(h),W.sortIndex=W.expirationTime,t(g,W);else break;W=e(h)}}function J(U){if(M=!1,q(U),!k)if(e(g)!==null)k=!0,Ye(K);else{var W=e(h);W!==null&&oe(J,W.startTime-U)}}function K(U,W){k=!1,M&&(M=!1,H(xe),xe=-1),S=!0;var z=T;try{for(q(W),_=e(g);_!==null&&(!(_.expirationTime>W)||U&&!Be());){var N=_.callback;if(typeof N=="function"){_.callback=null,T=_.priorityLevel;var L=N(_.expirationTime<=W);W=i.unstable_now(),typeof L=="function"?_.callback=L:_===e(g)&&o(g),q(W)}else o(g);_=e(g)}if(_!==null)var he=!0;else{var ve=e(h);ve!==null&&oe(J,ve.startTime-W),he=!1}return he}finally{_=null,T=z,S=!1}}var Q=!1,te=null,xe=-1,se=5,pe=-1;function Be(){return!(i.unstable_now()-pe<se)}function ye(){if(te!==null){var U=i.unstable_now();pe=U;var W=!0;try{W=te(!0,U)}finally{W?Ne():(Q=!1,te=null)}}else Q=!1}var Ne;if(typeof $=="function")Ne=function(){$(ye)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,je=_e.port2;_e.port1.onmessage=ye,Ne=function(){je.postMessage(null)}}else Ne=function(){D(ye,0)};function Ye(U){te=U,Q||(Q=!0,Ne())}function oe(U,W){xe=D(function(){U(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_continueExecution=function(){k||S||(k=!0,Ye(K))},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_getFirstCallbackNode=function(){return e(g)},i.unstable_next=function(U){switch(T){case 1:case 2:case 3:var W=3;break;default:W=T}var z=T;T=W;try{return U()}finally{T=z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=T;T=U;try{return W()}finally{T=z}},i.unstable_scheduleCallback=function(U,W,z){var N=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?N+z:N):z=N,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=z+L,U={id:x++,callback:W,priorityLevel:U,startTime:z,expirationTime:L,sortIndex:-1},z>N?(U.sortIndex=z,t(h,U),e(g)===null&&U===e(h)&&(M?(H(xe),xe=-1):M=!0,oe(J,z-N))):(U.sortIndex=L,t(g,U),k||S||(k=!0,Ye(K))),U},i.unstable_shouldYield=Be,i.unstable_wrapCallback=function(U){var W=T;return function(){var z=T;T=W;try{return U.apply(this,arguments)}finally{T=z}}}}(la)),la}var Gd;function Pg(){return Gd||(Gd=1,sa.exports=Mg()),sa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function Dg(){if($d)return mt;$d=1;var i=La(),t=Pg();function e(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function a(n,r){f(n,r),f(n+"Capture",r)}function f(n,r){for(s[n]=r,n=0;n<r.length;n++)o.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function T(n){return g.call(_,n)?!0:g.call(x,n)?!1:h.test(n)?_[n]=!0:(x[n]=!0,!1)}function S(n,r,l,d){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,r,l,d){if(r===null||typeof r>"u"||S(n,r,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function M(n,r,l,d,p,y,C){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=n,this.type=r,this.sanitizeURL=y,this.removeEmptyString=C}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new M(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];D[r]=new M(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new M(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new M(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new M(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new M(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new M(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new M(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new M(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function $(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(H,$);D[r]=new M(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(H,$);D[r]=new M(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(H,$);D[r]=new M(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new M(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new M(n,1,!1,n.toLowerCase(),null,!0,!0)});function q(n,r,l,d){var p=D.hasOwnProperty(r)?D[r]:null;(p!==null?p.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,l,p,d)&&(l=null),d||p===null?T(r)&&(l===null?n.removeAttribute(r):n.setAttribute(r,""+l)):p.mustUseProperty?n[p.propertyName]=l===null?p.type===3?!1:"":l:(r=p.attributeName,d=p.attributeNamespace,l===null?n.removeAttribute(r):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?n.setAttributeNS(d,r,l):n.setAttribute(r,l))))}var J=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),Q=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Be=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),U=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var z=Object.assign,N;function L(n){if(N===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+n}var he=!1;function ve(n,r){if(!n||he)return"";he=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(P){var d=P}Reflect.construct(n,[],r)}else{try{r.call()}catch(P){d=P}n.call(r.prototype)}else{try{throw Error()}catch(P){d=P}n()}}catch(P){if(P&&d&&typeof P.stack=="string"){for(var p=P.stack.split(`
`),y=d.stack.split(`
`),C=p.length-1,E=y.length-1;1<=C&&0<=E&&p[C]!==y[E];)E--;for(;1<=C&&0<=E;C--,E--)if(p[C]!==y[E]){if(C!==1||E!==1)do if(C--,E--,0>E||p[C]!==y[E]){var w=`
`+p[C].replace(" at new "," at ");return n.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",n.displayName)),w}while(1<=C&&0<=E);break}}}finally{he=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?L(n):""}function Ee(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=ve(n.type,!1),n;case 11:return n=ve(n.type.render,!1),n;case 1:return n=ve(n.type,!0),n;default:return""}}function Se(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case te:return"Fragment";case Q:return"Portal";case se:return"Profiler";case xe:return"StrictMode";case Ne:return"Suspense";case _e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Be:return(n.displayName||"Context")+".Consumer";case pe:return(n._context.displayName||"Context")+".Provider";case ye:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case je:return r=n.displayName||null,r!==null?r:Se(n.type)||"Memo";case Ye:r=n._payload,n=n._init;try{return Se(n(r))}catch{}}return null}function Re(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(r);case 8:return r===xe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ke(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ve(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gt(n){var r=Ve(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),d=""+n[r];if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return p.call(this)},set:function(C){d=""+C,y.call(this,C)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ni(n){n._valueTracker||(n._valueTracker=gt(n))}function $a(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return n&&(d=Ve(n)?n.checked?"true":"false":n.value),n=d,n!==l?(r.setValue(n),!0):!1}function ki(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function cs(n,r){var l=r.checked;return z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Ha(n,r){var l=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;l=ke(r.value!=null?r.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function qa(n,r){r=r.checked,r!=null&&q(n,"checked",r,!1)}function ds(n,r){qa(n,r);var l=ke(r.value),d=r.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?fs(n,r.type,l):r.hasOwnProperty("defaultValue")&&fs(n,r.type,ke(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Wa(n,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,l||r===n.value||(n.value=r),n.defaultValue=r}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function fs(n,r,l){(r!=="number"||ki(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Dr=Array.isArray;function Wn(n,r,l,d){if(n=n.options,r){r={};for(var p=0;p<l.length;p++)r["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=r.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&d&&(n[l].defaultSelected=!0)}else{for(l=""+ke(l),r=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}r!==null||n[p].disabled||(r=n[p])}r!==null&&(r.selected=!0)}}function ps(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(e(91));return z({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ja(n,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(e(92));if(Dr(l)){if(1<l.length)throw Error(e(93));l=l[0]}r=l}r==null&&(r=""),l=r}n._wrapperState={initialValue:ke(l)}}function Ya(n,r){var l=ke(r.value),d=ke(r.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),r.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function Ja(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Ka(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ms(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Ka(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ai,Za=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,d,p){MSApp.execUnsafeLocalFunction(function(){return n(r,l,d,p)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ai.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Lr(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mm=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(n){Mm.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Fr[r]=Fr[n]})});function Qa(n,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||Fr.hasOwnProperty(n)&&Fr[n]?(""+r).trim():r+"px"}function Xa(n,r){n=n.style;for(var l in r)if(r.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Qa(l,r[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,p):n[l]=p}}var Pm=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hs(n,r){if(r){if(Pm[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(e(61))}if(r.style!=null&&typeof r.style!="object")throw Error(e(62))}}function gs(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ys=null;function vs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xs=null,jn=null,Yn=null;function eu(n){if(n=ri(n)){if(typeof xs!="function")throw Error(e(280));var r=n.stateNode;r&&(r=Qi(r),xs(n.stateNode,n.type,r))}}function tu(n){jn?Yn?Yn.push(n):Yn=[n]:jn=n}function nu(){if(jn){var n=jn,r=Yn;if(Yn=jn=null,eu(n),r)for(n=0;n<r.length;n++)eu(r[n])}}function ru(n,r){return n(r)}function iu(){}var Cs=!1;function ou(n,r,l){if(Cs)return n(r,l);Cs=!0;try{return ru(n,r,l)}finally{Cs=!1,(jn!==null||Yn!==null)&&(iu(),nu())}}function Vr(n,r){var l=n.stateNode;if(l===null)return null;var d=Qi(l);if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,r,typeof l));return l}var _s=!1;if(m)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){_s=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{_s=!1}function Dm(n,r,l,d,p,y,C,E,w){var P=Array.prototype.slice.call(arguments,3);try{r.apply(l,P)}catch(V){this.onError(V)}}var br=!1,Ri=null,Mi=!1,Ts=null,Lm={onError:function(n){br=!0,Ri=n}};function Fm(n,r,l,d,p,y,C,E,w){br=!1,Ri=null,Dm.apply(Lm,arguments)}function Vm(n,r,l,d,p,y,C,E,w){if(Fm.apply(this,arguments),br){if(br){var P=Ri;br=!1,Ri=null}else throw Error(e(198));Mi||(Mi=!0,Ts=P)}}function kn(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function su(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function lu(n){if(kn(n)!==n)throw Error(e(188))}function Um(n){var r=n.alternate;if(!r){if(r=kn(n),r===null)throw Error(e(188));return r!==n?null:n}for(var l=n,d=r;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return lu(p),n;if(y===d)return lu(p),r;y=y.sibling}throw Error(e(188))}if(l.return!==d.return)l=p,d=y;else{for(var C=!1,E=p.child;E;){if(E===l){C=!0,l=p,d=y;break}if(E===d){C=!0,d=p,l=y;break}E=E.sibling}if(!C){for(E=y.child;E;){if(E===l){C=!0,l=y,d=p;break}if(E===d){C=!0,d=y,l=p;break}E=E.sibling}if(!C)throw Error(e(189))}}if(l.alternate!==d)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:r}function au(n){return n=Um(n),n!==null?uu(n):null}function uu(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=uu(n);if(r!==null)return r;n=n.sibling}return null}var cu=t.unstable_scheduleCallback,du=t.unstable_cancelCallback,bm=t.unstable_shouldYield,Om=t.unstable_requestPaint,$e=t.unstable_now,zm=t.unstable_getCurrentPriorityLevel,Es=t.unstable_ImmediatePriority,fu=t.unstable_UserBlockingPriority,Pi=t.unstable_NormalPriority,Bm=t.unstable_LowPriority,pu=t.unstable_IdlePriority,Di=null,Ut=null;function Gm(n){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Di,n,void 0,(n.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:qm,$m=Math.log,Hm=Math.LN2;function qm(n){return n>>>=0,n===0?32:31-($m(n)/Hm|0)|0}var Li=64,Fi=4194304;function Or(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Vi(n,r){var l=n.pendingLanes;if(l===0)return 0;var d=0,p=n.suspendedLanes,y=n.pingedLanes,C=l&268435455;if(C!==0){var E=C&~p;E!==0?d=Or(E):(y&=C,y!==0&&(d=Or(y)))}else C=l&~p,C!==0?d=Or(C):y!==0&&(d=Or(y));if(d===0)return 0;if(r!==0&&r!==d&&(r&p)===0&&(p=d&-d,y=r&-r,p>=y||p===16&&(y&4194240)!==0))return r;if((d&4)!==0&&(d|=l&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=d;0<r;)l=31-At(r),p=1<<l,d|=n[l],r&=~p;return d}function Wm(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jm(n,r){for(var l=n.suspendedLanes,d=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes;0<y;){var C=31-At(y),E=1<<C,w=p[C];w===-1?((E&l)===0||(E&d)!==0)&&(p[C]=Wm(E,r)):w<=r&&(n.expiredLanes|=E),y&=~E}}function Ss(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mu(){var n=Li;return Li<<=1,(Li&4194240)===0&&(Li=64),n}function ws(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function zr(n,r,l){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-At(r),n[r]=l}function Ym(n,r){var l=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var p=31-At(l),y=1<<p;r[p]=0,d[p]=-1,n[p]=-1,l&=~y}}function Is(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var d=31-At(l),p=1<<d;p&r|n[d]&r&&(n[d]|=r),l&=~p}}var Ae=0;function hu(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var gu,Ns,yu,vu,xu,ks=!1,Ui=[],rn=null,on=null,sn=null,Br=new Map,Gr=new Map,ln=[],Jm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cu(n,r){switch(n){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":Br.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(r.pointerId)}}function $r(n,r,l,d,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},r!==null&&(r=ri(r),r!==null&&Ns(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),n)}function Km(n,r,l,d,p){switch(r){case"focusin":return rn=$r(rn,n,r,l,d,p),!0;case"dragenter":return on=$r(on,n,r,l,d,p),!0;case"mouseover":return sn=$r(sn,n,r,l,d,p),!0;case"pointerover":var y=p.pointerId;return Br.set(y,$r(Br.get(y)||null,n,r,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,Gr.set(y,$r(Gr.get(y)||null,n,r,l,d,p)),!0}return!1}function _u(n){var r=An(n.target);if(r!==null){var l=kn(r);if(l!==null){if(r=l.tag,r===13){if(r=su(l),r!==null){n.blockedOn=r,xu(n.priority,function(){yu(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bi(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=Rs(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);ys=d,l.target.dispatchEvent(d),ys=null}else return r=ri(l),r!==null&&Ns(r),n.blockedOn=l,!1;r.shift()}return!0}function Tu(n,r,l){bi(n)&&l.delete(r)}function Zm(){ks=!1,rn!==null&&bi(rn)&&(rn=null),on!==null&&bi(on)&&(on=null),sn!==null&&bi(sn)&&(sn=null),Br.forEach(Tu),Gr.forEach(Tu)}function Hr(n,r){n.blockedOn===r&&(n.blockedOn=null,ks||(ks=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zm)))}function qr(n){function r(p){return Hr(p,n)}if(0<Ui.length){Hr(Ui[0],n);for(var l=1;l<Ui.length;l++){var d=Ui[l];d.blockedOn===n&&(d.blockedOn=null)}}for(rn!==null&&Hr(rn,n),on!==null&&Hr(on,n),sn!==null&&Hr(sn,n),Br.forEach(r),Gr.forEach(r),l=0;l<ln.length;l++)d=ln[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<ln.length&&(l=ln[0],l.blockedOn===null);)_u(l),l.blockedOn===null&&ln.shift()}var Jn=J.ReactCurrentBatchConfig,Oi=!0;function Qm(n,r,l,d){var p=Ae,y=Jn.transition;Jn.transition=null;try{Ae=1,As(n,r,l,d)}finally{Ae=p,Jn.transition=y}}function Xm(n,r,l,d){var p=Ae,y=Jn.transition;Jn.transition=null;try{Ae=4,As(n,r,l,d)}finally{Ae=p,Jn.transition=y}}function As(n,r,l,d){if(Oi){var p=Rs(n,r,l,d);if(p===null)js(n,r,d,zi,l),Cu(n,d);else if(Km(p,n,r,l,d))d.stopPropagation();else if(Cu(n,d),r&4&&-1<Jm.indexOf(n)){for(;p!==null;){var y=ri(p);if(y!==null&&gu(y),y=Rs(n,r,l,d),y===null&&js(n,r,d,zi,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else js(n,r,d,null,l)}}var zi=null;function Rs(n,r,l,d){if(zi=null,n=vs(d),n=An(n),n!==null)if(r=kn(n),r===null)n=null;else if(l=r.tag,l===13){if(n=su(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return zi=n,null}function Eu(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zm()){case Es:return 1;case fu:return 4;case Pi:case Bm:return 16;case pu:return 536870912;default:return 16}default:return 16}}var an=null,Ms=null,Bi=null;function Su(){if(Bi)return Bi;var n,r=Ms,l=r.length,d,p="value"in an?an.value:an.textContent,y=p.length;for(n=0;n<l&&r[n]===p[n];n++);var C=l-n;for(d=1;d<=C&&r[l-d]===p[y-d];d++);return Bi=p.slice(n,1<d?1-d:void 0)}function Gi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function $i(){return!0}function wu(){return!1}function yt(n){function r(l,d,p,y,C){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(l=n[E],this[E]=l?l(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?$i:wu,this.isPropagationStopped=wu,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),r}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=yt(Kn),Wr=z({},Kn,{view:0,detail:0}),eh=yt(Wr),Ds,Ls,jr,Hi=z({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==jr&&(jr&&n.type==="mousemove"?(Ds=n.screenX-jr.screenX,Ls=n.screenY-jr.screenY):Ls=Ds=0,jr=n),Ds)},movementY:function(n){return"movementY"in n?n.movementY:Ls}}),Iu=yt(Hi),th=z({},Hi,{dataTransfer:0}),nh=yt(th),rh=z({},Wr,{relatedTarget:0}),Fs=yt(rh),ih=z({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),oh=yt(ih),sh=z({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lh=yt(sh),ah=z({},Kn,{data:0}),Nu=yt(ah),uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fh(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=dh[n])?!!r[n]:!1}function Vs(){return fh}var ph=z({},Wr,{key:function(n){if(n.key){var r=uh[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Gi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ch[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(n){return n.type==="keypress"?Gi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mh=yt(ph),hh=z({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=yt(hh),gh=z({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),yh=yt(gh),vh=z({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),xh=yt(vh),Ch=z({},Hi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),_h=yt(Ch),Th=[9,13,27,32],Us=m&&"CompositionEvent"in window,Yr=null;m&&"documentMode"in document&&(Yr=document.documentMode);var Eh=m&&"TextEvent"in window&&!Yr,Au=m&&(!Us||Yr&&8<Yr&&11>=Yr),Ru=" ",Mu=!1;function Pu(n,r){switch(n){case"keyup":return Th.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Du(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zn=!1;function Sh(n,r){switch(n){case"compositionend":return Du(r);case"keypress":return r.which!==32?null:(Mu=!0,Ru);case"textInput":return n=r.data,n===Ru&&Mu?null:n;default:return null}}function wh(n,r){if(Zn)return n==="compositionend"||!Us&&Pu(n,r)?(n=Su(),Bi=Ms=an=null,Zn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Au&&r.locale!=="ko"?null:r.data;default:return null}}var Ih={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lu(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Ih[n.type]:r==="textarea"}function Fu(n,r,l,d){tu(d),r=Ji(r,"onChange"),0<r.length&&(l=new Ps("onChange","change",null,l,d),n.push({event:l,listeners:r}))}var Jr=null,Kr=null;function Nh(n){Xu(n,0)}function qi(n){var r=nr(n);if($a(r))return n}function kh(n,r){if(n==="change")return r}var Vu=!1;if(m){var bs;if(m){var Os="oninput"in document;if(!Os){var Uu=document.createElement("div");Uu.setAttribute("oninput","return;"),Os=typeof Uu.oninput=="function"}bs=Os}else bs=!1;Vu=bs&&(!document.documentMode||9<document.documentMode)}function bu(){Jr&&(Jr.detachEvent("onpropertychange",Ou),Kr=Jr=null)}function Ou(n){if(n.propertyName==="value"&&qi(Kr)){var r=[];Fu(r,Kr,n,vs(n)),ou(Nh,r)}}function Ah(n,r,l){n==="focusin"?(bu(),Jr=r,Kr=l,Jr.attachEvent("onpropertychange",Ou)):n==="focusout"&&bu()}function Rh(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return qi(Kr)}function Mh(n,r){if(n==="click")return qi(r)}function Ph(n,r){if(n==="input"||n==="change")return qi(r)}function Dh(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Rt=typeof Object.is=="function"?Object.is:Dh;function Zr(n,r){if(Rt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!g.call(r,p)||!Rt(n[p],r[p]))return!1}return!0}function zu(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bu(n,r){var l=zu(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=r&&d>=r)return{node:l,offset:r-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=zu(l)}}function Gu(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Gu(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function $u(){for(var n=window,r=ki();r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=ki(n.document)}return r}function zs(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Lh(n){var r=$u(),l=n.focusedElem,d=n.selectionRange;if(r!==l&&l&&l.ownerDocument&&Gu(l.ownerDocument.documentElement,l)){if(d!==null&&zs(l)){if(r=d.start,n=d.end,n===void 0&&(n=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(n,l.value.length);else if(n=(r=l.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!n.extend&&y>d&&(p=d,d=y,y=p),p=Bu(l,y);var C=Bu(l,d);p&&C&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==C.node||n.focusOffset!==C.offset)&&(r=r.createRange(),r.setStart(p.node,p.offset),n.removeAllRanges(),y>d?(n.addRange(r),n.extend(C.node,C.offset)):(r.setEnd(C.node,C.offset),n.addRange(r)))}}for(r=[],n=l;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)n=r[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fh=m&&"documentMode"in document&&11>=document.documentMode,Qn=null,Bs=null,Qr=null,Gs=!1;function Hu(n,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Gs||Qn==null||Qn!==ki(d)||(d=Qn,"selectionStart"in d&&zs(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Qr&&Zr(Qr,d)||(Qr=d,d=Ji(Bs,"onSelect"),0<d.length&&(r=new Ps("onSelect","select",null,r,l),n.push({event:r,listeners:d}),r.target=Qn)))}function Wi(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var Xn={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionend:Wi("Transition","TransitionEnd")},$s={},qu={};m&&(qu=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function ji(n){if($s[n])return $s[n];if(!Xn[n])return n;var r=Xn[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in qu)return $s[n]=r[l];return n}var Wu=ji("animationend"),ju=ji("animationiteration"),Yu=ji("animationstart"),Ju=ji("transitionend"),Ku=new Map,Zu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(n,r){Ku.set(n,r),a(r,[n])}for(var Hs=0;Hs<Zu.length;Hs++){var qs=Zu[Hs],Vh=qs.toLowerCase(),Uh=qs[0].toUpperCase()+qs.slice(1);un(Vh,"on"+Uh)}un(Wu,"onAnimationEnd"),un(ju,"onAnimationIteration"),un(Yu,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Ju,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Qu(n,r,l){var d=n.type||"unknown-event";n.currentTarget=l,Vm(d,r,void 0,n),n.currentTarget=null}function Xu(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],p=d.event;d=d.listeners;e:{var y=void 0;if(r)for(var C=d.length-1;0<=C;C--){var E=d[C],w=E.instance,P=E.currentTarget;if(E=E.listener,w!==y&&p.isPropagationStopped())break e;Qu(p,E,P),y=w}else for(C=0;C<d.length;C++){if(E=d[C],w=E.instance,P=E.currentTarget,E=E.listener,w!==y&&p.isPropagationStopped())break e;Qu(p,E,P),y=w}}}if(Mi)throw n=Ts,Mi=!1,Ts=null,n}function Pe(n,r){var l=r[Xs];l===void 0&&(l=r[Xs]=new Set);var d=n+"__bubble";l.has(d)||(ec(r,n,2,!1),l.add(d))}function Ws(n,r,l){var d=0;r&&(d|=4),ec(l,n,d,r)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function ei(n){if(!n[Yi]){n[Yi]=!0,o.forEach(function(l){l!=="selectionchange"&&(bh.has(l)||Ws(l,!1,n),Ws(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Yi]||(r[Yi]=!0,Ws("selectionchange",!1,r))}}function ec(n,r,l,d){switch(Eu(r)){case 1:var p=Qm;break;case 4:p=Xm;break;default:p=As}l=p.bind(null,r,l,n),p=void 0,!_s||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(r,l,{capture:!0,passive:p}):n.addEventListener(r,l,!0):p!==void 0?n.addEventListener(r,l,{passive:p}):n.addEventListener(r,l,!1)}function js(n,r,l,d,p){var y=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var E=d.stateNode.containerInfo;if(E===p||E.nodeType===8&&E.parentNode===p)break;if(C===4)for(C=d.return;C!==null;){var w=C.tag;if((w===3||w===4)&&(w=C.stateNode.containerInfo,w===p||w.nodeType===8&&w.parentNode===p))return;C=C.return}for(;E!==null;){if(C=An(E),C===null)return;if(w=C.tag,w===5||w===6){d=y=C;continue e}E=E.parentNode}}d=d.return}ou(function(){var P=y,V=vs(l),O=[];e:{var F=Ku.get(n);if(F!==void 0){var Y=Ps,X=n;switch(n){case"keypress":if(Gi(l)===0)break e;case"keydown":case"keyup":Y=mh;break;case"focusin":X="focus",Y=Fs;break;case"focusout":X="blur",Y=Fs;break;case"beforeblur":case"afterblur":Y=Fs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=yh;break;case Wu:case ju:case Yu:Y=oh;break;case Ju:Y=xh;break;case"scroll":Y=eh;break;case"wheel":Y=_h;break;case"copy":case"cut":case"paste":Y=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ku}var ne=(r&4)!==0,He=!ne&&n==="scroll",A=ne?F!==null?F+"Capture":null:F;ne=[];for(var I=P,R;I!==null;){R=I;var B=R.stateNode;if(R.tag===5&&B!==null&&(R=B,A!==null&&(B=Vr(I,A),B!=null&&ne.push(ti(I,B,R)))),He)break;I=I.return}0<ne.length&&(F=new Y(F,X,null,l,V),O.push({event:F,listeners:ne}))}}if((r&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",F&&l!==ys&&(X=l.relatedTarget||l.fromElement)&&(An(X)||X[jt]))break e;if((Y||F)&&(F=V.window===V?V:(F=V.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(X=l.relatedTarget||l.toElement,Y=P,X=X?An(X):null,X!==null&&(He=kn(X),X!==He||X.tag!==5&&X.tag!==6)&&(X=null)):(Y=null,X=P),Y!==X)){if(ne=Iu,B="onMouseLeave",A="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ne=ku,B="onPointerLeave",A="onPointerEnter",I="pointer"),He=Y==null?F:nr(Y),R=X==null?F:nr(X),F=new ne(B,I+"leave",Y,l,V),F.target=He,F.relatedTarget=R,B=null,An(V)===P&&(ne=new ne(A,I+"enter",X,l,V),ne.target=R,ne.relatedTarget=He,B=ne),He=B,Y&&X)t:{for(ne=Y,A=X,I=0,R=ne;R;R=er(R))I++;for(R=0,B=A;B;B=er(B))R++;for(;0<I-R;)ne=er(ne),I--;for(;0<R-I;)A=er(A),R--;for(;I--;){if(ne===A||A!==null&&ne===A.alternate)break t;ne=er(ne),A=er(A)}ne=null}else ne=null;Y!==null&&tc(O,F,Y,ne,!1),X!==null&&He!==null&&tc(O,He,X,ne,!0)}}e:{if(F=P?nr(P):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var re=kh;else if(Lu(F))if(Vu)re=Ph;else{re=Rh;var le=Ah}else(Y=F.nodeName)&&Y.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(re=Mh);if(re&&(re=re(n,P))){Fu(O,re,l,V);break e}le&&le(n,F,P),n==="focusout"&&(le=F._wrapperState)&&le.controlled&&F.type==="number"&&fs(F,"number",F.value)}switch(le=P?nr(P):window,n){case"focusin":(Lu(le)||le.contentEditable==="true")&&(Qn=le,Bs=P,Qr=null);break;case"focusout":Qr=Bs=Qn=null;break;case"mousedown":Gs=!0;break;case"contextmenu":case"mouseup":case"dragend":Gs=!1,Hu(O,l,V);break;case"selectionchange":if(Fh)break;case"keydown":case"keyup":Hu(O,l,V)}var ae;if(Us)e:{switch(n){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Zn?Pu(n,l)&&(ue="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ue="onCompositionStart");ue&&(Au&&l.locale!=="ko"&&(Zn||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Zn&&(ae=Su()):(an=V,Ms="value"in an?an.value:an.textContent,Zn=!0)),le=Ji(P,ue),0<le.length&&(ue=new Nu(ue,n,null,l,V),O.push({event:ue,listeners:le}),ae?ue.data=ae:(ae=Du(l),ae!==null&&(ue.data=ae)))),(ae=Eh?Sh(n,l):wh(n,l))&&(P=Ji(P,"onBeforeInput"),0<P.length&&(V=new Nu("onBeforeInput","beforeinput",null,l,V),O.push({event:V,listeners:P}),V.data=ae))}Xu(O,r)})}function ti(n,r,l){return{instance:n,listener:r,currentTarget:l}}function Ji(n,r){for(var l=r+"Capture",d=[];n!==null;){var p=n,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Vr(n,l),y!=null&&d.unshift(ti(n,y,p)),y=Vr(n,r),y!=null&&d.push(ti(n,y,p))),n=n.return}return d}function er(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tc(n,r,l,d,p){for(var y=r._reactName,C=[];l!==null&&l!==d;){var E=l,w=E.alternate,P=E.stateNode;if(w!==null&&w===d)break;E.tag===5&&P!==null&&(E=P,p?(w=Vr(l,y),w!=null&&C.unshift(ti(l,w,E))):p||(w=Vr(l,y),w!=null&&C.push(ti(l,w,E)))),l=l.return}C.length!==0&&n.push({event:r,listeners:C})}var Oh=/\r\n?/g,zh=/\u0000|\uFFFD/g;function nc(n){return(typeof n=="string"?n:""+n).replace(Oh,`
`).replace(zh,"")}function Ki(n,r,l){if(r=nc(r),nc(n)!==r&&l)throw Error(e(425))}function Zi(){}var Ys=null,Js=null;function Ks(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Zs=typeof setTimeout=="function"?setTimeout:void 0,Bh=typeof clearTimeout=="function"?clearTimeout:void 0,rc=typeof Promise=="function"?Promise:void 0,Gh=typeof queueMicrotask=="function"?queueMicrotask:typeof rc<"u"?function(n){return rc.resolve(null).then(n).catch($h)}:Zs;function $h(n){setTimeout(function(){throw n})}function Qs(n,r){var l=r,d=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){n.removeChild(p),qr(r);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);qr(r)}function cn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function ic(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return n;r--}else l==="/$"&&r++}n=n.previousSibling}return null}var tr=Math.random().toString(36).slice(2),bt="__reactFiber$"+tr,ni="__reactProps$"+tr,jt="__reactContainer$"+tr,Xs="__reactEvents$"+tr,Hh="__reactListeners$"+tr,qh="__reactHandles$"+tr;function An(n){var r=n[bt];if(r)return r;for(var l=n.parentNode;l;){if(r=l[jt]||l[bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=ic(n);n!==null;){if(l=n[bt])return l;n=ic(n)}return r}n=l,l=n.parentNode}return null}function ri(n){return n=n[bt]||n[jt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function nr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Qi(n){return n[ni]||null}var el=[],rr=-1;function dn(n){return{current:n}}function De(n){0>rr||(n.current=el[rr],el[rr]=null,rr--)}function Me(n,r){rr++,el[rr]=n.current,n.current=r}var fn={},nt=dn(fn),ut=dn(!1),Rn=fn;function ir(n,r){var l=n.type.contextTypes;if(!l)return fn;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=r[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=p),p}function ct(n){return n=n.childContextTypes,n!=null}function Xi(){De(ut),De(nt)}function oc(n,r,l){if(nt.current!==fn)throw Error(e(168));Me(nt,r),Me(ut,l)}function sc(n,r,l){var d=n.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in r))throw Error(e(108,Re(n)||"Unknown",p));return z({},l,d)}function eo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fn,Rn=nt.current,Me(nt,n),Me(ut,ut.current),!0}function lc(n,r,l){var d=n.stateNode;if(!d)throw Error(e(169));l?(n=sc(n,r,Rn),d.__reactInternalMemoizedMergedChildContext=n,De(ut),De(nt),Me(nt,n)):De(ut),Me(ut,l)}var Yt=null,to=!1,tl=!1;function ac(n){Yt===null?Yt=[n]:Yt.push(n)}function Wh(n){to=!0,ac(n)}function pn(){if(!tl&&Yt!==null){tl=!0;var n=0,r=Ae;try{var l=Yt;for(Ae=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}Yt=null,to=!1}catch(p){throw Yt!==null&&(Yt=Yt.slice(n+1)),cu(Es,pn),p}finally{Ae=r,tl=!1}}return null}var or=[],sr=0,no=null,ro=0,Tt=[],Et=0,Mn=null,Jt=1,Kt="";function Pn(n,r){or[sr++]=ro,or[sr++]=no,no=n,ro=r}function uc(n,r,l){Tt[Et++]=Jt,Tt[Et++]=Kt,Tt[Et++]=Mn,Mn=n;var d=Jt;n=Kt;var p=32-At(d)-1;d&=~(1<<p),l+=1;var y=32-At(r)+p;if(30<y){var C=p-p%5;y=(d&(1<<C)-1).toString(32),d>>=C,p-=C,Jt=1<<32-At(r)+p|l<<p|d,Kt=y+n}else Jt=1<<y|l<<p|d,Kt=n}function nl(n){n.return!==null&&(Pn(n,1),uc(n,1,0))}function rl(n){for(;n===no;)no=or[--sr],or[sr]=null,ro=or[--sr],or[sr]=null;for(;n===Mn;)Mn=Tt[--Et],Tt[Et]=null,Kt=Tt[--Et],Tt[Et]=null,Jt=Tt[--Et],Tt[Et]=null}var vt=null,xt=null,Ue=!1,Mt=null;function cc(n,r){var l=Nt(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=n,r=n.deletions,r===null?(n.deletions=[l],n.flags|=16):r.push(l)}function dc(n,r){switch(n.tag){case 5:var l=n.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,vt=n,xt=cn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,vt=n,xt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=Mn!==null?{id:Jt,overflow:Kt}:null,n.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=Nt(18,null,null,0),l.stateNode=r,l.return=n,n.child=l,vt=n,xt=null,!0):!1;default:return!1}}function il(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ol(n){if(Ue){var r=xt;if(r){var l=r;if(!dc(n,r)){if(il(n))throw Error(e(418));r=cn(l.nextSibling);var d=vt;r&&dc(n,r)?cc(d,l):(n.flags=n.flags&-4097|2,Ue=!1,vt=n)}}else{if(il(n))throw Error(e(418));n.flags=n.flags&-4097|2,Ue=!1,vt=n}}}function fc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vt=n}function io(n){if(n!==vt)return!1;if(!Ue)return fc(n),Ue=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Ks(n.type,n.memoizedProps)),r&&(r=xt)){if(il(n))throw pc(),Error(e(418));for(;r;)cc(n,r),r=cn(r.nextSibling)}if(fc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(r===0){xt=cn(n.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}n=n.nextSibling}xt=null}}else xt=vt?cn(n.stateNode.nextSibling):null;return!0}function pc(){for(var n=xt;n;)n=cn(n.nextSibling)}function lr(){xt=vt=null,Ue=!1}function sl(n){Mt===null?Mt=[n]:Mt.push(n)}var jh=J.ReactCurrentBatchConfig;function ii(n,r,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var d=l.stateNode}if(!d)throw Error(e(147,n));var p=d,y=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===y?r.ref:(r=function(C){var E=p.refs;C===null?delete E[y]:E[y]=C},r._stringRef=y,r)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function oo(n,r){throw n=Object.prototype.toString.call(r),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function mc(n){var r=n._init;return r(n._payload)}function hc(n){function r(A,I){if(n){var R=A.deletions;R===null?(A.deletions=[I],A.flags|=16):R.push(I)}}function l(A,I){if(!n)return null;for(;I!==null;)r(A,I),I=I.sibling;return null}function d(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function p(A,I){return A=_n(A,I),A.index=0,A.sibling=null,A}function y(A,I,R){return A.index=R,n?(R=A.alternate,R!==null?(R=R.index,R<I?(A.flags|=2,I):R):(A.flags|=2,I)):(A.flags|=1048576,I)}function C(A){return n&&A.alternate===null&&(A.flags|=2),A}function E(A,I,R,B){return I===null||I.tag!==6?(I=Zl(R,A.mode,B),I.return=A,I):(I=p(I,R),I.return=A,I)}function w(A,I,R,B){var re=R.type;return re===te?V(A,I,R.props.children,B,R.key):I!==null&&(I.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ye&&mc(re)===I.type)?(B=p(I,R.props),B.ref=ii(A,I,R),B.return=A,B):(B=Ro(R.type,R.key,R.props,null,A.mode,B),B.ref=ii(A,I,R),B.return=A,B)}function P(A,I,R,B){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=Ql(R,A.mode,B),I.return=A,I):(I=p(I,R.children||[]),I.return=A,I)}function V(A,I,R,B,re){return I===null||I.tag!==7?(I=zn(R,A.mode,B,re),I.return=A,I):(I=p(I,R),I.return=A,I)}function O(A,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Zl(""+I,A.mode,R),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case K:return R=Ro(I.type,I.key,I.props,null,A.mode,R),R.ref=ii(A,null,I),R.return=A,R;case Q:return I=Ql(I,A.mode,R),I.return=A,I;case Ye:var B=I._init;return O(A,B(I._payload),R)}if(Dr(I)||W(I))return I=zn(I,A.mode,R,null),I.return=A,I;oo(A,I)}return null}function F(A,I,R,B){var re=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return re!==null?null:E(A,I,""+R,B);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case K:return R.key===re?w(A,I,R,B):null;case Q:return R.key===re?P(A,I,R,B):null;case Ye:return re=R._init,F(A,I,re(R._payload),B)}if(Dr(R)||W(R))return re!==null?null:V(A,I,R,B,null);oo(A,R)}return null}function Y(A,I,R,B,re){if(typeof B=="string"&&B!==""||typeof B=="number")return A=A.get(R)||null,E(I,A,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case K:return A=A.get(B.key===null?R:B.key)||null,w(I,A,B,re);case Q:return A=A.get(B.key===null?R:B.key)||null,P(I,A,B,re);case Ye:var le=B._init;return Y(A,I,R,le(B._payload),re)}if(Dr(B)||W(B))return A=A.get(R)||null,V(I,A,B,re,null);oo(I,B)}return null}function X(A,I,R,B){for(var re=null,le=null,ae=I,ue=I=0,Xe=null;ae!==null&&ue<R.length;ue++){ae.index>ue?(Xe=ae,ae=null):Xe=ae.sibling;var we=F(A,ae,R[ue],B);if(we===null){ae===null&&(ae=Xe);break}n&&ae&&we.alternate===null&&r(A,ae),I=y(we,I,ue),le===null?re=we:le.sibling=we,le=we,ae=Xe}if(ue===R.length)return l(A,ae),Ue&&Pn(A,ue),re;if(ae===null){for(;ue<R.length;ue++)ae=O(A,R[ue],B),ae!==null&&(I=y(ae,I,ue),le===null?re=ae:le.sibling=ae,le=ae);return Ue&&Pn(A,ue),re}for(ae=d(A,ae);ue<R.length;ue++)Xe=Y(ae,A,ue,R[ue],B),Xe!==null&&(n&&Xe.alternate!==null&&ae.delete(Xe.key===null?ue:Xe.key),I=y(Xe,I,ue),le===null?re=Xe:le.sibling=Xe,le=Xe);return n&&ae.forEach(function(Tn){return r(A,Tn)}),Ue&&Pn(A,ue),re}function ne(A,I,R,B){var re=W(R);if(typeof re!="function")throw Error(e(150));if(R=re.call(R),R==null)throw Error(e(151));for(var le=re=null,ae=I,ue=I=0,Xe=null,we=R.next();ae!==null&&!we.done;ue++,we=R.next()){ae.index>ue?(Xe=ae,ae=null):Xe=ae.sibling;var Tn=F(A,ae,we.value,B);if(Tn===null){ae===null&&(ae=Xe);break}n&&ae&&Tn.alternate===null&&r(A,ae),I=y(Tn,I,ue),le===null?re=Tn:le.sibling=Tn,le=Tn,ae=Xe}if(we.done)return l(A,ae),Ue&&Pn(A,ue),re;if(ae===null){for(;!we.done;ue++,we=R.next())we=O(A,we.value,B),we!==null&&(I=y(we,I,ue),le===null?re=we:le.sibling=we,le=we);return Ue&&Pn(A,ue),re}for(ae=d(A,ae);!we.done;ue++,we=R.next())we=Y(ae,A,ue,we.value,B),we!==null&&(n&&we.alternate!==null&&ae.delete(we.key===null?ue:we.key),I=y(we,I,ue),le===null?re=we:le.sibling=we,le=we);return n&&ae.forEach(function(Ig){return r(A,Ig)}),Ue&&Pn(A,ue),re}function He(A,I,R,B){if(typeof R=="object"&&R!==null&&R.type===te&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case K:e:{for(var re=R.key,le=I;le!==null;){if(le.key===re){if(re=R.type,re===te){if(le.tag===7){l(A,le.sibling),I=p(le,R.props.children),I.return=A,A=I;break e}}else if(le.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ye&&mc(re)===le.type){l(A,le.sibling),I=p(le,R.props),I.ref=ii(A,le,R),I.return=A,A=I;break e}l(A,le);break}else r(A,le);le=le.sibling}R.type===te?(I=zn(R.props.children,A.mode,B,R.key),I.return=A,A=I):(B=Ro(R.type,R.key,R.props,null,A.mode,B),B.ref=ii(A,I,R),B.return=A,A=B)}return C(A);case Q:e:{for(le=R.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){l(A,I.sibling),I=p(I,R.children||[]),I.return=A,A=I;break e}else{l(A,I);break}else r(A,I);I=I.sibling}I=Ql(R,A.mode,B),I.return=A,A=I}return C(A);case Ye:return le=R._init,He(A,I,le(R._payload),B)}if(Dr(R))return X(A,I,R,B);if(W(R))return ne(A,I,R,B);oo(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(l(A,I.sibling),I=p(I,R),I.return=A,A=I):(l(A,I),I=Zl(R,A.mode,B),I.return=A,A=I),C(A)):l(A,I)}return He}var ar=hc(!0),gc=hc(!1),so=dn(null),lo=null,ur=null,ll=null;function al(){ll=ur=lo=null}function ul(n){var r=so.current;De(so),n._currentValue=r}function cl(n,r,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===l)break;n=n.return}}function cr(n,r){lo=n,ll=ur=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(dt=!0),n.firstContext=null)}function St(n){var r=n._currentValue;if(ll!==n)if(n={context:n,memoizedValue:r,next:null},ur===null){if(lo===null)throw Error(e(308));ur=n,lo.dependencies={lanes:0,firstContext:n}}else ur=ur.next=n;return r}var Dn=null;function dl(n){Dn===null?Dn=[n]:Dn.push(n)}function yc(n,r,l,d){var p=r.interleaved;return p===null?(l.next=l,dl(r)):(l.next=p.next,p.next=l),r.interleaved=l,Zt(n,d)}function Zt(n,r){n.lanes|=r;var l=n.alternate;for(l!==null&&(l.lanes|=r),l=n,n=n.return;n!==null;)n.childLanes|=r,l=n.alternate,l!==null&&(l.childLanes|=r),l=n,n=n.return;return l.tag===3?l.stateNode:null}var mn=!1;function fl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vc(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qt(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function hn(n,r,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Te&2)!==0){var p=d.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),d.pending=r,Zt(n,l)}return p=d.interleaved,p===null?(r.next=r,dl(d)):(r.next=p.next,p.next=r),d.interleaved=r,Zt(n,l)}function ao(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,Is(n,l)}}function xc(n,r){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?p=y=r:y=y.next=r}else p=y=r;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}function uo(n,r,l,d){var p=n.updateQueue;mn=!1;var y=p.firstBaseUpdate,C=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var w=E,P=w.next;w.next=null,C===null?y=P:C.next=P,C=w;var V=n.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==C&&(E===null?V.firstBaseUpdate=P:E.next=P,V.lastBaseUpdate=w))}if(y!==null){var O=p.baseState;C=0,V=P=w=null,E=y;do{var F=E.lane,Y=E.eventTime;if((d&F)===F){V!==null&&(V=V.next={eventTime:Y,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var X=n,ne=E;switch(F=r,Y=l,ne.tag){case 1:if(X=ne.payload,typeof X=="function"){O=X.call(Y,O,F);break e}O=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=ne.payload,F=typeof X=="function"?X.call(Y,O,F):X,F==null)break e;O=z({},O,F);break e;case 2:mn=!0}}E.callback!==null&&E.lane!==0&&(n.flags|=64,F=p.effects,F===null?p.effects=[E]:F.push(E))}else Y={eventTime:Y,lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(P=V=Y,w=O):V=V.next=Y,C|=F;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;F=E,E=F.next,F.next=null,p.lastBaseUpdate=F,p.shared.pending=null}}while(!0);if(V===null&&(w=O),p.baseState=w,p.firstBaseUpdate=P,p.lastBaseUpdate=V,r=p.shared.interleaved,r!==null){p=r;do C|=p.lane,p=p.next;while(p!==r)}else y===null&&(p.shared.lanes=0);Vn|=C,n.lanes=C,n.memoizedState=O}}function Cc(n,r,l){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var d=n[r],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(e(191,p));p.call(d)}}}var oi={},Ot=dn(oi),si=dn(oi),li=dn(oi);function Ln(n){if(n===oi)throw Error(e(174));return n}function pl(n,r){switch(Me(li,r),Me(si,n),Me(Ot,oi),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ms(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ms(r,n)}De(Ot),Me(Ot,r)}function dr(){De(Ot),De(si),De(li)}function _c(n){Ln(li.current);var r=Ln(Ot.current),l=ms(r,n.type);r!==l&&(Me(si,n),Me(Ot,l))}function ml(n){si.current===n&&(De(Ot),De(si))}var be=dn(0);function co(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var hl=[];function gl(){for(var n=0;n<hl.length;n++)hl[n]._workInProgressVersionPrimary=null;hl.length=0}var fo=J.ReactCurrentDispatcher,yl=J.ReactCurrentBatchConfig,Fn=0,Oe=null,Je=null,Ze=null,po=!1,ai=!1,ui=0,Yh=0;function rt(){throw Error(e(321))}function vl(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Rt(n[l],r[l]))return!1;return!0}function xl(n,r,l,d,p,y){if(Fn=y,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,fo.current=n===null||n.memoizedState===null?Qh:Xh,n=l(d,p),ai){y=0;do{if(ai=!1,ui=0,25<=y)throw Error(e(301));y+=1,Ze=Je=null,r.updateQueue=null,fo.current=eg,n=l(d,p)}while(ai)}if(fo.current=go,r=Je!==null&&Je.next!==null,Fn=0,Ze=Je=Oe=null,po=!1,r)throw Error(e(300));return n}function Cl(){var n=ui!==0;return ui=0,n}function zt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function wt(){if(Je===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=Ze===null?Oe.memoizedState:Ze.next;if(r!==null)Ze=r,Je=n;else{if(n===null)throw Error(e(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ze===null?Oe.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function ci(n,r){return typeof r=="function"?r(n):r}function _l(n){var r=wt(),l=r.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var d=Je,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var C=p.next;p.next=y.next,y.next=C}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var E=C=null,w=null,P=y;do{var V=P.lane;if((Fn&V)===V)w!==null&&(w=w.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),d=P.hasEagerState?P.eagerState:n(d,P.action);else{var O={lane:V,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};w===null?(E=w=O,C=d):w=w.next=O,Oe.lanes|=V,Vn|=V}P=P.next}while(P!==null&&P!==y);w===null?C=d:w.next=E,Rt(d,r.memoizedState)||(dt=!0),r.memoizedState=d,r.baseState=C,r.baseQueue=w,l.lastRenderedState=d}if(n=l.interleaved,n!==null){p=n;do y=p.lane,Oe.lanes|=y,Vn|=y,p=p.next;while(p!==n)}else p===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function Tl(n){var r=wt(),l=r.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var d=l.dispatch,p=l.pending,y=r.memoizedState;if(p!==null){l.pending=null;var C=p=p.next;do y=n(y,C.action),C=C.next;while(C!==p);Rt(y,r.memoizedState)||(dt=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),l.lastRenderedState=y}return[y,d]}function Tc(){}function Ec(n,r){var l=Oe,d=wt(),p=r(),y=!Rt(d.memoizedState,p);if(y&&(d.memoizedState=p,dt=!0),d=d.queue,El(Ic.bind(null,l,d,n),[n]),d.getSnapshot!==r||y||Ze!==null&&Ze.memoizedState.tag&1){if(l.flags|=2048,di(9,wc.bind(null,l,d,p,r),void 0,null),Qe===null)throw Error(e(349));(Fn&30)!==0||Sc(l,r,p)}return p}function Sc(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=Oe.updateQueue,r===null?(r={lastEffect:null,stores:null},Oe.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function wc(n,r,l,d){r.value=l,r.getSnapshot=d,Nc(r)&&kc(n)}function Ic(n,r,l){return l(function(){Nc(r)&&kc(n)})}function Nc(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Rt(n,l)}catch{return!0}}function kc(n){var r=Zt(n,1);r!==null&&Ft(r,n,1,-1)}function Ac(n){var r=zt();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:n},r.queue=n,n=n.dispatch=Zh.bind(null,Oe,n),[r.memoizedState,n]}function di(n,r,l,d){return n={tag:n,create:r,destroy:l,deps:d,next:null},r=Oe.updateQueue,r===null?(r={lastEffect:null,stores:null},Oe.updateQueue=r,r.lastEffect=n.next=n):(l=r.lastEffect,l===null?r.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,r.lastEffect=n)),n}function Rc(){return wt().memoizedState}function mo(n,r,l,d){var p=zt();Oe.flags|=n,p.memoizedState=di(1|r,l,void 0,d===void 0?null:d)}function ho(n,r,l,d){var p=wt();d=d===void 0?null:d;var y=void 0;if(Je!==null){var C=Je.memoizedState;if(y=C.destroy,d!==null&&vl(d,C.deps)){p.memoizedState=di(r,l,y,d);return}}Oe.flags|=n,p.memoizedState=di(1|r,l,y,d)}function Mc(n,r){return mo(8390656,8,n,r)}function El(n,r){return ho(2048,8,n,r)}function Pc(n,r){return ho(4,2,n,r)}function Dc(n,r){return ho(4,4,n,r)}function Lc(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Fc(n,r,l){return l=l!=null?l.concat([n]):null,ho(4,4,Lc.bind(null,r,n),l)}function Sl(){}function Vc(n,r){var l=wt();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&vl(r,d[1])?d[0]:(l.memoizedState=[n,r],n)}function Uc(n,r){var l=wt();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&vl(r,d[1])?d[0]:(n=n(),l.memoizedState=[n,r],n)}function bc(n,r,l){return(Fn&21)===0?(n.baseState&&(n.baseState=!1,dt=!0),n.memoizedState=l):(Rt(l,r)||(l=mu(),Oe.lanes|=l,Vn|=l,n.baseState=!0),r)}function Jh(n,r){var l=Ae;Ae=l!==0&&4>l?l:4,n(!0);var d=yl.transition;yl.transition={};try{n(!1),r()}finally{Ae=l,yl.transition=d}}function Oc(){return wt().memoizedState}function Kh(n,r,l){var d=xn(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},zc(n))Bc(r,l);else if(l=yc(n,r,l,d),l!==null){var p=lt();Ft(l,n,d,p),Gc(l,r,d)}}function Zh(n,r,l){var d=xn(n),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(zc(n))Bc(r,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var C=r.lastRenderedState,E=y(C,l);if(p.hasEagerState=!0,p.eagerState=E,Rt(E,C)){var w=r.interleaved;w===null?(p.next=p,dl(r)):(p.next=w.next,w.next=p),r.interleaved=p;return}}catch{}finally{}l=yc(n,r,p,d),l!==null&&(p=lt(),Ft(l,n,d,p),Gc(l,r,d))}}function zc(n){var r=n.alternate;return n===Oe||r!==null&&r===Oe}function Bc(n,r){ai=po=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Gc(n,r,l){if((l&4194240)!==0){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,Is(n,l)}}var go={readContext:St,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Qh={readContext:St,useCallback:function(n,r){return zt().memoizedState=[n,r===void 0?null:r],n},useContext:St,useEffect:Mc,useImperativeHandle:function(n,r,l){return l=l!=null?l.concat([n]):null,mo(4194308,4,Lc.bind(null,r,n),l)},useLayoutEffect:function(n,r){return mo(4194308,4,n,r)},useInsertionEffect:function(n,r){return mo(4,2,n,r)},useMemo:function(n,r){var l=zt();return r=r===void 0?null:r,n=n(),l.memoizedState=[n,r],n},useReducer:function(n,r,l){var d=zt();return r=l!==void 0?l(r):r,d.memoizedState=d.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},d.queue=n,n=n.dispatch=Kh.bind(null,Oe,n),[d.memoizedState,n]},useRef:function(n){var r=zt();return n={current:n},r.memoizedState=n},useState:Ac,useDebugValue:Sl,useDeferredValue:function(n){return zt().memoizedState=n},useTransition:function(){var n=Ac(!1),r=n[0];return n=Jh.bind(null,n[1]),zt().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,l){var d=Oe,p=zt();if(Ue){if(l===void 0)throw Error(e(407));l=l()}else{if(l=r(),Qe===null)throw Error(e(349));(Fn&30)!==0||Sc(d,r,l)}p.memoizedState=l;var y={value:l,getSnapshot:r};return p.queue=y,Mc(Ic.bind(null,d,y,n),[n]),d.flags|=2048,di(9,wc.bind(null,d,y,l,r),void 0,null),l},useId:function(){var n=zt(),r=Qe.identifierPrefix;if(Ue){var l=Kt,d=Jt;l=(d&~(1<<32-At(d)-1)).toString(32)+l,r=":"+r+"R"+l,l=ui++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=Yh++,r=":"+r+"r"+l.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Xh={readContext:St,useCallback:Vc,useContext:St,useEffect:El,useImperativeHandle:Fc,useInsertionEffect:Pc,useLayoutEffect:Dc,useMemo:Uc,useReducer:_l,useRef:Rc,useState:function(){return _l(ci)},useDebugValue:Sl,useDeferredValue:function(n){var r=wt();return bc(r,Je.memoizedState,n)},useTransition:function(){var n=_l(ci)[0],r=wt().memoizedState;return[n,r]},useMutableSource:Tc,useSyncExternalStore:Ec,useId:Oc,unstable_isNewReconciler:!1},eg={readContext:St,useCallback:Vc,useContext:St,useEffect:El,useImperativeHandle:Fc,useInsertionEffect:Pc,useLayoutEffect:Dc,useMemo:Uc,useReducer:Tl,useRef:Rc,useState:function(){return Tl(ci)},useDebugValue:Sl,useDeferredValue:function(n){var r=wt();return Je===null?r.memoizedState=n:bc(r,Je.memoizedState,n)},useTransition:function(){var n=Tl(ci)[0],r=wt().memoizedState;return[n,r]},useMutableSource:Tc,useSyncExternalStore:Ec,useId:Oc,unstable_isNewReconciler:!1};function Pt(n,r){if(n&&n.defaultProps){r=z({},r),n=n.defaultProps;for(var l in n)r[l]===void 0&&(r[l]=n[l]);return r}return r}function wl(n,r,l,d){r=n.memoizedState,l=l(d,r),l=l==null?r:z({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var yo={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,r,l){n=n._reactInternals;var d=lt(),p=xn(n),y=Qt(d,p);y.payload=r,l!=null&&(y.callback=l),r=hn(n,y,p),r!==null&&(Ft(r,n,p,d),ao(r,n,p))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var d=lt(),p=xn(n),y=Qt(d,p);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=hn(n,y,p),r!==null&&(Ft(r,n,p,d),ao(r,n,p))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=lt(),d=xn(n),p=Qt(l,d);p.tag=2,r!=null&&(p.callback=r),r=hn(n,p,d),r!==null&&(Ft(r,n,d,l),ao(r,n,d))}};function $c(n,r,l,d,p,y,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,C):r.prototype&&r.prototype.isPureReactComponent?!Zr(l,d)||!Zr(p,y):!0}function Hc(n,r,l){var d=!1,p=fn,y=r.contextType;return typeof y=="object"&&y!==null?y=St(y):(p=ct(r)?Rn:nt.current,d=r.contextTypes,y=(d=d!=null)?ir(n,p):fn),r=new r(l,y),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=yo,n.stateNode=r,r._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=y),r}function qc(n,r,l,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==n&&yo.enqueueReplaceState(r,r.state,null)}function Il(n,r,l,d){var p=n.stateNode;p.props=l,p.state=n.memoizedState,p.refs={},fl(n);var y=r.contextType;typeof y=="object"&&y!==null?p.context=St(y):(y=ct(r)?Rn:nt.current,p.context=ir(n,y)),p.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(wl(n,r,y,l),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(r=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),r!==p.state&&yo.enqueueReplaceState(p,p.state,null),uo(n,l,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function fr(n,r){try{var l="",d=r;do l+=Ee(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:r,stack:p,digest:null}}function Nl(n,r,l){return{value:n,source:null,stack:l??null,digest:r??null}}function kl(n,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var tg=typeof WeakMap=="function"?WeakMap:Map;function Wc(n,r,l){l=Qt(-1,l),l.tag=3,l.payload={element:null};var d=r.value;return l.callback=function(){So||(So=!0,$l=d),kl(n,r)},l}function jc(n,r,l){l=Qt(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=r.value;l.payload=function(){return d(p)},l.callback=function(){kl(n,r)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){kl(n,r),typeof d!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})}),l}function Yc(n,r,l){var d=n.pingCache;if(d===null){d=n.pingCache=new tg;var p=new Set;d.set(r,p)}else p=d.get(r),p===void 0&&(p=new Set,d.set(r,p));p.has(l)||(p.add(l),n=hg.bind(null,n,r,l),r.then(n,n))}function Jc(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Kc(n,r,l,d,p){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=Qt(-1,1),r.tag=2,hn(l,r,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var ng=J.ReactCurrentOwner,dt=!1;function st(n,r,l,d){r.child=n===null?gc(r,null,l,d):ar(r,n.child,l,d)}function Zc(n,r,l,d,p){l=l.render;var y=r.ref;return cr(r,p),d=xl(n,r,l,d,y,p),l=Cl(),n!==null&&!dt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Xt(n,r,p)):(Ue&&l&&nl(r),r.flags|=1,st(n,r,d,p),r.child)}function Qc(n,r,l,d,p){if(n===null){var y=l.type;return typeof y=="function"&&!Kl(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=y,Xc(n,r,y,d,p)):(n=Ro(l.type,null,d,r,r.mode,p),n.ref=r.ref,n.return=r,r.child=n)}if(y=n.child,(n.lanes&p)===0){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:Zr,l(C,d)&&n.ref===r.ref)return Xt(n,r,p)}return r.flags|=1,n=_n(y,d),n.ref=r.ref,n.return=r,r.child=n}function Xc(n,r,l,d,p){if(n!==null){var y=n.memoizedProps;if(Zr(y,d)&&n.ref===r.ref)if(dt=!1,r.pendingProps=d=y,(n.lanes&p)!==0)(n.flags&131072)!==0&&(dt=!0);else return r.lanes=n.lanes,Xt(n,r,p)}return Al(n,r,l,d,p)}function ed(n,r,l){var d=r.pendingProps,p=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(mr,Ct),Ct|=l;else{if((l&1073741824)===0)return n=y!==null?y.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Me(mr,Ct),Ct|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,Me(mr,Ct),Ct|=d}else y!==null?(d=y.baseLanes|l,r.memoizedState=null):d=l,Me(mr,Ct),Ct|=d;return st(n,r,p,l),r.child}function td(n,r){var l=r.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function Al(n,r,l,d,p){var y=ct(l)?Rn:nt.current;return y=ir(r,y),cr(r,p),l=xl(n,r,l,d,y,p),d=Cl(),n!==null&&!dt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Xt(n,r,p)):(Ue&&d&&nl(r),r.flags|=1,st(n,r,l,p),r.child)}function nd(n,r,l,d,p){if(ct(l)){var y=!0;eo(r)}else y=!1;if(cr(r,p),r.stateNode===null)xo(n,r),Hc(r,l,d),Il(r,l,d,p),d=!0;else if(n===null){var C=r.stateNode,E=r.memoizedProps;C.props=E;var w=C.context,P=l.contextType;typeof P=="object"&&P!==null?P=St(P):(P=ct(l)?Rn:nt.current,P=ir(r,P));var V=l.getDerivedStateFromProps,O=typeof V=="function"||typeof C.getSnapshotBeforeUpdate=="function";O||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E!==d||w!==P)&&qc(r,C,d,P),mn=!1;var F=r.memoizedState;C.state=F,uo(r,d,C,p),w=r.memoizedState,E!==d||F!==w||ut.current||mn?(typeof V=="function"&&(wl(r,l,V,d),w=r.memoizedState),(E=mn||$c(r,l,E,d,F,w,P))?(O||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(r.flags|=4194308)):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=w),C.props=d,C.state=w,C.context=P,d=E):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{C=r.stateNode,vc(n,r),E=r.memoizedProps,P=r.type===r.elementType?E:Pt(r.type,E),C.props=P,O=r.pendingProps,F=C.context,w=l.contextType,typeof w=="object"&&w!==null?w=St(w):(w=ct(l)?Rn:nt.current,w=ir(r,w));var Y=l.getDerivedStateFromProps;(V=typeof Y=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E!==O||F!==w)&&qc(r,C,d,w),mn=!1,F=r.memoizedState,C.state=F,uo(r,d,C,p);var X=r.memoizedState;E!==O||F!==X||ut.current||mn?(typeof Y=="function"&&(wl(r,l,Y,d),X=r.memoizedState),(P=mn||$c(r,l,P,d,F,X,w)||!1)?(V||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,X,w),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,X,w)),typeof C.componentDidUpdate=="function"&&(r.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof C.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=X),C.props=d,C.state=X,C.context=w,d=P):(typeof C.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),d=!1)}return Rl(n,r,l,d,y,p)}function Rl(n,r,l,d,p,y){td(n,r);var C=(r.flags&128)!==0;if(!d&&!C)return p&&lc(r,l,!1),Xt(n,r,y);d=r.stateNode,ng.current=r;var E=C&&typeof l.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,n!==null&&C?(r.child=ar(r,n.child,null,y),r.child=ar(r,null,E,y)):st(n,r,E,y),r.memoizedState=d.state,p&&lc(r,l,!0),r.child}function rd(n){var r=n.stateNode;r.pendingContext?oc(n,r.pendingContext,r.pendingContext!==r.context):r.context&&oc(n,r.context,!1),pl(n,r.containerInfo)}function id(n,r,l,d,p){return lr(),sl(p),r.flags|=256,st(n,r,l,d),r.child}var Ml={dehydrated:null,treeContext:null,retryLane:0};function Pl(n){return{baseLanes:n,cachePool:null,transitions:null}}function od(n,r,l){var d=r.pendingProps,p=be.current,y=!1,C=(r.flags&128)!==0,E;if((E=C)||(E=n!==null&&n.memoizedState===null?!1:(p&2)!==0),E?(y=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Me(be,p&1),n===null)return ol(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(C=d.children,n=d.fallback,y?(d=r.mode,y=r.child,C={mode:"hidden",children:C},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=C):y=Mo(C,d,0,null),n=zn(n,d,l,null),y.return=r,n.return=r,y.sibling=n,r.child=y,r.child.memoizedState=Pl(l),r.memoizedState=Ml,n):Dl(r,C));if(p=n.memoizedState,p!==null&&(E=p.dehydrated,E!==null))return rg(n,r,C,d,E,p,l);if(y){y=d.fallback,C=r.mode,p=n.child,E=p.sibling;var w={mode:"hidden",children:d.children};return(C&1)===0&&r.child!==p?(d=r.child,d.childLanes=0,d.pendingProps=w,r.deletions=null):(d=_n(p,w),d.subtreeFlags=p.subtreeFlags&14680064),E!==null?y=_n(E,y):(y=zn(y,C,l,null),y.flags|=2),y.return=r,d.return=r,d.sibling=y,r.child=d,d=y,y=r.child,C=n.child.memoizedState,C=C===null?Pl(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},y.memoizedState=C,y.childLanes=n.childLanes&~l,r.memoizedState=Ml,d}return y=n.child,n=y.sibling,d=_n(y,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=l),d.return=r,d.sibling=null,n!==null&&(l=r.deletions,l===null?(r.deletions=[n],r.flags|=16):l.push(n)),r.child=d,r.memoizedState=null,d}function Dl(n,r){return r=Mo({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function vo(n,r,l,d){return d!==null&&sl(d),ar(r,n.child,null,l),n=Dl(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function rg(n,r,l,d,p,y,C){if(l)return r.flags&256?(r.flags&=-257,d=Nl(Error(e(422))),vo(n,r,C,d)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(y=d.fallback,p=r.mode,d=Mo({mode:"visible",children:d.children},p,0,null),y=zn(y,p,C,null),y.flags|=2,d.return=r,y.return=r,d.sibling=y,r.child=d,(r.mode&1)!==0&&ar(r,n.child,null,C),r.child.memoizedState=Pl(C),r.memoizedState=Ml,y);if((r.mode&1)===0)return vo(n,r,C,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var E=d.dgst;return d=E,y=Error(e(419)),d=Nl(y,d,void 0),vo(n,r,C,d)}if(E=(C&n.childLanes)!==0,dt||E){if(d=Qe,d!==null){switch(C&-C){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|C))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Zt(n,p),Ft(d,n,p,-1))}return Jl(),d=Nl(Error(e(421))),vo(n,r,C,d)}return p.data==="$?"?(r.flags|=128,r.child=n.child,r=gg.bind(null,n),p._reactRetry=r,null):(n=y.treeContext,xt=cn(p.nextSibling),vt=r,Ue=!0,Mt=null,n!==null&&(Tt[Et++]=Jt,Tt[Et++]=Kt,Tt[Et++]=Mn,Jt=n.id,Kt=n.overflow,Mn=r),r=Dl(r,d.children),r.flags|=4096,r)}function sd(n,r,l){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),cl(n.return,r,l)}function Ll(n,r,l,d,p){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function ld(n,r,l){var d=r.pendingProps,p=d.revealOrder,y=d.tail;if(st(n,r,d.children,l),d=be.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sd(n,l,r);else if(n.tag===19)sd(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Me(be,d),(r.mode&1)===0)r.memoizedState=null;else switch(p){case"forwards":for(l=r.child,p=null;l!==null;)n=l.alternate,n!==null&&co(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=r.child,r.child=null):(p=l.sibling,l.sibling=null),Ll(r,!1,p,l,y);break;case"backwards":for(l=null,p=r.child,r.child=null;p!==null;){if(n=p.alternate,n!==null&&co(n)===null){r.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}Ll(r,!0,l,null,y);break;case"together":Ll(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function xo(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Xt(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Vn|=r.lanes,(l&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(e(153));if(r.child!==null){for(n=r.child,l=_n(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=_n(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function ig(n,r,l){switch(r.tag){case 3:rd(r),lr();break;case 5:_c(r);break;case 1:ct(r.type)&&eo(r);break;case 4:pl(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,p=r.memoizedProps.value;Me(so,d._currentValue),d._currentValue=p;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(Me(be,be.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?od(n,r,l):(Me(be,be.current&1),n=Xt(n,r,l),n!==null?n.sibling:null);Me(be,be.current&1);break;case 19:if(d=(l&r.childLanes)!==0,(n.flags&128)!==0){if(d)return ld(n,r,l);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Me(be,be.current),d)break;return null;case 22:case 23:return r.lanes=0,ed(n,r,l)}return Xt(n,r,l)}var ad,Fl,ud,cd;ad=function(n,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Fl=function(){},ud=function(n,r,l,d){var p=n.memoizedProps;if(p!==d){n=r.stateNode,Ln(Ot.current);var y=null;switch(l){case"input":p=cs(n,p),d=cs(n,d),y=[];break;case"select":p=z({},p,{value:void 0}),d=z({},d,{value:void 0}),y=[];break;case"textarea":p=ps(n,p),d=ps(n,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Zi)}hs(l,d);var C;l=null;for(P in p)if(!d.hasOwnProperty(P)&&p.hasOwnProperty(P)&&p[P]!=null)if(P==="style"){var E=p[P];for(C in E)E.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(s.hasOwnProperty(P)?y||(y=[]):(y=y||[]).push(P,null));for(P in d){var w=d[P];if(E=p!=null?p[P]:void 0,d.hasOwnProperty(P)&&w!==E&&(w!=null||E!=null))if(P==="style")if(E){for(C in E)!E.hasOwnProperty(C)||w&&w.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in w)w.hasOwnProperty(C)&&E[C]!==w[C]&&(l||(l={}),l[C]=w[C])}else l||(y||(y=[]),y.push(P,l)),l=w;else P==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,E=E?E.__html:void 0,w!=null&&E!==w&&(y=y||[]).push(P,w)):P==="children"?typeof w!="string"&&typeof w!="number"||(y=y||[]).push(P,""+w):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(s.hasOwnProperty(P)?(w!=null&&P==="onScroll"&&Pe("scroll",n),y||E===w||(y=[])):(y=y||[]).push(P,w))}l&&(y=y||[]).push("style",l);var P=y;(r.updateQueue=P)&&(r.flags|=4)}},cd=function(n,r,l,d){l!==d&&(r.flags|=4)};function fi(n,r){if(!Ue)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function it(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(r)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=d,n.childLanes=l,r}function og(n,r,l){var d=r.pendingProps;switch(rl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(r),null;case 1:return ct(r.type)&&Xi(),it(r),null;case 3:return d=r.stateNode,dr(),De(ut),De(nt),gl(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(io(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Mt!==null&&(Wl(Mt),Mt=null))),Fl(n,r),it(r),null;case 5:ml(r);var p=Ln(li.current);if(l=r.type,n!==null&&r.stateNode!=null)ud(n,r,l,d,p),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(e(166));return it(r),null}if(n=Ln(Ot.current),io(r)){d=r.stateNode,l=r.type;var y=r.memoizedProps;switch(d[bt]=r,d[ni]=y,n=(r.mode&1)!==0,l){case"dialog":Pe("cancel",d),Pe("close",d);break;case"iframe":case"object":case"embed":Pe("load",d);break;case"video":case"audio":for(p=0;p<Xr.length;p++)Pe(Xr[p],d);break;case"source":Pe("error",d);break;case"img":case"image":case"link":Pe("error",d),Pe("load",d);break;case"details":Pe("toggle",d);break;case"input":Ha(d,y),Pe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Pe("invalid",d);break;case"textarea":ja(d,y),Pe("invalid",d)}hs(l,y),p=null;for(var C in y)if(y.hasOwnProperty(C)){var E=y[C];C==="children"?typeof E=="string"?d.textContent!==E&&(y.suppressHydrationWarning!==!0&&Ki(d.textContent,E,n),p=["children",E]):typeof E=="number"&&d.textContent!==""+E&&(y.suppressHydrationWarning!==!0&&Ki(d.textContent,E,n),p=["children",""+E]):s.hasOwnProperty(C)&&E!=null&&C==="onScroll"&&Pe("scroll",d)}switch(l){case"input":Ni(d),Wa(d,y,!0);break;case"textarea":Ni(d),Ja(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Zi)}d=p,r.updateQueue=d,d!==null&&(r.flags|=4)}else{C=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ka(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=C.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=C.createElement(l,{is:d.is}):(n=C.createElement(l),l==="select"&&(C=n,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):n=C.createElementNS(n,l),n[bt]=r,n[ni]=d,ad(n,r,!1,!1),r.stateNode=n;e:{switch(C=gs(l,d),l){case"dialog":Pe("cancel",n),Pe("close",n),p=d;break;case"iframe":case"object":case"embed":Pe("load",n),p=d;break;case"video":case"audio":for(p=0;p<Xr.length;p++)Pe(Xr[p],n);p=d;break;case"source":Pe("error",n),p=d;break;case"img":case"image":case"link":Pe("error",n),Pe("load",n),p=d;break;case"details":Pe("toggle",n),p=d;break;case"input":Ha(n,d),p=cs(n,d),Pe("invalid",n);break;case"option":p=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=z({},d,{value:void 0}),Pe("invalid",n);break;case"textarea":ja(n,d),p=ps(n,d),Pe("invalid",n);break;default:p=d}hs(l,p),E=p;for(y in E)if(E.hasOwnProperty(y)){var w=E[y];y==="style"?Xa(n,w):y==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Za(n,w)):y==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Lr(n,w):typeof w=="number"&&Lr(n,""+w):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?w!=null&&y==="onScroll"&&Pe("scroll",n):w!=null&&q(n,y,w,C))}switch(l){case"input":Ni(n),Wa(n,d,!1);break;case"textarea":Ni(n),Ja(n);break;case"option":d.value!=null&&n.setAttribute("value",""+ke(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?Wn(n,!!d.multiple,y,!1):d.defaultValue!=null&&Wn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Zi)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return it(r),null;case 6:if(n&&r.stateNode!=null)cd(n,r,n.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(e(166));if(l=Ln(li.current),Ln(Ot.current),io(r)){if(d=r.stateNode,l=r.memoizedProps,d[bt]=r,(y=d.nodeValue!==l)&&(n=vt,n!==null))switch(n.tag){case 3:Ki(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ki(d.nodeValue,l,(n.mode&1)!==0)}y&&(r.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[bt]=r,r.stateNode=d}return it(r),null;case 13:if(De(be),d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ue&&xt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)pc(),lr(),r.flags|=98560,y=!1;else if(y=io(r),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[bt]=r}else lr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),y=!1}else Mt!==null&&(Wl(Mt),Mt=null),y=!0;if(!y)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(be.current&1)!==0?Ke===0&&(Ke=3):Jl())),r.updateQueue!==null&&(r.flags|=4),it(r),null);case 4:return dr(),Fl(n,r),n===null&&ei(r.stateNode.containerInfo),it(r),null;case 10:return ul(r.type._context),it(r),null;case 17:return ct(r.type)&&Xi(),it(r),null;case 19:if(De(be),y=r.memoizedState,y===null)return it(r),null;if(d=(r.flags&128)!==0,C=y.rendering,C===null)if(d)fi(y,!1);else{if(Ke!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(C=co(n),C!==null){for(r.flags|=128,fi(y,!1),d=C.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=l,l=r.child;l!==null;)y=l,n=d,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,n=C.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Me(be,be.current&1|2),r.child}n=n.sibling}y.tail!==null&&$e()>hr&&(r.flags|=128,d=!0,fi(y,!1),r.lanes=4194304)}else{if(!d)if(n=co(C),n!==null){if(r.flags|=128,d=!0,l=n.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),fi(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Ue)return it(r),null}else 2*$e()-y.renderingStartTime>hr&&l!==1073741824&&(r.flags|=128,d=!0,fi(y,!1),r.lanes=4194304);y.isBackwards?(C.sibling=r.child,r.child=C):(l=y.last,l!==null?l.sibling=C:r.child=C,y.last=C)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=$e(),r.sibling=null,l=be.current,Me(be,d?l&1|2:l&1),r):(it(r),null);case 22:case 23:return Yl(),d=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(Ct&1073741824)!==0&&(it(r),r.subtreeFlags&6&&(r.flags|=8192)):it(r),null;case 24:return null;case 25:return null}throw Error(e(156,r.tag))}function sg(n,r){switch(rl(r),r.tag){case 1:return ct(r.type)&&Xi(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return dr(),De(ut),De(nt),gl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ml(r),null;case 13:if(De(be),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(e(340));lr()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return De(be),null;case 4:return dr(),null;case 10:return ul(r.type._context),null;case 22:case 23:return Yl(),null;case 24:return null;default:return null}}var Co=!1,ot=!1,lg=typeof WeakSet=="function"?WeakSet:Set,Z=null;function pr(n,r){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Ge(n,r,d)}else l.current=null}function Vl(n,r,l){try{l()}catch(d){Ge(n,r,d)}}var dd=!1;function ag(n,r){if(Ys=Oi,n=$u(),zs(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var C=0,E=-1,w=-1,P=0,V=0,O=n,F=null;t:for(;;){for(var Y;O!==l||p!==0&&O.nodeType!==3||(E=C+p),O!==y||d!==0&&O.nodeType!==3||(w=C+d),O.nodeType===3&&(C+=O.nodeValue.length),(Y=O.firstChild)!==null;)F=O,O=Y;for(;;){if(O===n)break t;if(F===l&&++P===p&&(E=C),F===y&&++V===d&&(w=C),(Y=O.nextSibling)!==null)break;O=F,F=O.parentNode}O=Y}l=E===-1||w===-1?null:{start:E,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(Js={focusedElem:n,selectionRange:l},Oi=!1,Z=r;Z!==null;)if(r=Z,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Z=n;else for(;Z!==null;){r=Z;try{var X=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var ne=X.memoizedProps,He=X.memoizedState,A=r.stateNode,I=A.getSnapshotBeforeUpdate(r.elementType===r.type?ne:Pt(r.type,ne),He);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=r.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(B){Ge(r,r.return,B)}if(n=r.sibling,n!==null){n.return=r.return,Z=n;break}Z=r.return}return X=dd,dd=!1,X}function pi(n,r,l){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&n)===n){var y=p.destroy;p.destroy=void 0,y!==void 0&&Vl(r,l,y)}p=p.next}while(p!==d)}}function _o(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==r)}}function Ul(n){var r=n.ref;if(r!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof r=="function"?r(n):r.current=n}}function fd(n){var r=n.alternate;r!==null&&(n.alternate=null,fd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[bt],delete r[ni],delete r[Xs],delete r[Hh],delete r[qh])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pd(n){return n.tag===5||n.tag===3||n.tag===4}function md(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pd(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bl(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(n,r):l.insertBefore(n,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(n,l)):(r=l,r.appendChild(n)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Zi));else if(d!==4&&(n=n.child,n!==null))for(bl(n,r,l),n=n.sibling;n!==null;)bl(n,r,l),n=n.sibling}function Ol(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Ol(n,r,l),n=n.sibling;n!==null;)Ol(n,r,l),n=n.sibling}var et=null,Dt=!1;function gn(n,r,l){for(l=l.child;l!==null;)hd(n,r,l),l=l.sibling}function hd(n,r,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Di,l)}catch{}switch(l.tag){case 5:ot||pr(l,r);case 6:var d=et,p=Dt;et=null,gn(n,r,l),et=d,Dt=p,et!==null&&(Dt?(n=et,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):et.removeChild(l.stateNode));break;case 18:et!==null&&(Dt?(n=et,l=l.stateNode,n.nodeType===8?Qs(n.parentNode,l):n.nodeType===1&&Qs(n,l),qr(n)):Qs(et,l.stateNode));break;case 4:d=et,p=Dt,et=l.stateNode.containerInfo,Dt=!0,gn(n,r,l),et=d,Dt=p;break;case 0:case 11:case 14:case 15:if(!ot&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,C=y.destroy;y=y.tag,C!==void 0&&((y&2)!==0||(y&4)!==0)&&Vl(l,r,C),p=p.next}while(p!==d)}gn(n,r,l);break;case 1:if(!ot&&(pr(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(E){Ge(l,r,E)}gn(n,r,l);break;case 21:gn(n,r,l);break;case 22:l.mode&1?(ot=(d=ot)||l.memoizedState!==null,gn(n,r,l),ot=d):gn(n,r,l);break;default:gn(n,r,l)}}function gd(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new lg),r.forEach(function(d){var p=yg.bind(null,n,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Lt(n,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=n,C=r,E=C;e:for(;E!==null;){switch(E.tag){case 5:et=E.stateNode,Dt=!1;break e;case 3:et=E.stateNode.containerInfo,Dt=!0;break e;case 4:et=E.stateNode.containerInfo,Dt=!0;break e}E=E.return}if(et===null)throw Error(e(160));hd(y,C,p),et=null,Dt=!1;var w=p.alternate;w!==null&&(w.return=null),p.return=null}catch(P){Ge(p,r,P)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)yd(r,n),r=r.sibling}function yd(n,r){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Lt(r,n),Bt(n),d&4){try{pi(3,n,n.return),_o(3,n)}catch(ne){Ge(n,n.return,ne)}try{pi(5,n,n.return)}catch(ne){Ge(n,n.return,ne)}}break;case 1:Lt(r,n),Bt(n),d&512&&l!==null&&pr(l,l.return);break;case 5:if(Lt(r,n),Bt(n),d&512&&l!==null&&pr(l,l.return),n.flags&32){var p=n.stateNode;try{Lr(p,"")}catch(ne){Ge(n,n.return,ne)}}if(d&4&&(p=n.stateNode,p!=null)){var y=n.memoizedProps,C=l!==null?l.memoizedProps:y,E=n.type,w=n.updateQueue;if(n.updateQueue=null,w!==null)try{E==="input"&&y.type==="radio"&&y.name!=null&&qa(p,y),gs(E,C);var P=gs(E,y);for(C=0;C<w.length;C+=2){var V=w[C],O=w[C+1];V==="style"?Xa(p,O):V==="dangerouslySetInnerHTML"?Za(p,O):V==="children"?Lr(p,O):q(p,V,O,P)}switch(E){case"input":ds(p,y);break;case"textarea":Ya(p,y);break;case"select":var F=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Y=y.value;Y!=null?Wn(p,!!y.multiple,Y,!1):F!==!!y.multiple&&(y.defaultValue!=null?Wn(p,!!y.multiple,y.defaultValue,!0):Wn(p,!!y.multiple,y.multiple?[]:"",!1))}p[ni]=y}catch(ne){Ge(n,n.return,ne)}}break;case 6:if(Lt(r,n),Bt(n),d&4){if(n.stateNode===null)throw Error(e(162));p=n.stateNode,y=n.memoizedProps;try{p.nodeValue=y}catch(ne){Ge(n,n.return,ne)}}break;case 3:if(Lt(r,n),Bt(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{qr(r.containerInfo)}catch(ne){Ge(n,n.return,ne)}break;case 4:Lt(r,n),Bt(n);break;case 13:Lt(r,n),Bt(n),p=n.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Gl=$e())),d&4&&gd(n);break;case 22:if(V=l!==null&&l.memoizedState!==null,n.mode&1?(ot=(P=ot)||V,Lt(r,n),ot=P):Lt(r,n),Bt(n),d&8192){if(P=n.memoizedState!==null,(n.stateNode.isHidden=P)&&!V&&(n.mode&1)!==0)for(Z=n,V=n.child;V!==null;){for(O=Z=V;Z!==null;){switch(F=Z,Y=F.child,F.tag){case 0:case 11:case 14:case 15:pi(4,F,F.return);break;case 1:pr(F,F.return);var X=F.stateNode;if(typeof X.componentWillUnmount=="function"){d=F,l=F.return;try{r=d,X.props=r.memoizedProps,X.state=r.memoizedState,X.componentWillUnmount()}catch(ne){Ge(d,l,ne)}}break;case 5:pr(F,F.return);break;case 22:if(F.memoizedState!==null){Cd(O);continue}}Y!==null?(Y.return=F,Z=Y):Cd(O)}V=V.sibling}e:for(V=null,O=n;;){if(O.tag===5){if(V===null){V=O;try{p=O.stateNode,P?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(E=O.stateNode,w=O.memoizedProps.style,C=w!=null&&w.hasOwnProperty("display")?w.display:null,E.style.display=Qa("display",C))}catch(ne){Ge(n,n.return,ne)}}}else if(O.tag===6){if(V===null)try{O.stateNode.nodeValue=P?"":O.memoizedProps}catch(ne){Ge(n,n.return,ne)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===n)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===n)break e;for(;O.sibling===null;){if(O.return===null||O.return===n)break e;V===O&&(V=null),O=O.return}V===O&&(V=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Lt(r,n),Bt(n),d&4&&gd(n);break;case 21:break;default:Lt(r,n),Bt(n)}}function Bt(n){var r=n.flags;if(r&2){try{e:{for(var l=n.return;l!==null;){if(pd(l)){var d=l;break e}l=l.return}throw Error(e(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Lr(p,""),d.flags&=-33);var y=md(n);Ol(n,y,p);break;case 3:case 4:var C=d.stateNode.containerInfo,E=md(n);bl(n,E,C);break;default:throw Error(e(161))}}catch(w){Ge(n,n.return,w)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function ug(n,r,l){Z=n,vd(n)}function vd(n,r,l){for(var d=(n.mode&1)!==0;Z!==null;){var p=Z,y=p.child;if(p.tag===22&&d){var C=p.memoizedState!==null||Co;if(!C){var E=p.alternate,w=E!==null&&E.memoizedState!==null||ot;E=Co;var P=ot;if(Co=C,(ot=w)&&!P)for(Z=p;Z!==null;)C=Z,w=C.child,C.tag===22&&C.memoizedState!==null?_d(p):w!==null?(w.return=C,Z=w):_d(p);for(;y!==null;)Z=y,vd(y),y=y.sibling;Z=p,Co=E,ot=P}xd(n)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Z=y):xd(n)}}function xd(n){for(;Z!==null;){var r=Z;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:ot||_o(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!ot)if(l===null)d.componentDidMount();else{var p=r.elementType===r.type?l.memoizedProps:Pt(r.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=r.updateQueue;y!==null&&Cc(r,y,d);break;case 3:var C=r.updateQueue;if(C!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}Cc(r,C,l)}break;case 5:var E=r.stateNode;if(l===null&&r.flags&4){l=E;var w=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var P=r.alternate;if(P!==null){var V=P.memoizedState;if(V!==null){var O=V.dehydrated;O!==null&&qr(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}ot||r.flags&512&&Ul(r)}catch(F){Ge(r,r.return,F)}}if(r===n){Z=null;break}if(l=r.sibling,l!==null){l.return=r.return,Z=l;break}Z=r.return}}function Cd(n){for(;Z!==null;){var r=Z;if(r===n){Z=null;break}var l=r.sibling;if(l!==null){l.return=r.return,Z=l;break}Z=r.return}}function _d(n){for(;Z!==null;){var r=Z;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{_o(4,r)}catch(w){Ge(r,l,w)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var p=r.return;try{d.componentDidMount()}catch(w){Ge(r,p,w)}}var y=r.return;try{Ul(r)}catch(w){Ge(r,y,w)}break;case 5:var C=r.return;try{Ul(r)}catch(w){Ge(r,C,w)}}}catch(w){Ge(r,r.return,w)}if(r===n){Z=null;break}var E=r.sibling;if(E!==null){E.return=r.return,Z=E;break}Z=r.return}}var cg=Math.ceil,To=J.ReactCurrentDispatcher,zl=J.ReactCurrentOwner,It=J.ReactCurrentBatchConfig,Te=0,Qe=null,qe=null,tt=0,Ct=0,mr=dn(0),Ke=0,mi=null,Vn=0,Eo=0,Bl=0,hi=null,ft=null,Gl=0,hr=1/0,en=null,So=!1,$l=null,yn=null,wo=!1,vn=null,Io=0,gi=0,Hl=null,No=-1,ko=0;function lt(){return(Te&6)!==0?$e():No!==-1?No:No=$e()}function xn(n){return(n.mode&1)===0?1:(Te&2)!==0&&tt!==0?tt&-tt:jh.transition!==null?(ko===0&&(ko=mu()),ko):(n=Ae,n!==0||(n=window.event,n=n===void 0?16:Eu(n.type)),n)}function Ft(n,r,l,d){if(50<gi)throw gi=0,Hl=null,Error(e(185));zr(n,l,d),((Te&2)===0||n!==Qe)&&(n===Qe&&((Te&2)===0&&(Eo|=l),Ke===4&&Cn(n,tt)),pt(n,d),l===1&&Te===0&&(r.mode&1)===0&&(hr=$e()+500,to&&pn()))}function pt(n,r){var l=n.callbackNode;jm(n,r);var d=Vi(n,n===Qe?tt:0);if(d===0)l!==null&&du(l),n.callbackNode=null,n.callbackPriority=0;else if(r=d&-d,n.callbackPriority!==r){if(l!=null&&du(l),r===1)n.tag===0?Wh(Ed.bind(null,n)):ac(Ed.bind(null,n)),Gh(function(){(Te&6)===0&&pn()}),l=null;else{switch(hu(d)){case 1:l=Es;break;case 4:l=fu;break;case 16:l=Pi;break;case 536870912:l=pu;break;default:l=Pi}l=Md(l,Td.bind(null,n))}n.callbackPriority=r,n.callbackNode=l}}function Td(n,r){if(No=-1,ko=0,(Te&6)!==0)throw Error(e(327));var l=n.callbackNode;if(gr()&&n.callbackNode!==l)return null;var d=Vi(n,n===Qe?tt:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||r)r=Ao(n,d);else{r=d;var p=Te;Te|=2;var y=wd();(Qe!==n||tt!==r)&&(en=null,hr=$e()+500,bn(n,r));do try{pg();break}catch(E){Sd(n,E)}while(!0);al(),To.current=y,Te=p,qe!==null?r=0:(Qe=null,tt=0,r=Ke)}if(r!==0){if(r===2&&(p=Ss(n),p!==0&&(d=p,r=ql(n,p))),r===1)throw l=mi,bn(n,0),Cn(n,d),pt(n,$e()),l;if(r===6)Cn(n,d);else{if(p=n.current.alternate,(d&30)===0&&!dg(p)&&(r=Ao(n,d),r===2&&(y=Ss(n),y!==0&&(d=y,r=ql(n,y))),r===1))throw l=mi,bn(n,0),Cn(n,d),pt(n,$e()),l;switch(n.finishedWork=p,n.finishedLanes=d,r){case 0:case 1:throw Error(e(345));case 2:On(n,ft,en);break;case 3:if(Cn(n,d),(d&130023424)===d&&(r=Gl+500-$e(),10<r)){if(Vi(n,0)!==0)break;if(p=n.suspendedLanes,(p&d)!==d){lt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Zs(On.bind(null,n,ft,en),r);break}On(n,ft,en);break;case 4:if(Cn(n,d),(d&4194240)===d)break;for(r=n.eventTimes,p=-1;0<d;){var C=31-At(d);y=1<<C,C=r[C],C>p&&(p=C),d&=~y}if(d=p,d=$e()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*cg(d/1960))-d,10<d){n.timeoutHandle=Zs(On.bind(null,n,ft,en),d);break}On(n,ft,en);break;case 5:On(n,ft,en);break;default:throw Error(e(329))}}}return pt(n,$e()),n.callbackNode===l?Td.bind(null,n):null}function ql(n,r){var l=hi;return n.current.memoizedState.isDehydrated&&(bn(n,r).flags|=256),n=Ao(n,r),n!==2&&(r=ft,ft=l,r!==null&&Wl(r)),n}function Wl(n){ft===null?ft=n:ft.push.apply(ft,n)}function dg(n){for(var r=n;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Rt(y(),p))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Cn(n,r){for(r&=~Bl,r&=~Eo,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var l=31-At(r),d=1<<l;n[l]=-1,r&=~d}}function Ed(n){if((Te&6)!==0)throw Error(e(327));gr();var r=Vi(n,0);if((r&1)===0)return pt(n,$e()),null;var l=Ao(n,r);if(n.tag!==0&&l===2){var d=Ss(n);d!==0&&(r=d,l=ql(n,d))}if(l===1)throw l=mi,bn(n,0),Cn(n,r),pt(n,$e()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,On(n,ft,en),pt(n,$e()),null}function jl(n,r){var l=Te;Te|=1;try{return n(r)}finally{Te=l,Te===0&&(hr=$e()+500,to&&pn())}}function Un(n){vn!==null&&vn.tag===0&&(Te&6)===0&&gr();var r=Te;Te|=1;var l=It.transition,d=Ae;try{if(It.transition=null,Ae=1,n)return n()}finally{Ae=d,It.transition=l,Te=r,(Te&6)===0&&pn()}}function Yl(){Ct=mr.current,De(mr)}function bn(n,r){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,Bh(l)),qe!==null)for(l=qe.return;l!==null;){var d=l;switch(rl(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Xi();break;case 3:dr(),De(ut),De(nt),gl();break;case 5:ml(d);break;case 4:dr();break;case 13:De(be);break;case 19:De(be);break;case 10:ul(d.type._context);break;case 22:case 23:Yl()}l=l.return}if(Qe=n,qe=n=_n(n.current,null),tt=Ct=r,Ke=0,mi=null,Bl=Eo=Vn=0,ft=hi=null,Dn!==null){for(r=0;r<Dn.length;r++)if(l=Dn[r],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var C=y.next;y.next=p,d.next=C}l.pending=d}Dn=null}return n}function Sd(n,r){do{var l=qe;try{if(al(),fo.current=go,po){for(var d=Oe.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}po=!1}if(Fn=0,Ze=Je=Oe=null,ai=!1,ui=0,zl.current=null,l===null||l.return===null){Ke=1,mi=r,qe=null;break}e:{var y=n,C=l.return,E=l,w=r;if(r=tt,E.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var P=w,V=E,O=V.tag;if((V.mode&1)===0&&(O===0||O===11||O===15)){var F=V.alternate;F?(V.updateQueue=F.updateQueue,V.memoizedState=F.memoizedState,V.lanes=F.lanes):(V.updateQueue=null,V.memoizedState=null)}var Y=Jc(C);if(Y!==null){Y.flags&=-257,Kc(Y,C,E,y,r),Y.mode&1&&Yc(y,P,r),r=Y,w=P;var X=r.updateQueue;if(X===null){var ne=new Set;ne.add(w),r.updateQueue=ne}else X.add(w);break e}else{if((r&1)===0){Yc(y,P,r),Jl();break e}w=Error(e(426))}}else if(Ue&&E.mode&1){var He=Jc(C);if(He!==null){(He.flags&65536)===0&&(He.flags|=256),Kc(He,C,E,y,r),sl(fr(w,E));break e}}y=w=fr(w,E),Ke!==4&&(Ke=2),hi===null?hi=[y]:hi.push(y),y=C;do{switch(y.tag){case 3:y.flags|=65536,r&=-r,y.lanes|=r;var A=Wc(y,w,r);xc(y,A);break e;case 1:E=w;var I=y.type,R=y.stateNode;if((y.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(yn===null||!yn.has(R)))){y.flags|=65536,r&=-r,y.lanes|=r;var B=jc(y,E,r);xc(y,B);break e}}y=y.return}while(y!==null)}Nd(l)}catch(re){r=re,qe===l&&l!==null&&(qe=l=l.return);continue}break}while(!0)}function wd(){var n=To.current;return To.current=go,n===null?go:n}function Jl(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||(Vn&268435455)===0&&(Eo&268435455)===0||Cn(Qe,tt)}function Ao(n,r){var l=Te;Te|=2;var d=wd();(Qe!==n||tt!==r)&&(en=null,bn(n,r));do try{fg();break}catch(p){Sd(n,p)}while(!0);if(al(),Te=l,To.current=d,qe!==null)throw Error(e(261));return Qe=null,tt=0,Ke}function fg(){for(;qe!==null;)Id(qe)}function pg(){for(;qe!==null&&!bm();)Id(qe)}function Id(n){var r=Rd(n.alternate,n,Ct);n.memoizedProps=n.pendingProps,r===null?Nd(n):qe=r,zl.current=null}function Nd(n){var r=n;do{var l=r.alternate;if(n=r.return,(r.flags&32768)===0){if(l=og(l,r,Ct),l!==null){qe=l;return}}else{if(l=sg(l,r),l!==null){l.flags&=32767,qe=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ke=6,qe=null;return}}if(r=r.sibling,r!==null){qe=r;return}qe=r=n}while(r!==null);Ke===0&&(Ke=5)}function On(n,r,l){var d=Ae,p=It.transition;try{It.transition=null,Ae=1,mg(n,r,l,d)}finally{It.transition=p,Ae=d}return null}function mg(n,r,l,d){do gr();while(vn!==null);if((Te&6)!==0)throw Error(e(327));l=n.finishedWork;var p=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ym(n,y),n===Qe&&(qe=Qe=null,tt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||wo||(wo=!0,Md(Pi,function(){return gr(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=It.transition,It.transition=null;var C=Ae;Ae=1;var E=Te;Te|=4,zl.current=null,ag(n,l),yd(l,n),Lh(Js),Oi=!!Ys,Js=Ys=null,n.current=l,ug(l),Om(),Te=E,Ae=C,It.transition=y}else n.current=l;if(wo&&(wo=!1,vn=n,Io=p),y=n.pendingLanes,y===0&&(yn=null),Gm(l.stateNode),pt(n,$e()),r!==null)for(d=n.onRecoverableError,l=0;l<r.length;l++)p=r[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(So)throw So=!1,n=$l,$l=null,n;return(Io&1)!==0&&n.tag!==0&&gr(),y=n.pendingLanes,(y&1)!==0?n===Hl?gi++:(gi=0,Hl=n):gi=0,pn(),null}function gr(){if(vn!==null){var n=hu(Io),r=It.transition,l=Ae;try{if(It.transition=null,Ae=16>n?16:n,vn===null)var d=!1;else{if(n=vn,vn=null,Io=0,(Te&6)!==0)throw Error(e(331));var p=Te;for(Te|=4,Z=n.current;Z!==null;){var y=Z,C=y.child;if((Z.flags&16)!==0){var E=y.deletions;if(E!==null){for(var w=0;w<E.length;w++){var P=E[w];for(Z=P;Z!==null;){var V=Z;switch(V.tag){case 0:case 11:case 15:pi(8,V,y)}var O=V.child;if(O!==null)O.return=V,Z=O;else for(;Z!==null;){V=Z;var F=V.sibling,Y=V.return;if(fd(V),V===P){Z=null;break}if(F!==null){F.return=Y,Z=F;break}Z=Y}}}var X=y.alternate;if(X!==null){var ne=X.child;if(ne!==null){X.child=null;do{var He=ne.sibling;ne.sibling=null,ne=He}while(ne!==null)}}Z=y}}if((y.subtreeFlags&2064)!==0&&C!==null)C.return=y,Z=C;else e:for(;Z!==null;){if(y=Z,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:pi(9,y,y.return)}var A=y.sibling;if(A!==null){A.return=y.return,Z=A;break e}Z=y.return}}var I=n.current;for(Z=I;Z!==null;){C=Z;var R=C.child;if((C.subtreeFlags&2064)!==0&&R!==null)R.return=C,Z=R;else e:for(C=I;Z!==null;){if(E=Z,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:_o(9,E)}}catch(re){Ge(E,E.return,re)}if(E===C){Z=null;break e}var B=E.sibling;if(B!==null){B.return=E.return,Z=B;break e}Z=E.return}}if(Te=p,pn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Di,n)}catch{}d=!0}return d}finally{Ae=l,It.transition=r}}return!1}function kd(n,r,l){r=fr(l,r),r=Wc(n,r,1),n=hn(n,r,1),r=lt(),n!==null&&(zr(n,1,r),pt(n,r))}function Ge(n,r,l){if(n.tag===3)kd(n,n,l);else for(;r!==null;){if(r.tag===3){kd(r,n,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(yn===null||!yn.has(d))){n=fr(l,n),n=jc(r,n,1),r=hn(r,n,1),n=lt(),r!==null&&(zr(r,1,n),pt(r,n));break}}r=r.return}}function hg(n,r,l){var d=n.pingCache;d!==null&&d.delete(r),r=lt(),n.pingedLanes|=n.suspendedLanes&l,Qe===n&&(tt&l)===l&&(Ke===4||Ke===3&&(tt&130023424)===tt&&500>$e()-Gl?bn(n,0):Bl|=l),pt(n,r)}function Ad(n,r){r===0&&((n.mode&1)===0?r=1:(r=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var l=lt();n=Zt(n,r),n!==null&&(zr(n,r,l),pt(n,l))}function gg(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Ad(n,l)}function yg(n,r){var l=0;switch(n.tag){case 13:var d=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(e(314))}d!==null&&d.delete(r),Ad(n,l)}var Rd;Rd=function(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps||ut.current)dt=!0;else{if((n.lanes&l)===0&&(r.flags&128)===0)return dt=!1,ig(n,r,l);dt=(n.flags&131072)!==0}else dt=!1,Ue&&(r.flags&1048576)!==0&&uc(r,ro,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;xo(n,r),n=r.pendingProps;var p=ir(r,nt.current);cr(r,l),p=xl(null,r,d,n,p,l);var y=Cl();return r.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ct(d)?(y=!0,eo(r)):y=!1,r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,fl(r),p.updater=yo,r.stateNode=p,p._reactInternals=r,Il(r,d,n,l),r=Rl(null,r,d,!0,y,l)):(r.tag=0,Ue&&y&&nl(r),st(null,r,p,l),r=r.child),r;case 16:d=r.elementType;e:{switch(xo(n,r),n=r.pendingProps,p=d._init,d=p(d._payload),r.type=d,p=r.tag=xg(d),n=Pt(d,n),p){case 0:r=Al(null,r,d,n,l);break e;case 1:r=nd(null,r,d,n,l);break e;case 11:r=Zc(null,r,d,n,l);break e;case 14:r=Qc(null,r,d,Pt(d.type,n),l);break e}throw Error(e(306,d,""))}return r;case 0:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),Al(n,r,d,p,l);case 1:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),nd(n,r,d,p,l);case 3:e:{if(rd(r),n===null)throw Error(e(387));d=r.pendingProps,y=r.memoizedState,p=y.element,vc(n,r),uo(r,d,null,l);var C=r.memoizedState;if(d=C.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){p=fr(Error(e(423)),r),r=id(n,r,d,l,p);break e}else if(d!==p){p=fr(Error(e(424)),r),r=id(n,r,d,l,p);break e}else for(xt=cn(r.stateNode.containerInfo.firstChild),vt=r,Ue=!0,Mt=null,l=gc(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(lr(),d===p){r=Xt(n,r,l);break e}st(n,r,d,l)}r=r.child}return r;case 5:return _c(r),n===null&&ol(r),d=r.type,p=r.pendingProps,y=n!==null?n.memoizedProps:null,C=p.children,Ks(d,p)?C=null:y!==null&&Ks(d,y)&&(r.flags|=32),td(n,r),st(n,r,C,l),r.child;case 6:return n===null&&ol(r),null;case 13:return od(n,r,l);case 4:return pl(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=ar(r,null,d,l):st(n,r,d,l),r.child;case 11:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),Zc(n,r,d,p,l);case 7:return st(n,r,r.pendingProps,l),r.child;case 8:return st(n,r,r.pendingProps.children,l),r.child;case 12:return st(n,r,r.pendingProps.children,l),r.child;case 10:e:{if(d=r.type._context,p=r.pendingProps,y=r.memoizedProps,C=p.value,Me(so,d._currentValue),d._currentValue=C,y!==null)if(Rt(y.value,C)){if(y.children===p.children&&!ut.current){r=Xt(n,r,l);break e}}else for(y=r.child,y!==null&&(y.return=r);y!==null;){var E=y.dependencies;if(E!==null){C=y.child;for(var w=E.firstContext;w!==null;){if(w.context===d){if(y.tag===1){w=Qt(-1,l&-l),w.tag=2;var P=y.updateQueue;if(P!==null){P=P.shared;var V=P.pending;V===null?w.next=w:(w.next=V.next,V.next=w),P.pending=w}}y.lanes|=l,w=y.alternate,w!==null&&(w.lanes|=l),cl(y.return,l,r),E.lanes|=l;break}w=w.next}}else if(y.tag===10)C=y.type===r.type?null:y.child;else if(y.tag===18){if(C=y.return,C===null)throw Error(e(341));C.lanes|=l,E=C.alternate,E!==null&&(E.lanes|=l),cl(C,l,r),C=y.sibling}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===r){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}st(n,r,p.children,l),r=r.child}return r;case 9:return p=r.type,d=r.pendingProps.children,cr(r,l),p=St(p),d=d(p),r.flags|=1,st(n,r,d,l),r.child;case 14:return d=r.type,p=Pt(d,r.pendingProps),p=Pt(d.type,p),Qc(n,r,d,p,l);case 15:return Xc(n,r,r.type,r.pendingProps,l);case 17:return d=r.type,p=r.pendingProps,p=r.elementType===d?p:Pt(d,p),xo(n,r),r.tag=1,ct(d)?(n=!0,eo(r)):n=!1,cr(r,l),Hc(r,d,p),Il(r,d,p,l),Rl(null,r,d,!0,n,l);case 19:return ld(n,r,l);case 22:return ed(n,r,l)}throw Error(e(156,r.tag))};function Md(n,r){return cu(n,r)}function vg(n,r,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(n,r,l,d){return new vg(n,r,l,d)}function Kl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xg(n){if(typeof n=="function")return Kl(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ye)return 11;if(n===je)return 14}return 2}function _n(n,r){var l=n.alternate;return l===null?(l=Nt(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Ro(n,r,l,d,p,y){var C=2;if(d=n,typeof n=="function")Kl(n)&&(C=1);else if(typeof n=="string")C=5;else e:switch(n){case te:return zn(l.children,p,y,r);case xe:C=8,p|=8;break;case se:return n=Nt(12,l,r,p|2),n.elementType=se,n.lanes=y,n;case Ne:return n=Nt(13,l,r,p),n.elementType=Ne,n.lanes=y,n;case _e:return n=Nt(19,l,r,p),n.elementType=_e,n.lanes=y,n;case oe:return Mo(l,p,y,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pe:C=10;break e;case Be:C=9;break e;case ye:C=11;break e;case je:C=14;break e;case Ye:C=16,d=null;break e}throw Error(e(130,n==null?n:typeof n,""))}return r=Nt(C,l,r,p),r.elementType=n,r.type=d,r.lanes=y,r}function zn(n,r,l,d){return n=Nt(7,n,d,r),n.lanes=l,n}function Mo(n,r,l,d){return n=Nt(22,n,d,r),n.elementType=oe,n.lanes=l,n.stateNode={isHidden:!1},n}function Zl(n,r,l){return n=Nt(6,n,null,r),n.lanes=l,n}function Ql(n,r,l){return r=Nt(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Cg(n,r,l,d,p){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Xl(n,r,l,d,p,y,C,E,w){return n=new Cg(n,r,l,E,w),r===1?(r=1,y===!0&&(r|=8)):r=0,y=Nt(3,null,null,r),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},fl(y),n}function _g(n,r,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:d==null?null:""+d,children:n,containerInfo:r,implementation:l}}function Pd(n){if(!n)return fn;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(e(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ct(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(ct(l))return sc(n,l,r)}return r}function Dd(n,r,l,d,p,y,C,E,w){return n=Xl(l,d,!0,n,p,y,C,E,w),n.context=Pd(null),l=n.current,d=lt(),p=xn(l),y=Qt(d,p),y.callback=r??null,hn(l,y,p),n.current.lanes=p,zr(n,p,d),pt(n,d),n}function Po(n,r,l,d){var p=r.current,y=lt(),C=xn(p);return l=Pd(l),r.context===null?r.context=l:r.pendingContext=l,r=Qt(y,C),r.payload={element:n},d=d===void 0?null:d,d!==null&&(r.callback=d),n=hn(p,r,C),n!==null&&(Ft(n,p,C,y),ao(n,p,C)),C}function Do(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ld(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function ea(n,r){Ld(n,r),(n=n.alternate)&&Ld(n,r)}function Tg(){return null}var Fd=typeof reportError=="function"?reportError:function(n){console.error(n)};function ta(n){this._internalRoot=n}Lo.prototype.render=ta.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(e(409));Po(n,r,null,null)},Lo.prototype.unmount=ta.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Un(function(){Po(null,n,null,null)}),r[jt]=null}};function Lo(n){this._internalRoot=n}Lo.prototype.unstable_scheduleHydration=function(n){if(n){var r=vu();n={blockedOn:null,target:n,priority:r};for(var l=0;l<ln.length&&r!==0&&r<ln[l].priority;l++);ln.splice(l,0,n),l===0&&_u(n)}};function na(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function Eg(n,r,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var P=Do(C);y.call(P)}}var C=Dd(r,d,n,0,null,!1,!1,"",Vd);return n._reactRootContainer=C,n[jt]=C.current,ei(n.nodeType===8?n.parentNode:n),Un(),C}for(;p=n.lastChild;)n.removeChild(p);if(typeof d=="function"){var E=d;d=function(){var P=Do(w);E.call(P)}}var w=Xl(n,0,!1,null,null,!1,!1,"",Vd);return n._reactRootContainer=w,n[jt]=w.current,ei(n.nodeType===8?n.parentNode:n),Un(function(){Po(r,w,l,d)}),w}function Vo(n,r,l,d,p){var y=l._reactRootContainer;if(y){var C=y;if(typeof p=="function"){var E=p;p=function(){var w=Do(C);E.call(w)}}Po(r,C,n,p)}else C=Eg(l,r,n,p,d);return Do(C)}gu=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var l=Or(r.pendingLanes);l!==0&&(Is(r,l|1),pt(r,$e()),(Te&6)===0&&(hr=$e()+500,pn()))}break;case 13:Un(function(){var d=Zt(n,1);if(d!==null){var p=lt();Ft(d,n,1,p)}}),ea(n,1)}},Ns=function(n){if(n.tag===13){var r=Zt(n,134217728);if(r!==null){var l=lt();Ft(r,n,134217728,l)}ea(n,134217728)}},yu=function(n){if(n.tag===13){var r=xn(n),l=Zt(n,r);if(l!==null){var d=lt();Ft(l,n,r,d)}ea(n,r)}},vu=function(){return Ae},xu=function(n,r){var l=Ae;try{return Ae=n,r()}finally{Ae=l}},xs=function(n,r,l){switch(r){case"input":if(ds(n,l),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==n&&d.form===n.form){var p=Qi(d);if(!p)throw Error(e(90));$a(d),ds(d,p)}}}break;case"textarea":Ya(n,l);break;case"select":r=l.value,r!=null&&Wn(n,!!l.multiple,r,!1)}},ru=jl,iu=Un;var Sg={usingClientEntryPoint:!1,Events:[ri,nr,Qi,tu,nu,jl]},yi={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wg={bundleType:yi.bundleType,version:yi.version,rendererPackageName:yi.rendererPackageName,rendererConfig:yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=au(n),n===null?null:n.stateNode},findFiberByHostInstance:yi.findFiberByHostInstance||Tg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uo.isDisabled&&Uo.supportsFiber)try{Di=Uo.inject(wg),Ut=Uo}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sg,mt.createPortal=function(n,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!na(r))throw Error(e(200));return _g(n,r,null,l)},mt.createRoot=function(n,r){if(!na(n))throw Error(e(299));var l=!1,d="",p=Fd;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),r=Xl(n,1,!1,null,null,l,!1,d,p),n[jt]=r.current,ei(n.nodeType===8?n.parentNode:n),new ta(r)},mt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=au(r),n=n===null?null:n.stateNode,n},mt.flushSync=function(n){return Un(n)},mt.hydrate=function(n,r,l){if(!Fo(r))throw Error(e(200));return Vo(null,n,r,!0,l)},mt.hydrateRoot=function(n,r,l){if(!na(n))throw Error(e(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",C=Fd;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),r=Dd(r,null,n,1,l??null,p,!1,y,C),n[jt]=r.current,ei(n),d)for(n=0;n<d.length;n++)l=d[n],p=l._getVersion,p=p(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,p]:r.mutableSourceEagerHydrationData.push(l,p);return new Lo(r)},mt.render=function(n,r,l){if(!Fo(r))throw Error(e(200));return Vo(null,n,r,!1,l)},mt.unmountComponentAtNode=function(n){if(!Fo(n))throw Error(e(40));return n._reactRootContainer?(Un(function(){Vo(null,null,n,!1,function(){n._reactRootContainer=null,n[jt]=null})}),!0):!1},mt.unstable_batchedUpdates=jl,mt.unstable_renderSubtreeIntoContainer=function(n,r,l,d){if(!Fo(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Vo(n,r,l,!1,d)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var Hd;function Rp(){if(Hd)return oa.exports;Hd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),oa.exports=Dg(),oa.exports}var qd;function Lg(){if(qd)return bo;qd=1;var i=Rp();return bo.createRoot=i.createRoot,bo.hydrateRoot=i.hydrateRoot,bo}var Mp=Lg(),b=La();const Ar=Ng(b),da=[{label:"XX-Small",value:"0.75"},{label:"X-Small",value:"0.85"},{label:"Small",value:"1.0"},{label:"Medium",value:"1.15"},{label:"Large",value:"1.3"},{label:"X-Large",value:"1.5"}],Pp=2,Fg="JapaneseAnalyzerDB",Vg=1,_r="text_entries",Tr="review_deck",jo="settings",Yo="transient_state";let Oo=null;const Fa=()=>Oo||(Oo=new Promise((i,t)=>{const e=indexedDB.open(Fg,Vg);e.onupgradeneeded=o=>{const s=o.target.result;if(s.objectStoreNames.contains(_r)||s.createObjectStore(_r,{keyPath:"id"}).createIndex("updatedAt","updatedAt",{unique:!1}),!s.objectStoreNames.contains(Tr)){const a=s.createObjectStore(Tr,{keyPath:"id"});a.createIndex("nextReviewDate","nextReviewDate",{unique:!1}),a.createIndex("textEntryId","textEntryId",{unique:!1})}s.objectStoreNames.contains(jo)||s.createObjectStore(jo,{keyPath:"key"}),s.objectStoreNames.contains(Yo)||s.createObjectStore(Yo,{keyPath:"key"})},e.onsuccess=o=>{i(o.target.result)},e.onerror=o=>{console.error("IndexedDB error:",o.target.error),t("IndexedDB error")}}),Oo),Rr=async(i,t)=>(await Fa()).transaction(i,t).objectStore(i),Ug=async(i,t)=>{const e=await Rr(i,"readonly");return new Promise((o,s)=>{const a=e.get(t);a.onsuccess=()=>o(a.result),a.onerror=()=>s(a.error)})},Va=async i=>{const t=await Rr(i,"readonly");return new Promise((e,o)=>{const s=t.getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>o(s.error)})},Ua=async(i,t)=>{const e=await Rr(i,"readwrite");return new Promise((o,s)=>{const a=e.put(t);a.onsuccess=()=>o(a.result),a.onerror=()=>s(a.error)})},Dp=async(i,t)=>{const e=await Rr(i,"readwrite");return new Promise((o,s)=>{const a=e.delete(t);a.onsuccess=()=>o(a.result),a.onerror=()=>s(a.error)})},Lp=async i=>{const t=await Rr(i,"readwrite");return new Promise((e,o)=>{const s=t.clear();s.onsuccess=()=>e(s.result),s.onerror=()=>o(s.error)})},Fp=()=>Va(_r).then(i=>i.sort((t,e)=>e.updatedAt-t.updatedAt)),vr=i=>Ua(_r,i),bg=i=>Dp(_r,i),fa=()=>Lp(_r),Vp=()=>Va(Tr).then(i=>i.sort((t,e)=>t.addedAt-e.addedAt)),pa=i=>Ua(Tr,i),Og=i=>Dp(Tr,i),Up=()=>Lp(Tr),ba=async()=>{const t=(await Va(jo)).reduce((e,{key:o,value:s})=>(e[o]=s,e),{});return{theme:t.theme||"light",showFurigana:t.showFurigana!==!1,showColorCoding:t.showColorCoding!==!1,showPitchAccent:t.showPitchAccent!==!1,analysisDepth:t.analysisDepth||"medium",fontSizeIndex:t.fontSizeIndex??Pp,newWordsPerDay:t.newWordsPerDay||10,userApiKey:t.userApiKey||null}},bp=async i=>{const t=await Rr(jo,"readwrite"),e=Object.entries(i).map(([o,s])=>new Promise((a,f)=>{const m=t.put({key:o,value:s});m.onsuccess=a,m.onerror=f}));return Promise.all(e)},Wd=i=>Ug(Yo,i).then(t=>t==null?void 0:t.value),Jo=(i,t)=>Ua(Yo,{key:i,value:t});var Le=(i=>(i.Editor="EDITOR",i.Reader="READER",i.ReadingMode="READING_MODE",i.Review="REVIEW",i))(Le||{});const Op={isLoading:!0,view:"EDITOR",currentTextEntryId:null,editingEntryId:null,selectedSentence:null,history:[],reviewDeck:[]},zg=(i,t)=>{switch(t.type){case"INITIALIZE_DATA_SUCCESS":return{...i,isLoading:!1,...t.payload};case"INITIALIZE_DATA_FAILURE":return{...i,isLoading:!1};case"SET_VIEW":return{...i,view:t.payload,selectedSentence:null};case"START_EDITING":return{...i,view:"EDITOR",editingEntryId:t.payload,currentTextEntryId:t.payload,selectedSentence:null};case"RESET_VIEW":return Jo("unsaved-title",""),Jo("unsaved-text",""),{...i,view:"EDITOR",currentTextEntryId:null,selectedSentence:null,editingEntryId:null};case"SET_CURRENT_TEXT_ENTRY_ID":return{...i,currentTextEntryId:t.payload,selectedSentence:null};case"SET_SELECTED_SENTENCE":return{...i,selectedSentence:t.payload};case"SET_HISTORY":{const e=t.payload;return fa().then(()=>{e.forEach(o=>vr(o))}),{...i,history:e}}case"ADD_OR_UPDATE_TEXT_ENTRY":{const e=t.payload;vr(e);const o=i.history.findIndex(a=>a.id===e.id);let s;return o>-1?(s=[...i.history],s[o]=e):s=[e,...i.history],s.sort((a,f)=>f.updatedAt-a.updatedAt),{...i,history:s,editingEntryId:null}}case"REMOVE_TEXT_ENTRY":{const e=t.payload;bg(e);const o=i.history.filter(a=>a.id!==e),s=i.currentTextEntryId===e;return{...i,history:o,currentTextEntryId:s?null:i.currentTextEntryId,view:s?"EDITOR":i.view,selectedSentence:s?null:i.selectedSentence}}case"CLEAR_HISTORY":return fa(),{...i,history:[],currentTextEntryId:null,view:"EDITOR",selectedSentence:null};case"SET_REVIEW_DECK":{const e=t.payload;return Up().then(()=>{e.forEach(o=>pa(o))}),{...i,reviewDeck:e}}case"ADD_OR_UPDATE_REVIEW_ITEM":{const e=t.payload;pa(e);const o=i.reviewDeck.findIndex(a=>a.id===e.id);let s;return o>-1?(s=[...i.reviewDeck],s[o]=e):s=[...i.reviewDeck,e],s.sort((a,f)=>a.addedAt-f.addedAt),{...i,reviewDeck:s}}case"REMOVE_REVIEW_ITEM":{const e=t.payload;Og(e);const o=i.reviewDeck.filter(s=>s.id!==e);return{...i,reviewDeck:o}}case"NAVIGATE_SENTENCE":{if(!i.currentTextEntryId)return i;const e=i.history.findIndex(g=>g.id===i.currentTextEntryId);if(e===-1)return i;const o=[...i.history],s={...o[e]},a=s.text.split(`
`).flatMap(g=>{var h;return((h=g.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:h.filter(x=>x==null?void 0:x.trim()))||[]}),m=s.readingProgress+(t.payload.direction==="next"?1:-1);return m>=0&&m<a.length?(s.readingProgress=m,o[e]=s,vr(s),{...i,history:o}):i}case"JUMP_TO_SENTENCE":{if(!i.currentTextEntryId)return i;const e=i.history.findIndex(m=>m.id===i.currentTextEntryId);if(e===-1)return i;const o=[...i.history],s={...o[e]},a=s.text.split(`
`).flatMap(m=>{var g;return((g=m.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:g.filter(h=>h==null?void 0:h.trim()))||[]}),f=t.payload.index;return f>=0&&f<a.length?(s.readingProgress=f,o[e]=s,vr(s),{...i,history:o}):i}case"CACHE_ANALYSIS":{const{entryId:e,sentence:o,depth:s,analysis:a}=t.payload,f=i.history.findIndex(T=>T.id===e);if(f===-1)return i;const m=[...i.history],g=m[f],h={...g.analyzedSentences[o]||{},[s]:a},x={...g.analyzedSentences,[o]:h},_={...g,analyzedSentences:x};return m[f]=_,vr(_),{...i,history:m}}default:return i}},zp=b.createContext({state:Op,dispatch:()=>null});function Bp({children:i}){const[t,e]=b.useReducer(zg,Op);return b.useEffect(()=>{const o=async()=>{try{const s=await Fp(),a=await Vp();e({type:"INITIALIZE_DATA_SUCCESS",payload:{history:s,reviewDeck:a}})}catch(s){console.error("Failed to load app data from IndexedDB",s),e({type:"INITIALIZE_DATA_FAILURE"})}};Fa().then(o).catch(s=>{console.error("DB Init failed",s),e({type:"INITIALIZE_DATA_FAILURE"})})},[]),v.jsx(zp.Provider,{value:{state:t,dispatch:e},children:i})}const _t=()=>b.useContext(zp),jd=["low","medium","high"],Gp={isLoading:!0,theme:"light",showFurigana:!0,showColorCoding:!0,showPitchAccent:!0,analysisDepth:"medium",fontSizeIndex:Pp,newWordsPerDay:10,userApiKey:null},Yd=i=>{document.documentElement.classList.toggle("dark",i.theme==="dark"),document.documentElement.style.setProperty("--font-size-multiplier",da[i.fontSizeIndex].value)},Bg=(i,t)=>{switch(t.type){case"INITIALIZE_SETTINGS_SUCCESS":return Yd(t.payload),{...i,isLoading:!1,...t.payload};case"INITIALIZE_SETTINGS_FAILURE":return{...i,isLoading:!1};case"UPDATE_SETTINGS":{const e={...i,...t.payload},o={...t.payload};return typeof o.userApiKey=="string"&&o.userApiKey.trim().length>0?o.userApiKey=o.userApiKey.trim():o.userApiKey=null,bp(o),Yd(e),e}default:return i}},$p=b.createContext({state:Gp,dispatch:()=>null});function Hp({children:i}){const[t,e]=b.useReducer(Bg,Gp);return b.useEffect(()=>{const o=async()=>{try{const s=await ba();e({type:"INITIALIZE_SETTINGS_SUCCESS",payload:s})}catch(s){console.error("Failed to load settings from IndexedDB",s),e({type:"INITIALIZE_SETTINGS_FAILURE"})}};Fa().then(o).catch(s=>{console.error("DB Init failed",s),e({type:"INITIALIZE_SETTINGS_FAILURE"})})},[]),v.jsx($p.Provider,{value:{state:t,dispatch:e},children:i})}const Wt=()=>b.useContext($p),Ti={isHistoryPanelOpen:!1,tooltip:{visible:!1,content:null,position:{top:0,left:0},pinned:!1,targetElement:null},bottomSheet:{visible:!1,content:{title:"",body:null},targetElement:null}},Gg=(i,t)=>{switch(t.type){case"SET_HISTORY_PANEL_OPEN":return{...i,isHistoryPanelOpen:t.payload};case"SHOW_TOOLTIP":return i.tooltip.pinned?i:{...i,tooltip:{...i.tooltip,visible:!0,pinned:!1,...t.payload}};case"HIDE_TOOLTIP":return{...i,tooltip:{...Ti.tooltip}};case"PIN_TOOLTIP":return i.tooltip.targetElement===t.payload.targetElement&&i.tooltip.pinned?{...i,tooltip:{...Ti.tooltip}}:{...i,tooltip:{visible:!0,pinned:!0,...t.payload}};case"SHOW_BOTTOM_SHEET":return document.body.classList.add("overflow-hidden","md:overflow-auto"),{...i,bottomSheet:{visible:!0,...t.payload}};case"HIDE_BOTTOM_SHEET":return document.body.classList.remove("overflow-hidden","md:overflow-auto"),{...i,bottomSheet:{...Ti.bottomSheet}};default:return i}},qp=b.createContext({state:Ti,dispatch:()=>null});function Wp({children:i}){const[t,e]=b.useReducer(Gg,Ti);return v.jsx(qp.Provider,{value:{state:t,dispatch:e},children:i})}const nn=()=>b.useContext(qp);var os=Rp();const jp=b.createContext(void 0);function Yp({children:i}){const[t,e]=b.useState({isOpen:!1,message:""}),o=()=>{e({isOpen:!1,message:""})},s=()=>{var g;(g=t.onConfirm)==null||g.call(t),o()},a=()=>{var g;(g=t.onCancel)==null||g.call(t),o()},f=b.useCallback((g,h,x={})=>{e({isOpen:!0,message:g,onConfirm:h,onCancel:()=>{},confirmText:x.confirmText||"Confirm",confirmClass:x.confirmClass||"bg-destructive hover:bg-destructive-hover",cancelText:x.cancelText||"Cancel",isAlert:!1})},[]),m=b.useCallback((g,h={})=>{e({isOpen:!0,message:g,onConfirm:h.onOk,confirmText:"OK",confirmClass:"bg-accent hover:bg-accent/90",isAlert:!0})},[]);return v.jsxs(jp.Provider,{value:{showConfirmation:f,showAlert:m},children:[i,t.isOpen&&os.createPortal(v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 transition-opacity animate-fade-in",children:v.jsxs("div",{className:"glass-morphism rounded-2xl shadow-2xl p-8 w-full max-w-md transform transition-all animate-slide-in",children:[v.jsx("p",{className:"text-text-secondary text-lg mb-8",children:t.message}),v.jsxs("div",{className:"flex justify-end gap-4",children:[!t.isAlert&&v.jsx("button",{onClick:a,className:"px-5 py-3 rounded-xl text-base font-medium text-text-secondary bg-surface-subtle hover:bg-surface-hover transition-colors shadow-sm",children:t.cancelText}),v.jsx("button",{onClick:s,className:`px-5 py-3 rounded-xl text-base font-medium text-primary-text transition-colors shadow-lg ${t.confirmClass}`,children:t.confirmText})]})]})}),document.body)]})}const Mr=()=>{const i=b.useContext(jp);if(i===void 0)throw new Error("useModal must be used within a ModalProvider");return i},Jd="unsaved-title",Kd="unsaved-text";function Zd(){const{state:i,dispatch:t}=_t(),{state:e}=Wt(),{showAlert:o}=Mr(),[s,a]=b.useState(""),[f,m]=b.useState(""),[g,h]=b.useState(!1),x=!!e.userApiKey,_=i.editingEntryId?i.history.find(S=>S.id===i.editingEntryId):null;b.useEffect(()=>{(async()=>{if(_)a(_.title),m(_.text);else{const k=await Wd(Jd)||"",M=await Wd(Kd)||"";a(k),m(M)}h(!0)})()},[_]),b.useEffect(()=>{g&&!_&&Jo(Jd,s)},[s,_,g]),b.useEffect(()=>{g&&!_&&Jo(Kd,f)},[f,_,g]);const T=()=>{if(!x){o("API Key is not configured. Please add your key in the settings menu.");return}const S=f.trim();if(!S)return;const k=s.trim()||S.substring(0,40)+"...";if(_){const M=_.analyzedSentences,D={};S.split(`
`).flatMap(q=>{var J;return((J=q.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:J.filter(K=>K==null?void 0:K.trim()))||[]}).forEach(q=>{M[q]&&(D[q]=M[q])});const $={..._,title:k,text:S,updatedAt:Date.now(),analyzedSentences:D,readingProgress:0};t({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:$}),t({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:$.id}),t({type:"SET_VIEW",payload:Le.Reader})}else{const M={id:Date.now().toString(),title:k,text:S,createdAt:Date.now(),updatedAt:Date.now(),analyzedSentences:{},readingProgress:0};t({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:M}),t({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:M.id}),t({type:"SET_VIEW",payload:Le.Reader})}};return v.jsx("div",{className:"h-screen md:h-auto input-area p-6 bg-gradient-to-b from-background/50 to-surface",children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"text-title-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Title"}),v.jsx("input",{type:"text",id:"text-title-input",placeholder:"Enter a title for your text...",className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-lg font-medium px-4 py-3",value:s,onChange:S=>a(S.target.value)})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sentence-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Japanese Text"}),v.jsx("textarea",{id:"sentence-input",placeholder:"Enter Japanese text here. e.g., 猫が大好きです。犬も好きです。",rows:6,className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-base px-4 py-3 font-japanese resize-none transition-all duration-200",value:f,onChange:S=>m(S.target.value)})]}),v.jsxs("div",{children:[v.jsxs("button",{onClick:T,className:"w-full btn-primary text-lg flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!f.trim()||!x,title:x?"":"API Key not configured. Please add one in settings.",children:[v.jsx("i",{className:"bi bi-search"}),"Analyze Text"]}),!x&&v.jsxs("p",{className:"text-center text-sm text-warning-text mt-3",children:[v.jsx("i",{className:"bi bi-exclamation-triangle-fill mr-1 align-middle"}),"Please set your API key in settings to enable analysis."]})]})]})})}var Ie;(function(i){i.assertEqual=s=>{};function t(s){}i.assertIs=t;function e(s){throw new Error}i.assertNever=e,i.arrayToEnum=s=>{const a={};for(const f of s)a[f]=f;return a},i.getValidEnumValues=s=>{const a=i.objectKeys(s).filter(m=>typeof s[s[m]]!="number"),f={};for(const m of a)f[m]=s[m];return i.objectValues(f)},i.objectValues=s=>i.objectKeys(s).map(function(a){return s[a]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const f in s)Object.prototype.hasOwnProperty.call(s,f)&&a.push(f);return a},i.find=(s,a)=>{for(const f of s)if(a(f))return f},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function o(s,a=" | "){return s.map(f=>typeof f=="string"?`'${f}'`:f).join(a)}i.joinValues=o,i.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Ie||(Ie={}));var Qd;(function(i){i.mergeShapes=(t,e)=>({...t,...e})})(Qd||(Qd={}));const ee=Ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),En=i=>{switch(typeof i){case"undefined":return ee.undefined;case"string":return ee.string;case"number":return Number.isNaN(i)?ee.nan:ee.number;case"boolean":return ee.boolean;case"function":return ee.function;case"bigint":return ee.bigint;case"symbol":return ee.symbol;case"object":return Array.isArray(i)?ee.array:i===null?ee.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ee.promise:typeof Map<"u"&&i instanceof Map?ee.map:typeof Set<"u"&&i instanceof Set?ee.set:typeof Date<"u"&&i instanceof Date?ee.date:ee.object;default:return ee.unknown}},G=Ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class tn extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(a){return a.message},o={_errors:[]},s=a=>{for(const f of a.issues)if(f.code==="invalid_union")f.unionErrors.map(s);else if(f.code==="invalid_return_type")s(f.returnTypeError);else if(f.code==="invalid_arguments")s(f.argumentsError);else if(f.path.length===0)o._errors.push(e(f));else{let m=o,g=0;for(;g<f.path.length;){const h=f.path[g];g===f.path.length-1?(m[h]=m[h]||{_errors:[]},m[h]._errors.push(e(f))):m[h]=m[h]||{_errors:[]},m=m[h],g++}}};return s(this),o}static assert(t){if(!(t instanceof tn))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},o=[];for(const s of this.issues)s.path.length>0?(e[s.path[0]]=e[s.path[0]]||[],e[s.path[0]].push(t(s))):o.push(t(s));return{formErrors:o,fieldErrors:e}}get formErrors(){return this.flatten()}}tn.create=i=>new tn(i);const ma=(i,t)=>{let e;switch(i.code){case G.invalid_type:i.received===ee.undefined?e="Required":e=`Expected ${i.expected}, received ${i.received}`;break;case G.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(i.expected,Ie.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:e=`Unrecognized key(s) in object: ${Ie.joinValues(i.keys,", ")}`;break;case G.invalid_union:e="Invalid input";break;case G.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${Ie.joinValues(i.options)}`;break;case G.invalid_enum_value:e=`Invalid enum value. Expected ${Ie.joinValues(i.options)}, received '${i.received}'`;break;case G.invalid_arguments:e="Invalid function arguments";break;case G.invalid_return_type:e="Invalid function return type";break;case G.invalid_date:e="Invalid date";break;case G.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(e=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?e=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?e=`Invalid input: must end with "${i.validation.endsWith}"`:Ie.assertNever(i.validation):i.validation!=="regex"?e=`Invalid ${i.validation}`:e="Invalid";break;case G.too_small:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:e="Invalid input";break;case G.too_big:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?e=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:e="Invalid input";break;case G.custom:e="Invalid input";break;case G.invalid_intersection_types:e="Intersection results could not be merged";break;case G.not_multiple_of:e=`Number must be a multiple of ${i.multipleOf}`;break;case G.not_finite:e="Number must be finite";break;default:e=t.defaultError,Ie.assertNever(i)}return{message:e}};let $g=ma;function Hg(){return $g}const qg=i=>{const{data:t,path:e,errorMaps:o,issueData:s}=i,a=[...e,...s.path||[]],f={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let m="";const g=o.filter(h=>!!h).slice().reverse();for(const h of g)m=h(f,{data:t,defaultError:m}).message;return{...s,path:a,message:m}};function j(i,t){const e=Hg(),o=qg({issueData:t,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,e,e===ma?void 0:ma].filter(s=>!!s)});i.common.issues.push(o)}class at{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const o=[];for(const s of e){if(s.status==="aborted")return fe;s.status==="dirty"&&t.dirty(),o.push(s.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,e){const o=[];for(const s of e){const a=await s.key,f=await s.value;o.push({key:a,value:f})}return at.mergeObjectSync(t,o)}static mergeObjectSync(t,e){const o={};for(const s of e){const{key:a,value:f}=s;if(a.status==="aborted"||f.status==="aborted")return fe;a.status==="dirty"&&t.dirty(),f.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof f.value<"u"||s.alwaysSet)&&(o[a.value]=f.value)}return{status:t.value,value:o}}}const fe=Object.freeze({status:"aborted"}),Ci=i=>({status:"dirty",value:i}),kt=i=>({status:"valid",value:i}),Xd=i=>i.status==="aborted",ef=i=>i.status==="dirty",Er=i=>i.status==="valid",Ko=i=>typeof Promise<"u"&&i instanceof Promise;var ie;(function(i){i.errToObj=t=>typeof t=="string"?{message:t}:t||{},i.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ie||(ie={}));class qt{constructor(t,e,o,s){this._cachedPath=[],this.parent=t,this.data=e,this._path=o,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const tf=(i,t)=>{if(Er(t))return{success:!0,data:t.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new tn(i.common.issues);return this._error=e,this._error}}};function me(i){if(!i)return{};const{errorMap:t,invalid_type_error:e,required_error:o,description:s}=i;if(t&&(e||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(f,m)=>{const{message:g}=i;return f.code==="invalid_enum_value"?{message:g??m.defaultError}:typeof m.data>"u"?{message:g??o??m.defaultError}:f.code!=="invalid_type"?{message:m.defaultError}:{message:g??e??m.defaultError}},description:s}}class Ce{get description(){return this._def.description}_getType(t){return En(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:En(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new at,ctx:{common:t.parent.common,data:t.data,parsedType:En(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(Ko(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const o=this.safeParse(t,e);if(o.success)return o.data;throw o.error}safeParse(t,e){const o={common:{issues:[],async:(e==null?void 0:e.async)??!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:En(t)},s=this._parseSync({data:t,path:o.path,parent:o});return tf(o,s)}"~validate"(t){var o,s;const e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:En(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:e});return Er(a)?{value:a.value}:{issues:e.common.issues}}catch(a){(s=(o=a==null?void 0:a.message)==null?void 0:o.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:e}).then(a=>Er(a)?{value:a.value}:{issues:e.common.issues})}async parseAsync(t,e){const o=await this.safeParseAsync(t,e);if(o.success)return o.data;throw o.error}async safeParseAsync(t,e){const o={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:En(t)},s=this._parse({data:t,path:o.path,parent:o}),a=await(Ko(s)?s:Promise.resolve(s));return tf(o,a)}refine(t,e){const o=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,a)=>{const f=t(s),m=()=>a.addIssue({code:G.custom,...o(s)});return typeof Promise<"u"&&f instanceof Promise?f.then(g=>g?!0:(m(),!1)):f?!0:(m(),!1)})}refinement(t,e){return this._refinement((o,s)=>t(o)?!0:(s.addIssue(typeof e=="function"?e(o,s):e),!1))}_refinement(t){return new Ir({schema:this,typeName:de.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Sn.create(this,this._def)}nullable(){return Nr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ht.create(this)}promise(){return ts.create(this,this._def)}or(t){return Qo.create([this,t],this._def)}and(t){return Xo.create(this,t,this._def)}transform(t){return new Ir({...me(this._def),schema:this,typeName:de.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new va({...me(this._def),innerType:this,defaultValue:e,typeName:de.ZodDefault})}brand(){return new my({typeName:de.ZodBranded,type:this,...me(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new xa({...me(this._def),innerType:this,catchValue:e,typeName:de.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return Oa.create(this,t)}readonly(){return Ca.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Wg=/^c[^\s-]{8,}$/i,jg=/^[0-9a-z]+$/,Yg=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jg=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Kg=/^[a-z0-9_-]{21}$/i,Zg=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Qg=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Xg=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ey="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let aa;const ty=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ny=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ry=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iy=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oy=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sy=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Jp="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ly=new RegExp(`^${Jp}$`);function Kp(i){let t="[0-5]\\d";i.precision?t=`${t}\\.\\d{${i.precision}}`:i.precision==null&&(t=`${t}(\\.\\d+)?`);const e=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e}`}function ay(i){return new RegExp(`^${Kp(i)}$`)}function uy(i){let t=`${Jp}T${Kp(i)}`;const e=[];return e.push(i.local?"Z?":"Z"),i.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function cy(i,t){return!!((t==="v4"||!t)&&ty.test(i)||(t==="v6"||!t)&&ry.test(i))}function dy(i,t){if(!Zg.test(i))return!1;try{const[e]=i.split("."),o=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),s=JSON.parse(atob(o));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function fy(i,t){return!!((t==="v4"||!t)&&ny.test(i)||(t==="v6"||!t)&&iy.test(i))}class $t extends Ce{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ee.string){const a=this._getOrReturnCtx(t);return j(a,{code:G.invalid_type,expected:ee.string,received:a.parsedType}),fe}const o=new at;let s;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(s=this._getOrReturnCtx(t,s),j(s,{code:G.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),o.dirty());else if(a.kind==="max")t.data.length>a.value&&(s=this._getOrReturnCtx(t,s),j(s,{code:G.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),o.dirty());else if(a.kind==="length"){const f=t.data.length>a.value,m=t.data.length<a.value;(f||m)&&(s=this._getOrReturnCtx(t,s),f?j(s,{code:G.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):m&&j(s,{code:G.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),o.dirty())}else if(a.kind==="email")Xg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"email",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="emoji")aa||(aa=new RegExp(ey,"u")),aa.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"emoji",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="uuid")Jg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"uuid",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="nanoid")Kg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"nanoid",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="cuid")Wg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"cuid",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="cuid2")jg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"cuid2",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="ulid")Yg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"ulid",code:G.invalid_string,message:a.message}),o.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),j(s,{validation:"url",code:G.invalid_string,message:a.message}),o.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"regex",code:G.invalid_string,message:a.message}),o.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(t,s),j(s,{code:G.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),o.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(s=this._getOrReturnCtx(t,s),j(s,{code:G.invalid_string,validation:{startsWith:a.value},message:a.message}),o.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(s=this._getOrReturnCtx(t,s),j(s,{code:G.invalid_string,validation:{endsWith:a.value},message:a.message}),o.dirty()):a.kind==="datetime"?uy(a).test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{code:G.invalid_string,validation:"datetime",message:a.message}),o.dirty()):a.kind==="date"?ly.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{code:G.invalid_string,validation:"date",message:a.message}),o.dirty()):a.kind==="time"?ay(a).test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{code:G.invalid_string,validation:"time",message:a.message}),o.dirty()):a.kind==="duration"?Qg.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"duration",code:G.invalid_string,message:a.message}),o.dirty()):a.kind==="ip"?cy(t.data,a.version)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"ip",code:G.invalid_string,message:a.message}),o.dirty()):a.kind==="jwt"?dy(t.data,a.alg)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"jwt",code:G.invalid_string,message:a.message}),o.dirty()):a.kind==="cidr"?fy(t.data,a.version)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"cidr",code:G.invalid_string,message:a.message}),o.dirty()):a.kind==="base64"?oy.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"base64",code:G.invalid_string,message:a.message}),o.dirty()):a.kind==="base64url"?sy.test(t.data)||(s=this._getOrReturnCtx(t,s),j(s,{validation:"base64url",code:G.invalid_string,message:a.message}),o.dirty()):Ie.assertNever(a);return{status:o.value,value:t.data}}_regex(t,e,o){return this.refinement(s=>t.test(s),{validation:e,code:G.invalid_string,...ie.errToObj(o)})}_addCheck(t){return new $t({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ie.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ie.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ie.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ie.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ie.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ie.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ie.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ie.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ie.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ie.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ie.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ie.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ie.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...ie.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ie.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ie.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...ie.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...ie.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...ie.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...ie.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...ie.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...ie.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...ie.errToObj(e)})}nonempty(t){return this.min(1,ie.errToObj(t))}trim(){return new $t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}$t.create=i=>new $t({checks:[],typeName:de.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...me(i)});function py(i,t){const e=(i.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,s=e>o?e:o,a=Number.parseInt(i.toFixed(s).replace(".","")),f=Number.parseInt(t.toFixed(s).replace(".",""));return a%f/10**s}class Gn extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ee.number){const a=this._getOrReturnCtx(t);return j(a,{code:G.invalid_type,expected:ee.number,received:a.parsedType}),fe}let o;const s=new at;for(const a of this._def.checks)a.kind==="int"?Ie.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),j(o,{code:G.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(o=this._getOrReturnCtx(t,o),j(o,{code:G.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(o=this._getOrReturnCtx(t,o),j(o,{code:G.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?py(t.data,a.value)!==0&&(o=this._getOrReturnCtx(t,o),j(o,{code:G.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),j(o,{code:G.not_finite,message:a.message}),s.dirty()):Ie.assertNever(a);return{status:s.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,ie.toString(e))}gt(t,e){return this.setLimit("min",t,!1,ie.toString(e))}lte(t,e){return this.setLimit("max",t,!0,ie.toString(e))}lt(t,e){return this.setLimit("max",t,!1,ie.toString(e))}setLimit(t,e,o,s){return new Gn({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:o,message:ie.toString(s)}]})}_addCheck(t){return new Gn({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ie.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ie.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ie.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ie.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ie.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:ie.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:ie.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ie.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ie.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ie.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(e===null||o.value>e)&&(e=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Gn.create=i=>new Gn({checks:[],typeName:de.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...me(i)});class $n extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ee.bigint)return this._getInvalidInput(t);let o;const s=new at;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(o=this._getOrReturnCtx(t,o),j(o,{code:G.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(o=this._getOrReturnCtx(t,o),j(o,{code:G.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),j(o,{code:G.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Ie.assertNever(a);return{status:s.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return j(e,{code:G.invalid_type,expected:ee.bigint,received:e.parsedType}),fe}gte(t,e){return this.setLimit("min",t,!0,ie.toString(e))}gt(t,e){return this.setLimit("min",t,!1,ie.toString(e))}lte(t,e){return this.setLimit("max",t,!0,ie.toString(e))}lt(t,e){return this.setLimit("max",t,!1,ie.toString(e))}setLimit(t,e,o,s){return new $n({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:o,message:ie.toString(s)}]})}_addCheck(t){return new $n({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ie.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ie.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ie.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ie.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:ie.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}$n.create=i=>new $n({checks:[],typeName:de.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...me(i)});class Zo extends Ce{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ee.boolean){const o=this._getOrReturnCtx(t);return j(o,{code:G.invalid_type,expected:ee.boolean,received:o.parsedType}),fe}return kt(t.data)}}Zo.create=i=>new Zo({typeName:de.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...me(i)});class Sr extends Ce{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ee.date){const a=this._getOrReturnCtx(t);return j(a,{code:G.invalid_type,expected:ee.date,received:a.parsedType}),fe}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return j(a,{code:G.invalid_date}),fe}const o=new at;let s;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(s=this._getOrReturnCtx(t,s),j(s,{code:G.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),o.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(s=this._getOrReturnCtx(t,s),j(s,{code:G.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),o.dirty()):Ie.assertNever(a);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Sr({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:ie.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:ie.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}Sr.create=i=>new Sr({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:de.ZodDate,...me(i)});class nf extends Ce{_parse(t){if(this._getType(t)!==ee.symbol){const o=this._getOrReturnCtx(t);return j(o,{code:G.invalid_type,expected:ee.symbol,received:o.parsedType}),fe}return kt(t.data)}}nf.create=i=>new nf({typeName:de.ZodSymbol,...me(i)});class rf extends Ce{_parse(t){if(this._getType(t)!==ee.undefined){const o=this._getOrReturnCtx(t);return j(o,{code:G.invalid_type,expected:ee.undefined,received:o.parsedType}),fe}return kt(t.data)}}rf.create=i=>new rf({typeName:de.ZodUndefined,...me(i)});class of extends Ce{_parse(t){if(this._getType(t)!==ee.null){const o=this._getOrReturnCtx(t);return j(o,{code:G.invalid_type,expected:ee.null,received:o.parsedType}),fe}return kt(t.data)}}of.create=i=>new of({typeName:de.ZodNull,...me(i)});class sf extends Ce{constructor(){super(...arguments),this._any=!0}_parse(t){return kt(t.data)}}sf.create=i=>new sf({typeName:de.ZodAny,...me(i)});class ha extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(t){return kt(t.data)}}ha.create=i=>new ha({typeName:de.ZodUnknown,...me(i)});class wn extends Ce{_parse(t){const e=this._getOrReturnCtx(t);return j(e,{code:G.invalid_type,expected:ee.never,received:e.parsedType}),fe}}wn.create=i=>new wn({typeName:de.ZodNever,...me(i)});class lf extends Ce{_parse(t){if(this._getType(t)!==ee.undefined){const o=this._getOrReturnCtx(t);return j(o,{code:G.invalid_type,expected:ee.void,received:o.parsedType}),fe}return kt(t.data)}}lf.create=i=>new lf({typeName:de.ZodVoid,...me(i)});class Ht extends Ce{_parse(t){const{ctx:e,status:o}=this._processInputParams(t),s=this._def;if(e.parsedType!==ee.array)return j(e,{code:G.invalid_type,expected:ee.array,received:e.parsedType}),fe;if(s.exactLength!==null){const f=e.data.length>s.exactLength.value,m=e.data.length<s.exactLength.value;(f||m)&&(j(e,{code:f?G.too_big:G.too_small,minimum:m?s.exactLength.value:void 0,maximum:f?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),o.dirty())}if(s.minLength!==null&&e.data.length<s.minLength.value&&(j(e,{code:G.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),o.dirty()),s.maxLength!==null&&e.data.length>s.maxLength.value&&(j(e,{code:G.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),o.dirty()),e.common.async)return Promise.all([...e.data].map((f,m)=>s.type._parseAsync(new qt(e,f,e.path,m)))).then(f=>at.mergeArray(o,f));const a=[...e.data].map((f,m)=>s.type._parseSync(new qt(e,f,e.path,m)));return at.mergeArray(o,a)}get element(){return this._def.type}min(t,e){return new Ht({...this._def,minLength:{value:t,message:ie.toString(e)}})}max(t,e){return new Ht({...this._def,maxLength:{value:t,message:ie.toString(e)}})}length(t,e){return new Ht({...this._def,exactLength:{value:t,message:ie.toString(e)}})}nonempty(t){return this.min(1,t)}}Ht.create=(i,t)=>new Ht({type:i,minLength:null,maxLength:null,exactLength:null,typeName:de.ZodArray,...me(t)});function xr(i){if(i instanceof We){const t={};for(const e in i.shape){const o=i.shape[e];t[e]=Sn.create(xr(o))}return new We({...i._def,shape:()=>t})}else return i instanceof Ht?new Ht({...i._def,type:xr(i.element)}):i instanceof Sn?Sn.create(xr(i.unwrap())):i instanceof Nr?Nr.create(xr(i.unwrap())):i instanceof Hn?Hn.create(i.items.map(t=>xr(t))):i}class We extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=Ie.objectKeys(t);return this._cached={shape:t,keys:e},this._cached}_parse(t){if(this._getType(t)!==ee.object){const h=this._getOrReturnCtx(t);return j(h,{code:G.invalid_type,expected:ee.object,received:h.parsedType}),fe}const{status:o,ctx:s}=this._processInputParams(t),{shape:a,keys:f}=this._getCached(),m=[];if(!(this._def.catchall instanceof wn&&this._def.unknownKeys==="strip"))for(const h in s.data)f.includes(h)||m.push(h);const g=[];for(const h of f){const x=a[h],_=s.data[h];g.push({key:{status:"valid",value:h},value:x._parse(new qt(s,_,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof wn){const h=this._def.unknownKeys;if(h==="passthrough")for(const x of m)g.push({key:{status:"valid",value:x},value:{status:"valid",value:s.data[x]}});else if(h==="strict")m.length>0&&(j(s,{code:G.unrecognized_keys,keys:m}),o.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const x of m){const _=s.data[x];g.push({key:{status:"valid",value:x},value:h._parse(new qt(s,_,s.path,x)),alwaysSet:x in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const x of g){const _=await x.key,T=await x.value;h.push({key:_,value:T,alwaysSet:x.alwaysSet})}return h}).then(h=>at.mergeObjectSync(o,h)):at.mergeObjectSync(o,g)}get shape(){return this._def.shape()}strict(t){return ie.errToObj,new We({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,o)=>{var a,f;const s=((f=(a=this._def).errorMap)==null?void 0:f.call(a,e,o).message)??o.defaultError;return e.code==="unrecognized_keys"?{message:ie.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(t){return new We({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new We({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:de.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new We({...this._def,catchall:t})}pick(t){const e={};for(const o of Ie.objectKeys(t))t[o]&&this.shape[o]&&(e[o]=this.shape[o]);return new We({...this._def,shape:()=>e})}omit(t){const e={};for(const o of Ie.objectKeys(this.shape))t[o]||(e[o]=this.shape[o]);return new We({...this._def,shape:()=>e})}deepPartial(){return xr(this)}partial(t){const e={};for(const o of Ie.objectKeys(this.shape)){const s=this.shape[o];t&&!t[o]?e[o]=s:e[o]=s.optional()}return new We({...this._def,shape:()=>e})}required(t){const e={};for(const o of Ie.objectKeys(this.shape))if(t&&!t[o])e[o]=this.shape[o];else{let a=this.shape[o];for(;a instanceof Sn;)a=a._def.innerType;e[o]=a}return new We({...this._def,shape:()=>e})}keyof(){return Zp(Ie.objectKeys(this.shape))}}We.create=(i,t)=>new We({shape:()=>i,unknownKeys:"strip",catchall:wn.create(),typeName:de.ZodObject,...me(t)});We.strictCreate=(i,t)=>new We({shape:()=>i,unknownKeys:"strict",catchall:wn.create(),typeName:de.ZodObject,...me(t)});We.lazycreate=(i,t)=>new We({shape:i,unknownKeys:"strip",catchall:wn.create(),typeName:de.ZodObject,...me(t)});class Qo extends Ce{_parse(t){const{ctx:e}=this._processInputParams(t),o=this._def.options;function s(a){for(const m of a)if(m.result.status==="valid")return m.result;for(const m of a)if(m.result.status==="dirty")return e.common.issues.push(...m.ctx.common.issues),m.result;const f=a.map(m=>new tn(m.ctx.common.issues));return j(e,{code:G.invalid_union,unionErrors:f}),fe}if(e.common.async)return Promise.all(o.map(async a=>{const f={...e,common:{...e.common,issues:[]},parent:null};return{result:await a._parseAsync({data:e.data,path:e.path,parent:f}),ctx:f}})).then(s);{let a;const f=[];for(const g of o){const h={...e,common:{...e.common,issues:[]},parent:null},x=g._parseSync({data:e.data,path:e.path,parent:h});if(x.status==="valid")return x;x.status==="dirty"&&!a&&(a={result:x,ctx:h}),h.common.issues.length&&f.push(h.common.issues)}if(a)return e.common.issues.push(...a.ctx.common.issues),a.result;const m=f.map(g=>new tn(g));return j(e,{code:G.invalid_union,unionErrors:m}),fe}}get options(){return this._def.options}}Qo.create=(i,t)=>new Qo({options:i,typeName:de.ZodUnion,...me(t)});function ga(i,t){const e=En(i),o=En(t);if(i===t)return{valid:!0,data:i};if(e===ee.object&&o===ee.object){const s=Ie.objectKeys(t),a=Ie.objectKeys(i).filter(m=>s.indexOf(m)!==-1),f={...i,...t};for(const m of a){const g=ga(i[m],t[m]);if(!g.valid)return{valid:!1};f[m]=g.data}return{valid:!0,data:f}}else if(e===ee.array&&o===ee.array){if(i.length!==t.length)return{valid:!1};const s=[];for(let a=0;a<i.length;a++){const f=i[a],m=t[a],g=ga(f,m);if(!g.valid)return{valid:!1};s.push(g.data)}return{valid:!0,data:s}}else return e===ee.date&&o===ee.date&&+i==+t?{valid:!0,data:i}:{valid:!1}}class Xo extends Ce{_parse(t){const{status:e,ctx:o}=this._processInputParams(t),s=(a,f)=>{if(Xd(a)||Xd(f))return fe;const m=ga(a.value,f.value);return m.valid?((ef(a)||ef(f))&&e.dirty(),{status:e.value,value:m.data}):(j(o,{code:G.invalid_intersection_types}),fe)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([a,f])=>s(a,f)):s(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}Xo.create=(i,t,e)=>new Xo({left:i,right:t,typeName:de.ZodIntersection,...me(e)});class Hn extends Ce{_parse(t){const{status:e,ctx:o}=this._processInputParams(t);if(o.parsedType!==ee.array)return j(o,{code:G.invalid_type,expected:ee.array,received:o.parsedType}),fe;if(o.data.length<this._def.items.length)return j(o,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fe;!this._def.rest&&o.data.length>this._def.items.length&&(j(o,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const a=[...o.data].map((f,m)=>{const g=this._def.items[m]||this._def.rest;return g?g._parse(new qt(o,f,o.path,m)):null}).filter(f=>!!f);return o.common.async?Promise.all(a).then(f=>at.mergeArray(e,f)):at.mergeArray(e,a)}get items(){return this._def.items}rest(t){return new Hn({...this._def,rest:t})}}Hn.create=(i,t)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Hn({items:i,typeName:de.ZodTuple,rest:null,...me(t)})};class es extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:o}=this._processInputParams(t);if(o.parsedType!==ee.object)return j(o,{code:G.invalid_type,expected:ee.object,received:o.parsedType}),fe;const s=[],a=this._def.keyType,f=this._def.valueType;for(const m in o.data)s.push({key:a._parse(new qt(o,m,o.path,m)),value:f._parse(new qt(o,o.data[m],o.path,m)),alwaysSet:m in o.data});return o.common.async?at.mergeObjectAsync(e,s):at.mergeObjectSync(e,s)}get element(){return this._def.valueType}static create(t,e,o){return e instanceof Ce?new es({keyType:t,valueType:e,typeName:de.ZodRecord,...me(o)}):new es({keyType:$t.create(),valueType:t,typeName:de.ZodRecord,...me(e)})}}class af extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:o}=this._processInputParams(t);if(o.parsedType!==ee.map)return j(o,{code:G.invalid_type,expected:ee.map,received:o.parsedType}),fe;const s=this._def.keyType,a=this._def.valueType,f=[...o.data.entries()].map(([m,g],h)=>({key:s._parse(new qt(o,m,o.path,[h,"key"])),value:a._parse(new qt(o,g,o.path,[h,"value"]))}));if(o.common.async){const m=new Map;return Promise.resolve().then(async()=>{for(const g of f){const h=await g.key,x=await g.value;if(h.status==="aborted"||x.status==="aborted")return fe;(h.status==="dirty"||x.status==="dirty")&&e.dirty(),m.set(h.value,x.value)}return{status:e.value,value:m}})}else{const m=new Map;for(const g of f){const h=g.key,x=g.value;if(h.status==="aborted"||x.status==="aborted")return fe;(h.status==="dirty"||x.status==="dirty")&&e.dirty(),m.set(h.value,x.value)}return{status:e.value,value:m}}}}af.create=(i,t,e)=>new af({valueType:t,keyType:i,typeName:de.ZodMap,...me(e)});class wi extends Ce{_parse(t){const{status:e,ctx:o}=this._processInputParams(t);if(o.parsedType!==ee.set)return j(o,{code:G.invalid_type,expected:ee.set,received:o.parsedType}),fe;const s=this._def;s.minSize!==null&&o.data.size<s.minSize.value&&(j(o,{code:G.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),e.dirty()),s.maxSize!==null&&o.data.size>s.maxSize.value&&(j(o,{code:G.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),e.dirty());const a=this._def.valueType;function f(g){const h=new Set;for(const x of g){if(x.status==="aborted")return fe;x.status==="dirty"&&e.dirty(),h.add(x.value)}return{status:e.value,value:h}}const m=[...o.data.values()].map((g,h)=>a._parse(new qt(o,g,o.path,h)));return o.common.async?Promise.all(m).then(g=>f(g)):f(m)}min(t,e){return new wi({...this._def,minSize:{value:t,message:ie.toString(e)}})}max(t,e){return new wi({...this._def,maxSize:{value:t,message:ie.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}wi.create=(i,t)=>new wi({valueType:i,minSize:null,maxSize:null,typeName:de.ZodSet,...me(t)});class ya extends Ce{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}ya.create=(i,t)=>new ya({getter:i,typeName:de.ZodLazy,...me(t)});class uf extends Ce{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return j(e,{received:e.data,code:G.invalid_literal,expected:this._def.value}),fe}return{status:"valid",value:t.data}}get value(){return this._def.value}}uf.create=(i,t)=>new uf({value:i,typeName:de.ZodLiteral,...me(t)});function Zp(i,t){return new wr({values:i,typeName:de.ZodEnum,...me(t)})}class wr extends Ce{_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),o=this._def.values;return j(e,{expected:Ie.joinValues(o),received:e.parsedType,code:G.invalid_type}),fe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const e=this._getOrReturnCtx(t),o=this._def.values;return j(e,{received:e.data,code:G.invalid_enum_value,options:o}),fe}return kt(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return wr.create(t,{...this._def,...e})}exclude(t,e=this._def){return wr.create(this.options.filter(o=>!t.includes(o)),{...this._def,...e})}}wr.create=Zp;class cf extends Ce{_parse(t){const e=Ie.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==ee.string&&o.parsedType!==ee.number){const s=Ie.objectValues(e);return j(o,{expected:Ie.joinValues(s),received:o.parsedType,code:G.invalid_type}),fe}if(this._cache||(this._cache=new Set(Ie.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Ie.objectValues(e);return j(o,{received:o.data,code:G.invalid_enum_value,options:s}),fe}return kt(t.data)}get enum(){return this._def.values}}cf.create=(i,t)=>new cf({values:i,typeName:de.ZodNativeEnum,...me(t)});class ts extends Ce{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==ee.promise&&e.common.async===!1)return j(e,{code:G.invalid_type,expected:ee.promise,received:e.parsedType}),fe;const o=e.parsedType===ee.promise?e.data:Promise.resolve(e.data);return kt(o.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}}ts.create=(i,t)=>new ts({type:i,typeName:de.ZodPromise,...me(t)});class Ir extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===de.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:o}=this._processInputParams(t),s=this._def.effect||null,a={addIssue:f=>{j(o,f),f.fatal?e.abort():e.dirty()},get path(){return o.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const f=s.transform(o.data,a);if(o.common.async)return Promise.resolve(f).then(async m=>{if(e.value==="aborted")return fe;const g=await this._def.schema._parseAsync({data:m,path:o.path,parent:o});return g.status==="aborted"?fe:g.status==="dirty"||e.value==="dirty"?Ci(g.value):g});{if(e.value==="aborted")return fe;const m=this._def.schema._parseSync({data:f,path:o.path,parent:o});return m.status==="aborted"?fe:m.status==="dirty"||e.value==="dirty"?Ci(m.value):m}}if(s.type==="refinement"){const f=m=>{const g=s.refinement(m,a);if(o.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return m};if(o.common.async===!1){const m=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return m.status==="aborted"?fe:(m.status==="dirty"&&e.dirty(),f(m.value),{status:e.value,value:m.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(m=>m.status==="aborted"?fe:(m.status==="dirty"&&e.dirty(),f(m.value).then(()=>({status:e.value,value:m.value}))))}if(s.type==="transform")if(o.common.async===!1){const f=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Er(f))return fe;const m=s.transform(f.value,a);if(m instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:m}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(f=>Er(f)?Promise.resolve(s.transform(f.value,a)).then(m=>({status:e.value,value:m})):fe);Ie.assertNever(s)}}Ir.create=(i,t,e)=>new Ir({schema:i,typeName:de.ZodEffects,effect:t,...me(e)});Ir.createWithPreprocess=(i,t,e)=>new Ir({schema:t,effect:{type:"preprocess",transform:i},typeName:de.ZodEffects,...me(e)});class Sn extends Ce{_parse(t){return this._getType(t)===ee.undefined?kt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Sn.create=(i,t)=>new Sn({innerType:i,typeName:de.ZodOptional,...me(t)});class Nr extends Ce{_parse(t){return this._getType(t)===ee.null?kt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Nr.create=(i,t)=>new Nr({innerType:i,typeName:de.ZodNullable,...me(t)});class va extends Ce{_parse(t){const{ctx:e}=this._processInputParams(t);let o=e.data;return e.parsedType===ee.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}va.create=(i,t)=>new va({innerType:i,typeName:de.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...me(t)});class xa extends Ce{_parse(t){const{ctx:e}=this._processInputParams(t),o={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return Ko(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new tn(o.common.issues)},input:o.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new tn(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}xa.create=(i,t)=>new xa({innerType:i,typeName:de.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...me(t)});class df extends Ce{_parse(t){if(this._getType(t)!==ee.nan){const o=this._getOrReturnCtx(t);return j(o,{code:G.invalid_type,expected:ee.nan,received:o.parsedType}),fe}return{status:"valid",value:t.data}}}df.create=i=>new df({typeName:de.ZodNaN,...me(i)});class my extends Ce{_parse(t){const{ctx:e}=this._processInputParams(t),o=e.data;return this._def.type._parse({data:o,path:e.path,parent:e})}unwrap(){return this._def.type}}class Oa extends Ce{_parse(t){const{status:e,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return a.status==="aborted"?fe:a.status==="dirty"?(e.dirty(),Ci(a.value)):this._def.out._parseAsync({data:a.value,path:o.path,parent:o})})();{const s=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?fe:s.status==="dirty"?(e.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:o.path,parent:o})}}static create(t,e){return new Oa({in:t,out:e,typeName:de.ZodPipeline})}}class Ca extends Ce{_parse(t){const e=this._def.innerType._parse(t),o=s=>(Er(s)&&(s.value=Object.freeze(s.value)),s);return Ko(e)?e.then(s=>o(s)):o(e)}unwrap(){return this._def.innerType}}Ca.create=(i,t)=>new Ca({innerType:i,typeName:de.ZodReadonly,...me(t)});var de;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(de||(de={}));const Bn=$t.create,ff=Gn.create;$n.create;const hy=Zo.create;Sr.create;const pf=ha.create;wn.create;const _i=Ht.create,gy=We.create,yy=Qo.create;Xo.create;Hn.create;const vy=es.create,xy=ya.create,Cy=wr.create;ts.create;Sn.create;Nr.create;const yr={string:i=>$t.create({...i,coerce:!0}),number:i=>Gn.create({...i,coerce:!0}),boolean:i=>Zo.create({...i,coerce:!0}),bigint:i=>$n.create({...i,coerce:!0}),date:i=>Sr.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _y,Ty;function Ey(){return{geminiUrl:_y,vertexUrl:Ty}}function Sy(i,t,e){var o,s,a;if(!(!((o=i.httpOptions)===null||o===void 0)&&o.baseUrl)){const f=Ey();return i.vertexai?(s=f.vertexUrl)!==null&&s!==void 0?s:t:(a=f.geminiUrl)!==null&&a!==void 0?a:e}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ii{}function ce(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(o,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(i,t,e){for(let a=0;a<t.length-1;a++){const f=t[a];if(f.endsWith("[]")){const m=f.slice(0,-2);if(!(m in i))if(Array.isArray(e))i[m]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(i[m])){const g=i[m];if(Array.isArray(e))for(let h=0;h<g.length;h++){const x=g[h];c(x,t.slice(a+1),e[h])}else for(const h of g)c(h,t.slice(a+1),e)}return}else if(f.endsWith("[0]")){const m=f.slice(0,-3);m in i||(i[m]=[{}]);const g=i[m];c(g[0],t.slice(a+1),e);return}(!i[f]||typeof i[f]!="object")&&(i[f]={}),i=i[f]}const o=t[t.length-1],s=i[o];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else i[o]=e}function u(i,t){try{if(t.length===1&&t[0]==="_self")return i;for(let e=0;e<t.length;e++){if(typeof i!="object"||i===null)return;const o=t[e];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in i){const a=i[s];return Array.isArray(a)?a.map(f=>u(f,t.slice(e+1))):void 0}else return}else i=i[o]}return i}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mf;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(mf||(mf={}));var hf;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(hf||(hf={}));var gf;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(gf||(gf={}));var yf;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(yf||(yf={}));var vf;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(vf||(vf={}));var Gt;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT"})(Gt||(Gt={}));var xf;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(xf||(xf={}));var Cf;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Cf||(Cf={}));var _f;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY"})(_f||(_f={}));var Tf;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Tf||(Tf={}));var Ef;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ef||(Ef={}));var Sf;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Sf||(Sf={}));var wf;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wf||(wf={}));var ns;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(ns||(ns={}));var If;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(If||(If={}));var _a;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_a||(_a={}));var Nf;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Nf||(Nf={}));var kf;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(kf||(kf={}));var Af;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Af||(Af={}));var Rf;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Rf||(Rf={}));var Mf;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Mf||(Mf={}));var Pf;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Pf||(Pf={}));var Df;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Df||(Df={}));var Lf;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Lf||(Lf={}));var Ff;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(Ff||(Ff={}));var Vf;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Vf||(Vf={}));var Uf;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Uf||(Uf={}));var bf;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(bf||(bf={}));var Of;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Of||(Of={}));var zf;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(zf||(zf={}));var Bf;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Bf||(Bf={}));var Gf;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Gf||(Gf={}));var $f;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})($f||($f={}));var Hf;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Hf||(Hf={}));var qf;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(qf||(qf={}));var Wf;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Wf||(Wf={}));var jf;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(jf||(jf={}));var Yf;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yf||(Yf={}));var Jf;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY"})(Jf||(Jf={}));var Cr;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Cr||(Cr={}));class xi{get text(){var t,e,o,s,a,f,m,g;if(((s=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",x=!1;const _=[];for(const T of(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)!==null&&g!==void 0?g:[]){for(const[S,k]of Object.entries(T))S!=="text"&&S!=="thought"&&(k!==null||k!==void 0)&&_.push(S);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?h:void 0}get data(){var t,e,o,s,a,f,m,g;if(((s=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const x=[];for(const _ of(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)!==null&&g!==void 0?g:[]){for(const[T,S]of Object.entries(_))T!=="inlineData"&&(S!==null||S!==void 0)&&x.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var t,e,o,s,a,f,m,g;if(((s=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var t,e,o,s,a,f,m,g,h;if(((s=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(h=x==null?void 0:x[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var t,e,o,s,a,f,m,g,h;if(((s=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(g=(m=(f=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(h=x==null?void 0:x[0])===null||h===void 0?void 0:h.output}}class Kf{}class Zf{}class wy{}class Iy{}class Qf{}class Xf{}class ep{}class Ny{}class tp{}class np{}class rp{}class ky{}class Ta{constructor(t){const e={};for(const o of t.headers.entries())e[o[0]]=o[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ay{}class Ry{}class My{get text(){var t,e,o;let s="",a=!1;const f=[];for(const m of(o=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&o!==void 0?o:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&h!==null&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;a=!0,s+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var t,e,o;let s="";const a=[];for(const f of(o=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&o!==void 0?o:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&g!==null&&a.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(s+=atob(f.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Py{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Qp(i,t){const e=Fe(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function Xp(i,t){return Array.isArray(t)?t.map(e=>rs(i,e)):[rs(i,t)]}function rs(i,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Dy(i,t){const e=rs(i,t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ly(i,t){const e=rs(i,t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ip(i,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function em(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ip(i,e)):[ip(i,t)]}function Ea(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function op(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function sp(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function ht(i,t){if(t==null)throw new Error("ContentUnion is required");return Ea(t)?t:{role:"user",parts:em(i,t)}}function tm(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const o=ht(i,e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const e=ht(i,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>ht(i,e)):[ht(i,t)]}function Vt(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(op(t)||sp(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(i,t)]}const e=[],o=[],s=Ea(t[0]);for(const a of t){const f=Ea(a);if(f!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(a);else{if(op(a)||sp(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(a)}}return s||e.push({role:"user",parts:em(i,o)}),e}const lp=Cy(["string","number","integer","object","array","boolean","null"]),Fy=yy([lp,_i(lp)]);function Vy(i=!0){const t=xy(()=>{const e=gy({type:Fy.optional(),format:Bn().optional(),title:Bn().optional(),description:Bn().optional(),default:pf().optional(),items:t.optional(),minItems:yr.string().optional(),maxItems:yr.string().optional(),enum:_i(pf()).optional(),properties:vy(Bn(),t).optional(),required:_i(Bn()).optional(),minProperties:yr.string().optional(),maxProperties:yr.string().optional(),propertyOrdering:_i(Bn()).optional(),minimum:ff().optional(),maximum:ff().optional(),minLength:yr.string().optional(),maxLength:yr.string().optional(),pattern:Bn().optional(),anyOf:_i(t).optional(),additionalProperties:hy().optional()});return i?e.strict():e});return t}function Uy(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(o=>o!=="null");if(e.length===1)t.type=Object.keys(Gt).includes(e[0].toUpperCase())?Gt[e[0].toUpperCase()]:Gt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of e)t.anyOf.push({type:Object.keys(Gt).includes(o.toUpperCase())?Gt[o.toUpperCase()]:Gt.TYPE_UNSPECIFIED})}}function Ei(i){const t={},e=["items"],o=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,i=a[1]):a[1].type==="null"&&(t.nullable=!0,i=a[0])),i.type instanceof Array&&Uy(i.type,t);for(const[f,m]of Object.entries(i))if(m!=null)if(f=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;t.type=Object.keys(Gt).includes(m.toUpperCase())?m.toUpperCase():Gt.TYPE_UNSPECIFIED}else if(e.includes(f))t[f]=Ei(m);else if(o.includes(f)){const g=[];for(const h of m){if(h.type=="null"){t.nullable=!0;continue}g.push(Ei(h))}t[f]=g}else if(s.includes(f)){const g={};for(const[h,x]of Object.entries(m))g[h]=Ei(x);t[f]=g}else{if(f==="additionalProperties")continue;t[f]=m}return t}function is(i,t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Vy().parse(t);return Ei(e)}else return Ei(t)}function nm(i,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function rm(i,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ss(i,t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=is(i,e.parameters)),e.response&&(e.response=is(i,e.response));return t}function ls(i,t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function by(i,t,e,o=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===o;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function In(i,t){if(typeof t!="string")throw new Error("name must be a string");return by(i,t,"cachedContents")}function im(i,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Nn(i,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Oy(i){return i!=null&&typeof i=="object"&&"name"in i}function zy(i){return i!=null&&typeof i=="object"&&"video"in i}function By(i){return i!=null&&typeof i=="object"&&"uri"in i}function om(i,t){var e;let o;if(Oy(t)&&(o=t.name),!(By(t)&&(o=t.uri,o===void 0))&&!(zy(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const a=o.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${o}`);o=a[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function sm(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function lm(i,t){for(const e of["models","tunedModels","publisherModels"])if(Gy(t,e))return t[e];return[]}function Gy(i,t){return i!==null&&typeof i=="object"&&t in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $y(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function Hy(i,t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["data"]);o!=null&&c(e,["data"],o);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function qy(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],$y(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],Hy(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function ap(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>qy(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Wy(i,t){const e={},o=u(t,["behavior"]);o!=null&&c(e,["behavior"],o);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const a=u(t,["name"]);a!=null&&c(e,["name"],a);const f=u(t,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],m),e}function jy(i,t){const e={},o=u(t,["startTime"]);o!=null&&c(e,["startTime"],o);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Yy(i,t){const e={},o=u(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],jy(i,o)),e}function Jy(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Ky(i,t){const e={},o=u(t,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],Jy(i,o)),e}function Zy(){return{}}function Qy(i,t){const e={},o=u(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(h=>Wy(i,h))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],Yy(i,s));const a=u(t,["googleSearchRetrieval"]);if(a!=null&&c(e,["googleSearchRetrieval"],Ky(i,a)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],Zy());const m=u(t,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function Xy(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function ev(i,t){const e={},o=u(t,["latitude"]);o!=null&&c(e,["latitude"],o);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function tv(i,t){const e={},o=u(t,["latLng"]);return o!=null&&c(e,["latLng"],ev(i,o)),e}function nv(i,t){const e={},o=u(t,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],Xy(i,o));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],tv(i,s)),e}function rv(i,t,e){const o={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&c(e,["expireTime"],a);const f=u(t,["displayName"]);e!==void 0&&f!=null&&c(e,["displayName"],f);const m=u(t,["contents"]);if(e!==void 0&&m!=null){let _=Vt(i,m);Array.isArray(_)&&(_=_.map(T=>ap(i,T))),c(e,["contents"],_)}const g=u(t,["systemInstruction"]);e!==void 0&&g!=null&&c(e,["systemInstruction"],ap(i,ht(i,g)));const h=u(t,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>Qy(i,T))),c(e,["tools"],_)}const x=u(t,["toolConfig"]);if(e!==void 0&&x!=null&&c(e,["toolConfig"],nv(i,x)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function iv(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["model"],Qp(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],rv(i,s,e)),e}function ov(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],In(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function sv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],In(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function lv(i,t,e){const o={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&c(e,["expireTime"],a),o}function av(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],In(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],lv(i,s,e)),e}function uv(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&c(e,["_query","pageToken"],a),o}function cv(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],uv(i,o,e)),e}function dv(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function fv(i,t){const e={},o=u(t,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function pv(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],dv(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],fv(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function up(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>pv(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function mv(i,t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(t,["description"]);o!=null&&c(e,["description"],o);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const f=u(t,["response"]);return f!=null&&c(e,["response"],f),e}function hv(i,t){const e={},o=u(t,["startTime"]);o!=null&&c(e,["startTime"],o);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function gv(i,t){const e={},o=u(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],hv(i,o)),e}function yv(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function vv(i,t){const e={},o=u(t,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],yv(i,o)),e}function xv(){return{}}function Cv(i,t){const e={},o=u(t,["apiKeyString"]);return o!=null&&c(e,["apiKeyString"],o),e}function _v(i,t){const e={},o=u(t,["apiKeyConfig"]);o!=null&&c(e,["apiKeyConfig"],Cv(i,o));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const a=u(t,["googleServiceAccountConfig"]);a!=null&&c(e,["googleServiceAccountConfig"],a);const f=u(t,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(t,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const g=u(t,["oidcConfig"]);return g!=null&&c(e,["oidcConfig"],g),e}function Tv(i,t){const e={},o=u(t,["authConfig"]);return o!=null&&c(e,["authConfig"],_v(i,o)),e}function Ev(i,t){const e={},o=u(t,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(_=>mv(i,_))),c(e,["functionDeclarations"],x)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const a=u(t,["googleSearch"]);a!=null&&c(e,["googleSearch"],gv(i,a));const f=u(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],vv(i,f)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],xv());const g=u(t,["googleMaps"]);if(g!=null&&c(e,["googleMaps"],Tv(i,g)),u(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const h=u(t,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Sv(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function wv(i,t){const e={},o=u(t,["latitude"]);o!=null&&c(e,["latitude"],o);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function Iv(i,t){const e={},o=u(t,["latLng"]);return o!=null&&c(e,["latLng"],wv(i,o)),e}function Nv(i,t){const e={},o=u(t,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],Sv(i,o));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],Iv(i,s)),e}function kv(i,t,e){const o={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&c(e,["expireTime"],a);const f=u(t,["displayName"]);e!==void 0&&f!=null&&c(e,["displayName"],f);const m=u(t,["contents"]);if(e!==void 0&&m!=null){let T=Vt(i,m);Array.isArray(T)&&(T=T.map(S=>up(i,S))),c(e,["contents"],T)}const g=u(t,["systemInstruction"]);e!==void 0&&g!=null&&c(e,["systemInstruction"],up(i,ht(i,g)));const h=u(t,["tools"]);if(e!==void 0&&h!=null){let T=h;Array.isArray(T)&&(T=T.map(S=>Ev(i,S))),c(e,["tools"],T)}const x=u(t,["toolConfig"]);e!==void 0&&x!=null&&c(e,["toolConfig"],Nv(i,x));const _=u(t,["kmsKeyName"]);return e!==void 0&&_!=null&&c(e,["encryption_spec","kmsKeyName"],_),o}function Av(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["model"],Qp(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],kv(i,s,e)),e}function Rv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],In(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Mv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],In(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Pv(i,t,e){const o={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&c(e,["expireTime"],a),o}function Dv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],In(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],Pv(i,s,e)),e}function Lv(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&c(e,["_query","pageToken"],a),o}function Fv(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],Lv(i,o,e)),e}function $o(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["model"]);a!=null&&c(e,["model"],a);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const m=u(t,["updateTime"]);m!=null&&c(e,["updateTime"],m);const g=u(t,["expireTime"]);g!=null&&c(e,["expireTime"],g);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function Vv(){return{}}function Uv(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>$o(i,f))),c(e,["cachedContents"],a)}return e}function Ho(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["model"]);a!=null&&c(e,["model"],a);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const m=u(t,["updateTime"]);m!=null&&c(e,["updateTime"],m);const g=u(t,["expireTime"]);g!=null&&c(e,["expireTime"],g);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function bv(){return{}}function Ov(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>Ho(i,f))),c(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kr;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(kr||(kr={}));class as{constructor(t,e,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,o,s)}init(t,e,o){var s,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let f={config:{}};o?typeof o=="object"?f=Object.assign({},o):f=o:f={config:{}},f.config&&(f.config.pageToken=e.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(a=(s=f.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zv extends Ii{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new as(kr.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(e),e)}async create(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Av(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>Ho(this.apiClient,x))}else{const h=iv(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>$o(this.apiClient,x))}}async get(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Rv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>Ho(this.apiClient,x))}else{const h=ov(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>$o(this.apiClient,x))}}async delete(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Mv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(()=>{const x=bv(),_=new np;return Object.assign(_,x),_})}else{const h=sv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(()=>{const x=Vv(),_=new np;return Object.assign(_,x),_})}}async update(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Dv(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>Ho(this.apiClient,x))}else{const h=av(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>$o(this.apiClient,x))}}async listInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Fv(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Ov(this.apiClient,x),T=new rp;return Object.assign(T,_),T})}else{const h=cv(this.apiClient,t);return m=ce("cachedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Uv(this.apiClient,x),T=new rp;return Object.assign(T,_),T})}}}function cp(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],o=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(i){return this instanceof ze?(this.v=i,this):new ze(i)}function Si(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=e.apply(i,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),s[Symbol.asyncIterator]=function(){return this},s;function f(S){return function(k){return Promise.resolve(k).then(S,_)}}function m(S,k){o[S]&&(s[S]=function(M){return new Promise(function(D,H){a.push([S,M,D,H])>1||g(S,M)})},k&&(s[S]=k(s[S])))}function g(S,k){try{h(o[S](k))}catch(M){T(a[0][3],M)}}function h(S){S.value instanceof ze?Promise.resolve(S.value.v).then(x,_):T(a[0][2],S)}function x(S){g("next",S)}function _(S){g("throw",S)}function T(S,k){S(k),a.shift(),a.length&&g(a[0][0],a[0][1])}}function qo(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof cp=="function"?cp(i):i[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(a){e[a]=i[a]&&function(f){return new Promise(function(m,g){f=i[a](f),s(m,g,f.done,f.value)})}}function s(a,f,m,g){Promise.resolve(g).then(function(h){a({value:h,done:m})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bv(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:am(e)}function am(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function Gv(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function dp(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let o=0;for(;o<e;)if(i[o].role==="user")t.push(i[o]),o++;else{const s=[];let a=!0;for(;o<e&&i[o].role==="model";)s.push(i[o]),a&&!am(i[o])&&(a=!1),o++;a?t.push(...s):t.pop()}return t}class $v{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Hv(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Hv{constructor(t,e,o,s={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=o,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Gv(a)}async sendMessage(t){var e;await this.sendPromise;const o=ht(this.apiClient,t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,f,m;const g=await s,h=(f=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||f===void 0?void 0:f.content,x=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];x!=null&&(T=(m=x.slice(_))!==null&&m!==void 0?m:[]);const S=h?[h]:[];this.recordHistory(o,S,T)})(),await this.sendPromise,s}async sendMessageStream(t){var e;await this.sendPromise;const o=ht(this.apiClient,t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,o)}getHistory(t=!1){const e=t?dp(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var o,s;return Si(this,arguments,function*(){var f,m,g,h;const x=[];try{for(var _=!0,T=qo(t),S;S=yield ze(T.next()),f=S.done,!f;_=!0){h=S.value,_=!1;const k=h;if(Bv(k)){const M=(s=(o=k.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;M!==void 0&&x.push(M)}yield yield ze(k)}}catch(k){m={error:k}}finally{try{!_&&!f&&(g=T.return)&&(yield ze(g.call(T)))}finally{if(m)throw m.error}}this.recordHistory(e,x)})}recordHistory(t,e,o){let s=[];e.length>0&&e.every(a=>a.role!==void 0)?s=e:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...dp(o)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qv(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&c(e,["_query","pageToken"],a),o}function Wv(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],qv(i,o,e)),e}function jv(i,t){const e={},o=u(t,["details"]);o!=null&&c(e,["details"],o);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const a=u(t,["code"]);return a!=null&&c(e,["code"],a),e}function Yv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["mimeType"]);a!=null&&c(e,["mimeType"],a);const f=u(t,["sizeBytes"]);f!=null&&c(e,["sizeBytes"],f);const m=u(t,["createTime"]);m!=null&&c(e,["createTime"],m);const g=u(t,["expirationTime"]);g!=null&&c(e,["expirationTime"],g);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const x=u(t,["sha256Hash"]);x!=null&&c(e,["sha256Hash"],x);const _=u(t,["uri"]);_!=null&&c(e,["uri"],_);const T=u(t,["downloadUri"]);T!=null&&c(e,["downloadUri"],T);const S=u(t,["state"]);S!=null&&c(e,["state"],S);const k=u(t,["source"]);k!=null&&c(e,["source"],k);const M=u(t,["videoMetadata"]);M!=null&&c(e,["videoMetadata"],M);const D=u(t,["error"]);return D!=null&&c(e,["error"],jv(i,D)),e}function Jv(i,t){const e={},o=u(t,["file"]);o!=null&&c(e,["file"],Yv(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Kv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","file"],om(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Zv(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","file"],om(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Qv(i,t){const e={},o=u(t,["details"]);o!=null&&c(e,["details"],o);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const a=u(t,["code"]);return a!=null&&c(e,["code"],a),e}function Sa(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["mimeType"]);a!=null&&c(e,["mimeType"],a);const f=u(t,["sizeBytes"]);f!=null&&c(e,["sizeBytes"],f);const m=u(t,["createTime"]);m!=null&&c(e,["createTime"],m);const g=u(t,["expirationTime"]);g!=null&&c(e,["expirationTime"],g);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const x=u(t,["sha256Hash"]);x!=null&&c(e,["sha256Hash"],x);const _=u(t,["uri"]);_!=null&&c(e,["uri"],_);const T=u(t,["downloadUri"]);T!=null&&c(e,["downloadUri"],T);const S=u(t,["state"]);S!=null&&c(e,["state"],S);const k=u(t,["source"]);k!=null&&c(e,["source"],k);const M=u(t,["videoMetadata"]);M!=null&&c(e,["videoMetadata"],M);const D=u(t,["error"]);return D!=null&&c(e,["error"],Qv(i,D)),e}function Xv(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>Sa(i,f))),c(e,["files"],a)}return e}function ex(){return{}}function tx(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nx extends Ii{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new as(kr.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>Sa(this.apiClient,e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Wv(this.apiClient,t);return a=ce("files",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=Xv(this.apiClient,g),x=new ky;return Object.assign(x,h),x})}}async createInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Jv(this.apiClient,t);return a=ce("upload/v1beta/files",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(()=>{const g=ex(),h=new Ay;return Object.assign(h,g),h})}}async get(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Kv(this.apiClient,t);return a=ce("files/{file}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>Sa(this.apiClient,g))}}async delete(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Zv(this.apiClient,t);return a=ce("files/{file}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(()=>{const g=tx(),h=new Ry;return Object.assign(h,g),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rx(i,t){const e={},o=u(t,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function ix(i,t){const e={},o=u(t,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function um(i,t){const e={},o=u(t,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],rx(i,o)),e}function ox(i,t){const e={},o=u(t,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],ix(i,o)),e}function sx(i,t){const e={},o=u(t,["speaker"]);o!=null&&c(e,["speaker"],o);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],um(i,s)),e}function lx(i,t){const e={},o=u(t,["speakerVoiceConfigs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>sx(i,a))),c(e,["speakerVoiceConfigs"],s)}return e}function ax(i,t){const e={},o=u(t,["voiceConfig"]);o!=null&&c(e,["voiceConfig"],um(i,o));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],lx(i,s));const a=u(t,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function ux(i,t){const e={},o=u(t,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],ox(i,o)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function cx(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function dx(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function fx(i,t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["data"]);o!=null&&c(e,["data"],o);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function px(i,t){const e={},o=u(t,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function mx(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],cx(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],fx(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function hx(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],dx(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],px(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function gx(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>mx(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function yx(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>hx(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function vx(i,t){const e={},o=u(t,["behavior"]);o!=null&&c(e,["behavior"],o);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const a=u(t,["name"]);a!=null&&c(e,["name"],a);const f=u(t,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],m),e}function xx(i,t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(t,["description"]);o!=null&&c(e,["description"],o);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const f=u(t,["response"]);return f!=null&&c(e,["response"],f),e}function Cx(i,t){const e={},o=u(t,["startTime"]);o!=null&&c(e,["startTime"],o);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function _x(i,t){const e={},o=u(t,["startTime"]);o!=null&&c(e,["startTime"],o);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Tx(i,t){const e={},o=u(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],Cx(i,o)),e}function Ex(i,t){const e={},o=u(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],_x(i,o)),e}function Sx(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function wx(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Ix(i,t){const e={},o=u(t,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],Sx(i,o)),e}function Nx(i,t){const e={},o=u(t,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],wx(i,o)),e}function kx(){return{}}function Ax(i,t){const e={},o=u(t,["apiKeyString"]);return o!=null&&c(e,["apiKeyString"],o),e}function Rx(i,t){const e={},o=u(t,["apiKeyConfig"]);o!=null&&c(e,["apiKeyConfig"],Ax(i,o));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const a=u(t,["googleServiceAccountConfig"]);a!=null&&c(e,["googleServiceAccountConfig"],a);const f=u(t,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(t,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const g=u(t,["oidcConfig"]);return g!=null&&c(e,["oidcConfig"],g),e}function Mx(i,t){const e={},o=u(t,["authConfig"]);return o!=null&&c(e,["authConfig"],Rx(i,o)),e}function Px(){return{}}function Dx(i,t){const e={},o=u(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(h=>vx(i,h))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],Tx(i,s));const a=u(t,["googleSearchRetrieval"]);if(a!=null&&c(e,["googleSearchRetrieval"],Ix(i,a)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],Px());const m=u(t,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function Lx(i,t){const e={},o=u(t,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(_=>xx(i,_))),c(e,["functionDeclarations"],x)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const a=u(t,["googleSearch"]);a!=null&&c(e,["googleSearch"],Ex(i,a));const f=u(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],Nx(i,f)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],kx());const g=u(t,["googleMaps"]);if(g!=null&&c(e,["googleMaps"],Mx(i,g)),u(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const h=u(t,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Fx(i,t){const e={},o=u(t,["handle"]);if(o!=null&&c(e,["handle"],o),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Vx(i,t){const e={},o=u(t,["handle"]);o!=null&&c(e,["handle"],o);const s=u(t,["transparent"]);return s!=null&&c(e,["transparent"],s),e}function fp(){return{}}function pp(){return{}}function Ux(i,t){const e={},o=u(t,["disabled"]);o!=null&&c(e,["disabled"],o);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const a=u(t,["endOfSpeechSensitivity"]);a!=null&&c(e,["endOfSpeechSensitivity"],a);const f=u(t,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(t,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function bx(i,t){const e={},o=u(t,["disabled"]);o!=null&&c(e,["disabled"],o);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const a=u(t,["endOfSpeechSensitivity"]);a!=null&&c(e,["endOfSpeechSensitivity"],a);const f=u(t,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(t,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function Ox(i,t){const e={},o=u(t,["automaticActivityDetection"]);o!=null&&c(e,["automaticActivityDetection"],Ux(i,o));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const a=u(t,["turnCoverage"]);return a!=null&&c(e,["turnCoverage"],a),e}function zx(i,t){const e={},o=u(t,["automaticActivityDetection"]);o!=null&&c(e,["automaticActivityDetection"],bx(i,o));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const a=u(t,["turnCoverage"]);return a!=null&&c(e,["turnCoverage"],a),e}function Bx(i,t){const e={},o=u(t,["targetTokens"]);return o!=null&&c(e,["targetTokens"],o),e}function Gx(i,t){const e={},o=u(t,["targetTokens"]);return o!=null&&c(e,["targetTokens"],o),e}function $x(i,t){const e={},o=u(t,["triggerTokens"]);o!=null&&c(e,["triggerTokens"],o);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],Bx(i,s)),e}function Hx(i,t){const e={},o=u(t,["triggerTokens"]);o!=null&&c(e,["triggerTokens"],o);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],Gx(i,s)),e}function qx(i,t){const e={},o=u(t,["proactiveAudio"]);return o!=null&&c(e,["proactiveAudio"],o),e}function Wx(i,t){const e={},o=u(t,["proactiveAudio"]);return o!=null&&c(e,["proactiveAudio"],o),e}function jx(i,t,e){const o={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","responseModalities"],a);const f=u(t,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(t,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const g=u(t,["topK"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","topK"],g);const h=u(t,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const x=u(t,["mediaResolution"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","mediaResolution"],x);const _=u(t,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],ax(i,rm(i,T)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const k=u(t,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],gx(i,ht(i,k)));const M=u(t,["tools"]);if(e!==void 0&&M!=null){let Q=ls(i,M);Array.isArray(Q)&&(Q=Q.map(te=>Dx(i,ss(i,te)))),c(e,["setup","tools"],Q)}const D=u(t,["sessionResumption"]);e!==void 0&&D!=null&&c(e,["setup","sessionResumption"],Fx(i,D));const H=u(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],fp());const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","outputAudioTranscription"],fp());const q=u(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&c(e,["setup","realtimeInputConfig"],Ox(i,q));const J=u(t,["contextWindowCompression"]);e!==void 0&&J!=null&&c(e,["setup","contextWindowCompression"],$x(i,J));const K=u(t,["proactivity"]);return e!==void 0&&K!=null&&c(e,["setup","proactivity"],qx(i,K)),o}function Yx(i,t,e){const o={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","responseModalities"],a);const f=u(t,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(t,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const g=u(t,["topK"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","topK"],g);const h=u(t,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const x=u(t,["mediaResolution"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","mediaResolution"],x);const _=u(t,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],ux(i,rm(i,T)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const k=u(t,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],yx(i,ht(i,k)));const M=u(t,["tools"]);if(e!==void 0&&M!=null){let Q=ls(i,M);Array.isArray(Q)&&(Q=Q.map(te=>Lx(i,ss(i,te)))),c(e,["setup","tools"],Q)}const D=u(t,["sessionResumption"]);e!==void 0&&D!=null&&c(e,["setup","sessionResumption"],Vx(i,D));const H=u(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],pp());const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","outputAudioTranscription"],pp());const q=u(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&c(e,["setup","realtimeInputConfig"],zx(i,q));const J=u(t,["contextWindowCompression"]);e!==void 0&&J!=null&&c(e,["setup","contextWindowCompression"],Hx(i,J));const K=u(t,["proactivity"]);return e!==void 0&&K!=null&&c(e,["setup","proactivity"],Wx(i,K)),o}function Jx(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["setup","model"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],jx(i,s,e)),e}function Kx(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["setup","model"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],Yx(i,s,e)),e}function Zx(){return{}}function Qx(){return{}}function Xx(){return{}}function eC(){return{}}function tC(i,t){const e={},o=u(t,["media"]);o!=null&&c(e,["mediaChunks"],Xp(i,o));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Ly(i,s));const a=u(t,["audioStreamEnd"]);a!=null&&c(e,["audioStreamEnd"],a);const f=u(t,["video"]);f!=null&&c(e,["video"],Dy(i,f));const m=u(t,["text"]);return m!=null&&c(e,["text"],m),u(t,["activityStart"])!=null&&c(e,["activityStart"],Zx()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],Xx()),e}function nC(i,t){const e={},o=u(t,["media"]);if(o!=null&&c(e,["mediaChunks"],Xp(i,o)),u(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=u(t,["audioStreamEnd"]);if(s!=null&&c(e,["audioStreamEnd"],s),u(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(u(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return u(t,["activityStart"])!=null&&c(e,["activityStart"],Qx()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],eC()),e}function cm(i,t){const e={},o=u(t,["text"]);o!=null&&c(e,["text"],o);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function rC(i,t){const e={},o=u(t,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>cm(i,a))),c(e,["weightedPrompts"],s)}return e}function dm(i,t){const e={},o=u(t,["temperature"]);o!=null&&c(e,["temperature"],o);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const a=u(t,["seed"]);a!=null&&c(e,["seed"],a);const f=u(t,["guidance"]);f!=null&&c(e,["guidance"],f);const m=u(t,["bpm"]);m!=null&&c(e,["bpm"],m);const g=u(t,["density"]);g!=null&&c(e,["density"],g);const h=u(t,["brightness"]);h!=null&&c(e,["brightness"],h);const x=u(t,["scale"]);x!=null&&c(e,["scale"],x);const _=u(t,["muteBass"]);_!=null&&c(e,["muteBass"],_);const T=u(t,["muteDrums"]);T!=null&&c(e,["muteDrums"],T);const S=u(t,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const k=u(t,["musicGenerationMode"]);return k!=null&&c(e,["musicGenerationMode"],k),e}function iC(i,t){const e={},o=u(t,["musicGenerationConfig"]);return o!=null&&c(e,["musicGenerationConfig"],dm(i,o)),e}function fm(i,t){const e={},o=u(t,["model"]);return o!=null&&c(e,["model"],o),e}function pm(i,t){const e={},o=u(t,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>cm(i,a))),c(e,["weightedPrompts"],s)}return e}function wa(i,t){const e={},o=u(t,["setup"]);o!=null&&c(e,["setup"],fm(i,o));const s=u(t,["clientContent"]);s!=null&&c(e,["clientContent"],pm(i,s));const a=u(t,["musicGenerationConfig"]);a!=null&&c(e,["musicGenerationConfig"],dm(i,a));const f=u(t,["playbackControl"]);return f!=null&&c(e,["playbackControl"],f),e}function oC(){return{}}function sC(){return{}}function lC(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function aC(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function uC(i,t){const e={},o=u(t,["data"]);o!=null&&c(e,["data"],o);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function cC(i,t){const e={},o=u(t,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function dC(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],lC(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],uC(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function fC(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],aC(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],cC(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function pC(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>dC(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function mC(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>fC(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function mp(i,t){const e={},o=u(t,["text"]);o!=null&&c(e,["text"],o);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function hp(i,t){const e={},o=u(t,["text"]);o!=null&&c(e,["text"],o);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function hC(i,t){const e={},o=u(t,["retrievedUrl"]);o!=null&&c(e,["retrievedUrl"],o);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function gC(i,t){const e={},o=u(t,["urlMetadata"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>hC(i,a))),c(e,["urlMetadata"],s)}return e}function yC(i,t){const e={},o=u(t,["modelTurn"]);o!=null&&c(e,["modelTurn"],pC(i,o));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const a=u(t,["interrupted"]);a!=null&&c(e,["interrupted"],a);const f=u(t,["groundingMetadata"]);f!=null&&c(e,["groundingMetadata"],f);const m=u(t,["generationComplete"]);m!=null&&c(e,["generationComplete"],m);const g=u(t,["inputTranscription"]);g!=null&&c(e,["inputTranscription"],mp(i,g));const h=u(t,["outputTranscription"]);h!=null&&c(e,["outputTranscription"],mp(i,h));const x=u(t,["urlContextMetadata"]);return x!=null&&c(e,["urlContextMetadata"],gC(i,x)),e}function vC(i,t){const e={},o=u(t,["modelTurn"]);o!=null&&c(e,["modelTurn"],mC(i,o));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const a=u(t,["interrupted"]);a!=null&&c(e,["interrupted"],a);const f=u(t,["groundingMetadata"]);f!=null&&c(e,["groundingMetadata"],f);const m=u(t,["generationComplete"]);m!=null&&c(e,["generationComplete"],m);const g=u(t,["inputTranscription"]);g!=null&&c(e,["inputTranscription"],hp(i,g));const h=u(t,["outputTranscription"]);return h!=null&&c(e,["outputTranscription"],hp(i,h)),e}function xC(i,t){const e={},o=u(t,["id"]);o!=null&&c(e,["id"],o);const s=u(t,["args"]);s!=null&&c(e,["args"],s);const a=u(t,["name"]);return a!=null&&c(e,["name"],a),e}function CC(i,t){const e={},o=u(t,["args"]);o!=null&&c(e,["args"],o);const s=u(t,["name"]);return s!=null&&c(e,["name"],s),e}function _C(i,t){const e={},o=u(t,["functionCalls"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>xC(i,a))),c(e,["functionCalls"],s)}return e}function TC(i,t){const e={},o=u(t,["functionCalls"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>CC(i,a))),c(e,["functionCalls"],s)}return e}function EC(i,t){const e={},o=u(t,["ids"]);return o!=null&&c(e,["ids"],o),e}function SC(i,t){const e={},o=u(t,["ids"]);return o!=null&&c(e,["ids"],o),e}function zo(i,t){const e={},o=u(t,["modality"]);o!=null&&c(e,["modality"],o);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Bo(i,t){const e={},o=u(t,["modality"]);o!=null&&c(e,["modality"],o);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function wC(i,t){const e={},o=u(t,["promptTokenCount"]);o!=null&&c(e,["promptTokenCount"],o);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const a=u(t,["responseTokenCount"]);a!=null&&c(e,["responseTokenCount"],a);const f=u(t,["toolUsePromptTokenCount"]);f!=null&&c(e,["toolUsePromptTokenCount"],f);const m=u(t,["thoughtsTokenCount"]);m!=null&&c(e,["thoughtsTokenCount"],m);const g=u(t,["totalTokenCount"]);g!=null&&c(e,["totalTokenCount"],g);const h=u(t,["promptTokensDetails"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(k=>zo(i,k))),c(e,["promptTokensDetails"],S)}const x=u(t,["cacheTokensDetails"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(k=>zo(i,k))),c(e,["cacheTokensDetails"],S)}const _=u(t,["responseTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(k=>zo(i,k))),c(e,["responseTokensDetails"],S)}const T=u(t,["toolUsePromptTokensDetails"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(k=>zo(i,k))),c(e,["toolUsePromptTokensDetails"],S)}return e}function IC(i,t){const e={},o=u(t,["promptTokenCount"]);o!=null&&c(e,["promptTokenCount"],o);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const a=u(t,["candidatesTokenCount"]);a!=null&&c(e,["responseTokenCount"],a);const f=u(t,["toolUsePromptTokenCount"]);f!=null&&c(e,["toolUsePromptTokenCount"],f);const m=u(t,["thoughtsTokenCount"]);m!=null&&c(e,["thoughtsTokenCount"],m);const g=u(t,["totalTokenCount"]);g!=null&&c(e,["totalTokenCount"],g);const h=u(t,["promptTokensDetails"]);if(h!=null){let k=h;Array.isArray(k)&&(k=k.map(M=>Bo(i,M))),c(e,["promptTokensDetails"],k)}const x=u(t,["cacheTokensDetails"]);if(x!=null){let k=x;Array.isArray(k)&&(k=k.map(M=>Bo(i,M))),c(e,["cacheTokensDetails"],k)}const _=u(t,["candidatesTokensDetails"]);if(_!=null){let k=_;Array.isArray(k)&&(k=k.map(M=>Bo(i,M))),c(e,["responseTokensDetails"],k)}const T=u(t,["toolUsePromptTokensDetails"]);if(T!=null){let k=T;Array.isArray(k)&&(k=k.map(M=>Bo(i,M))),c(e,["toolUsePromptTokensDetails"],k)}const S=u(t,["trafficType"]);return S!=null&&c(e,["trafficType"],S),e}function NC(i,t){const e={},o=u(t,["timeLeft"]);return o!=null&&c(e,["timeLeft"],o),e}function kC(i,t){const e={},o=u(t,["timeLeft"]);return o!=null&&c(e,["timeLeft"],o),e}function AC(i,t){const e={},o=u(t,["newHandle"]);o!=null&&c(e,["newHandle"],o);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const a=u(t,["lastConsumedClientMessageIndex"]);return a!=null&&c(e,["lastConsumedClientMessageIndex"],a),e}function RC(i,t){const e={},o=u(t,["newHandle"]);o!=null&&c(e,["newHandle"],o);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const a=u(t,["lastConsumedClientMessageIndex"]);return a!=null&&c(e,["lastConsumedClientMessageIndex"],a),e}function MC(i,t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],oC());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],yC(i,s));const a=u(t,["toolCall"]);a!=null&&c(e,["toolCall"],_C(i,a));const f=u(t,["toolCallCancellation"]);f!=null&&c(e,["toolCallCancellation"],EC(i,f));const m=u(t,["usageMetadata"]);m!=null&&c(e,["usageMetadata"],wC(i,m));const g=u(t,["goAway"]);g!=null&&c(e,["goAway"],NC(i,g));const h=u(t,["sessionResumptionUpdate"]);return h!=null&&c(e,["sessionResumptionUpdate"],AC(i,h)),e}function PC(i,t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],sC());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],vC(i,s));const a=u(t,["toolCall"]);a!=null&&c(e,["toolCall"],TC(i,a));const f=u(t,["toolCallCancellation"]);f!=null&&c(e,["toolCallCancellation"],SC(i,f));const m=u(t,["usageMetadata"]);m!=null&&c(e,["usageMetadata"],IC(i,m));const g=u(t,["goAway"]);g!=null&&c(e,["goAway"],kC(i,g));const h=u(t,["sessionResumptionUpdate"]);return h!=null&&c(e,["sessionResumptionUpdate"],RC(i,h)),e}function DC(){return{}}function LC(i,t){const e={},o=u(t,["text"]);o!=null&&c(e,["text"],o);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function FC(i,t){const e={},o=u(t,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>LC(i,a))),c(e,["weightedPrompts"],s)}return e}function VC(i,t){const e={},o=u(t,["temperature"]);o!=null&&c(e,["temperature"],o);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const a=u(t,["seed"]);a!=null&&c(e,["seed"],a);const f=u(t,["guidance"]);f!=null&&c(e,["guidance"],f);const m=u(t,["bpm"]);m!=null&&c(e,["bpm"],m);const g=u(t,["density"]);g!=null&&c(e,["density"],g);const h=u(t,["brightness"]);h!=null&&c(e,["brightness"],h);const x=u(t,["scale"]);x!=null&&c(e,["scale"],x);const _=u(t,["muteBass"]);_!=null&&c(e,["muteBass"],_);const T=u(t,["muteDrums"]);T!=null&&c(e,["muteDrums"],T);const S=u(t,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const k=u(t,["musicGenerationMode"]);return k!=null&&c(e,["musicGenerationMode"],k),e}function UC(i,t){const e={},o=u(t,["clientContent"]);o!=null&&c(e,["clientContent"],FC(i,o));const s=u(t,["musicGenerationConfig"]);return s!=null&&c(e,["musicGenerationConfig"],VC(i,s)),e}function bC(i,t){const e={},o=u(t,["data"]);o!=null&&c(e,["data"],o);const s=u(t,["mimeType"]);s!=null&&c(e,["mimeType"],s);const a=u(t,["sourceMetadata"]);return a!=null&&c(e,["sourceMetadata"],UC(i,a)),e}function OC(i,t){const e={},o=u(t,["audioChunks"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>bC(i,a))),c(e,["audioChunks"],s)}return e}function zC(i,t){const e={},o=u(t,["text"]);o!=null&&c(e,["text"],o);const s=u(t,["filteredReason"]);return s!=null&&c(e,["filteredReason"],s),e}function BC(i,t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],DC());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],OC(i,s));const a=u(t,["filteredPrompt"]);return a!=null&&c(e,["filteredPrompt"],zC(i,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GC(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function $C(i,t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["data"]);o!=null&&c(e,["data"],o);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function HC(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],GC(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],$C(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function us(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>HC(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function qC(i,t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(t,["category"]);o!=null&&c(e,["category"],o);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function WC(i,t){const e={},o=u(t,["behavior"]);o!=null&&c(e,["behavior"],o);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const a=u(t,["name"]);a!=null&&c(e,["name"],a);const f=u(t,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],m),e}function jC(i,t){const e={},o=u(t,["startTime"]);o!=null&&c(e,["startTime"],o);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function YC(i,t){const e={},o=u(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],jC(i,o)),e}function JC(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function KC(i,t){const e={},o=u(t,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],JC(i,o)),e}function ZC(){return{}}function QC(i,t){const e={},o=u(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(h=>WC(i,h))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],YC(i,s));const a=u(t,["googleSearchRetrieval"]);if(a!=null&&c(e,["googleSearchRetrieval"],KC(i,a)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],ZC());const m=u(t,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function XC(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function e_(i,t){const e={},o=u(t,["latitude"]);o!=null&&c(e,["latitude"],o);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function t_(i,t){const e={},o=u(t,["latLng"]);return o!=null&&c(e,["latLng"],e_(i,o)),e}function n_(i,t){const e={},o=u(t,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],XC(i,o));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],t_(i,s)),e}function r_(i,t){const e={},o=u(t,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function mm(i,t){const e={},o=u(t,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],r_(i,o)),e}function i_(i,t){const e={},o=u(t,["speaker"]);o!=null&&c(e,["speaker"],o);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],mm(i,s)),e}function o_(i,t){const e={},o=u(t,["speakerVoiceConfigs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>i_(i,a))),c(e,["speakerVoiceConfigs"],s)}return e}function s_(i,t){const e={},o=u(t,["voiceConfig"]);o!=null&&c(e,["voiceConfig"],mm(i,o));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],o_(i,s));const a=u(t,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function l_(i,t){const e={},o=u(t,["includeThoughts"]);o!=null&&c(e,["includeThoughts"],o);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function a_(i,t,e){const o={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],us(i,ht(i,s)));const a=u(t,["temperature"]);a!=null&&c(o,["temperature"],a);const f=u(t,["topP"]);f!=null&&c(o,["topP"],f);const m=u(t,["topK"]);m!=null&&c(o,["topK"],m);const g=u(t,["candidateCount"]);g!=null&&c(o,["candidateCount"],g);const h=u(t,["maxOutputTokens"]);h!=null&&c(o,["maxOutputTokens"],h);const x=u(t,["stopSequences"]);x!=null&&c(o,["stopSequences"],x);const _=u(t,["responseLogprobs"]);_!=null&&c(o,["responseLogprobs"],_);const T=u(t,["logprobs"]);T!=null&&c(o,["logprobs"],T);const S=u(t,["presencePenalty"]);S!=null&&c(o,["presencePenalty"],S);const k=u(t,["frequencyPenalty"]);k!=null&&c(o,["frequencyPenalty"],k);const M=u(t,["seed"]);M!=null&&c(o,["seed"],M);const D=u(t,["responseMimeType"]);D!=null&&c(o,["responseMimeType"],D);const H=u(t,["responseSchema"]);if(H!=null&&c(o,["responseSchema"],is(i,H)),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=u(t,["safetySettings"]);if(e!==void 0&&$!=null){let pe=$;Array.isArray(pe)&&(pe=pe.map(Be=>qC(i,Be))),c(e,["safetySettings"],pe)}const q=u(t,["tools"]);if(e!==void 0&&q!=null){let pe=ls(i,q);Array.isArray(pe)&&(pe=pe.map(Be=>QC(i,ss(i,Be)))),c(e,["tools"],pe)}const J=u(t,["toolConfig"]);if(e!==void 0&&J!=null&&c(e,["toolConfig"],n_(i,J)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=u(t,["cachedContent"]);e!==void 0&&K!=null&&c(e,["cachedContent"],In(i,K));const Q=u(t,["responseModalities"]);Q!=null&&c(o,["responseModalities"],Q);const te=u(t,["mediaResolution"]);te!=null&&c(o,["mediaResolution"],te);const xe=u(t,["speechConfig"]);if(xe!=null&&c(o,["speechConfig"],s_(i,nm(i,xe))),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const se=u(t,["thinkingConfig"]);return se!=null&&c(o,["thinkingConfig"],l_(i,se)),o}function gp(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);if(s!=null){let f=Vt(i,s);Array.isArray(f)&&(f=f.map(m=>us(i,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["generationConfig"],a_(i,a,e)),e}function u_(i,t,e){const o={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&c(e,["requests[]","title"],a);const f=u(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&c(e,["requests[]","outputDimensionality"],f),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function c_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);s!=null&&c(e,["requests[]","content"],tm(i,s));const a=u(t,["config"]);a!=null&&c(e,["config"],u_(i,a,e));const f=u(t,["model"]);return f!==void 0&&c(e,["requests[]","model"],Fe(i,f)),e}function d_(i,t,e){const o={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&c(e,["parameters","aspectRatio"],a);const f=u(t,["guidanceScale"]);if(e!==void 0&&f!=null&&c(e,["parameters","guidanceScale"],f),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const g=u(t,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const h=u(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&c(e,["parameters","includeSafetyAttributes"],h);const x=u(t,["includeRaiReason"]);e!==void 0&&x!=null&&c(e,["parameters","includeRaiReason"],x);const _=u(t,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const T=u(t,["outputMimeType"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","mimeType"],T);const S=u(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function f_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["config"]);return a!=null&&c(e,["config"],d_(i,a,e)),e}function p_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","name"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function m_(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);e!==void 0&&f!=null&&c(e,["_query","filter"],f);const m=u(t,["queryBase"]);return e!==void 0&&m!=null&&c(e,["_url","models_url"],sm(i,m)),o}function h_(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],m_(i,o,e)),e}function g_(i,t,e){const o={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&c(e,["description"],a);const f=u(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&c(e,["defaultCheckpointId"],f),o}function y_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","name"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],g_(i,s,e)),e}function v_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","name"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function x_(i,t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function C_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);if(s!=null){let f=Vt(i,s);Array.isArray(f)&&(f=f.map(m=>us(i,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["config"],x_(i,a)),e}function __(i,t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(t,["imageBytes"]);o!=null&&c(e,["bytesBase64Encoded"],Nn(i,o));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function T_(i,t,e){const o={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=u(t,["durationSeconds"]);if(e!==void 0&&a!=null&&c(e,["parameters","durationSeconds"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(t,["aspectRatio"]);if(e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const m=u(t,["personGeneration"]);if(e!==void 0&&m!=null&&c(e,["parameters","personGeneration"],m),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=u(t,["negativePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","negativePrompt"],g),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function E_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["image"]);a!=null&&c(e,["instances[0]","image"],__(i,a));const f=u(t,["config"]);return f!=null&&c(e,["config"],T_(i,f,e)),e}function S_(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function w_(i,t){const e={},o=u(t,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function I_(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],S_(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],w_(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Pr(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>I_(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function N_(i,t){const e={},o=u(t,["featureSelectionPreference"]);return o!=null&&c(e,["featureSelectionPreference"],o),e}function k_(i,t){const e={},o=u(t,["method"]);o!=null&&c(e,["method"],o);const s=u(t,["category"]);s!=null&&c(e,["category"],s);const a=u(t,["threshold"]);return a!=null&&c(e,["threshold"],a),e}function A_(i,t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(t,["description"]);o!=null&&c(e,["description"],o);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const f=u(t,["response"]);return f!=null&&c(e,["response"],f),e}function R_(i,t){const e={},o=u(t,["startTime"]);o!=null&&c(e,["startTime"],o);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function M_(i,t){const e={},o=u(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],R_(i,o)),e}function P_(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function D_(i,t){const e={},o=u(t,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],P_(i,o)),e}function L_(){return{}}function F_(i,t){const e={},o=u(t,["apiKeyString"]);return o!=null&&c(e,["apiKeyString"],o),e}function V_(i,t){const e={},o=u(t,["apiKeyConfig"]);o!=null&&c(e,["apiKeyConfig"],F_(i,o));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const a=u(t,["googleServiceAccountConfig"]);a!=null&&c(e,["googleServiceAccountConfig"],a);const f=u(t,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(t,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const g=u(t,["oidcConfig"]);return g!=null&&c(e,["oidcConfig"],g),e}function U_(i,t){const e={},o=u(t,["authConfig"]);return o!=null&&c(e,["authConfig"],V_(i,o)),e}function hm(i,t){const e={},o=u(t,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(_=>A_(i,_))),c(e,["functionDeclarations"],x)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const a=u(t,["googleSearch"]);a!=null&&c(e,["googleSearch"],M_(i,a));const f=u(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],D_(i,f)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],L_());const g=u(t,["googleMaps"]);if(g!=null&&c(e,["googleMaps"],U_(i,g)),u(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const h=u(t,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function b_(i,t){const e={},o=u(t,["mode"]);o!=null&&c(e,["mode"],o);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function O_(i,t){const e={},o=u(t,["latitude"]);o!=null&&c(e,["latitude"],o);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function z_(i,t){const e={},o=u(t,["latLng"]);return o!=null&&c(e,["latLng"],O_(i,o)),e}function B_(i,t){const e={},o=u(t,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],b_(i,o));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],z_(i,s)),e}function G_(i,t){const e={},o=u(t,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function $_(i,t){const e={},o=u(t,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],G_(i,o)),e}function H_(i,t){const e={},o=u(t,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],$_(i,o)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function q_(i,t){const e={},o=u(t,["includeThoughts"]);o!=null&&c(e,["includeThoughts"],o);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function W_(i,t,e){const o={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Pr(i,ht(i,s)));const a=u(t,["temperature"]);a!=null&&c(o,["temperature"],a);const f=u(t,["topP"]);f!=null&&c(o,["topP"],f);const m=u(t,["topK"]);m!=null&&c(o,["topK"],m);const g=u(t,["candidateCount"]);g!=null&&c(o,["candidateCount"],g);const h=u(t,["maxOutputTokens"]);h!=null&&c(o,["maxOutputTokens"],h);const x=u(t,["stopSequences"]);x!=null&&c(o,["stopSequences"],x);const _=u(t,["responseLogprobs"]);_!=null&&c(o,["responseLogprobs"],_);const T=u(t,["logprobs"]);T!=null&&c(o,["logprobs"],T);const S=u(t,["presencePenalty"]);S!=null&&c(o,["presencePenalty"],S);const k=u(t,["frequencyPenalty"]);k!=null&&c(o,["frequencyPenalty"],k);const M=u(t,["seed"]);M!=null&&c(o,["seed"],M);const D=u(t,["responseMimeType"]);D!=null&&c(o,["responseMimeType"],D);const H=u(t,["responseSchema"]);H!=null&&c(o,["responseSchema"],is(i,H));const $=u(t,["routingConfig"]);$!=null&&c(o,["routingConfig"],$);const q=u(t,["modelSelectionConfig"]);q!=null&&c(o,["modelConfig"],N_(i,q));const J=u(t,["safetySettings"]);if(e!==void 0&&J!=null){let _e=J;Array.isArray(_e)&&(_e=_e.map(je=>k_(i,je))),c(e,["safetySettings"],_e)}const K=u(t,["tools"]);if(e!==void 0&&K!=null){let _e=ls(i,K);Array.isArray(_e)&&(_e=_e.map(je=>hm(i,ss(i,je)))),c(e,["tools"],_e)}const Q=u(t,["toolConfig"]);e!==void 0&&Q!=null&&c(e,["toolConfig"],B_(i,Q));const te=u(t,["labels"]);e!==void 0&&te!=null&&c(e,["labels"],te);const xe=u(t,["cachedContent"]);e!==void 0&&xe!=null&&c(e,["cachedContent"],In(i,xe));const se=u(t,["responseModalities"]);se!=null&&c(o,["responseModalities"],se);const pe=u(t,["mediaResolution"]);pe!=null&&c(o,["mediaResolution"],pe);const Be=u(t,["speechConfig"]);Be!=null&&c(o,["speechConfig"],H_(i,nm(i,Be)));const ye=u(t,["audioTimestamp"]);ye!=null&&c(o,["audioTimestamp"],ye);const Ne=u(t,["thinkingConfig"]);return Ne!=null&&c(o,["thinkingConfig"],q_(i,Ne)),o}function yp(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);if(s!=null){let f=Vt(i,s);Array.isArray(f)&&(f=f.map(m=>Pr(i,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["generationConfig"],W_(i,a,e)),e}function j_(i,t,e){const o={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&c(e,["instances[]","title"],a);const f=u(t,["outputDimensionality"]);e!==void 0&&f!=null&&c(e,["parameters","outputDimensionality"],f);const m=u(t,["mimeType"]);e!==void 0&&m!=null&&c(e,["instances[]","mimeType"],m);const g=u(t,["autoTruncate"]);return e!==void 0&&g!=null&&c(e,["parameters","autoTruncate"],g),o}function Y_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);s!=null&&c(e,["instances[]","content"],tm(i,s));const a=u(t,["config"]);return a!=null&&c(e,["config"],j_(i,a,e)),e}function J_(i,t,e){const o={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&c(e,["parameters","negativePrompt"],a);const f=u(t,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&c(e,["parameters","aspectRatio"],m);const g=u(t,["guidanceScale"]);e!==void 0&&g!=null&&c(e,["parameters","guidanceScale"],g);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const x=u(t,["safetyFilterLevel"]);e!==void 0&&x!=null&&c(e,["parameters","safetySetting"],x);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const T=u(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const k=u(t,["language"]);e!==void 0&&k!=null&&c(e,["parameters","language"],k);const M=u(t,["outputMimeType"]);e!==void 0&&M!=null&&c(e,["parameters","outputOptions","mimeType"],M);const D=u(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&c(e,["parameters","outputOptions","compressionQuality"],D);const H=u(t,["addWatermark"]);e!==void 0&&H!=null&&c(e,["parameters","addWatermark"],H);const $=u(t,["enhancePrompt"]);return e!==void 0&&$!=null&&c(e,["parameters","enhancePrompt"],$),o}function K_(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["config"]);return a!=null&&c(e,["config"],J_(i,a,e)),e}function za(i,t){const e={},o=u(t,["gcsUri"]);o!=null&&c(e,["gcsUri"],o);const s=u(t,["imageBytes"]);s!=null&&c(e,["bytesBase64Encoded"],Nn(i,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function Z_(i,t){const e={},o=u(t,["maskMode"]);o!=null&&c(e,["maskMode"],o);const s=u(t,["segmentationClasses"]);s!=null&&c(e,["maskClasses"],s);const a=u(t,["maskDilation"]);return a!=null&&c(e,["dilation"],a),e}function Q_(i,t){const e={},o=u(t,["controlType"]);o!=null&&c(e,["controlType"],o);const s=u(t,["enableControlImageComputation"]);return s!=null&&c(e,["computeControl"],s),e}function X_(i,t){const e={},o=u(t,["styleDescription"]);return o!=null&&c(e,["styleDescription"],o),e}function eT(i,t){const e={},o=u(t,["subjectType"]);o!=null&&c(e,["subjectType"],o);const s=u(t,["subjectDescription"]);return s!=null&&c(e,["subjectDescription"],s),e}function tT(i,t){const e={},o=u(t,["referenceImage"]);o!=null&&c(e,["referenceImage"],za(i,o));const s=u(t,["referenceId"]);s!=null&&c(e,["referenceId"],s);const a=u(t,["referenceType"]);a!=null&&c(e,["referenceType"],a);const f=u(t,["maskImageConfig"]);f!=null&&c(e,["maskImageConfig"],Z_(i,f));const m=u(t,["controlImageConfig"]);m!=null&&c(e,["controlImageConfig"],Q_(i,m));const g=u(t,["styleImageConfig"]);g!=null&&c(e,["styleImageConfig"],X_(i,g));const h=u(t,["subjectImageConfig"]);return h!=null&&c(e,["subjectImageConfig"],eT(i,h)),e}function nT(i,t,e){const o={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&c(e,["parameters","negativePrompt"],a);const f=u(t,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&c(e,["parameters","aspectRatio"],m);const g=u(t,["guidanceScale"]);e!==void 0&&g!=null&&c(e,["parameters","guidanceScale"],g);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const x=u(t,["safetyFilterLevel"]);e!==void 0&&x!=null&&c(e,["parameters","safetySetting"],x);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const T=u(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const k=u(t,["language"]);e!==void 0&&k!=null&&c(e,["parameters","language"],k);const M=u(t,["outputMimeType"]);e!==void 0&&M!=null&&c(e,["parameters","outputOptions","mimeType"],M);const D=u(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&c(e,["parameters","outputOptions","compressionQuality"],D);const H=u(t,["editMode"]);e!==void 0&&H!=null&&c(e,["parameters","editMode"],H);const $=u(t,["baseSteps"]);return e!==void 0&&$!=null&&c(e,["parameters","editConfig","baseSteps"],$),o}function rT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["referenceImages"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>tT(i,g))),c(e,["instances[0]","referenceImages"],m)}const f=u(t,["config"]);return f!=null&&c(e,["config"],nT(i,f,e)),e}function iT(i,t,e){const o={},s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&c(e,["parameters","outputOptions","mimeType"],a);const f=u(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","compressionQuality"],f);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);const g=u(t,["mode"]);return e!==void 0&&g!=null&&c(e,["parameters","mode"],g),o}function oT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["image"]);s!=null&&c(e,["instances[0]","image"],za(i,s));const a=u(t,["upscaleFactor"]);a!=null&&c(e,["parameters","upscaleConfig","upscaleFactor"],a);const f=u(t,["config"]);return f!=null&&c(e,["config"],iT(i,f,e)),e}function sT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","name"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function lT(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);e!==void 0&&f!=null&&c(e,["_query","filter"],f);const m=u(t,["queryBase"]);return e!==void 0&&m!=null&&c(e,["_url","models_url"],sm(i,m)),o}function aT(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],lT(i,o,e)),e}function uT(i,t,e){const o={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&c(e,["description"],a);const f=u(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&c(e,["defaultCheckpointId"],f),o}function cT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],uT(i,s,e)),e}function dT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","name"],Fe(i,o));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function fT(i,t,e){const o={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Pr(i,ht(i,s)));const a=u(t,["tools"]);if(e!==void 0&&a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>hm(i,g))),c(e,["tools"],m)}const f=u(t,["generationConfig"]);return e!==void 0&&f!=null&&c(e,["generationConfig"],f),o}function pT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);if(s!=null){let f=Vt(i,s);Array.isArray(f)&&(f=f.map(m=>Pr(i,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["config"],fT(i,a,e)),e}function mT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["contents"]);if(s!=null){let f=Vt(i,s);Array.isArray(f)&&(f=f.map(m=>Pr(i,m))),c(e,["contents"],f)}const a=u(t,["config"]);return a!=null&&c(e,["config"],a),e}function hT(i,t,e){const o={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&c(e,["parameters","storageUri"],a);const f=u(t,["fps"]);e!==void 0&&f!=null&&c(e,["parameters","fps"],f);const m=u(t,["durationSeconds"]);e!==void 0&&m!=null&&c(e,["parameters","durationSeconds"],m);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const h=u(t,["aspectRatio"]);e!==void 0&&h!=null&&c(e,["parameters","aspectRatio"],h);const x=u(t,["resolution"]);e!==void 0&&x!=null&&c(e,["parameters","resolution"],x);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const T=u(t,["pubsubTopic"]);e!==void 0&&T!=null&&c(e,["parameters","pubsubTopic"],T);const S=u(t,["negativePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","negativePrompt"],S);const k=u(t,["enhancePrompt"]);return e!==void 0&&k!=null&&c(e,["parameters","enhancePrompt"],k),o}function gT(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["_url","model"],Fe(i,o));const s=u(t,["prompt"]);s!=null&&c(e,["instances[0]","prompt"],s);const a=u(t,["image"]);a!=null&&c(e,["instances[0]","image"],za(i,a));const f=u(t,["config"]);return f!=null&&c(e,["config"],hT(i,f,e)),e}function yT(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function vT(i,t){const e={},o=u(t,["data"]);o!=null&&c(e,["data"],o);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function xT(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],yT(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],vT(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function CT(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>xT(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function _T(i,t){const e={},o=u(t,["citationSources"]);return o!=null&&c(e,["citations"],o),e}function TT(i,t){const e={},o=u(t,["retrievedUrl"]);o!=null&&c(e,["retrievedUrl"],o);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function ET(i,t){const e={},o=u(t,["urlMetadata"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>TT(i,a))),c(e,["urlMetadata"],s)}return e}function ST(i,t){const e={},o=u(t,["content"]);o!=null&&c(e,["content"],CT(i,o));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],_T(i,s));const a=u(t,["tokenCount"]);a!=null&&c(e,["tokenCount"],a);const f=u(t,["finishReason"]);f!=null&&c(e,["finishReason"],f);const m=u(t,["urlContextMetadata"]);m!=null&&c(e,["urlContextMetadata"],ET(i,m));const g=u(t,["avgLogprobs"]);g!=null&&c(e,["avgLogprobs"],g);const h=u(t,["groundingMetadata"]);h!=null&&c(e,["groundingMetadata"],h);const x=u(t,["index"]);x!=null&&c(e,["index"],x);const _=u(t,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const T=u(t,["safetyRatings"]);return T!=null&&c(e,["safetyRatings"],T),e}function vp(i,t){const e={},o=u(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>ST(i,g))),c(e,["candidates"],m)}const s=u(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const a=u(t,["promptFeedback"]);a!=null&&c(e,["promptFeedback"],a);const f=u(t,["usageMetadata"]);return f!=null&&c(e,["usageMetadata"],f),e}function wT(i,t){const e={},o=u(t,["values"]);return o!=null&&c(e,["values"],o),e}function IT(){return{}}function NT(i,t){const e={},o=u(t,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>wT(i,f))),c(e,["embeddings"],a)}return u(t,["metadata"])!=null&&c(e,["metadata"],IT()),e}function kT(i,t){const e={},o=u(t,["bytesBase64Encoded"]);o!=null&&c(e,["imageBytes"],Nn(i,o));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function gm(i,t){const e={},o=u(t,["safetyAttributes","categories"]);o!=null&&c(e,["categories"],o);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&c(e,["contentType"],a),e}function AT(i,t){const e={},o=u(t,["_self"]);o!=null&&c(e,["image"],kT(i,o));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const a=u(t,["_self"]);return a!=null&&c(e,["safetyAttributes"],gm(i,a)),e}function RT(i,t){const e={},o=u(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>AT(i,f))),c(e,["generatedImages"],a)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],gm(i,s)),e}function MT(i,t){const e={},o=u(t,["baseModel"]);o!=null&&c(e,["baseModel"],o);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&c(e,["updateTime"],a),e}function Ia(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);a!=null&&c(e,["description"],a);const f=u(t,["version"]);f!=null&&c(e,["version"],f);const m=u(t,["_self"]);m!=null&&c(e,["tunedModelInfo"],MT(i,m));const g=u(t,["inputTokenLimit"]);g!=null&&c(e,["inputTokenLimit"],g);const h=u(t,["outputTokenLimit"]);h!=null&&c(e,["outputTokenLimit"],h);const x=u(t,["supportedGenerationMethods"]);return x!=null&&c(e,["supportedActions"],x),e}function PT(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["_self"]);if(s!=null){let a=lm(i,s);Array.isArray(a)&&(a=a.map(f=>Ia(i,f))),c(e,["models"],a)}return e}function DT(){return{}}function LT(i,t){const e={},o=u(t,["totalTokens"]);o!=null&&c(e,["totalTokens"],o);const s=u(t,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function FT(i,t){const e={},o=u(t,["video","uri"]);o!=null&&c(e,["uri"],o);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Nn(i,s));const a=u(t,["encoding"]);return a!=null&&c(e,["mimeType"],a),e}function VT(i,t){const e={},o=u(t,["_self"]);return o!=null&&c(e,["video"],FT(i,o)),e}function UT(i,t){const e={},o=u(t,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>VT(i,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function bT(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response","generateVideoResponse"]);return m!=null&&c(e,["response"],UT(i,m)),e}function OT(i,t){const e={},o=u(t,["fps"]);o!=null&&c(e,["fps"],o);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const a=u(t,["startOffset"]);return a!=null&&c(e,["startOffset"],a),e}function zT(i,t){const e={},o=u(t,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function BT(i,t){const e={},o=u(t,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],OT(i,o));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const a=u(t,["inlineData"]);a!=null&&c(e,["inlineData"],zT(i,a));const f=u(t,["codeExecutionResult"]);f!=null&&c(e,["codeExecutionResult"],f);const m=u(t,["executableCode"]);m!=null&&c(e,["executableCode"],m);const g=u(t,["fileData"]);g!=null&&c(e,["fileData"],g);const h=u(t,["functionCall"]);h!=null&&c(e,["functionCall"],h);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function GT(i,t){const e={},o=u(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>BT(i,f))),c(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function $T(i,t){const e={},o=u(t,["citations"]);return o!=null&&c(e,["citations"],o),e}function HT(i,t){const e={},o=u(t,["content"]);o!=null&&c(e,["content"],GT(i,o));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],$T(i,s));const a=u(t,["finishMessage"]);a!=null&&c(e,["finishMessage"],a);const f=u(t,["finishReason"]);f!=null&&c(e,["finishReason"],f);const m=u(t,["avgLogprobs"]);m!=null&&c(e,["avgLogprobs"],m);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const h=u(t,["index"]);h!=null&&c(e,["index"],h);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function xp(i,t){const e={},o=u(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(x=>HT(i,x))),c(e,["candidates"],h)}const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(t,["responseId"]);a!=null&&c(e,["responseId"],a);const f=u(t,["modelVersion"]);f!=null&&c(e,["modelVersion"],f);const m=u(t,["promptFeedback"]);m!=null&&c(e,["promptFeedback"],m);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function qT(i,t){const e={},o=u(t,["truncated"]);o!=null&&c(e,["truncated"],o);const s=u(t,["token_count"]);return s!=null&&c(e,["tokenCount"],s),e}function WT(i,t){const e={},o=u(t,["values"]);o!=null&&c(e,["values"],o);const s=u(t,["statistics"]);return s!=null&&c(e,["statistics"],qT(i,s)),e}function jT(i,t){const e={},o=u(t,["billableCharacterCount"]);return o!=null&&c(e,["billableCharacterCount"],o),e}function YT(i,t){const e={},o=u(t,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>WT(i,f))),c(e,["embeddings"],a)}const s=u(t,["metadata"]);return s!=null&&c(e,["metadata"],jT(i,s)),e}function JT(i,t){const e={},o=u(t,["gcsUri"]);o!=null&&c(e,["gcsUri"],o);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["imageBytes"],Nn(i,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function ym(i,t){const e={},o=u(t,["safetyAttributes","categories"]);o!=null&&c(e,["categories"],o);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&c(e,["contentType"],a),e}function Ba(i,t){const e={},o=u(t,["_self"]);o!=null&&c(e,["image"],JT(i,o));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const a=u(t,["_self"]);a!=null&&c(e,["safetyAttributes"],ym(i,a));const f=u(t,["prompt"]);return f!=null&&c(e,["enhancedPrompt"],f),e}function KT(i,t){const e={},o=u(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>Ba(i,f))),c(e,["generatedImages"],a)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],ym(i,s)),e}function ZT(i,t){const e={},o=u(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Ba(i,a))),c(e,["generatedImages"],s)}return e}function QT(i,t){const e={},o=u(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Ba(i,a))),c(e,["generatedImages"],s)}return e}function XT(i,t){const e={},o=u(t,["endpoint"]);o!=null&&c(e,["name"],o);const s=u(t,["deployedModelId"]);return s!=null&&c(e,["deployedModelId"],s),e}function eE(i,t){const e={},o=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&c(e,["baseModel"],o);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&c(e,["updateTime"],a),e}function tE(i,t){const e={},o=u(t,["checkpointId"]);o!=null&&c(e,["checkpointId"],o);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const a=u(t,["step"]);return a!=null&&c(e,["step"],a),e}function Na(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const a=u(t,["description"]);a!=null&&c(e,["description"],a);const f=u(t,["versionId"]);f!=null&&c(e,["version"],f);const m=u(t,["deployedModels"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>XT(i,S))),c(e,["endpoints"],T)}const g=u(t,["labels"]);g!=null&&c(e,["labels"],g);const h=u(t,["_self"]);h!=null&&c(e,["tunedModelInfo"],eE(i,h));const x=u(t,["defaultCheckpointId"]);x!=null&&c(e,["defaultCheckpointId"],x);const _=u(t,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>tE(i,S))),c(e,["checkpoints"],T)}return e}function nE(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["_self"]);if(s!=null){let a=lm(i,s);Array.isArray(a)&&(a=a.map(f=>Na(i,f))),c(e,["models"],a)}return e}function rE(){return{}}function iE(i,t){const e={},o=u(t,["totalTokens"]);return o!=null&&c(e,["totalTokens"],o),e}function oE(i,t){const e={},o=u(t,["tokensInfo"]);return o!=null&&c(e,["tokensInfo"],o),e}function sE(i,t){const e={},o=u(t,["gcsUri"]);o!=null&&c(e,["uri"],o);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Nn(i,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function lE(i,t){const e={},o=u(t,["_self"]);return o!=null&&c(e,["video"],sE(i,o)),e}function aE(i,t){const e={},o=u(t,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>lE(i,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function uE(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],aE(i,m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cE="Content-Type",dE="X-Server-Timeout",fE="User-Agent",ka="x-goog-api-client",pE="0.15.0",mE=`google-genai-sdk/${pE}`,hE="v1beta1",gE="v1beta",Cp=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class vm extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class Aa extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class yE{constructor(t){var e,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:hE,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:gE,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,o){const s=[this.getRequestUrlInternal(e)];return o&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,o);if(t.queryParams)for(const[f,m]of Object.entries(t.queryParams))s.searchParams.append(f,String(m));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,t.abortSignal),this.unaryApiCall(s,a,t.httpMethod)}patchHttpOptions(t,e){const o=JSON.parse(JSON.stringify(t));for(const[s,a]of Object.entries(e))typeof a=="object"?o[s]=Object.assign(Object.assign({},o[s]),a):a!==void 0&&(o[s]=a);return o}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,t.abortSignal),this.streamApiCall(s,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,o){if(e&&e.timeout||o){const s=new AbortController,a=s.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>s.abort(),e.timeout),o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=a}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:o})).then(async s=>(await _p(s),new Ta(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:o})).then(async s=>(await _p(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){var e;return Si(this,arguments,function*(){const s=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let f="";for(;;){const{done:m,value:g}=yield ze(s.read());if(m){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(g);try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),S=T.status,k=T.code,M=`got status: ${S}. ${JSON.stringify(_)}`;if(k>=400&&k<500)throw new vm(M);if(k>=500&&k<600)throw new Aa(M)}}catch(_){const T=_;if(T.name==="ClientError"||T.name==="ServerError")throw _}f+=h;let x=f.match(Cp);for(;x;){const _=x[1];try{const T=new Response(_,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ze(new Ta(T)),f=f.slice(x[0].length),x=f.match(Cp)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},e=mE+" "+this.clientOptions.userAgentExtra;return t[fE]=e,t[ka]=e,t[cE]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))e.append(o,s);t.timeout&&t.timeout>0&&e.append(dE,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var o;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,f=await a.stat(t);s.sizeBytes=String(f.size);const m=(o=e==null?void 0:e.mimeType)!==null&&o!==void 0?o:f.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=m;const g=await this.fetchUploadUrl(s,e);return a.upload(t,g,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var o;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const a={file:t},f=await this.request({path:ce("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(o=f==null?void 0:f.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function _p(i){var t;if(i===void 0)throw new Aa("response is undefined");if(!i.ok){const e=i.status,o=i.statusText;let s;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=`got status: ${e} ${o}. ${JSON.stringify(s)}`;throw e>=400&&e<500?new vm(a):e>=500&&e<600?new Aa(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vE="mcp_used/unknown";function Ra(i){for(const t of i)if(Ga(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function Ma(i){var t;i[ka]=(((t=i[ka])!==null&&t!==void 0?t:"")+` ${vE}`).trimStart()}function xE(i){var t,e,o;return(o=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>Ga(s)))!==null&&o!==void 0?o:!1}function CE(i){var t,e,o;return(o=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>!Ga(s)))!==null&&o!==void 0?o:!1}function Ga(i){return i!==null&&typeof i=="object"&&"tool"in i&&"callTool"in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _E(i,t,e){const o=new Py,s=JSON.parse(e.data),a=BC(i,s);Object.assign(o,a),t(o)}class TE{constructor(t,e,o){this.apiClient=t,this.auth=e,this.webSocketFactory=o}async connect(t){var e,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),f=wE(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${m}`;let h=()=>{};const x=new Promise(q=>{h=q}),_=t.callbacks,T=function(){h({})},S=this.apiClient,k={onopen:T,onmessage:q=>{_E(S,_.onmessage,q)},onerror:(e=_==null?void 0:_.onerror)!==null&&e!==void 0?e:function(q){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(q){}},M=this.webSocketFactory.create(g,SE(f),k);M.connect(),await x;const D=Fe(this.apiClient,t.model),H=fm(this.apiClient,{model:D}),$=wa(this.apiClient,{setup:H});return M.send(JSON.stringify($)),new EE(M,this.apiClient)}}class EE{constructor(t,e){this.conn=t,this.apiClient=e}async setClientContent(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=rC(this.apiClient,t),o=pm(this.apiClient,e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=iC(this.apiClient,t),o=wa(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const e=wa(this.apiClient,{playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Cr.PLAY)}pause(){this.sendPlaybackControl(Cr.PAUSE)}stop(){this.sendPlaybackControl(Cr.STOP)}resetContext(){this.sendPlaybackControl(Cr.RESET_CONTEXT)}close(){this.conn.close()}}function SE(i){const t={};return i.forEach((e,o)=>{t[o]=e}),t}function wE(i){const t=new Headers;for(const[e,o]of Object.entries(i))t.append(e,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function NE(i,t,e){const o=new My;let s;if(e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),i.isVertexAI()){const a=PC(i,s);Object.assign(o,a)}else{const a=MC(i,s);Object.assign(o,a)}t(o)}class kE{constructor(t,e,o){this.apiClient=t,this.auth=e,this.webSocketFactory=o,this.music=new TE(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,o,s,a,f,m;const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let x;const _=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&Ra(t.config.tools)&&Ma(_);const T=PE(_);if(this.apiClient.isVertexAI())x=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const se=this.apiClient.getApiKey();x=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.BidiGenerateContent?key=${se}`}let S=()=>{};const k=new Promise(se=>{S=se}),M=t.callbacks,D=function(){var se;(se=M==null?void 0:M.onopen)===null||se===void 0||se.call(M),S({})},H=this.apiClient,$={onopen:D,onmessage:se=>{NE(H,M.onmessage,se)},onerror:(e=M==null?void 0:M.onerror)!==null&&e!==void 0?e:function(se){},onclose:(o=M==null?void 0:M.onclose)!==null&&o!==void 0?o:function(se){}},q=this.webSocketFactory.create(x,ME(T),$);q.connect(),await k;let J=Fe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const se=this.apiClient.getProject(),pe=this.apiClient.getLocation();J=`projects/${se}/locations/${pe}/`+J}let K={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ns.AUDIO]}:t.config.responseModalities=[ns.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(m=(f=t.config)===null||f===void 0?void 0:f.tools)!==null&&m!==void 0?m:[],te=[];for(const se of Q)if(this.isCallableTool(se)){const pe=se;te.push(await pe.tool())}else te.push(se);te.length>0&&(t.config.tools=te);const xe={model:J,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?K=Kx(this.apiClient,xe):K=Jx(this.apiClient,xe),delete K.config,q.send(JSON.stringify(K)),new RE(q,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const AE={turnComplete:!0};class RE{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let o=[];try{o=Vt(t,e.turns),t.isVertexAI()?o=o.map(s=>Pr(t,s)):o=o.map(s=>us(t,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:o,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let o=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?o=e.functionResponses:o=[e.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(IE)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},AE),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:nC(this.apiClient,t)}:e={realtimeInput:tC(this.apiClient,t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function ME(i){const t={};return i.forEach((e,o)=>{t[o]=e}),t}function PE(i){const t=new Headers;for(const[e,o]of Object.entries(i))t.append(e,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tp=10;function Ep(i){var t,e,o;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const f of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(Wo(f)){s=!0;break}if(!s)return!0;const a=(o=i==null?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Wo(i){return"callTool"in i&&typeof i.callTool=="function"}function Sp(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DE extends Ii{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var o,s,a,f,m;if(e.config&&e.config.tools&&Ra(e.config.tools)&&(e.config.httpOptions||(e.config.httpOptions={}),e.config.httpOptions.headers||(e.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),Ma(e.config.httpOptions.headers)),!xE(e)||Ep(e.config))return await this.generateContentInternal(e);if(CE(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");const g=await this.transformCallableTools(e);let h,x;const _=Vt(this.apiClient,g.contents),T=(a=(s=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Tp;let S=0;for(;S<T&&(h=await this.generateContentInternal(g),!(!h.functionCalls||h.functionCalls.length===0));){const k=h.candidates[0].content,M=[];for(const D of(m=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&m!==void 0?m:[])if(Wo(D)){const $=await D.callTool(h.functionCalls);M.push(...$)}S++,x={role:"user",parts:M},g.contents=Vt(this.apiClient,g.contents),g.contents.push(k),g.contents.push(x),Sp(g.config)&&(_.push(k),_.push(x))}return Sp(g.config)&&(h.automaticFunctionCallingHistory=_),h},this.generateContentStream=async e=>{if(e.config&&e.config.tools&&Ra(e.config.tools)&&(e.config.httpOptions||(e.config.httpOptions={}),e.config.httpOptions.headers||(e.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),Ma(e.config.httpOptions.headers)),Ep(e.config)){const o=await this.transformCallableTools(e);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(o=>{var s;let a;const f=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:f.push(g);let m;return a?m={generatedImages:f,positivePromptSafetyAttributes:a}:m={generatedImages:f},m}),this.list=async e=>{var o;const f={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((o=f.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new as(kr.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(f),f)},this.editImage=async e=>{const o={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(o.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async e=>{let o={numberOfImages:1,mode:"upscale"};e.config&&(o=Object.assign(Object.assign({},o),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:o};return await this.upscaleImageInternal(s)}}async transformCallableTools(t){var e;const o=(e=t.config)===null||e===void 0?void 0:e.tools;if(!o)return t;const s=await Promise.all(o.map(async f=>Wo(f)?await f.tool():f)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};return a.config.tools=s,a}async initAfcToolsMap(t){var e,o,s;const a=new Map;for(const f of(o=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&o!==void 0?o:[])if(Wo(f)){const m=f,g=await m.tool();for(const h of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,m)}}return a}async processAfcStream(t){var e,o,s;const a=(s=(o=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Tp;let f=!1,m=0;const g=await this.initAfcToolsMap(t);return function(h,x,_){var T,S;return Si(this,arguments,function*(){for(var k,M,D,H;m<a;){f&&(m++,f=!1);const K=yield ze(h.transformCallableTools(_)),Q=yield ze(h.generateContentStreamInternal(K)),te=[],xe=[];try{for(var $=!0,q=(M=void 0,qo(Q)),J;J=yield ze(q.next()),k=J.done,!k;$=!0){H=J.value,$=!1;const se=H;if(yield yield ze(se),se.candidates&&(!((T=se.candidates[0])===null||T===void 0)&&T.content)){xe.push(se.candidates[0].content);for(const pe of(S=se.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(m<a&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(pe.functionCall.name)){const Be=yield ze(x.get(pe.functionCall.name).callTool([pe.functionCall]));te.push(...Be)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(se){M={error:se}}finally{try{!$&&!k&&(D=q.return)&&(yield ze(D.call(q)))}finally{if(M)throw M.error}}if(te.length>0){f=!0;const se=new xi;se.candidates=[{content:{role:"user",parts:te}}],yield yield ze(se);const pe=[];pe.push(...xe),pe.push({role:"user",parts:te});const Be=Vt(h.apiClient,_.contents).concat(pe);_.contents=Be}else break}})}(this,g,t)}async generateContentInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=yp(this.apiClient,t);return m=ce("{model}:generateContent",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=xp(this.apiClient,x),T=new xi;return Object.assign(T,_),T})}else{const h=gp(this.apiClient,t);return m=ce("{model}:generateContent",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=vp(this.apiClient,x),T=new xi;return Object.assign(T,_),T})}}async generateContentStreamInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=yp(this.apiClient,t);m=ce("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h.config,delete h._url,delete h._query;const x=this.apiClient;return f=x.requestStream({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),f.then(function(_){return Si(this,arguments,function*(){var T,S,k,M;try{for(var D=!0,H=qo(_),$;$=yield ze(H.next()),T=$.done,!T;D=!0){M=$.value,D=!1;const J=xp(x,yield ze(M.json())),K=new xi;Object.assign(K,J),yield yield ze(K)}}catch(q){S={error:q}}finally{try{!D&&!T&&(k=H.return)&&(yield ze(k.call(H)))}finally{if(S)throw S.error}}})})}else{const h=gp(this.apiClient,t);m=ce("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h.config,delete h._url,delete h._query;const x=this.apiClient;return f=x.requestStream({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),f.then(function(_){return Si(this,arguments,function*(){var T,S,k,M;try{for(var D=!0,H=qo(_),$;$=yield ze(H.next()),T=$.done,!T;D=!0){M=$.value,D=!1;const J=vp(x,yield ze(M.json())),K=new xi;Object.assign(K,J),yield yield ze(K)}}catch(q){S={error:q}}finally{try{!D&&!T&&(k=H.return)&&(yield ze(k.call(H)))}finally{if(S)throw S.error}}})})}}async embedContent(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=Y_(this.apiClient,t);return m=ce("{model}:predict",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=YT(this.apiClient,x),T=new Kf;return Object.assign(T,_),T})}else{const h=c_(this.apiClient,t);return m=ce("{model}:batchEmbedContents",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=NT(this.apiClient,x),T=new Kf;return Object.assign(T,_),T})}}async generateImagesInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=K_(this.apiClient,t);return m=ce("{model}:predict",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=KT(this.apiClient,x),T=new Zf;return Object.assign(T,_),T})}else{const h=f_(this.apiClient,t);return m=ce("{model}:predict",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=RT(this.apiClient,x),T=new Zf;return Object.assign(T,_),T})}}async editImageInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=rT(this.apiClient,t);return a=ce("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=ZT(this.apiClient,g),x=new wy;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=oT(this.apiClient,t);return a=ce("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=QT(this.apiClient,g),x=new Iy;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=sT(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>Na(this.apiClient,x))}else{const h=p_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>Ia(this.apiClient,x))}}async listInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=aT(this.apiClient,t);return m=ce("{models_url}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=nE(this.apiClient,x),T=new Qf;return Object.assign(T,_),T})}else{const h=h_(this.apiClient,t);return m=ce("{models_url}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=PT(this.apiClient,x),T=new Qf;return Object.assign(T,_),T})}}async update(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=cT(this.apiClient,t);return m=ce("{model}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>Na(this.apiClient,x))}else{const h=y_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>Ia(this.apiClient,x))}}async delete(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=dT(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(()=>{const x=rE(),_=new Xf;return Object.assign(_,x),_})}else{const h=v_(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(()=>{const x=DT(),_=new Xf;return Object.assign(_,x),_})}}async countTokens(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=pT(this.apiClient,t);return m=ce("{model}:countTokens",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=iE(this.apiClient,x),T=new ep;return Object.assign(T,_),T})}else{const h=C_(this.apiClient,t);return m=ce("{model}:countTokens",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=LT(this.apiClient,x),T=new ep;return Object.assign(T,_),T})}}async computeTokens(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=mT(this.apiClient,t);return a=ce("{model}:computeTokens",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=oE(this.apiClient,g),x=new Ny;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=gT(this.apiClient,t);return m=ce("{model}:predictLongRunning",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>uE(this.apiClient,x))}else{const h=E_(this.apiClient,t);return m=ce("{model}:predictLongRunning",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>bT(this.apiClient,x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LE(i,t){const e={},o=u(t,["operationName"]);o!=null&&c(e,["_url","operationName"],o);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function FE(i,t){const e={},o=u(t,["operationName"]);o!=null&&c(e,["_url","operationName"],o);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function VE(i,t){const e={},o=u(t,["operationName"]);o!=null&&c(e,["operationName"],o);const s=u(t,["resourceName"]);s!=null&&c(e,["_url","resourceName"],s);const a=u(t,["config"]);return a!=null&&c(e,["config"],a),e}function UE(i,t){const e={},o=u(t,["video","uri"]);o!=null&&c(e,["uri"],o);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Nn(i,s));const a=u(t,["encoding"]);return a!=null&&c(e,["mimeType"],a),e}function bE(i,t){const e={},o=u(t,["_self"]);return o!=null&&c(e,["video"],UE(i,o)),e}function OE(i,t){const e={},o=u(t,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>bE(i,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function zE(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response","generateVideoResponse"]);return m!=null&&c(e,["response"],OE(i,m)),e}function BE(i,t){const e={},o=u(t,["gcsUri"]);o!=null&&c(e,["uri"],o);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Nn(i,s));const a=u(t,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function GE(i,t){const e={},o=u(t,["_self"]);return o!=null&&c(e,["video"],BE(i,o)),e}function $E(i,t){const e={},o=u(t,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>GE(i,m))),c(e,["generatedVideos"],f)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&c(e,["raiMediaFilteredReasons"],a),e}function wp(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);f!=null&&c(e,["error"],f);const m=u(t,["response"]);return m!=null&&c(e,["response"],$E(i,m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HE extends Ii{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,o=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let a;return o&&"httpOptions"in o&&(a=o.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:e.name,config:o})}async getVideosOperationInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=FE(this.apiClient,t);return m=ce("{operationName}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>wp(this.apiClient,x))}else{const h=LE(this.apiClient,t);return m=ce("{operationName}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>zE(this.apiClient,x))}}async fetchPredictVideosOperationInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=VE(this.apiClient,t);return a=ce("{resourceName}:fetchPredictOperation",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>wp(this.apiClient,g))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qE(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],o);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function WE(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);return e!==void 0&&f!=null&&c(e,["_query","filter"],f),o}function jE(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],WE(i,o,e)),e}function YE(i,t){const e={},o=u(t,["textInput"]);o!=null&&c(e,["textInput"],o);const s=u(t,["output"]);return s!=null&&c(e,["output"],s),e}function JE(i,t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>YE(i,a))),c(e,["examples","examples"],s)}return e}function KE(i,t,e){const o={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=u(t,["epochCount"]);e!==void 0&&a!=null&&c(e,["tuningTask","hyperparameters","epochCount"],a);const f=u(t,["learningRateMultiplier"]);if(f!=null&&c(o,["tuningTask","hyperparameters","learningRateMultiplier"],f),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=u(t,["batchSize"]);e!==void 0&&m!=null&&c(e,["tuningTask","hyperparameters","batchSize"],m);const g=u(t,["learningRate"]);return e!==void 0&&g!=null&&c(e,["tuningTask","hyperparameters","learningRate"],g),o}function ZE(i,t){const e={},o=u(t,["baseModel"]);o!=null&&c(e,["baseModel"],o);const s=u(t,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],JE(i,s));const a=u(t,["config"]);return a!=null&&c(e,["config"],KE(i,a,e)),e}function QE(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["_url","name"],o);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function XE(i,t,e){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const f=u(t,["filter"]);return e!==void 0&&f!=null&&c(e,["_query","filter"],f),o}function eS(i,t){const e={},o=u(t,["config"]);return o!=null&&c(e,["config"],XE(i,o,e)),e}function tS(i,t,e){const o={},s=u(t,["gcsUri"]);if(e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function nS(i,t){const e={},o=u(t,["gcsUri"]);return o!=null&&c(e,["validationDatasetUri"],o),e}function rS(i,t,e){const o={},s=u(t,["validationDataset"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec"],nS(i,s));const a=u(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&c(e,["tunedModelDisplayName"],a);const f=u(t,["description"]);e!==void 0&&f!=null&&c(e,["description"],f);const m=u(t,["epochCount"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const g=u(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g);const h=u(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const x=u(t,["adapterSize"]);if(e!==void 0&&x!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return o}function iS(i,t){const e={},o=u(t,["baseModel"]);o!=null&&c(e,["baseModel"],o);const s=u(t,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],tS(i,s,e));const a=u(t,["config"]);return a!=null&&c(e,["config"],rS(i,a,e)),e}function oS(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["model"],o);const s=u(t,["name"]);return s!=null&&c(e,["endpoint"],s),e}function xm(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["state"]);s!=null&&c(e,["state"],im(i,s));const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const f=u(t,["tuningTask","startTime"]);f!=null&&c(e,["startTime"],f);const m=u(t,["tuningTask","completeTime"]);m!=null&&c(e,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const h=u(t,["description"]);h!=null&&c(e,["description"],h);const x=u(t,["baseModel"]);x!=null&&c(e,["baseModel"],x);const _=u(t,["_self"]);_!=null&&c(e,["tunedModel"],oS(i,_));const T=u(t,["distillationSpec"]);T!=null&&c(e,["distillationSpec"],T);const S=u(t,["experiment"]);S!=null&&c(e,["experiment"],S);const k=u(t,["labels"]);k!=null&&c(e,["labels"],k);const M=u(t,["pipelineJob"]);M!=null&&c(e,["pipelineJob"],M);const D=u(t,["tunedModelDisplayName"]);return D!=null&&c(e,["tunedModelDisplayName"],D),e}function sS(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>xm(i,f))),c(e,["tuningJobs"],a)}return e}function lS(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const f=u(t,["error"]);return f!=null&&c(e,["error"],f),e}function aS(i,t){const e={},o=u(t,["checkpointId"]);o!=null&&c(e,["checkpointId"],o);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const a=u(t,["step"]);a!=null&&c(e,["step"],a);const f=u(t,["endpoint"]);return f!=null&&c(e,["endpoint"],f),e}function uS(i,t){const e={},o=u(t,["model"]);o!=null&&c(e,["model"],o);const s=u(t,["endpoint"]);s!=null&&c(e,["endpoint"],s);const a=u(t,["checkpoints"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>aS(i,m))),c(e,["checkpoints"],f)}return e}function Pa(i,t){const e={},o=u(t,["name"]);o!=null&&c(e,["name"],o);const s=u(t,["state"]);s!=null&&c(e,["state"],im(i,s));const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const f=u(t,["startTime"]);f!=null&&c(e,["startTime"],f);const m=u(t,["endTime"]);m!=null&&c(e,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const h=u(t,["error"]);h!=null&&c(e,["error"],h);const x=u(t,["description"]);x!=null&&c(e,["description"],x);const _=u(t,["baseModel"]);_!=null&&c(e,["baseModel"],_);const T=u(t,["tunedModel"]);T!=null&&c(e,["tunedModel"],uS(i,T));const S=u(t,["supervisedTuningSpec"]);S!=null&&c(e,["supervisedTuningSpec"],S);const k=u(t,["tuningDataStats"]);k!=null&&c(e,["tuningDataStats"],k);const M=u(t,["encryptionSpec"]);M!=null&&c(e,["encryptionSpec"],M);const D=u(t,["partnerModelTuningSpec"]);D!=null&&c(e,["partnerModelTuningSpec"],D);const H=u(t,["distillationSpec"]);H!=null&&c(e,["distillationSpec"],H);const $=u(t,["experiment"]);$!=null&&c(e,["experiment"],$);const q=u(t,["labels"]);q!=null&&c(e,["labels"],q);const J=u(t,["pipelineJob"]);J!=null&&c(e,["pipelineJob"],J);const K=u(t,["tunedModelDisplayName"]);return K!=null&&c(e,["tunedModelDisplayName"],K),e}function cS(i,t){const e={},o=u(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>Pa(i,f))),c(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dS extends Ii{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new as(kr.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const o=await this.tuneMldevInternal(e);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:_a.JOB_STATE_QUEUED}}}}async getInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=QE(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>Pa(this.apiClient,x))}else{const h=qE(this.apiClient,t);return m=ce("{name}",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>xm(this.apiClient,x))}}async listInternal(t){var e,o,s,a;let f,m="",g={};if(this.apiClient.isVertexAI()){const h=eS(this.apiClient,t);return m=ce("tuningJobs",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),f.then(x=>{const _=cS(this.apiClient,x),T=new tp;return Object.assign(T,_),T})}else{const h=jE(this.apiClient,t);return m=ce("tunedModels",h._url),g=h._query,delete h.config,delete h._url,delete h._query,f=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),f.then(x=>{const _=sS(this.apiClient,x),T=new tp;return Object.assign(T,_),T})}}async tuneInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI()){const m=iS(this.apiClient,t);return a=ce("tuningJobs",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>Pa(this.apiClient,g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,o;let s,a="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=ZE(this.apiClient,t);return a=ce("tunedModels",m._url),f=m._query,delete m.config,delete m._url,delete m._query,s=this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>lS(this.apiClient,g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fS{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pS=1024*1024*8,mS=3,hS=1e3,gS=2,ua="x-goog-upload-status";async function yS(i,t,e){var o,s,a;let f=0,m=0,g=new Ta(new Response),h="upload";for(f=i.size;m<f;){const _=Math.min(pS,f-m),T=i.slice(m,m+_);m+_>=f&&(h+=", finalize");let S=0,k=hS;for(;S<mS&&(g=await e.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(m),"Content-Length":String(_)}}}),!(!((o=g==null?void 0:g.headers)===null||o===void 0)&&o[ua]));)S++,await xS(k),k=k*gS;if(m+=_,((s=g==null?void 0:g.headers)===null||s===void 0?void 0:s[ua])!=="active")break;if(f<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await(g==null?void 0:g.json());if(((a=g==null?void 0:g.headers)===null||a===void 0?void 0:a[ua])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function vS(i){return{size:i.size,type:i.type}}function xS(i){return new Promise(t=>setTimeout(t,i))}class CS{async upload(t,e,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yS(t,e,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vS(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _S{create(t,e,o){return new TS(t,e,o)}}class TS{constructor(t,e,o){this.url=t,this.headers=e,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ip="x-goog-api-key";class ES{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(Ip)===null&&t.append(Ip,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SS="gl-node/";class wS{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const o=Sy(t,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const s=new ES(this.apiKey);this.apiClient=new yE({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:SS+"web",uploader:new CS,downloader:new fS}),this.models=new DE(this.apiClient),this.live=new kE(this.apiClient,s,new _S),this.chats=new $v(this.models,this.apiClient),this.caches=new zv(this.apiClient),this.files=new nx(this.apiClient),this.operations=new HE(this.apiClient),this.tunings=new dS(this.apiClient)}}const IS={low:"Identify only the most essential and defining grammar patterns of the sentence. Focus on major conjunctions, verb conjugations (tense/politeness), and sentence-ending particles. Avoid breaking down common compound words or very simple phrases.",medium:"Provide a balanced analysis. Identify all major grammar patterns, common set phrases, and important vocabulary usage. This is the standard level of detail suitable for most learners.",high:"Perform an exhaustive analysis. Identify every possible grammatical pattern, nuance, idiomatic expression, and compound word structure, no matter how small or common. Deconstruct everything for a very detailed view for advanced study."};function NS(i){return`You are an advanced linguistic analysis model, acting as a patient, insightful teacher of the Japanese language.
Your primary task is to take a single Japanese sentence and produce a detailed, structured analysis according to the specified JSON schema. Your explanations should be clear enough for a language learner.

Detailed Task Breakdown:
1.  **Sentence Analysis**: Deconstruct the input sentence into its smallest meaningful components (words, particles, etc.).
    For each component in the 'analysis' array:
    *   **Grammatical Category**: Assign a highly specific category. Use the format \`BASE_TYPE-FORM-TENSE-POLARITY\`.
        *   Examples: \`VERB_GODAN-TE-PAST-AFFIRMATIVE\`, \`ADJECTIVE_I-PLAIN-PRESENT-NEGATIVE\`, \`NOUN_COMMON\`.
        *   Available Categories: NOUN_COMMON, NOUN_PROPER, NOUN_PRONOUN, NOUN_COUNTER, VERB_ICHIDAN, VERB_GODAN, VERB_IRREGULAR, VERB_SURU, ADJECTIVE_I, ADJECTIVE_NA, ADVERB, PARTICLE, AUXILIARY_VERB, GRAMMATICAL_AUXILIARY, CONJUNCTION, INTERJECTION, SUFFIX, PREFIX, PUNCTUATION.
    *   **Reading**: Provide the reading in Hiragana or Katakana.
    *   **English Equivalent**: Provide a concise English meaning.
    *   **Pitch Accent**: THIS IS A CRITICAL, MANDATORY FIELD.
        *   Provide the standard Tokyo-dialect pitch accent as a string of 'H' (High) and 'L' (Low).
        *   **RULE: The length of the 'pitch_accent' string MUST EXACTLY match the character length of the 'reading' string.**
        *   Example: If 'reading' is 'ねこ' (2 chars), 'pitch_accent' MUST be 'LH' (2 chars).
        *   Example: If 'reading' is 'ともだち' (4 chars), 'pitch_accent' (heiban) MUST be 'LHHH' (4 chars).
        *   For particles or single-mora words with no accent drop, use the appropriate single letter ('H' or 'L').
        *   If pitch is truly not applicable (like punctuation), provide an empty string "". DO NOT OMIT THE FIELD. Avoid common pitfalls like providing a pattern shorter than the reading.

2.  **Full Translation**: Provide a natural, fluent English translation of the entire sentence.

3.  **Grammar & Phrase Explanations**: In the 'grammar_patterns' array, identify and explain all notable grammar points, set phrases, or nuanced vocabulary.
    *   **Analysis Thoroughness Level: ${i.toUpperCase()}**
    *   **Instruction: ${IS[i]}**
    *   For each pattern, provide its name, a clear explanation for a learner, and the 'constituent_indices' that form the pattern in the 'analysis' array. This section must be comprehensive according to the specified thoroughness level.

Input is a single Japanese sentence. You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function kS(){return`You are a Japanese language teaching assistant.
Your task is to provide 2-3 simple, distinct, and pedagogically useful example sentences for the Japanese grammar pattern provided as the user input.

For each example sentence, you MUST provide:
1.  'japanese': The full sentence in Japanese, using Kanji where appropriate.
2.  'reading': The complete furigana reading of the sentence in Hiragana.
3.  'english': A natural and accurate English translation.
4.  'highlight_indices': A two-element array \`[startIndex, endIndex]\` indicating the exact location of the grammar pattern within the 'japanese' string. 'startIndex' is the zero-based index of the first character of the pattern, and 'endIndex' is the zero-based index of the character immediately AFTER the last character of the pattern.

Example for pattern "〜について":
If the user input is "〜について" and a sentence is "日本の文化について話します。", the pattern "について" starts at index 5 and ends at index 9. So, 'highlight_indices' would be [5, 9].

Respond ONLY with a JSON object that adheres to the provided schema. Do not add any extra text or markdown fences.`}const AS={type:"OBJECT",properties:{original_japanese_sentence:{type:"STRING",description:"The original Japanese sentence provided by the user."},analysis:{type:"ARRAY",description:"An array of objects, each representing a segmented component of the Japanese sentence.",items:{type:"OBJECT",properties:{japanese_segment:{type:"STRING",description:"The individual Japanese segment (word, particle, etc.)."},reading:{type:"STRING",description:"The reading of the Japanese segment in Hiragana or Katakana."},category:{type:"STRING",description:"A highly specific grammatical category label for the segment (e.g., 'NOUN_COMMON', 'VERB_ICHIDAN-TE-PAST-AFFIRMATIVE')."},english_equivalent:{type:"STRING",description:"A direct, concise English equivalent of the segment."},pitch_accent:{type:"STRING",description:`CRITICAL: A string representing the pitch accent pattern using 'H' for high and 'L' for low. This string's length MUST exactly match the character length of the 'reading' field. For heiban words, use 'L' followed by all 'H's (e.g., reading 'ともだち' -> pitch 'LHHH'). For non-applicable segments like punctuation, this MUST be an empty string "". Do not omit this field.`}},required:["japanese_segment","reading","category","english_equivalent","pitch_accent"]}},grammar_patterns:{type:"ARRAY",description:"A comprehensive array of identified grammatical patterns, idiomatic phrases, or nuanced vocabulary in the sentence.",items:{type:"OBJECT",properties:{pattern_name:{type:"STRING",description:"The name of the grammatical pattern or the phrase being explained (e.g., '〜なければならない', 'よろしくお願いします')."},explanation:{type:"STRING",description:"A detailed explanation of the pattern's meaning, usage, and nuance for a language learner."},constituent_indices:{type:"ARRAY",description:"An array of zero-based indices from the 'analysis' array that form this pattern.",items:{type:"NUMBER"}}},required:["pattern_name","explanation","constituent_indices"]}},english_translation:{type:"STRING",description:"The complete, natural-sounding English translation of the entire Japanese sentence."}},required:["original_japanese_sentence","analysis","grammar_patterns","english_translation"]},RS={type:"ARRAY",description:"An array of 2-3 simple example sentences for the given grammar pattern.",items:{type:"OBJECT",properties:{japanese:{type:"STRING",description:"The full example sentence in Japanese, including Kanji."},reading:{type:"STRING",description:"The complete reading of the Japanese sentence in Hiragana."},english:{type:"STRING",description:"The natural English translation of the sentence."},highlight_indices:{type:"ARRAY",description:"A two-element array [startIndex, endIndex] indicating the character position of the grammar pattern within the 'japanese' string. startIndex is inclusive, endIndex is exclusive.",items:{type:"NUMBER"},minItems:2,maxItems:2}},required:["japanese","reading","english","highlight_indices"]}},Cm=async()=>{const t=(await ba()).userApiKey||void 0;if(!t)throw new Error("API Key is not configured. Please set your key in the settings menu or ensure the default key is present.");return new wS({apiKey:t})},_m=i=>{var s;const t=i.text;if(typeof t!="string"||t.trim()===""){const a=(s=i.candidates)==null?void 0:s[0];throw a&&a.finishReason!=="STOP"?new Error(`The AI model's response was incomplete. Reason: ${a.finishReason}.`):new Error("The AI model returned an empty response.")}const e=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,o=t.trim().match(e);return o?o[1].trim():t.trim()},Tm=i=>{const[t,e]=b.useState(!1),[o,s]=b.useState(null),[a,f]=b.useState(null),m=b.useCallback(async(...g)=>{e(!0),s(null),f(null);try{const h=await i(...g);return f(h),h}catch(h){s(h)}finally{e(!1)}},[i]);return{isLoading:t,error:o,data:a,execute:m}},MS=async(i,t,e=!1)=>{const o=await Cm(),s=i.trim().replace(/^[「『]/,"").replace(/[」』]$/,"").trim();if(!s)return{original_japanese_sentence:i,analysis:[{japanese_segment:i,reading:i,category:"PUNCTUATION",english_equivalent:"Punctuation/Quotes",pitch_accent:""}],grammar_patterns:[],english_translation:"(Sentence consists only of punctuation)"};const a=await o.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:s,config:{systemInstruction:NS(t),responseMimeType:"application/json",responseSchema:AS,temperature:.1,seed:42}}),f=_m(a),m=JSON.parse(f),g=Array.isArray(m)?m[0]:m;return g.original_japanese_sentence=i,g},PS=async i=>{const e=await(await Cm()).models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:i,config:{systemInstruction:kS(),responseMimeType:"application/json",responseSchema:RS,temperature:.01,seed:42}}),o=_m(e);return JSON.parse(o)},Em=()=>{const i=b.useCallback(MS,[]);return Tm(i)},DS=()=>{const i=b.useCallback(PS,[]);return Tm(i)},Sm=(i,t)=>{const{state:e,dispatch:o}=_t(),{state:s}=Wt(),{execute:a,error:f,isLoading:m}=Em(),[g,h]=b.useState(null),x=b.useMemo(()=>i?e.history.find(k=>k.id===i):null,[i,e.history]),_=s.analysisDepth;b.useEffect(()=>{var D;let k=!1;if(!t){h(null);return}if((g==null?void 0:g.sentence)===t)return;const M=((D=x==null?void 0:x.analyzedSentences[t])==null?void 0:D[_])||null;if(M){h({sentence:t,analysis:M});return}return h(null),a(t,_).then(H=>{!k&&H&&h({sentence:t,analysis:H})}),()=>{k=!0}},[t,_,x,a,g==null?void 0:g.sentence]),b.useEffect(()=>{var k;g&&i&&((k=x==null?void 0:x.analyzedSentences[g.sentence])!=null&&k[_]||o({type:"CACHE_ANALYSIS",payload:{entryId:i,sentence:g.sentence,depth:_,analysis:g.analysis}}))},[g,i,_,x,o]);const T=b.useCallback(()=>{t&&(h(null),a(t,_,!0).then(k=>{k&&h({sentence:t,analysis:k})}))},[t,_,a]),S=(g==null?void 0:g.sentence)===t?g.analysis:null;return{analysis:S,isLoading:m||!!t&&!S&&!f,error:f,reanalyze:T}};let Da=null;function Np(i){Da=i}function LS(){if(!("speechSynthesis"in window)){document.body.classList.remove("tts-available");return}const i=()=>{const t=window.speechSynthesis.getVoices().filter(a=>a.lang==="ja-JP");if(t.length===0){Np(null),document.body.classList.remove("tts-available");return}const e=t.find(a=>a.name.includes("Google")),o=t.find(a=>!a.localService),s=e||o||t[0]||null;Np(s),document.body.classList.toggle("tts-available",!!s)};i(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=i)}function FS(i){if(!("speechSynthesis"in window)||!Da){console.warn("Speech synthesis not available or no Japanese voice found.");return}window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(i);t.voice=Da,t.lang="ja-JP",t.rate=.9,t.pitch=1,window.speechSynthesis.speak(t)}const VS=({text:i,title:t="Read aloud"})=>v.jsx("button",{className:"tts-button btn-ghost p-1 text-text-muted hover:text-text-primary",title:t,onClick:e=>{e.stopPropagation(),FS(i)},children:v.jsx("i",{className:"bi bi-volume-up text-base"})}),ca=Ar.memo(function({text:t}){const e=b.useMemo(()=>t.split("").map((o,s)=>/[一-龯]/.test(o)?v.jsx("a",{href:`https://jisho.org/search/${encodeURIComponent(o)}%20%23kanji`,target:"_blank",rel:"noopener noreferrer",className:"underline decoration-text-muted/50 decoration-1 underline-offset-2 hover:text-accent hover:decoration-accent transition",onClick:a=>a.stopPropagation(),children:o},s):o),[t]);return v.jsx(v.Fragment,{children:e})}),qn=Ar.memo(function({base:t,reading:e,interactiveKanji:o=!1}){const{state:s}=Wt(),{showFurigana:a}=s,f=b.useMemo(()=>{if(!a||!e||t===e)return o?v.jsx(ca,{text:t}):t;const m=[];let g=0,h=0;for(;h<t.length;){const x=t[h];if(/[一-龯]/.test(x)){let _=x,T=h+1;for(;T<t.length&&/[一-龯]/.test(t[T]);)_+=t[T],T++;let S="",k=T;for(;k<t.length&&!/[一-龯]/.test(t[k]);)S+=t[k],k++;let M="";const D=S?e.indexOf(S,g):-1;if(D!==-1)M=e.substring(g,D);else{const $=t.substring(h),q=e.substring(g);$.length===1?M=q:M=q.slice(0,q.length-($.length-_.length))}const H=o?v.jsx(ca,{text:_}):_;m.push(v.jsxs("ruby",{children:[H,v.jsx("rt",{className:"text-xs text-text-muted select-none",children:M})]},h)),g+=M.length,h+=_.length}else m.push(x),g++,h++}return m},[t,e,o,a]);return a?v.jsx(v.Fragment,{children:f}):o?v.jsx(ca,{text:t}):t}),wm=Ar.memo(function({reading:t,pitchAccent:e}){const{state:o}=Wt();if(!o.showPitchAccent||!t||!e||t.length!==e.length)return null;const s=e.split("").map((a,f)=>({x:100/t.length*(f+.5),y:a==="H"?2:8}));return v.jsxs("svg",{className:"pitch-accent-svg absolute top-0 left-0 w-full h-[14px] overflow-visible pointer-events-none",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:[s.length>1&&v.jsx("polyline",{points:s.map(a=>`${a.x},${a.y}`).join(" "),className:"fill-none stroke-text-muted",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.map((a,f)=>v.jsx("circle",{cx:a.x,cy:a.y,r:"1.2",className:"fill-text-muted"},f))]})});function Im({itemId:i,itemType:t,itemContent:e}){const{state:o,dispatch:s}=_t(),{showAlert:a}=Mr(),f=!!o.reviewDeck.find(g=>g.id===i),m=g=>{g.stopPropagation();const{currentTextEntryId:h}=o;if(!h){a("Cannot add an item to the deck without first saving the text.");return}const x=f?"REMOVE_REVIEW_ITEM":"ADD_OR_UPDATE_REVIEW_ITEM";if(x==="REMOVE_REVIEW_ITEM")s({type:x,payload:i});else{const _={id:i,type:t,content:e,textEntryId:h,srsStage:0,incorrectAnswerCount:0,nextReviewDate:new Date().setHours(0,0,0,0),addedAt:Date.now()};s({type:x,payload:_})}};return f?v.jsxs("button",{onClick:m,className:"in-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent bg-accent-subtle-bg hover:bg-destructive-subtle-bg hover:text-destructive hover:border-destructive transition inline-flex items-center gap-2",title:"Remove from Review Deck",children:[v.jsx("i",{className:"bi bi-check-lg text-base"}),"In Deck"]}):v.jsxs("button",{onClick:m,className:"add-to-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-primary-subtle-text text-primary-subtle-text hover:bg-primary-subtle-bg hover:text-primary-subtle-text/80 transition inline-flex items-center gap-2",title:"Add to Review Deck",children:[v.jsx("i",{className:"bi bi-plus-lg text-base"}),"Add to Deck"]})}function US(i){const t=(i||"unknown").split(/[-_]/)[0].toLowerCase(),e={noun:"bg-pos-noun-bg text-pos-noun-text",verb:"bg-pos-verb-bg text-pos-verb-text",particle:"bg-pos-particle-bg text-pos-particle-text",adjective:"bg-pos-adjective-bg text-pos-adjective-text",adverb:"bg-pos-adverb-bg text-pos-adverb-text",auxiliary:"bg-pos-auxiliary-bg text-pos-auxiliary-text",grammatical:"bg-pos-auxiliary-bg text-pos-auxiliary-text",conjunction:"bg-pos-conjunction-bg text-pos-conjunction-text",suffix:"bg-pos-suffix-bg text-pos-suffix-text",punctuation:"bg-transparent",unknown:"bg-surface-soft"};return e[t]||e.unknown}const bS=({segment:i})=>v.jsxs("div",{children:[v.jsx("div",{className:"text-lg font-japanese font-semibold mb-3 pb-2 border-b border-border-subtle",children:v.jsx(qn,{base:i.japanese_segment,reading:i.reading||"",interactiveKanji:!0})}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Meaning:"})," ",i.english_equivalent]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",v.jsx("span",{className:"capitalize",children:i.category.replace(/_/g," ").toLowerCase()})]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",i.reading]})]}),v.jsx("div",{className:"mt-4 pt-3 border-t border-border-subtle",children:v.jsx(Im,{itemId:`word-${i.japanese_segment}-${i.reading}`,itemType:"word",itemContent:i})})]}),OS=({segment:i})=>{const{state:t}=Wt(),{state:e,dispatch:o}=nn(),{japanese_segment:s,reading:a,category:f,pitch_accent:m,patterns:g}=i,h=S=>{const k=S.currentTarget,M=v.jsx(bS,{segment:i});if(window.innerWidth<768)e.bottomSheet.visible&&e.bottomSheet.targetElement===k?o({type:"HIDE_BOTTOM_SHEET"}):o({type:"SHOW_BOTTOM_SHEET",payload:{content:{title:s,body:M},targetElement:k}});else{const D=k.getBoundingClientRect(),H={top:D.top-10,left:D.left+D.width/2};o({type:"PIN_TOOLTIP",payload:{content:M,position:H,targetElement:k}})}},x=b.useMemo(()=>{if(!g||g.length===0)return{};const S=3,k=2,M=S+k,D=g.map(K=>`linear-gradient(to right, rgb(var(--color-pattern-${K.colorIndex}-rgb)), rgb(var(--color-pattern-${K.colorIndex}-rgb)))`).join(", "),H=g.map((K,Q)=>`0 calc(100% - ${Q*M}px)`).join(", "),$=g.map(()=>`100% ${S}px`).join(", "),q=4,J=g.length*M-k;return{backgroundImage:D,backgroundPosition:H,backgroundSize:$,paddingBottom:`${q+J}px`}},[g]),_=["segment","relative","inline-block","rounded-md","px-2","cursor-pointer","transition-transform","duration-200","hover:-translate-y-0.5","leading-loose",t.showColorCoding?US(f):"bg-surface-soft",g&&g.length>0?"grammar-pattern":""].filter(Boolean).join(" "),T={paddingTop:t.showPitchAccent?"18px":"0.25rem",paddingBottom:"0.25rem",...x};return v.jsxs("span",{className:_,style:T,onClick:h,children:[v.jsx(wm,{reading:a,pitchAccent:m}),v.jsx("div",{children:v.jsx(qn,{base:s,reading:a})})]})};function zS({pattern:i,onNoteClick:t,isFocused:e}){const{isLoading:o,error:s,data:a,execute:f}=DS(),[m,g]=b.useState(!1),h=S=>{S.stopPropagation(),a?g(!m):(f(i.pattern_name),g(!0))},x=`grammar-${i.pattern_name}`,_=(i.constituent_indices||[]).map(S=>i.fullAnalysis.analysis[S].japanese_segment).join(""),T={pattern_name:i.pattern_name,explanation:i.explanation,original_sentence:i.fullAnalysis.original_japanese_sentence,constituent_text:_};return v.jsxs("li",{className:`flex gap-4 p-4 rounded-lg bg-surface-subtle cursor-pointer transition-all duration-200 ${e?"is-focused ring-2 ring-focus-ring bg-surface-soft":""}`,"data-pattern-id":i.idClass,onClick:()=>t(i),children:[v.jsx("span",{className:`flex-shrink-0 w-1.5 rounded-full bg-pattern-${i.colorIndex}`}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("strong",{className:"font-semibold text-accent",children:i.pattern_name}),v.jsx("p",{className:"text-sm text-text-muted mt-1",children:i.explanation}),v.jsxs("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[v.jsxs("button",{className:"show-examples-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent hover:bg-accent hover:text-primary-text transition inline-flex items-center gap-2 disabled:opacity-50",onClick:h,disabled:o,children:[o?v.jsx("i",{className:"bi bi-arrow-repeat text-base animate-spin"}):v.jsx("i",{className:"bi bi-card-list text-base"}),v.jsx("span",{className:"button-text",children:m&&a?"Hide":"Examples"})]}),v.jsx(Im,{itemId:x,itemType:"grammar",itemContent:T})]}),m&&v.jsxs("div",{className:"examples-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:[s&&v.jsx("p",{className:"text-xs text-destructive-subtle-text",children:s.message}),a&&v.jsx("dl",{className:"flex flex-col gap-4",children:a.map((S,k)=>v.jsxs(Ar.Fragment,{children:[v.jsx("dt",{children:v.jsx("span",{className:"text-lg font-jp",children:v.jsx(qn,{base:S.japanese,reading:S.reading})})}),v.jsx("dd",{className:"text-sm text-text-muted -mt-1",children:S.english})]},k))})]})]})]})}const BS=()=>v.jsxs("div",{className:"mt-6 p-4 border-t border-border-subtle text-center",children:[v.jsx("h4",{className:"text-xs font-bold uppercase text-text-muted tracking-wider mb-3",children:"Hotkeys"}),v.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-xs text-text-secondary",children:[v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"F"})," Furigana"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"C"})," Colors"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"T"})," Translate"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"S"})," Speak"]}),v.jsx("div",{className:"w-px h-4 bg-border mx-2 self-center"}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"J"}),"/",v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"K"})," Nav"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"E"})," Examples"]}),v.jsxs("span",{children:[v.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"Esc"})," Deselect"]})]})]});function Nm({analysis:i,onReanalyze:t}){const[e,o]=b.useState(null),[s,a]=b.useState(!1),f=b.useMemo(()=>{if(!i.grammar_patterns)return i.analysis.map(h=>({...h,patterns:[]}));const g=new Map;return i.grammar_patterns.forEach((h,x)=>{var S;const _=x%12,T=`pattern-${_}`;(S=h.constituent_indices)==null||S.forEach(k=>{g.has(k)||g.set(k,[]),g.get(k).push({...h,idClass:T,colorIndex:_})})}),i.analysis.map((h,x)=>({...h,patterns:g.get(x)||[]}))},[i]),m=g=>{o(h=>(h==null?void 0:h.idClass)===g.idClass?null:g)};return v.jsxs("div",{className:"analysis-view-container animate-fade-in max-w-4xl mx-auto w-full",children:[v.jsxs("div",{id:"analysis-header",className:"relative sticky top-0 z-20 bg-surface-soft rounded-lg transition-colors duration-300 p-4 min-h-36",children:[v.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl max-h-[50vh] overflow-y-auto no-scrollbar pr-8",children:f.map((g,h)=>v.jsx("div",{className:`transition-opacity duration-300 ${e&&!g.patterns.some(x=>x.idClass===e.idClass)?"opacity-30":"opacity-100"}`,children:v.jsx(OS,{segment:g})},h))}),s&&v.jsx("div",{className:"translation-text-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:v.jsx("p",{className:"text-text-primary text-base",children:i.english_translation})}),v.jsxs("div",{className:"absolute top-4 right-4 flex flex-col items-center gap-2",children:[v.jsx(VS,{text:i.original_japanese_sentence,title:"Read sentence (S)"}),v.jsx("button",{onClick:t,title:"Force re-analysis",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:v.jsx("i",{className:"bi bi-arrow-clockwise text-base"})}),v.jsx("button",{id:"toggle-translation-button",onClick:()=>a(g=>!g),title:"Toggle translation (T)",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:v.jsx("i",{className:"bi bi-translate text-base"})})]})]}),v.jsx("div",{className:"p-4 space-y-4",children:i.grammar_patterns&&i.grammar_patterns.length>0&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold uppercase text-text-muted mb-3 tracking-wider",children:"Grammar & Phrases"}),v.jsx("ul",{className:"space-y-3",children:i.grammar_patterns.map((g,h)=>{const x=h%12,_=`pattern-${x}`,T={...g,idClass:_,colorIndex:x,fullAnalysis:i};return v.jsx(zS,{pattern:T,onNoteClick:m,isFocused:(e==null?void 0:e.idClass)===_},h)})})]})}),v.jsx(BS,{})]})}const km=({message:i,detail:t,onRetry:e})=>v.jsx("div",{role:"alert",className:"p-4 bg-destructive-subtle-bg border-l-4 border-destructive rounded-r-lg shadow-md my-4 transition-all duration-300",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("i",{className:"bi bi-x-circle-fill text-xl text-destructive","aria-hidden":"true"})}),v.jsxs("div",{className:"ml-3 flex-1",children:[v.jsx("p",{className:"text-sm font-semibold text-destructive-subtle-text",children:i}),t&&v.jsx("div",{className:"mt-2 text-sm text-destructive-subtle-text/80",children:v.jsx("p",{children:t})}),e&&v.jsx("button",{onClick:e,className:"mt-3 text-xs font-semibold px-2 py-1 rounded-md border border-destructive-subtle-text text-destructive-subtle-text hover:bg-destructive-subtle-text/10 transition",children:"Try Again"})]})]})}),Am=({sentence:i,isLoading:t=!0})=>v.jsxs("div",{className:"relative p-4 bg-surface-soft rounded-lg min-h-36 animate-fade-in",children:[v.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl pr-8",children:v.jsx("p",{className:`text-2xl text-text-muted font-japanese transition-opacity duration-500 ${t?"opacity-50":"opacity-100"}`,children:i})}),t&&v.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:v.jsx("i",{className:"bi bi-arrow-repeat text-lg text-text-muted animate-spin"})})]}),GS=({entry:i,onExit:t,onSentenceChange:e,totalSentences:o,isVisible:s})=>{const a=i.readingProgress,[f,m]=b.useState(String(a+1));b.useEffect(()=>{m(String(a+1))},[a]);const g=()=>{let x=parseInt(f,10);(isNaN(x)||x<1)&&(x=1),x>o&&(x=o),e(x-1),m(String(x))},h=x=>{x.key==="Enter"&&(g(),x.currentTarget.blur())};return v.jsx("header",{className:`fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl z-30 bg-surface/90 backdrop-blur-md shadow-sm rounded-b-lg transition-transform duration-250 ease-in-out ${s?"translate-y-0":"-translate-y-full"}`,children:v.jsx("div",{className:"p-2",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("button",{onClick:t,title:"Exit Reading Mode",className:"p-2 rounded-full hover:bg-surface-hover transition-colors",children:v.jsx("i",{className:"bi bi-box-arrow-right text-2xl text-text-secondary"})}),v.jsxs("div",{className:"font-medium text-text-secondary flex items-center gap-1",children:[v.jsx("input",{type:"number",value:f,onChange:x=>m(x.target.value),onBlur:g,onKeyDown:h,min:"1",max:o,title:"Enter sentence number and press Enter",className:"w-12 text-center bg-surface-subtle rounded-md p-1 focus:ring-2 focus:ring-focus-ring focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),v.jsxs("span",{children:["/ ",o]})]})]})})})},$S=({isVisible:i,onNav:t,sentenceIndex:e,totalSentences:o})=>v.jsx("div",{className:`fixed top-3/4 -translate-y-1/2 left-0 right-0 z-20 pointer-events-none transition-all duration-300 ${i?"opacity-100":"opacity-0"}`,children:v.jsxs("div",{className:"w-full max-w-4xl mx-auto relative h-0",children:[v.jsx("button",{id:"reading-nav-prev",onClick:()=>t("prev"),disabled:e===0,"aria-label":"Previous sentence",className:`absolute top-0 left-2 md:left-auto md:right-full md:mr-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${i?"scale-100":"scale-90"}`,children:"←"}),v.jsx("button",{id:"reading-nav-next",onClick:()=>t("next"),disabled:e>=o-1,"aria-label":"Next sentence",className:`absolute top-0 right-2 md:right-auto md:left-full md:ml-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${i?"scale-100":"scale-90"}`,children:"→"})]})}),HS=()=>{const{state:i,dispatch:t}=_t(),{state:e}=Wt(),{dispatch:o}=nn(),[s,a]=b.useState(!1),[f,m]=b.useState(!0),g=b.useRef(null),h=b.useRef(null),x=b.useRef({x:0,y:0,time:0}),_=b.useRef(null),T=i.history.find(ye=>ye.id===i.currentTextEntryId),S=b.useMemo(()=>(T==null?void 0:T.text.split(`
`).flatMap(ye=>{var Ne;return((Ne=ye.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:Ne.filter(_e=>_e==null?void 0:_e.trim()))||[]}))||[],[T==null?void 0:T.text]),k=(T==null?void 0:T.readingProgress)??0,M=S[k],D=S[k+1],{analysis:H,isLoading:$,error:q,reanalyze:J}=Sm(T==null?void 0:T.id,M),{execute:K}=Em(),Q=b.useCallback(()=>{a(!0),g.current&&window.clearTimeout(g.current),g.current=window.setTimeout(()=>{a(!1)},4e3)},[]),te=b.useCallback(()=>{m(!0),h.current&&window.clearTimeout(h.current),h.current=window.setTimeout(()=>{m(!1)},1500)},[]),xe=b.useCallback(ye=>{const Ne=ye==="prev"&&k>0,_e=ye==="next"&&k<S.length-1;(Ne||_e)&&(t({type:"NAVIGATE_SENTENCE",payload:{direction:ye}}),navigator.vibrate&&navigator.vibrate(10),te())},[t,k,S.length,te]),se=b.useCallback(ye=>{t({type:"JUMP_TO_SENTENCE",payload:{index:ye}})},[t]);b.useEffect(()=>{o({type:"HIDE_BOTTOM_SHEET"}),o({type:"HIDE_TOOLTIP"}),te()},[M,o,te]),b.useEffect(()=>{te();const ye=_.current;return ye&&ye.addEventListener("scroll",te,{passive:!0}),()=>{g.current&&window.clearTimeout(g.current),h.current&&window.clearTimeout(h.current),ye&&ye.removeEventListener("scroll",te)}},[te]);const pe=ye=>{te();const Ne=ye.touches[0];x.current={x:Ne.clientX,y:Ne.clientY,time:Date.now()}},Be=ye=>{const Ne=ye.changedTouches[0],{x:_e,y:je,time:Ye}=x.current,{clientX:oe,clientY:U}=Ne,W=Date.now()-Ye,z=oe-_e,N=U-je;if(je<50&&N>30&&Math.abs(z)<30){Q();return}if(W<500&&Math.abs(z)>50&&Math.abs(N)<50){xe(z>0?"prev":"next");return}if(W<250&&Math.abs(z)<10&&Math.abs(N)<10){const L=oe/window.innerWidth;f?L<.25?xe("prev"):L>.75?xe("next"):te():te();return}};return b.useEffect(()=>{var ye;T&&D&&((ye=T.analyzedSentences[D])!=null&&ye[e.analysisDepth]||K(D,e.analysisDepth).then(_e=>{_e&&T&&t({type:"CACHE_ANALYSIS",payload:{entryId:T.id,sentence:D,depth:e.analysisDepth,analysis:_e}})}))},[D,T,e.analysisDepth,K,t]),T?v.jsxs("div",{className:"reading-mode-view h-screen flex flex-col bg-surface",onTouchStart:pe,onTouchEnd:Be,onClick:te,children:[v.jsx("div",{className:"fixed top-0 left-0 right-0 h-5 z-40",onClick:Q}),v.jsx(GS,{entry:T,onExit:()=>t({type:"SET_VIEW",payload:Le.Reader}),onSentenceChange:se,totalSentences:S.length,isVisible:s}),v.jsx($S,{isVisible:f,onNav:xe,sentenceIndex:k,totalSentences:S.length}),v.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:v.jsx("div",{ref:_,className:"flex-1 overflow-y-auto min-h-0 no-scrollbar",children:M?q?v.jsx(km,{message:q.message,onRetry:J}):H?v.jsx(Nm,{analysis:H,onReanalyze:J}):v.jsx(Am,{sentence:M,isLoading:$}):v.jsx("div",{className:"text-center p-8 text-text-muted",children:"End of text."})})})]}):v.jsx("div",{children:"Error: No text selected."})},qS=()=>{const{state:i,dispatch:t}=_t(),e=i.history.find(_=>_.id===i.currentTextEntryId),{analysis:o,isLoading:s,error:a,reanalyze:f}=Sm(e==null?void 0:e.id,i.selectedSentence),m=b.useCallback(_=>{t({type:"SET_SELECTED_SENTENCE",payload:_})},[t]);if(!e)return b.useEffect(()=>{t({type:"RESET_VIEW"})},[t]),null;const g=()=>{e&&t({type:"START_EDITING",payload:e.id})},h=()=>{if(!e)return;const _=e.text.split(`
`).flatMap(k=>{var M;return((M=k.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:M.filter(D=>D==null?void 0:D.trim()))||[]}),T=i.selectedSentence?_.indexOf(i.selectedSentence):-1,S=T!==-1?T:e.readingProgress||0;t({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:{...e,readingProgress:S}}),t({type:"SET_VIEW",payload:Le.ReadingMode})},x=e.text.split(`
`).map(_=>{var T;return((T=_.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:T.filter(S=>S==null?void 0:S.trim()))||[]});return v.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto md:grid md:grid-cols-2 md:overflow-hidden",children:[v.jsxs("div",{className:"p-6 flex flex-col md:h-full md:grid md:grid-rows-[auto_1fr] md:gap-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-0",children:[v.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",title:e.title,children:e.title}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:g,title:"Edit Text",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-pencil-square text-xl"})}),v.jsx("button",{id:"start-reading-button",onClick:h,title:"Start Reading Mode",className:"inline-flex items-center justify-center p-2.5 rounded-full text-primary-text bg-accent hover:bg-accent/90 focus-ring shadow-sm",children:v.jsx("i",{className:"bi bi-book text-2xl"})})]})]}),v.jsx("div",{id:"reader-view-text-container",className:"reader-view-text bg-surface-soft border border-border rounded-lg p-4 sm:p-6 overflow-y-auto no-scrollbar min-h-0 max-h-[40vh]",children:x.map((_,T)=>v.jsx("p",{className:"text-lg sm:text-xl leading-relaxed mb-4 last:mb-0",children:_.length>0?_.map((S,k)=>{const M=i.selectedSentence===S,D=!!(e!=null&&e.analyzedSentences[S]),H=["clickable-sentence","cursor-pointer","rounded","p-1","-m-1","transition-colors","duration-200","hover:bg-accent-selected-bg/50"];return M?H.push("selected","bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","font-semibold"):D&&H.push("has-analysis"),v.jsxs(Ar.Fragment,{children:[v.jsx("span",{className:H.join(" "),onClick:()=>m(S),children:S})," "]},k)}):v.jsx(v.Fragment,{children:" "})},T))})]}),v.jsx("div",{className:"md:h-full md:overflow-y-auto no-scrollbar md:border-l border-border",children:v.jsx("div",{className:"p-6 md:h-full",children:v.jsx("div",{id:"analysis-view",className:"md:h-full",children:i.selectedSentence?a?v.jsx(km,{message:a.message,onRetry:f}):o?v.jsx(Nm,{analysis:o,onReanalyze:f}):v.jsx(Am,{sentence:i.selectedSentence,isLoading:s}):v.jsx("div",{className:"text-center p-8 text-text-muted md:h-full flex items-center justify-center",children:"Select a sentence to begin."})})})})]})},WS=[0,4,8,24,48,168,336,720,2880];function kp(i,t){const e={...i};let o=i.srsStage;if(t===1){e.incorrectAnswerCount=(i.incorrectAnswerCount||0)+1;const s=Math.ceil(e.incorrectAnswerCount/2),a=i.srsStage>=5?2:1,f=s*a;o=Math.max(1,i.srsStage-f)}else e.incorrectAnswerCount=0,t===2||(o=i.srsStage+1);if(o>=9)e.srsStage=9,e.nextReviewDate=new Date("9999-12-31").getTime();else{e.srsStage=o;const s=WS[e.srsStage],a=new Date;e.nextReviewDate=new Date(a.getTime()+s*60*60*1e3).getTime()}return e}const jS=({onExit:i})=>v.jsx("div",{className:"w-full flex justify-end mb-4",children:v.jsx("button",{"data-action":"review-exit",onClick:i,title:"Exit Review Session",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})}),YS=({item:i,onReview:t,onExit:e})=>{const{type:o,content:s}=i,[a,f]=b.useState(!1);b.useEffect(()=>{f(!1)},[i]);let m,g;if(o==="word")m=v.jsx("div",{className:"text-5xl md:text-7xl font-japanese font-semibold text-center text-text-primary p-8",children:s.japanese_segment}),g=v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:v.jsx(qn,{base:s.japanese_segment,reading:s.reading||""})}),v.jsx("div",{className:"text-lg text-text-secondary mb-6",children:s.english_equivalent}),v.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",s.category.replace(/_/g," ").replace(/-/g,", ")]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",s.reading]})]})]});else{const{original_sentence:x,constituent_text:_,pattern_name:T,explanation:S}=s,k=x&&_?x.replace(_,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${_}</span>`):T;m=v.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-8 leading-relaxed",dangerouslySetInnerHTML:{__html:k}}),g=v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:T}),v.jsx("p",{className:"text-lg text-text-secondary",children:S})]})}const h=x=>{t(x),f(!1)};return v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[v.jsx(jS,{onExit:e}),v.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:a?g:m}),v.jsx("div",{className:"mt-8 w-full",children:a?v.jsxs("div",{children:[v.jsx("p",{className:"text-center text-text-muted mb-4 text-sm",children:"How well did you remember?"}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[v.jsxs("button",{onClick:()=>h(1),"data-action":"review-quality-1",className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:["Again ",v.jsx("span",{className:"text-xs font-normal",children:"(1)"})]}),v.jsxs("button",{onClick:()=>h(2),"data-action":"review-quality-2",className:"text-lg font-bold py-4 px-4 rounded-xl bg-pos-auxiliary-bg text-pos-auxiliary-text hover:opacity-80 focus-ring transition",children:["Hard ",v.jsx("span",{className:"text-xs font-normal",children:"(2)"})]}),v.jsxs("button",{onClick:()=>h(3),"data-action":"review-quality-3",className:"text-lg font-bold py-4 px-4 rounded-xl bg-surface-hover text-text-secondary hover:bg-surface-hover/80 focus-ring transition",children:["Good ",v.jsx("span",{className:"text-xs font-normal",children:"(3)"})]}),v.jsxs("button",{onClick:()=>h(4),"data-action":"review-quality-4",className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:["Easy ",v.jsx("span",{className:"text-xs font-normal",children:"(4)"})]})]})]}):v.jsxs("button",{onClick:()=>f(!0),"data-action":"review-show-answer",className:"w-full max-w-xs mx-auto btn-primary text-lg",children:["Show Answer ",v.jsx("span",{className:"text-sm font-normal text-primary-text/80 ml-2",children:"(Space)"})]})})]})},JS=i=>{if(i===null||!isFinite(i))return"";const t=Date.now(),e=i-t;if(e<=0)return"soon";const o=e/(1e3*60),s=o/60,a=s/24;return a>=2?`in ${Math.round(a)} days`:a>=1?"tomorrow":s>=2?`in ${Math.round(s)} hours`:s>=1?"in an hour":o>=2?`in ${Math.round(o)} minutes`:"in a minute"},KS=({learnedCount:i,reviewedCount:t,onManage:e,onExit:o,nextReviewTimestamp:s})=>{const f=i+t>0,m=JS(s);return v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[v.jsx("i",{className:"bi bi-check-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:f?"Session Complete!":"All Caught Up!"}),f?v.jsxs("div",{className:"mt-2 text-text-secondary space-y-1",children:[v.jsx("p",{children:"Great work! You finished your session for today."}),v.jsxs("p",{children:["You learned ",v.jsx("strong",{className:"text-primary",children:i})," new items and reviewed ",v.jsx("strong",{className:"text-accent",children:t})," items."]}),m&&v.jsxs("p",{children:["Your next review is due ",m,"."]})]}):v.jsxs("p",{className:"mt-2 text-text-secondary",children:["There are no new words or reviews due right now.",m&&` Your next review is due ${m}.`]}),v.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsx("button",{onClick:o,className:"btn-secondary",children:"Back to Analyzer"}),v.jsx("button",{onClick:e,className:"btn-ghost",children:"Manage Deck"})]})]})},ZS=({onManage:i,onExit:t})=>v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[v.jsx("i",{className:"bi bi-journal-bookmark text-6xl text-text-muted/50 mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Review Deck is Empty"}),v.jsx("p",{className:"mt-2 text-text-secondary",children:'Add items by clicking the "Add to Deck" button on words or grammar patterns.'}),v.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsx("button",{onClick:t,className:"btn-secondary",children:"Back to Analyzer"}),v.jsx("button",{onClick:i,className:"btn-ghost",children:"Manage Deck"})]})]}),QS=({item:i,onDelete:t})=>{const[e,o]=Ar.useState(!1);let s,a;if(i.type==="word"){const{japanese_segment:f,english_equivalent:m,reading:g,category:h,pitch_accent:x}=i.content;s=v.jsxs(v.Fragment,{children:[v.jsx("strong",{className:"font-japanese text-lg",children:f})," ",v.jsxs("span",{className:"text-text-muted",children:["- ",m]})]}),a=v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative inline-block text-xl font-japanese font-semibold p-2 bg-surface-subtle rounded-lg",style:{paddingTop:"22px"},children:[v.jsx(wm,{reading:g,pitchAccent:x}),v.jsx(qn,{base:f,reading:g,interactiveKanji:!0})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3 text-sm mt-2",children:[v.jsxs("div",{children:[v.jsx("strong",{className:"font-medium text-text-secondary block",children:"Meaning"}),v.jsx("p",{className:"text-text-primary",children:m})]}),v.jsxs("div",{children:[v.jsx("strong",{className:"font-medium text-text-secondary block",children:"Category"}),v.jsx("p",{className:"text-text-primary capitalize",children:h.replace(/_/g," ").toLowerCase()})]}),v.jsxs("div",{className:"sm:col-span-2",children:[v.jsx("strong",{className:"font-medium text-text-secondary block",children:"Reading"}),v.jsx("p",{className:"text-text-primary font-japanese",children:g})]})]})]})}else{const{pattern_name:f,constituent_text:m,explanation:g}=i.content;m?s=v.jsxs(v.Fragment,{children:[v.jsx("strong",{className:"font-japanese text-lg",children:m})," ",v.jsxs("span",{className:"text-text-muted",children:["- ",f]})]}):s=v.jsx("strong",{className:"font-japanese text-lg",children:f}),a=v.jsx("p",{className:"text-sm text-text-secondary",children:g})}return v.jsxs("li",{className:"deck-item bg-surface-soft rounded-lg shadow-sm transition-shadow hover:shadow-md",children:[v.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>o(!e),children:[v.jsx("div",{className:"flex-grow pr-2",children:s}),v.jsxs("div",{className:"flex items-center flex-shrink-0 ml-4",children:[v.jsx("button",{onClick:f=>{f.stopPropagation(),t(i.id)},title:"Delete Item",className:"btn-ghost p-2 text-destructive/70 hover:bg-destructive-subtle-bg hover:text-destructive",children:v.jsx("i",{className:"bi bi-trash3 text-xl"})}),v.jsx("i",{className:`bi bi-chevron-down text-xl text-text-muted transition-transform ${e?"rotate-180":""}`})]})]}),e&&v.jsx("div",{className:"p-4 border-t border-border-subtle bg-surface",children:a})]})},XS=({items:i,onDelete:t,onExit:e,title:o})=>v.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("h2",{className:"text-2xl font-bold text-text-primary truncate pr-4",title:o,children:[o," (",i.length," items)"]}),v.jsx("button",{onClick:e,title:"Back to Analyzer",className:"btn-secondary flex-shrink-0",children:"Back"})]}),i.length===0?v.jsx("p",{className:"text-center text-text-muted p-8",children:"Your deck is empty."}):v.jsx("ul",{className:"space-y-3",children:i.map(s=>v.jsx(QS,{item:s,onDelete:t},s.id))})]}),e0=({item:i})=>{if(i.type==="word")return v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:v.jsx(qn,{base:i.content.japanese_segment,reading:i.content.reading||""})}),v.jsx("div",{className:"text-lg text-text-secondary mb-6",children:i.content.english_equivalent}),v.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",i.content.category.replace(/_/g," ").replace(/-/g,", ")]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",i.content.reading]})]})]});const{original_sentence:t,constituent_text:e,pattern_name:o,explanation:s}=i.content,a=t&&e?t.replace(e,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${e}</span>`):o;return v.jsxs("div",{className:"text-center",children:[(t||e)&&v.jsx("div",{className:"text-xl md:text-2xl font-japanese font-medium text-center text-text-primary p-2 leading-relaxed mb-6 pb-6 border-b border-border-subtle",dangerouslySetInnerHTML:{__html:a}}),v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:o}),v.jsx("p",{className:"text-lg text-text-secondary",children:s})]})},t0=({item:i,onExit:t,currentIndex:e,totalInChunk:o,onNext:s,onPrev:a,onStartQuiz:f})=>{const m=e===0,g=e===o-1;return v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[v.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[v.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[e+1," / ",o]}),v.jsx("button",{onClick:t,title:"Exit Review Session",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),v.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:v.jsx(e0,{item:i})}),v.jsxs("div",{className:"mt-8 w-full flex items-center justify-center gap-4",children:[v.jsx("button",{onClick:a,disabled:m,className:"p-4 rounded-full bg-surface-hover text-text-secondary disabled:opacity-50 transition",children:v.jsx("i",{className:"bi bi-arrow-left text-2xl"})}),g?v.jsx("button",{onClick:f,className:"btn-primary text-xl px-10 py-4",children:"Start Quiz!"}):v.jsx("button",{onClick:s,className:"p-4 rounded-full bg-surface-hover text-text-secondary transition",children:v.jsx("i",{className:"bi bi-arrow-right text-2xl"})})]})]})},n0=({item:i,isAnswerShown:t})=>{if(i.type==="word"){const{japanese_segment:e,english_equivalent:o,reading:s}=i.content;return v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-5xl md:text-7xl font-japanese font-semibold text-center text-text-primary mb-8",children:e}),t&&v.jsxs("div",{className:"animate-fade-in",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:v.jsx(qn,{base:e,reading:s||""})}),v.jsx("div",{className:"text-lg text-text-secondary",children:o})]})]})}else{const{original_sentence:e,constituent_text:o,pattern_name:s,explanation:a}=i.content,f=e&&o?e.replace(o,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${o}</span>`):s;return v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-4 leading-relaxed",dangerouslySetInnerHTML:{__html:f}}),t&&v.jsxs("div",{className:"animate-fade-in mt-6",children:[v.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:s}),v.jsx("p",{className:"text-lg text-text-secondary",children:a})]})]})}},r0=({item:i,onExit:t,onAnswer:e,remainingCount:o})=>{const[s,a]=b.useState(!1);return b.useEffect(()=>{a(!1)},[i]),v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[v.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[v.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[o," items left"]}),v.jsx("button",{onClick:t,title:"Exit Review Session",className:"btn-ghost",children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),v.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:v.jsx(n0,{item:i,isAnswerShown:s})}),v.jsx("div",{className:"mt-8 w-full",children:s?v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("button",{onClick:()=>e(i,!1),className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:[v.jsx("i",{className:"bi bi-arrow-counterclockwise mr-2"})," I Forgot"]}),v.jsxs("button",{onClick:()=>e(i,!0),className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:[v.jsx("i",{className:"bi bi-check-lg mr-2"})," I Remembered"]})]}):v.jsx("button",{onClick:()=>a(!0),className:"w-full max-w-xs mx-auto btn-primary text-lg",children:"Show Answer"})})]})},i0=({onContinue:i,onExit:t,hasMoreChunks:e,hasReviews:o})=>{let s="Finish Session";return e?s="Next Chunk":o&&(s="Start Reviews"),v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto flex flex-col h-full justify-center",children:[v.jsx("i",{className:"bi bi-patch-check-fill text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Chunk Complete!"}),v.jsx("p",{className:"mt-2 text-text-secondary",children:"Great work! You've learned this set of items."}),v.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsx("button",{onClick:t,className:"btn-secondary",children:"Finish for Now"}),v.jsx("button",{onClick:i,className:"btn-primary text-lg",children:s})]})]})},Ap=5,o0=({newCount:i,reviewCount:t,onStart:e})=>v.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto flex flex-col h-full justify-center",children:[v.jsx("i",{className:"bi bi-play-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),v.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Ready for your session?"}),v.jsxs("div",{className:"mt-4 text-lg space-y-2 text-text-secondary",children:[v.jsx("p",{children:"Today's plan:"}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-bold text-primary",children:i})," new items to learn"]}),v.jsxs("p",{children:[v.jsx("strong",{className:"font-bold text-accent",children:t})," items to review"]})]}),v.jsx("div",{className:"mt-8",children:v.jsx("button",{onClick:e,className:"btn-primary text-xl px-10 py-4",children:"Start Session"})})]}),s0=()=>{const{state:i,dispatch:t}=_t(),{state:e}=Wt(),{showConfirmation:o}=Mr(),[s,a]=b.useState("LOADING"),[f,m]=b.useState("STUDY"),[g,h]=b.useState([]),[x,_]=b.useState([]),[T,S]=b.useState(0),[k,M]=b.useState(0),[D,H]=b.useState([]),[$,q]=b.useState({learned:0,reviewed:0}),[J,K]=b.useState(0),Q=b.useMemo(()=>{const oe=new Date;oe.setHours(0,0,0,0);const U=i.reviewDeck.filter(N=>i.currentTextEntryId?N.textEntryId===i.currentTextEntryId||!N.textEntryId:!0),W=U.filter(N=>N.srsStage===0).sort((N,L)=>N.addedAt-L.addedAt),z=U.filter(N=>N.srsStage>0&&N.nextReviewDate<=oe.getTime()).sort((N,L)=>N.nextReviewDate-L.nextReviewDate);return{newItemsForSession:W.slice(0,e.newWordsPerDay),allDueReviewItems:z}},[i.reviewDeck,i.currentTextEntryId,e.newWordsPerDay]),te=b.useMemo(()=>{const U=i.reviewDeck.filter(z=>i.currentTextEntryId?z.textEntryId===i.currentTextEntryId||!z.textEntryId:!0).filter(z=>z.srsStage>0&&z.srsStage<9);if(U.length===0)return null;const W=U.map(z=>z.nextReviewDate);return Math.min(...W)},[i.reviewDeck,i.currentTextEntryId]),xe=b.useCallback(()=>{i.reviewDeck.filter(U=>i.currentTextEntryId?U.textEntryId===i.currentTextEntryId||!U.textEntryId:!0).length===0?a("EMPTY"):Q.newItemsForSession.length===0&&Q.allDueReviewItems.length===0?a("COMPLETE"):a("START")},[i.reviewDeck,i.currentTextEntryId,Q]);b.useEffect(()=>{if(s==="LOADING"||s!=="LEARNING"&&s!=="REVIEW"&&s!=="MANAGE"){const{newItemsForSession:oe,allDueReviewItems:U}=Q,W=[];for(let z=0;z<oe.length;z+=Ap)W.push(oe.slice(z,z+Ap));h(W),_(U),S(0),M(0),H([]),K(0),q({learned:0,reviewed:0}),m("STUDY"),xe()}},[Q,s,xe]);const se=()=>{i.currentTextEntryId?t({type:"SET_VIEW",payload:Le.Reader}):t({type:"RESET_VIEW"})},pe=()=>{g.length>0?a("LEARNING"):x.length>0?a("REVIEW"):a("COMPLETE")},Be=()=>{const oe=g[T];oe&&(H([...oe].sort(()=>.5-Math.random())),m("QUIZ"))},ye=(oe,U)=>{let W=[...D];if(U){const z=kp(oe,3);t({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:z}),q(N=>({...N,learned:N.learned+1})),W=W.filter(N=>N.id!==oe.id)}else W=W.filter(z=>z.id!==oe.id),W.push(oe);W.length===0?m("CHUNK_COMPLETE"):H(W)},Ne=()=>{T<g.length-1?(S(oe=>oe+1),M(0),m("STUDY")):x.length>0?a("REVIEW"):a("COMPLETE")},_e=oe=>{const U=x[J];if(!U)return;const W=kp(U,oe);t({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:W}),q(z=>({...z,reviewed:z.reviewed+1})),J+1<x.length?K(z=>z+1):a("COMPLETE")},je=oe=>{o("Are you sure you want to delete this item?",()=>{t({type:"REMOVE_REVIEW_ITEM",payload:oe})},{confirmText:"Delete"})},Ye=b.useMemo(()=>i.history.find(oe=>oe.id===i.currentTextEntryId),[i.history,i.currentTextEntryId]);switch(s){case"LOADING":return v.jsx("div",{className:"p-6 text-center text-text-muted",children:"Loading review session..."});case"START":return v.jsx(o0,{newCount:Q.newItemsForSession.length,reviewCount:Q.allDueReviewItems.length,onStart:pe});case"LEARNING":{const oe=g[T];if(!oe)return x.length>0?a("REVIEW"):a("COMPLETE"),null;switch(f){case"STUDY":return v.jsx(t0,{item:oe[k],onExit:se,currentIndex:k,totalInChunk:oe.length,onNext:()=>M(U=>U+1),onPrev:()=>M(U=>U-1),onStartQuiz:Be});case"QUIZ":{const U=D[0];return U?v.jsx(r0,{item:U,onExit:se,onAnswer:ye,remainingCount:D.length}):null}case"CHUNK_COMPLETE":return v.jsx(i0,{onContinue:Ne,onExit:se,hasMoreChunks:T<g.length-1,hasReviews:x.length>0})}}case"REVIEW":{const oe=x[J];return oe?v.jsx(YS,{item:oe,onReview:_e,onExit:se}):(a("COMPLETE"),null)}case"COMPLETE":return v.jsx(KS,{learnedCount:$.learned,reviewedCount:$.reviewed,onManage:()=>a("MANAGE"),onExit:se,nextReviewTimestamp:te});case"EMPTY":return v.jsx(ZS,{onManage:()=>a("MANAGE"),onExit:se});case"MANAGE":{const oe=i.reviewDeck.filter(W=>i.currentTextEntryId?W.textEntryId===i.currentTextEntryId||!W.textEntryId:!0),U=i.currentTextEntryId&&Ye?`Deck for "${Ye.title}"`:"Full Review Deck";return v.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto no-scrollbar",children:v.jsx(XS,{items:oe,onDelete:je,onExit:xe,title:U})})}default:return v.jsx("div",{className:"p-6 text-center text-text-muted",children:"An unexpected error occurred."})}};function l0({entry:i}){const{dispatch:t}=_t(),{dispatch:e}=nn(),{showConfirmation:o}=Mr(),s=()=>{e({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),t({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:i.id}),t({type:"SET_VIEW",payload:Le.Reader})},a=f=>{f.stopPropagation(),o(`Are you sure you want to delete "${i.title}"?`,()=>{t({type:"REMOVE_TEXT_ENTRY",payload:i.id})},{confirmText:"Delete"})};return v.jsxs("li",{className:"text-entry-item group p-4 hover:bg-surface-hover transition-colors flex justify-between items-center",children:[v.jsxs("div",{className:"flex-grow pr-4 truncate cursor-pointer",onClick:s,children:[v.jsx("span",{className:"font-medium text-sm pointer-events-none text-text-primary",title:i.title,children:i.title}),v.jsxs("span",{className:"block text-xs text-text-muted mt-1 pointer-events-none",children:["Updated: ",new Date(i.updatedAt).toLocaleString()]})]}),v.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:v.jsx("button",{className:"p-2 rounded-full hover:bg-destructive-subtle-bg text-destructive/70 hover:text-destructive transition-colors",title:"Delete Text",onClick:a,children:v.jsx("i",{className:"bi bi-trash3 text-xl"})})})]})}function a0(){const{state:i,dispatch:t}=_t(),{state:e,dispatch:o}=nn(),{showConfirmation:s}=Mr(),a=()=>o({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),f=()=>{i.history.length!==0&&s("Are you sure you want to delete all your saved texts? This cannot be undone.",()=>{t({type:"CLEAR_HISTORY"})},{confirmText:"Delete All"})};return e.isHistoryPanelOpen?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30 transition-opacity",onClick:a}),v.jsxs("div",{className:"fixed top-0 right-0 h-full w-full max-w-md glass-morphism shadow-2xl z-40 flex flex-col border-l border-border transition-transform duration-300 ease-in-out",style:{transform:"translateX(0%)"},children:[v.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-border flex-shrink-0",children:[v.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"My Texts"}),v.jsxs("div",{className:"flex items-center gap-2",children:[i.history.length>0&&v.jsx("button",{title:"Delete All Texts",className:"p-2 rounded-lg text-text-muted hover:bg-destructive-subtle-bg hover:text-destructive transition-colors",onClick:f,children:v.jsx("i",{className:"bi bi-trash3 text-xl"})}),v.jsx("button",{title:"Close Panel",className:"btn-ghost",onClick:a,children:v.jsx("i",{className:"bi bi-x-lg text-xl"})})]})]}),v.jsx("div",{className:"flex-grow overflow-y-auto no-scrollbar",children:i.history.length>0?v.jsx("ul",{className:"divide-y divide-border",children:i.history.map(m=>v.jsx(l0,{entry:m},m.id))}):v.jsxs("div",{className:"text-center p-8",children:[v.jsx("i",{className:"bi bi-file-earmark-text text-5xl text-text-muted/50 mx-auto mb-4","aria-hidden":"true"}),v.jsx("p",{className:"text-text-muted",children:"You have no saved texts yet."}),v.jsx("p",{className:"text-sm text-text-muted/70 mt-1",children:"Start by analyzing some Japanese text!"})]})})]})]}):null}const Go=({label:i,shortcut:t,checked:e,onChange:o,id:s})=>v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("label",{htmlFor:s,className:"text-sm font-medium text-text-secondary cursor-pointer",children:[i," ",t&&v.jsxs("span",{className:"text-xs text-text-muted",children:["(",t,")"]})]}),v.jsxs("label",{htmlFor:s,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-surface-subtle transition-colors focus-within:outline-none focus-within:ring-2 focus-within:ring-focus-ring focus-within:ring-offset-2 cursor-pointer",children:[v.jsx("input",{type:"checkbox",id:s,className:"sr-only peer",checked:e,onChange:o}),v.jsx("span",{className:"ml-1 inline-block h-4 w-4 transform rounded-full bg-surface transition-transform peer-checked:translate-x-5 peer-checked:bg-primary shadow-sm"})]})]});function u0({setIsOpen:i}){const{state:t,dispatch:e}=Wt(),{dispatch:o}=_t(),{showAlert:s,showConfirmation:a}=Mr(),f=b.useRef(null),[m,g]=b.useState(""),[h,x]=b.useState(!1);b.useEffect(()=>{const D=H=>{H.key==="Escape"&&i(!1)};return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[i]),b.useEffect(()=>{g(t.userApiKey||"")},[t.userApiKey]);const _=D=>{e({type:"UPDATE_SETTINGS",payload:D})},T=()=>{_({userApiKey:m}),s("API Key settings updated.")},S=async D=>{var q;const H=(q=D.target.files)==null?void 0:q[0];if(!H)return;const $=new FileReader;$.onload=J=>{var K;try{const Q=JSON.parse((K=J.target)==null?void 0:K.result);if(!Q.history||!Q.settings||!Q.reviewDeck)throw new Error("Invalid backup file structure.");a("Importing will overwrite your current history, review deck, and settings. Are you sure you want to continue?",async()=>{try{await Promise.all([fa(),Up()]),await Promise.all([...Q.history.map(te=>vr(te)),...Q.reviewDeck.map(te=>pa(te)),bp(Q.settings)]),o({type:"SET_HISTORY",payload:Q.history||[]}),o({type:"SET_REVIEW_DECK",payload:Q.reviewDeck||[]}),e({type:"UPDATE_SETTINGS",payload:Q.settings}),s("Import successful!",{onOk:()=>i(!1)}),o({type:"RESET_VIEW"})}catch(te){s(`Import failed during database operation: ${te instanceof Error?te.message:"Unknown error."}`,{onOk:()=>i(!1)})}},{confirmText:"Import",confirmClass:"bg-accent hover:bg-accent/90"})}catch(Q){s(`Import failed: ${Q instanceof Error?Q.message:"Could not read file."}`,{onOk:()=>i(!1)})}finally{D.target.value=""}},$.readAsText(H)},k=async()=>{try{const[D,H,$]=await Promise.all([Fp(),Vp(),ba()]),q={version:"3.0-indexeddb",exportedAt:Date.now(),history:D,reviewDeck:H,settings:$},J=JSON.stringify(q,null,2),K=new Blob([J],{type:"application/json"}),Q=URL.createObjectURL(K),te=document.createElement("a");te.href=Q;const xe=new Date().toISOString().split("T")[0];te.download=`japanese-analyzer-backup-${xe}.json`,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(Q)}catch(D){s(`Export failed: ${D instanceof Error?D.message:"Could not read data from database."}`)}},M=jd.indexOf(t.analysisDepth);return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-10",onClick:()=>i(!1)}),v.jsxs("div",{ref:f,className:"fixed top-20 right-4 flex flex-col w-[95vw] max-w-sm glass-morphism rounded-xl shadow-2xl ring-1 ring-border-subtle z-20 origin-top-right animate-fade-in max-h-[calc(100vh-12rem)]",children:[v.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-border-subtle flex-shrink-0",children:[v.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Settings"}),v.jsx("button",{onClick:()=>i(!1),className:"btn-ghost p-1",title:"Close Settings (Esc)",children:v.jsx("i",{className:"bi bi-x-lg text-xl"})})]}),v.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto no-scrollbar",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3",children:[v.jsx(Go,{id:"pitch-accent-checkbox",label:"Pitch Accent",checked:t.showPitchAccent,onChange:D=>_({showPitchAccent:D.target.checked})}),v.jsx(Go,{id:"furigana-checkbox",label:"Furigana",shortcut:"F",checked:t.showFurigana,onChange:D=>_({showFurigana:D.target.checked})}),v.jsx(Go,{id:"color-coding-checkbox",label:"POS Colors",shortcut:"C",checked:t.showColorCoding,onChange:D=>_({showColorCoding:D.target.checked})}),v.jsx(Go,{id:"theme-checkbox",label:"Dark Mode",checked:t.theme==="dark",onChange:D=>_({theme:D.target.checked?"dark":"light"})})]}),v.jsx("hr",{className:"border-border-subtle"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"analysis-depth-slider",className:"text-sm font-medium text-text-secondary",children:"Analysis Depth"}),v.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text capitalize",children:t.analysisDepth})]}),v.jsx("input",{type:"range",id:"analysis-depth-slider",min:"0",max:"2",step:"1",value:M,onChange:D=>_({analysisDepth:jd[parseInt(D.target.value)]}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"font-size-slider",className:"text-sm font-medium text-text-secondary",children:"Font Size"}),v.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:da[t.fontSizeIndex].label})]}),v.jsx("input",{type:"range",id:"font-size-slider",min:"0",max:da.length-1,step:"1",value:t.fontSizeIndex,onChange:D=>_({fontSizeIndex:parseInt(D.target.value)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"new-words-slider",className:"text-sm font-medium text-text-secondary",children:"New Words Per Day"}),v.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:t.newWordsPerDay})]}),v.jsx("input",{type:"range",id:"new-words-slider",min:"5",max:"50",step:"5",value:t.newWordsPerDay,onChange:D=>_({newWordsPerDay:parseInt(D.target.value,10)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]})]}),v.jsx("hr",{className:"border-border-subtle"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"API Key Management"}),v.jsxs("div",{className:"relative flex items-center",children:[v.jsx("input",{type:h?"text":"password",value:m,onChange:D=>g(D.target.value),placeholder:"Enter your Gemini API Key",className:"w-full rounded-lg border-border-subtle bg-surface-soft shadow-sm focus-ring text-sm px-4 py-2 pr-10","aria-label":"Gemini API Key"}),v.jsx("button",{type:"button",className:"absolute right-2 text-text-muted hover:text-text-primary p-1",onClick:()=>x(!h),title:h?"Hide key":"Show key",children:v.jsx("i",{className:`bi ${h?"bi-eye-slash":"bi-eye"} text-base`})})]}),v.jsx("div",{className:"flex gap-2 mt-2",children:v.jsxs("button",{onClick:T,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-primary/80 text-primary-text hover:bg-primary transition-colors inline-flex items-center justify-center gap-2",children:[v.jsx("i",{className:"bi bi-save text-base"}),"Save Key"]})}),v.jsxs("p",{className:"text-xs text-text-muted mt-2 px-1",children:[t.userApiKey?"Using your custom API key.":"Using the default application key.","Your key is stored in your browser's database."]})]}),v.jsx("hr",{className:"border-border-subtle"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"Data Management"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:k,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors inline-flex items-center justify-center gap-2",children:[v.jsx("i",{className:"bi bi-download text-base"}),"Export"]}),v.jsxs("label",{className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors cursor-pointer inline-flex items-center justify-center gap-2",children:[v.jsx("i",{className:"bi bi-upload text-base"}),"Import",v.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:S})]})]})]})]})]})]})}function c0(){const{state:i,dispatch:t}=_t(),{state:e,dispatch:o}=Wt(),{state:s}=nn();b.useEffect(()=>{const a=f=>{var h,x,_,T,S,k,M,D,H;const m=f.target;if(["INPUT","TEXTAREA"].includes(m.tagName)||m.isContentEditable)return;switch(f.key.toLowerCase()==="f"&&(f.preventDefault(),o({type:"UPDATE_SETTINGS",payload:{showFurigana:!e.showFurigana}})),f.key.toLowerCase()==="c"&&(f.preventDefault(),o({type:"UPDATE_SETTINGS",payload:{showColorCoding:!e.showColorCoding}})),i.view){case Le.Review:f.key==="Escape"&&(f.preventDefault(),(h=document.querySelector('[data-action="review-exit"]'))==null||h.click());const $=document.querySelector('[data-action="review-show-answer"]');$&&(f.code==="Space"||f.key===" ")&&(f.preventDefault(),$.click()),$||(f.key==="1"?(f.preventDefault(),(x=document.querySelector('[data-action="review-quality-1"]'))==null||x.click()):f.key==="2"?(f.preventDefault(),(_=document.querySelector('[data-action="review-quality-2"]'))==null||_.click()):f.key==="3"?(f.preventDefault(),(T=document.querySelector('[data-action="review-quality-3"]'))==null||T.click()):f.key==="4"&&(f.preventDefault(),(S=document.querySelector('[data-action="review-quality-4"]'))==null||S.click()));return;case Le.ReadingMode:f.key==="ArrowRight"?(f.preventDefault(),(k=document.querySelector("#reading-nav-next"))==null||k.click()):f.key==="ArrowLeft"&&(f.preventDefault(),(M=document.querySelector("#reading-nav-prev"))==null||M.click());break}if(i.view===Le.Reader||i.view===Le.ReadingMode){if(f.key.toLowerCase()==="t"){const $=document.querySelector("#toggle-translation-button");$&&(f.preventDefault(),$.click())}if(f.key.toLowerCase()==="s"){const $=document.querySelector(".tts-button");$&&(f.preventDefault(),$.click())}}const g=document.querySelector(".analysis-view-container, .reading-mode-view");if(g){const $=g.querySelector(".is-focused");f.key==="Escape"&&$&&(f.preventDefault(),$.classList.remove("is-focused","ring-2","ring-focus-ring","bg-surface-soft"),g.querySelectorAll(".segment").forEach(J=>J.classList.remove("opacity-30")));const q=Array.from(g.querySelectorAll("[data-pattern-id]"));if(q.length>0){const J=q.findIndex(K=>K.classList.contains("is-focused"));if(f.key.toLowerCase()==="j"||f.key.toLowerCase()==="k"){f.preventDefault();let K=J===-1?0:f.key==="j"?J+1:J-1;K>=q.length&&(K=0),K<0&&(K=q.length-1),(D=q[K])==null||D.click()}f.key.toLowerCase()==="e"&&$&&(f.preventDefault(),(H=$.querySelector(".show-examples-button"))==null||H.click())}}};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[i,e,t,o])}function d0(){const{state:i,dispatch:t}=nn(),{visible:e,content:o,position:s,pinned:a,targetElement:f}=i.tooltip,m=b.useRef(null);b.useEffect(()=>{if(!e||!a)return;const x=_=>{f&&f.contains(_.target)||m.current&&m.current.contains(_.target)||t({type:"HIDE_TOOLTIP"})};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[e,a,f,t]);const g=()=>{},h=()=>{i.tooltip.pinned||t({type:"HIDE_TOOLTIP"})};return e?os.createPortal(v.jsx("div",{ref:m,className:"fixed z-50 max-w-sm rounded-xl glass-morphism border border-border/50 shadow-2xl p-4 text-base transition-all duration-200 max-h-96 overflow-y-auto no-scrollbar",style:{left:`${s.left}px`,top:`${s.top}px`,opacity:1},onMouseOver:g,onMouseOut:h,children:o}),document.body):null}const f0=()=>{const{state:i,dispatch:t}=nn(),{visible:e,content:o,targetElement:s}=i.bottomSheet,a=b.useRef(null),[f,m]=b.useState(!1),[g,h]=b.useState(!1);b.useEffect(()=>{if(e){m(!0);const T=setTimeout(()=>{h(!0)},50);return()=>clearTimeout(T)}else h(!1)},[e]);const x=T=>{T.target===a.current&&T.propertyName==="transform"&&!g&&!e&&m(!1)},_=()=>{t({type:"HIDE_BOTTOM_SHEET"})};return b.useEffect(()=>{const T=k=>{k.target.closest(".segment")||a.current&&!a.current.contains(k.target)&&_()},S=k=>{k.key==="Escape"&&_()};return f&&e&&(document.addEventListener("mousedown",T),document.addEventListener("keydown",S)),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("keydown",S)}},[f,e]),b.useEffect(()=>{const T=document.querySelector(".segment-bottom-sheet-active");T&&T.classList.remove("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active"),s&&e&&s.classList.add("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active")},[s,e]),f?os.createPortal(v.jsxs(v.Fragment,{children:[v.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm z-10 transition-opacity duration-300 md:hidden ${g?"opacity-100":"opacity-0"}`,onClick:_,"aria-hidden":"true"}),v.jsxs("div",{ref:a,className:`fixed bottom-0 left-0 right-0 z-20 bg-surface border-t border-border rounded-t-2xl shadow-2xl-top transition-transform duration-300 ease-in-out max-h-[60vh] flex flex-col md:hidden ${g?"translate-y-0":"translate-y-full"}`,onTransitionEnd:x,children:[v.jsxs("header",{className:"flex-shrink-0 py-3 px-4 border-b border-border-subtle relative text-center",children:[v.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-10 h-1.5 bg-border rounded-full","aria-hidden":"true"}),v.jsx("h3",{className:"font-semibold text-lg text-text-primary font-japanese mt-2",children:o.title}),v.jsx("button",{title:"Close details (Esc)",className:"btn-ghost absolute top-1.5 right-2",onClick:_,children:v.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),v.jsx("div",{className:"p-4 overflow-y-auto no-scrollbar flex-grow",children:o.body})]})]}),document.body):null};function p0(){const{state:i}=_t(),{state:t}=nn(),[e,o]=b.useState(!1),s=b.useCallback(()=>{const f=i.view===Le.ReadingMode,m=i.view===Le.Review;let g=!1;if(!m&&!t.bottomSheet.visible){if(f)g=window.scrollY>window.innerHeight/2;else if(i.view===Le.Reader&&i.selectedSentence){const h=document.getElementById("reader-view-text-container");if(h){const x=h.getBoundingClientRect();g=!(x.bottom>0&&x.top<window.innerHeight)}}}o(g)},[i.view,i.selectedSentence,t.bottomSheet.visible]);b.useEffect(()=>(window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)),[s]),b.useEffect(()=>{s()},[i.view,i.selectedSentence,t.bottomSheet.visible]);const a=()=>{if(i.view===Le.ReadingMode)window.scrollTo({top:0,behavior:"smooth"});else if(i.view===Le.Reader&&i.selectedSentence){const f=document.querySelector(".clickable-sentence.selected");f==null||f.scrollIntoView({behavior:"smooth",block:"center"})}};return e?os.createPortal(v.jsx("button",{className:`fixed bottom-5 right-5 w-12 h-12 bg-accent text-primary-text rounded-full shadow-lg flex items-center justify-center text-2xl font-bold transition-all duration-300 hover:bg-accent/90 z-50 ${e?"opacity-100 visible translate-y-0":"opacity-0 invisible translate-y-5"}`,onClick:a,title:i.view===Le.ReadingMode?"Scroll to top":"Back to analyzed sentence",children:"⇧"}),document.body):null}function m0(){const{state:i,dispatch:t}=_t(),{dispatch:e}=nn(),[o,s]=b.useState(!1),a=i.reviewDeck.filter(m=>{if(i.currentTextEntryId&&m.textEntryId&&m.textEntryId!==i.currentTextEntryId)return!1;const g=new Date;return g.setHours(0,0,0,0),m.nextReviewDate<=g.getTime()}).length,f=()=>{i.currentTextEntryId?t({type:"SET_VIEW",payload:Le.Reader}):t({type:"RESET_VIEW"})};return v.jsxs("header",{id:"app-header",className:"flex justify-between items-center px-4 py-3 border-b border-border bg-gradient-to-r from-background to-surface md:rounded-t-2xl flex-shrink-0",children:[v.jsx("div",{className:"flex items-center gap-4",children:v.jsx("button",{onClick:f,title:"Return to main screen",className:"px-4 py-1 bg-gradient-to-br from-primary to-purple-600 rounded-xl flex items-center justify-center shadow-lg focus-ring hover-lift",children:v.jsx("span",{className:"font-japanese font-bold text-primary-text text-xl select-none dark:text-white",children:"積読"})})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{title:"New Text",className:"btn-ghost",onClick:()=>t({type:"RESET_VIEW"}),children:v.jsx("i",{className:"bi bi-plus-lg text-xl"})}),v.jsx("button",{title:"My Texts",className:"btn-ghost",onClick:()=>e({type:"SET_HISTORY_PANEL_OPEN",payload:!0}),children:v.jsx("i",{className:"bi bi-clock-history text-xl"})}),v.jsx("div",{className:"relative",children:v.jsxs("button",{title:"Review Deck",className:"btn-ghost",onClick:()=>t({type:"SET_VIEW",payload:Le.Review}),children:[v.jsx("i",{className:"bi bi-stack text-xl"}),a>0&&v.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs rounded-full h-4 w-4 flex items-center justify-center pointer-events-none transition-opacity",children:a})]})}),v.jsxs("div",{children:[v.jsx("button",{title:"Settings",className:"btn-ghost",onClick:()=>s(m=>!m),children:v.jsx("i",{className:"bi bi-gear text-xl"})}),o&&v.jsx(u0,{setIsOpen:s})]})]})]})}function Rm(){const{state:i}=_t(),{state:t}=Wt();if(c0(),b.useEffect(()=>{LS()},[]),i.isLoading||t.isLoading)return v.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background",children:v.jsxs("div",{className:"text-center",children:[v.jsx("i",{className:"bi bi-arrow-repeat text-4xl text-text-muted animate-spin"}),v.jsx("p",{className:"mt-4 text-text-muted",children:"Loading application data..."})]})});const e=()=>{switch(i.view){case Le.Editor:return v.jsx(Zd,{});case Le.Reader:return v.jsx(qS,{});case Le.ReadingMode:return v.jsx(HS,{});case Le.Review:return v.jsx(s0,{});default:return v.jsx(Zd,{})}},o=i.view===Le.ReadingMode;return v.jsxs("div",{className:`w-full h-full flex flex-col ${o?"":"md:container md:mx-auto md:px-4 md:py-6"}`,children:[v.jsxs("main",{id:"app",className:`bg-surface w-full flex-grow flex flex-col min-h-0 ${o?"":"md:rounded-2xl md:shadow-xl md:border border-border md:overflow-hidden"}`,children:[i.view!==Le.ReadingMode&&v.jsx(m0,{}),e()]}),v.jsx(a0,{}),v.jsx(d0,{}),v.jsx(f0,{}),v.jsx(p0,{})]})}function h0(){return v.jsx(Hp,{children:v.jsx(Wp,{children:v.jsx(Bp,{children:v.jsx(Yp,{children:v.jsx(Rm,{})})})})})}const g0=Mp.createRoot(document.getElementById("root"));g0.render(v.jsx(h0,{}));function y0(){return v.jsx(Hp,{children:v.jsx(Wp,{children:v.jsx(Bp,{children:v.jsx(Yp,{children:v.jsx(Rm,{})})})})})}const v0=Mp.createRoot(document.getElementById("root"));v0.render(v.jsx(y0,{}));
