(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function l(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(s){if(s.ep)return;s.ep=!0;const f=l(s);fetch(s.href,f)}})();function Yx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ku={exports:{}},Eo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function Jx(){if(vp)return Eo;vp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function l(o,s,f){var m=null;if(f!==void 0&&(m=""+f),s.key!==void 0&&(m=""+s.key),"key"in s){f={};for(var h in s)h!=="key"&&(f[h]=s[h])}else f=s;return s=f.ref,{$$typeof:t,type:o,key:m,ref:s!==void 0?s:null,props:f}}return Eo.Fragment=e,Eo.jsx=l,Eo.jsxs=l,Eo}var xp;function Zx(){return xp||(xp=1,ku.exports=Jx()),ku.exports}var x=Zx(),Lu={exports:{}},Ao={},Vu={exports:{}},Pu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function Kx(){return Tp||(Tp=1,function(t){function e(P,X){var re=P.length;P.push(X);e:for(;0<re;){var ie=re-1>>>1,A=P[ie];if(0<s(A,X))P[ie]=X,P[re]=A,re=ie;else break e}}function l(P){return P.length===0?null:P[0]}function o(P){if(P.length===0)return null;var X=P[0],re=P.pop();if(re!==X){P[0]=re;e:for(var ie=0,A=P.length,V=A>>>1;ie<V;){var J=2*(ie+1)-1,$=P[J],ue=J+1,me=P[ue];if(0>s($,re))ue<A&&0>s(me,$)?(P[ie]=me,P[ue]=re,ie=ue):(P[ie]=$,P[J]=re,ie=J);else if(ue<A&&0>s(me,re))P[ie]=me,P[ue]=re,ie=ue;else break e}}return X}function s(P,X){var re=P.sortIndex-X.sortIndex;return re!==0?re:P.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var m=Date,h=m.now();t.unstable_now=function(){return m.now()-h}}var y=[],p=[],v=1,_=null,C=3,b=!1,N=!1,k=!1,L=!1,F=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function Q(P){for(var X=l(p);X!==null;){if(X.callback===null)o(p);else if(X.startTime<=P)o(p),X.sortIndex=X.expirationTime,e(y,X);else break;X=l(p)}}function B(P){if(k=!1,Q(P),!N)if(l(y)!==null)N=!0,j||(j=!0,se());else{var X=l(p);X!==null&&Ee(B,X.startTime-P)}}var j=!1,W=-1,Se=5,K=-1;function pe(){return L?!0:!(t.unstable_now()-K<Se)}function ce(){if(L=!1,j){var P=t.unstable_now();K=P;var X=!0;try{e:{N=!1,k&&(k=!1,Y(W),W=-1),b=!0;var re=C;try{t:{for(Q(P),_=l(y);_!==null&&!(_.expirationTime>P&&pe());){var ie=_.callback;if(typeof ie=="function"){_.callback=null,C=_.priorityLevel;var A=ie(_.expirationTime<=P);if(P=t.unstable_now(),typeof A=="function"){_.callback=A,Q(P),X=!0;break t}_===l(y)&&o(y),Q(P)}else o(y);_=l(y)}if(_!==null)X=!0;else{var V=l(p);V!==null&&Ee(B,V.startTime-P),X=!1}}break e}finally{_=null,C=re,b=!1}X=void 0}}finally{X?se():j=!1}}}var se;if(typeof H=="function")se=function(){H(ce)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Ge=He.port2;He.port1.onmessage=ce,se=function(){Ge.postMessage(null)}}else se=function(){F(ce,0)};function Ee(P,X){W=F(function(){P(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(P){switch(C){case 1:case 2:case 3:var X=3;break;default:X=C}var re=C;C=X;try{return P()}finally{C=re}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var re=C;C=P;try{return X()}finally{C=re}},t.unstable_scheduleCallback=function(P,X,re){var ie=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,P){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=re+A,P={id:v++,callback:X,priorityLevel:P,startTime:re,expirationTime:A,sortIndex:-1},re>ie?(P.sortIndex=re,e(p,P),l(y)===null&&P===l(p)&&(k?(Y(W),W=-1):k=!0,Ee(B,re-ie))):(P.sortIndex=A,e(y,P),N||b||(N=!0,j||(j=!0,se()))),P},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(P){var X=C;return function(){var re=C;C=X;try{return P.apply(this,arguments)}finally{C=re}}}}(Pu)),Pu}var _p;function $x(){return _p||(_p=1,Vu.exports=Kx()),Vu.exports}var qu={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function Xx(){if(Sp)return xe;Sp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function C(A){return A===null||typeof A!="object"?null:(A=_&&A[_]||A["@@iterator"],typeof A=="function"?A:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function L(A,V,J){this.props=A,this.context=V,this.refs=k,this.updater=J||b}L.prototype.isReactComponent={},L.prototype.setState=function(A,V){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,V,"setState")},L.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function F(){}F.prototype=L.prototype;function Y(A,V,J){this.props=A,this.context=V,this.refs=k,this.updater=J||b}var H=Y.prototype=new F;H.constructor=Y,N(H,L.prototype),H.isPureReactComponent=!0;var Q=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function W(A,V,J,$,ue,me){return J=me.ref,{$$typeof:t,type:A,key:V,ref:J!==void 0?J:null,props:me}}function Se(A,V){return W(A.type,V,void 0,void 0,void 0,A.props)}function K(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function pe(A){var V={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(J){return V[J]})}var ce=/\/+/g;function se(A,V){return typeof A=="object"&&A!==null&&A.key!=null?pe(""+A.key):V.toString(36)}function He(){}function Ge(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(He,He):(A.status="pending",A.then(function(V){A.status==="pending"&&(A.status="fulfilled",A.value=V)},function(V){A.status==="pending"&&(A.status="rejected",A.reason=V)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function Ee(A,V,J,$,ue){var me=typeof A;(me==="undefined"||me==="boolean")&&(A=null);var he=!1;if(A===null)he=!0;else switch(me){case"bigint":case"string":case"number":he=!0;break;case"object":switch(A.$$typeof){case t:case e:he=!0;break;case v:return he=A._init,Ee(he(A._payload),V,J,$,ue)}}if(he)return ue=ue(A),he=$===""?"."+se(A,0):$,Q(ue)?(J="",he!=null&&(J=he.replace(ce,"$&/")+"/"),Ee(ue,V,J,"",function(Sn){return Sn})):ue!=null&&(K(ue)&&(ue=Se(ue,J+(ue.key==null||A&&A.key===ue.key?"":(""+ue.key).replace(ce,"$&/")+"/")+he)),V.push(ue)),1;he=0;var Tt=$===""?".":$+":";if(Q(A))for(var Fe=0;Fe<A.length;Fe++)$=A[Fe],me=Tt+se($,Fe),he+=Ee($,V,J,me,ue);else if(Fe=C(A),typeof Fe=="function")for(A=Fe.call(A),Fe=0;!($=A.next()).done;)$=$.value,me=Tt+se($,Fe++),he+=Ee($,V,J,me,ue);else if(me==="object"){if(typeof A.then=="function")return Ee(Ge(A),V,J,$,ue);throw V=String(A),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return he}function P(A,V,J){if(A==null)return A;var $=[],ue=0;return Ee(A,$,"","",function(me){return V.call(J,me,ue++)}),$}function X(A){if(A._status===-1){var V=A._result;V=V(),V.then(function(J){(A._status===0||A._status===-1)&&(A._status=1,A._result=J)},function(J){(A._status===0||A._status===-1)&&(A._status=2,A._result=J)}),A._status===-1&&(A._status=0,A._result=V)}if(A._status===1)return A._result.default;throw A._result}var re=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function ie(){}return xe.Children={map:P,forEach:function(A,V,J){P(A,function(){V.apply(this,arguments)},J)},count:function(A){var V=0;return P(A,function(){V++}),V},toArray:function(A){return P(A,function(V){return V})||[]},only:function(A){if(!K(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},xe.Component=L,xe.Fragment=l,xe.Profiler=s,xe.PureComponent=Y,xe.StrictMode=o,xe.Suspense=y,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,xe.__COMPILER_RUNTIME={__proto__:null,c:function(A){return B.H.useMemoCache(A)}},xe.cache=function(A){return function(){return A.apply(null,arguments)}},xe.cloneElement=function(A,V,J){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var $=N({},A.props),ue=A.key,me=void 0;if(V!=null)for(he in V.ref!==void 0&&(me=void 0),V.key!==void 0&&(ue=""+V.key),V)!j.call(V,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&V.ref===void 0||($[he]=V[he]);var he=arguments.length-2;if(he===1)$.children=J;else if(1<he){for(var Tt=Array(he),Fe=0;Fe<he;Fe++)Tt[Fe]=arguments[Fe+2];$.children=Tt}return W(A.type,ue,void 0,void 0,me,$)},xe.createContext=function(A){return A={$$typeof:m,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:f,_context:A},A},xe.createElement=function(A,V,J){var $,ue={},me=null;if(V!=null)for($ in V.key!==void 0&&(me=""+V.key),V)j.call(V,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ue[$]=V[$]);var he=arguments.length-2;if(he===1)ue.children=J;else if(1<he){for(var Tt=Array(he),Fe=0;Fe<he;Fe++)Tt[Fe]=arguments[Fe+2];ue.children=Tt}if(A&&A.defaultProps)for($ in he=A.defaultProps,he)ue[$]===void 0&&(ue[$]=he[$]);return W(A,me,void 0,void 0,null,ue)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(A){return{$$typeof:h,render:A}},xe.isValidElement=K,xe.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:X}},xe.memo=function(A,V){return{$$typeof:p,type:A,compare:V===void 0?null:V}},xe.startTransition=function(A){var V=B.T,J={};B.T=J;try{var $=A(),ue=B.S;ue!==null&&ue(J,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(ie,re)}catch(me){re(me)}finally{B.T=V}},xe.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},xe.use=function(A){return B.H.use(A)},xe.useActionState=function(A,V,J){return B.H.useActionState(A,V,J)},xe.useCallback=function(A,V){return B.H.useCallback(A,V)},xe.useContext=function(A){return B.H.useContext(A)},xe.useDebugValue=function(){},xe.useDeferredValue=function(A,V){return B.H.useDeferredValue(A,V)},xe.useEffect=function(A,V,J){var $=B.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(A,V)},xe.useId=function(){return B.H.useId()},xe.useImperativeHandle=function(A,V,J){return B.H.useImperativeHandle(A,V,J)},xe.useInsertionEffect=function(A,V){return B.H.useInsertionEffect(A,V)},xe.useLayoutEffect=function(A,V){return B.H.useLayoutEffect(A,V)},xe.useMemo=function(A,V){return B.H.useMemo(A,V)},xe.useOptimistic=function(A,V){return B.H.useOptimistic(A,V)},xe.useReducer=function(A,V,J){return B.H.useReducer(A,V,J)},xe.useRef=function(A){return B.H.useRef(A)},xe.useState=function(A){return B.H.useState(A)},xe.useSyncExternalStore=function(A,V,J){return B.H.useSyncExternalStore(A,V,J)},xe.useTransition=function(){return B.H.useTransition()},xe.version="19.1.0",xe}var Cp;function dc(){return Cp||(Cp=1,qu.exports=Xx()),qu.exports}var Gu={exports:{}},ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function Qx(){if(Ep)return ft;Ep=1;var t=dc();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(e(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},s=Symbol.for("react.portal");function f(y,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:y,containerInfo:p,implementation:v}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ft.createPortal=function(y,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return f(y,p,null,v)},ft.flushSync=function(y){var p=m.T,v=o.p;try{if(m.T=null,o.p=2,y)return y()}finally{m.T=p,o.p=v,o.d.f()}},ft.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(y,p))},ft.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},ft.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),C=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?o.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:C,fetchPriority:b}):v==="script"&&o.d.X(y,{crossOrigin:_,integrity:C,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ft.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(y)},ft.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);o.d.L(y,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ft.preloadModule=function(y,p){if(typeof y=="string")if(p){var v=h(p.as,p.crossOrigin);o.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(y)},ft.requestFormReset=function(y){o.d.r(y)},ft.unstable_batchedUpdates=function(y,p){return y(p)},ft.useFormState=function(y,p,v){return m.H.useFormState(y,p,v)},ft.useFormStatus=function(){return m.H.useHostTransitionStatus()},ft.version="19.1.0",ft}var Ap;function gg(){if(Ap)return Gu.exports;Ap=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gu.exports=Qx(),Gu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function Wx(){if(bp)return Ao;bp=1;var t=$x(),e=dc(),l=gg();function o(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function f(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function m(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(f(n)!==n)throw Error(o(188))}function y(n){var i=n.alternate;if(!i){if(i=f(n),i===null)throw Error(o(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return h(d),n;if(g===c)return h(d),i;g=g.sibling}throw Error(o(188))}if(a.return!==c.return)a=d,c=g;else{for(var T=!1,S=d.child;S;){if(S===a){T=!0,a=d,c=g;break}if(S===c){T=!0,c=d,a=g;break}S=S.sibling}if(!T){for(S=g.child;S;){if(S===a){T=!0,a=g,c=d;break}if(S===c){T=!0,c=g,a=d;break}S=S.sibling}if(!T)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),H=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=ce&&n[ce]||n["@@iterator"],typeof n=="function"?n:null)}var He=Symbol.for("react.client.reference");function Ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===He?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case L:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case j:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case H:return(n.displayName||"Context")+".Provider";case Y:return(n._context.displayName||"Context")+".Consumer";case Q:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case W:return i=n.displayName||null,i!==null?i:Ge(n.type)||"Memo";case Se:i=n._payload,n=n._init;try{return Ge(n(i))}catch{}}return null}var Ee=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],A=-1;function V(n){return{current:n}}function J(n){0>A||(n.current=ie[A],ie[A]=null,A--)}function $(n,i){A++,ie[A]=n.current,n.current=i}var ue=V(null),me=V(null),he=V(null),Tt=V(null);function Fe(n,i){switch($(he,i),$(me,n),$(ue,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Jm(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Jm(i),n=Zm(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ue),$(ue,n)}function Sn(){J(ue),J(me),J(he)}function xs(n){n.memoizedState!==null&&$(Tt,n);var i=ue.current,a=Zm(i,n.type);i!==a&&($(me,n),$(ue,a))}function ko(n){me.current===n&&(J(ue),J(me)),Tt.current===n&&(J(Tt),xo._currentValue=re)}var Ts=Object.prototype.hasOwnProperty,_s=t.unstable_scheduleCallback,Ss=t.unstable_cancelCallback,Cy=t.unstable_shouldYield,Ey=t.unstable_requestPaint,Jt=t.unstable_now,Ay=t.unstable_getCurrentPriorityLevel,Ac=t.unstable_ImmediatePriority,bc=t.unstable_UserBlockingPriority,Lo=t.unstable_NormalPriority,by=t.unstable_LowPriority,Mc=t.unstable_IdlePriority,My=t.log,Ny=t.unstable_setDisableYieldValue,bl=null,_t=null;function Cn(n){if(typeof My=="function"&&Ny(n),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(bl,n)}catch{}}var St=Math.clz32?Math.clz32:Dy,Ry=Math.log,wy=Math.LN2;function Dy(n){return n>>>=0,n===0?32:31-(Ry(n)/wy|0)|0}var Vo=256,Po=4194304;function Xn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qo(n,i,a){var c=n.pendingLanes;if(c===0)return 0;var d=0,g=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~g,c!==0?d=Xn(c):(T&=S,T!==0?d=Xn(T):a||(a=S&~n,a!==0&&(d=Xn(a))))):(S=c&~g,S!==0?d=Xn(S):T!==0?d=Xn(T):a||(a=c&~n,a!==0&&(d=Xn(a)))),d===0?0:i!==0&&i!==d&&(i&g)===0&&(g=d&-d,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:d}function Ml(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Iy(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nc(){var n=Vo;return Vo<<=1,(Vo&4194048)===0&&(Vo=256),n}function Rc(){var n=Po;return Po<<=1,(Po&62914560)===0&&(Po=4194304),n}function Cs(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Nl(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Uy(n,i,a,c,d,g){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,E=n.expirationTimes,D=n.hiddenUpdates;for(a=T&~a;0<a;){var q=31-St(a),O=1<<q;S[q]=0,E[q]=-1;var I=D[q];if(I!==null)for(D[q]=null,q=0;q<I.length;q++){var U=I[q];U!==null&&(U.lane&=-536870913)}a&=~O}c!==0&&wc(n,c,0),g!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=g&~(T&~i))}function wc(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-St(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function Dc(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-St(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}function Es(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function As(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ic(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:dp(n.type))}function ky(n,i){var a=X.p;try{return X.p=n,i()}finally{X.p=a}}var En=Math.random().toString(36).slice(2),ut="__reactFiber$"+En,ht="__reactProps$"+En,_i="__reactContainer$"+En,bs="__reactEvents$"+En,Ly="__reactListeners$"+En,Vy="__reactHandles$"+En,Uc="__reactResources$"+En,Rl="__reactMarker$"+En;function Ms(n){delete n[ut],delete n[ht],delete n[bs],delete n[Ly],delete n[Vy]}function Si(n){var i=n[ut];if(i)return i;for(var a=n.parentNode;a;){if(i=a[_i]||a[ut]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Qm(n);n!==null;){if(a=n[ut])return a;n=Qm(n)}return i}n=a,a=n.parentNode}return null}function Ci(n){if(n=n[ut]||n[_i]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function wl(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(o(33))}function Ei(n){var i=n[Uc];return i||(i=n[Uc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function nt(n){n[Rl]=!0}var kc=new Set,Lc={};function Qn(n,i){Ai(n,i),Ai(n+"Capture",i)}function Ai(n,i){for(Lc[n]=i,n=0;n<i.length;n++)kc.add(i[n])}var Py=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vc={},Pc={};function qy(n){return Ts.call(Pc,n)?!0:Ts.call(Vc,n)?!1:Py.test(n)?Pc[n]=!0:(Vc[n]=!0,!1)}function Go(n,i,a){if(qy(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Oo(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function nn(n,i,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+c)}}var Ns,qc;function bi(n){if(Ns===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ns=i&&i[1]||"",qc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ns+n+qc}var Rs=!1;function ws(n,i){if(!n||Rs)return"";Rs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(U){var I=U}Reflect.construct(n,[],O)}else{try{O.call()}catch(U){I=U}n.call(O.prototype)}}else{try{throw Error()}catch(U){I=U}(O=n())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(U){if(U&&I&&typeof U.stack=="string")return[U.stack,I.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],S=g[1];if(T&&S){var E=T.split(`
`),D=S.split(`
`);for(d=c=0;c<E.length&&!E[c].includes("DetermineComponentFrameRoot");)c++;for(;d<D.length&&!D[d].includes("DetermineComponentFrameRoot");)d++;if(c===E.length||d===D.length)for(c=E.length-1,d=D.length-1;1<=c&&0<=d&&E[c]!==D[d];)d--;for(;1<=c&&0<=d;c--,d--)if(E[c]!==D[d]){if(c!==1||d!==1)do if(c--,d--,0>d||E[c]!==D[d]){var q=`
`+E[c].replace(" at new "," at ");return n.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",n.displayName)),q}while(1<=c&&0<=d);break}}}finally{Rs=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?bi(a):""}function Gy(n){switch(n.tag){case 26:case 27:case 5:return bi(n.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return ws(n.type,!1);case 11:return ws(n.type.render,!1);case 1:return ws(n.type,!0);case 31:return bi("Activity");default:return""}}function Gc(n){try{var i="";do i+=Gy(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Dt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oc(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Oy(n){var i=Oc(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Bo(n){n._valueTracker||(n._valueTracker=Oy(n))}function Bc(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Oc(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function zo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var By=/[\n"\\]/g;function It(n){return n.replace(By,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ds(n,i,a,c,d,g,T,S){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),i!=null?T==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Dt(i)):n.value!==""+Dt(i)&&(n.value=""+Dt(i)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),i!=null?Is(n,T,Dt(i)):a!=null?Is(n,T,Dt(a)):c!=null&&n.removeAttribute("value"),d==null&&g!=null&&(n.defaultChecked=!!g),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Dt(S):n.removeAttribute("name")}function zc(n,i,a,c,d,g,T,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;a=a!=null?""+Dt(a):"",i=i!=null?""+Dt(i):a,S||i===n.value||(n.value=i),n.defaultValue=i}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Is(n,i,a){i==="number"&&zo(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Mi(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Dt(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Hc(n,i,a){if(i!=null&&(i=""+Dt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Dt(a):""}function Fc(n,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(o(92));if(Ee(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=Dt(i),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Ni(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var zy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(n,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,a):typeof a!="number"||a===0||zy.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Jc(n,i,a){if(i!=null&&typeof i!="object")throw Error(o(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in i)c=i[d],i.hasOwnProperty(d)&&a[d]!==c&&Yc(n,d,c)}else for(var g in i)i.hasOwnProperty(g)&&Yc(n,g,i[g])}function Us(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(n){return Fy.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ks=null;function Ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ri=null,wi=null;function Zc(n){var i=Ci(n);if(i&&(n=i.stateNode)){var a=n[ht]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ds(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+It(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=c[ht]||null;if(!d)throw Error(o(90));Ds(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===n.form&&Bc(c)}break e;case"textarea":Hc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Mi(n,!!a.multiple,i,!1)}}}var Vs=!1;function Kc(n,i,a){if(Vs)return n(i,a);Vs=!0;try{var c=n(i);return c}finally{if(Vs=!1,(Ri!==null||wi!==null)&&(Na(),Ri&&(i=Ri,n=wi,wi=Ri=null,Zc(i),n)))for(i=0;i<n.length;i++)Zc(n[i])}}function Dl(n,i){var a=n.stateNode;if(a===null)return null;var c=a[ht]||null;if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,i,typeof a));return a}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(ln)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Ps=!1}var An=null,qs=null,Fo=null;function $c(){if(Fo)return Fo;var n,i=qs,a=i.length,c,d="value"in An?An.value:An.textContent,g=d.length;for(n=0;n<a&&i[n]===d[n];n++);var T=a-n;for(c=1;c<=T&&i[a-c]===d[g-c];c++);return Fo=d.slice(n,1<c?1-c:void 0)}function Yo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Jo(){return!0}function Xc(){return!1}function gt(n){function i(a,c,d,g,T){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Jo:Xc,this.isPropagationStopped=Xc,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),i}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=gt(Wn),Ul=v({},Wn,{view:0,detail:0}),Yy=gt(Ul),Gs,Os,kl,Ko=v({},Ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==kl&&(kl&&n.type==="mousemove"?(Gs=n.screenX-kl.screenX,Os=n.screenY-kl.screenY):Os=Gs=0,kl=n),Gs)},movementY:function(n){return"movementY"in n?n.movementY:Os}}),Qc=gt(Ko),Jy=v({},Ko,{dataTransfer:0}),Zy=gt(Jy),Ky=v({},Ul,{relatedTarget:0}),Bs=gt(Ky),$y=v({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xy=gt($y),Qy=v({},Wn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wy=gt(Qy),jy=v({},Wn,{data:0}),Wc=gt(jy),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iv(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=nv[n])?!!i[n]:!1}function zs(){return iv}var lv=v({},Ul,{key:function(n){if(n.key){var i=ev[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Yo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(n){return n.type==="keypress"?Yo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Yo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ov=gt(lv),av=v({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=gt(av),sv=v({},Ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),rv=gt(sv),uv=v({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cv=gt(uv),fv=v({},Ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dv=gt(fv),mv=v({},Wn,{newState:0,oldState:0}),pv=gt(mv),hv=[9,13,27,32],Hs=ln&&"CompositionEvent"in window,Ll=null;ln&&"documentMode"in document&&(Ll=document.documentMode);var gv=ln&&"TextEvent"in window&&!Ll,ef=ln&&(!Hs||Ll&&8<Ll&&11>=Ll),tf=" ",nf=!1;function lf(n,i){switch(n){case"keyup":return hv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Di=!1;function yv(n,i){switch(n){case"compositionend":return of(i);case"keypress":return i.which!==32?null:(nf=!0,tf);case"textInput":return n=i.data,n===tf&&nf?null:n;default:return null}}function vv(n,i){if(Di)return n==="compositionend"||!Hs&&lf(n,i)?(n=$c(),Fo=qs=An=null,Di=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ef&&i.locale!=="ko"?null:i.data;default:return null}}var xv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!xv[n.type]:i==="textarea"}function sf(n,i,a,c){Ri?wi?wi.push(c):wi=[c]:Ri=c,i=ka(i,"onChange"),0<i.length&&(a=new Zo("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Vl=null,Pl=null;function Tv(n){Bm(n,0)}function $o(n){var i=wl(n);if(Bc(i))return n}function rf(n,i){if(n==="change")return i}var uf=!1;if(ln){var Fs;if(ln){var Ys="oninput"in document;if(!Ys){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),Ys=typeof cf.oninput=="function"}Fs=Ys}else Fs=!1;uf=Fs&&(!document.documentMode||9<document.documentMode)}function ff(){Vl&&(Vl.detachEvent("onpropertychange",df),Pl=Vl=null)}function df(n){if(n.propertyName==="value"&&$o(Pl)){var i=[];sf(i,Pl,n,Ls(n)),Kc(Tv,i)}}function _v(n,i,a){n==="focusin"?(ff(),Vl=i,Pl=a,Vl.attachEvent("onpropertychange",df)):n==="focusout"&&ff()}function Sv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $o(Pl)}function Cv(n,i){if(n==="click")return $o(i)}function Ev(n,i){if(n==="input"||n==="change")return $o(i)}function Av(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ct=typeof Object.is=="function"?Object.is:Av;function ql(n,i){if(Ct(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!Ts.call(i,d)||!Ct(n[d],i[d]))return!1}return!0}function mf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pf(n,i){var a=mf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mf(a)}}function hf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?hf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function gf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=zo(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=zo(n.document)}return i}function Js(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var bv=ln&&"documentMode"in document&&11>=document.documentMode,Ii=null,Zs=null,Gl=null,Ks=!1;function yf(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ks||Ii==null||Ii!==zo(c)||(c=Ii,"selectionStart"in c&&Js(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Gl&&ql(Gl,c)||(Gl=c,c=ka(Zs,"onSelect"),0<c.length&&(i=new Zo("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ii)))}function jn(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ui={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},$s={},vf={};ln&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function ei(n){if($s[n])return $s[n];if(!Ui[n])return n;var i=Ui[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in vf)return $s[n]=i[a];return n}var xf=ei("animationend"),Tf=ei("animationiteration"),_f=ei("animationstart"),Mv=ei("transitionrun"),Nv=ei("transitionstart"),Rv=ei("transitioncancel"),Sf=ei("transitionend"),Cf=new Map,Xs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xs.push("scrollEnd");function zt(n,i){Cf.set(n,i),Qn(i,[n])}var Ef=new WeakMap;function Ut(n,i){if(typeof n=="object"&&n!==null){var a=Ef.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Gc(i)},Ef.set(n,i),i)}return{value:n,source:i,stack:Gc(i)}}var kt=[],ki=0,Qs=0;function Xo(){for(var n=ki,i=Qs=ki=0;i<n;){var a=kt[i];kt[i++]=null;var c=kt[i];kt[i++]=null;var d=kt[i];kt[i++]=null;var g=kt[i];if(kt[i++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}g!==0&&Af(a,d,g)}}function Qo(n,i,a,c){kt[ki++]=n,kt[ki++]=i,kt[ki++]=a,kt[ki++]=c,Qs|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ws(n,i,a,c){return Qo(n,i,a,c),Wo(n)}function Li(n,i){return Qo(n,null,null,i),Wo(n)}function Af(n,i,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var d=!1,g=n.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(d=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,d&&i!==null&&(d=31-St(a),n=g.hiddenUpdates,c=n[d],c===null?n[d]=[i]:c.push(i),i.lane=a|536870912),g):null}function Wo(n){if(50<co)throw co=0,lu=null,Error(o(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Vi={};function wv(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(n,i,a,c){return new wv(n,i,a,c)}function js(n){return n=n.prototype,!(!n||!n.isReactComponent)}function on(n,i){var a=n.alternate;return a===null?(a=Et(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function bf(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function jo(n,i,a,c,d,g){var T=0;if(c=n,typeof n=="function")js(n)&&(T=1);else if(typeof n=="string")T=Ix(n,a,ue.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case K:return n=Et(31,a,i,d),n.elementType=K,n.lanes=g,n;case N:return ti(a.children,d,g,i);case k:T=8,d|=24;break;case L:return n=Et(12,a,i,d|2),n.elementType=L,n.lanes=g,n;case B:return n=Et(13,a,i,d),n.elementType=B,n.lanes=g,n;case j:return n=Et(19,a,i,d),n.elementType=j,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:case H:T=10;break e;case Y:T=9;break e;case Q:T=11;break e;case W:T=14;break e;case Se:T=16,c=null;break e}T=29,a=Error(o(130,n===null?"null":typeof n,"")),c=null}return i=Et(T,a,i,d),i.elementType=n,i.type=c,i.lanes=g,i}function ti(n,i,a,c){return n=Et(7,n,c,i),n.lanes=a,n}function er(n,i,a){return n=Et(6,n,null,i),n.lanes=a,n}function tr(n,i,a){return i=Et(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Pi=[],qi=0,ea=null,ta=0,Lt=[],Vt=0,ni=null,an=1,sn="";function ii(n,i){Pi[qi++]=ta,Pi[qi++]=ea,ea=n,ta=i}function Mf(n,i,a){Lt[Vt++]=an,Lt[Vt++]=sn,Lt[Vt++]=ni,ni=n;var c=an;n=sn;var d=32-St(c)-1;c&=~(1<<d),a+=1;var g=32-St(i)+d;if(30<g){var T=d-d%5;g=(c&(1<<T)-1).toString(32),c>>=T,d-=T,an=1<<32-St(i)+d|a<<d|c,sn=g+n}else an=1<<g|a<<d|c,sn=n}function nr(n){n.return!==null&&(ii(n,1),Mf(n,1,0))}function ir(n){for(;n===ea;)ea=Pi[--qi],Pi[qi]=null,ta=Pi[--qi],Pi[qi]=null;for(;n===ni;)ni=Lt[--Vt],Lt[Vt]=null,sn=Lt[--Vt],Lt[Vt]=null,an=Lt[--Vt],Lt[Vt]=null}var mt=null,Ze=null,De=!1,li=null,Zt=!1,lr=Error(o(519));function oi(n){var i=Error(o(418,""));throw zl(Ut(i,n)),lr}function Nf(n){var i=n.stateNode,a=n.type,c=n.memoizedProps;switch(i[ut]=n,i[ht]=c,a){case"dialog":be("cancel",i),be("close",i);break;case"iframe":case"object":case"embed":be("load",i);break;case"video":case"audio":for(a=0;a<mo.length;a++)be(mo[a],i);break;case"source":be("error",i);break;case"img":case"image":case"link":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"input":be("invalid",i),zc(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Bo(i);break;case"select":be("invalid",i);break;case"textarea":be("invalid",i),Fc(i,c.value,c.defaultValue,c.children),Bo(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||Ym(i.textContent,a)?(c.popover!=null&&(be("beforetoggle",i),be("toggle",i)),c.onScroll!=null&&be("scroll",i),c.onScrollEnd!=null&&be("scrollend",i),c.onClick!=null&&(i.onclick=La),i=!0):i=!1,i||oi(n)}function Rf(n){for(mt=n.return;mt;)switch(mt.tag){case 5:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:mt=mt.return}}function Ol(n){if(n!==mt)return!1;if(!De)return Rf(n),De=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Tu(n.type,n.memoizedProps)),a=!a),a&&Ze&&oi(n),Rf(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){Ze=Ft(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}Ze=null}}else i===27?(i=Ze,Bn(n.type)?(n=Eu,Eu=null,Ze=n):Ze=i):Ze=mt?Ft(n.stateNode.nextSibling):null;return!0}function Bl(){Ze=mt=null,De=!1}function wf(){var n=li;return n!==null&&(xt===null?xt=n:xt.push.apply(xt,n),li=null),n}function zl(n){li===null?li=[n]:li.push(n)}var or=V(null),ai=null,rn=null;function bn(n,i,a){$(or,i._currentValue),i._currentValue=a}function un(n){n._currentValue=or.current,J(or)}function ar(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function sr(n,i,a,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=d;for(var E=0;E<i.length;E++)if(S.context===i[E]){g.lanes|=a,S=g.alternate,S!==null&&(S.lanes|=a),ar(g.return,a,n),c||(T=null);break e}g=S.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(o(341));T.lanes|=a,g=T.alternate,g!==null&&(g.lanes|=a),ar(T,a,n),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===n){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Hl(n,i,a,c){n=null;for(var d=i,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var S=d.type;Ct(d.pendingProps.value,T.value)||(n!==null?n.push(S):n=[S])}}else if(d===Tt.current){if(T=d.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(xo):n=[xo])}d=d.return}n!==null&&sr(i,n,a,c),i.flags|=262144}function na(n){for(n=n.firstContext;n!==null;){if(!Ct(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function si(n){ai=n,rn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ct(n){return Df(ai,n)}function ia(n,i){return ai===null&&si(n),Df(n,i)}function Df(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},rn===null){if(n===null)throw Error(o(308));rn=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else rn=rn.next=i;return a}var Dv=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},Iv=t.unstable_scheduleCallback,Uv=t.unstable_NormalPriority,et={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rr(){return{controller:new Dv,data:new Map,refCount:0}}function Fl(n){n.refCount--,n.refCount===0&&Iv(Uv,function(){n.controller.abort()})}var Yl=null,ur=0,Gi=0,Oi=null;function kv(n,i){if(Yl===null){var a=Yl=[];ur=0,Gi=fu(),Oi={status:"pending",value:void 0,then:function(c){a.push(c)}}}return ur++,i.then(If,If),i}function If(){if(--ur===0&&Yl!==null){Oi!==null&&(Oi.status="fulfilled");var n=Yl;Yl=null,Gi=0,Oi=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Lv(n,i){var a=[],c={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(c.status="rejected",c.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),c}var Uf=P.S;P.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&kv(n,i),Uf!==null&&Uf(n,i)};var ri=V(null);function cr(){var n=ri.current;return n!==null?n:Oe.pooledCache}function la(n,i){i===null?$(ri,ri.current):$(ri,i.pool)}function kf(){var n=cr();return n===null?null:{parent:et._currentValue,pool:n}}var Jl=Error(o(460)),Lf=Error(o(474)),oa=Error(o(542)),fr={then:function(){}};function Vf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function aa(){}function Pf(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(aa,aa),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gf(n),n;default:if(typeof i.status=="string")i.then(aa,aa);else{if(n=Oe,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=c}},function(c){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gf(n),n}throw Zl=i,Jl}}var Zl=null;function qf(){if(Zl===null)throw Error(o(459));var n=Zl;return Zl=null,n}function Gf(n){if(n===Jl||n===oa)throw Error(o(483))}var Mn=!1;function dr(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mr(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Nn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Rn(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ie&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,i=Wo(n),Af(n,null,a),i}return Qo(n,c,i,a),Wo(n)}function Kl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Dc(n,a)}}function pr(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,a=a.next}while(a!==null);g===null?d=g=i:g=g.next=i}else d=g=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var hr=!1;function $l(){if(hr){var n=Oi;if(n!==null)throw n}}function Xl(n,i,a,c){hr=!1;var d=n.updateQueue;Mn=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var E=S,D=E.next;E.next=null,T===null?g=D:T.next=D,T=E;var q=n.alternate;q!==null&&(q=q.updateQueue,S=q.lastBaseUpdate,S!==T&&(S===null?q.firstBaseUpdate=D:S.next=D,q.lastBaseUpdate=E))}if(g!==null){var O=d.baseState;T=0,q=D=E=null,S=g;do{var I=S.lane&-536870913,U=I!==S.lane;if(U?(Ne&I)===I:(c&I)===I){I!==0&&I===Gi&&(hr=!0),q!==null&&(q=q.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ge=n,fe=S;I=i;var Pe=a;switch(fe.tag){case 1:if(ge=fe.payload,typeof ge=="function"){O=ge.call(Pe,O,I);break e}O=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=fe.payload,I=typeof ge=="function"?ge.call(Pe,O,I):ge,I==null)break e;O=v({},O,I);break e;case 2:Mn=!0}}I=S.callback,I!==null&&(n.flags|=64,U&&(n.flags|=8192),U=d.callbacks,U===null?d.callbacks=[I]:U.push(I))}else U={lane:I,tag:S.tag,payload:S.payload,callback:S.callback,next:null},q===null?(D=q=U,E=O):q=q.next=U,T|=I;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;U=S,S=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);q===null&&(E=O),d.baseState=E,d.firstBaseUpdate=D,d.lastBaseUpdate=q,g===null&&(d.shared.lanes=0),Pn|=T,n.lanes=T,n.memoizedState=O}}function Of(n,i){if(typeof n!="function")throw Error(o(191,n));n.call(i)}function Bf(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Of(a[n],i)}var Bi=V(null),sa=V(0);function zf(n,i){n=gn,$(sa,n),$(Bi,i),gn=n|i.baseLanes}function gr(){$(sa,gn),$(Bi,Bi.current)}function yr(){gn=sa.current,J(Bi),J(sa)}var wn=0,_e=null,Le=null,Qe=null,ra=!1,zi=!1,ui=!1,ua=0,Ql=0,Hi=null,Vv=0;function $e(){throw Error(o(321))}function vr(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Ct(n[a],i[a]))return!1;return!0}function xr(n,i,a,c,d,g){return wn=g,_e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=n===null||n.memoizedState===null?Ad:bd,ui=!1,g=a(c,d),ui=!1,zi&&(g=Ff(i,a,c,d)),Hf(n),g}function Hf(n){P.H=ha;var i=Le!==null&&Le.next!==null;if(wn=0,Qe=Le=_e=null,ra=!1,Ql=0,Hi=null,i)throw Error(o(300));n===null||it||(n=n.dependencies,n!==null&&na(n)&&(it=!0))}function Ff(n,i,a,c){_e=n;var d=0;do{if(zi&&(Hi=null),Ql=0,zi=!1,25<=d)throw Error(o(301));if(d+=1,Qe=Le=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=Hv,g=i(a,c)}while(zi);return g}function Pv(){var n=P.H,i=n.useState()[0];return i=typeof i.then=="function"?Wl(i):i,n=n.useState()[0],(Le!==null?Le.memoizedState:null)!==n&&(_e.flags|=1024),i}function Tr(){var n=ua!==0;return ua=0,n}function _r(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Sr(n){if(ra){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ra=!1}wn=0,Qe=Le=_e=null,zi=!1,Ql=ua=0,Hi=null}function yt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?_e.memoizedState=Qe=n:Qe=Qe.next=n,Qe}function We(){if(Le===null){var n=_e.alternate;n=n!==null?n.memoizedState:null}else n=Le.next;var i=Qe===null?_e.memoizedState:Qe.next;if(i!==null)Qe=i,Le=n;else{if(n===null)throw _e.alternate===null?Error(o(467)):Error(o(310));Le=n,n={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Qe===null?_e.memoizedState=Qe=n:Qe=Qe.next=n}return Qe}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(n){var i=Ql;return Ql+=1,Hi===null&&(Hi=[]),n=Pf(Hi,n,i),i=_e,(Qe===null?i.memoizedState:Qe.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?Ad:bd),n}function ca(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wl(n);if(n.$$typeof===H)return ct(n)}throw Error(o(438,String(n)))}function Er(n){var i=null,a=_e.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=_e.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Cr(),_e.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),c=0;c<n;c++)a[c]=pe;return i.index++,a}function cn(n,i){return typeof i=="function"?i(n):i}function fa(n){var i=We();return Ar(i,Le,n)}function Ar(n,i,a){var c=n.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var d=n.baseQueue,g=c.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}i.baseQueue=d=g,c.pending=null}if(g=n.baseState,d===null)n.memoizedState=g;else{i=d.next;var S=T=null,E=null,D=i,q=!1;do{var O=D.lane&-536870913;if(O!==D.lane?(Ne&O)===O:(wn&O)===O){var I=D.revertLane;if(I===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),O===Gi&&(q=!0);else if((wn&I)===I){D=D.next,I===Gi&&(q=!0);continue}else O={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},E===null?(S=E=O,T=g):E=E.next=O,_e.lanes|=I,Pn|=I;O=D.action,ui&&a(g,O),g=D.hasEagerState?D.eagerState:a(g,O)}else I={lane:O,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},E===null?(S=E=I,T=g):E=E.next=I,_e.lanes|=O,Pn|=O;D=D.next}while(D!==null&&D!==i);if(E===null?T=g:E.next=S,!Ct(g,n.memoizedState)&&(it=!0,q&&(a=Oi,a!==null)))throw a;n.memoizedState=g,n.baseState=T,n.baseQueue=E,c.lastRenderedState=g}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function br(n){var i=We(),a=i.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=i.memoizedState;if(d!==null){a.pending=null;var T=d=d.next;do g=n(g,T.action),T=T.next;while(T!==d);Ct(g,i.memoizedState)||(it=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Yf(n,i,a){var c=_e,d=We(),g=De;if(g){if(a===void 0)throw Error(o(407));a=a()}else a=i();var T=!Ct((Le||d).memoizedState,a);T&&(d.memoizedState=a,it=!0),d=d.queue;var S=Kf.bind(null,c,d,n);if(jl(2048,8,S,[n]),d.getSnapshot!==i||T||Qe!==null&&Qe.memoizedState.tag&1){if(c.flags|=2048,Fi(9,da(),Zf.bind(null,c,d,a,i),null),Oe===null)throw Error(o(349));g||(wn&124)!==0||Jf(c,i,a)}return a}function Jf(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=_e.updateQueue,i===null?(i=Cr(),_e.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Zf(n,i,a,c){i.value=a,i.getSnapshot=c,$f(i)&&Xf(n)}function Kf(n,i,a){return a(function(){$f(i)&&Xf(n)})}function $f(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Ct(n,a)}catch{return!0}}function Xf(n){var i=Li(n,2);i!==null&&Rt(i,n,2)}function Mr(n){var i=yt();if(typeof n=="function"){var a=n;if(n=a(),ui){Cn(!0);try{a()}finally{Cn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:n},i}function Qf(n,i,a,c){return n.baseState=a,Ar(n,Le,typeof c=="function"?c:cn)}function qv(n,i,a,c,d){if(pa(n))throw Error(o(485));if(n=i.action,n!==null){var g={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};P.T!==null?a(!0):g.isTransition=!1,c(g),a=i.pending,a===null?(g.next=i.pending=g,Wf(i,g)):(g.next=a.next,i.pending=a.next=g)}}function Wf(n,i){var a=i.action,c=i.payload,d=n.state;if(i.isTransition){var g=P.T,T={};P.T=T;try{var S=a(d,c),E=P.S;E!==null&&E(T,S),jf(n,i,S)}catch(D){Nr(n,i,D)}finally{P.T=g}}else try{g=a(d,c),jf(n,i,g)}catch(D){Nr(n,i,D)}}function jf(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){ed(n,i,c)},function(c){return Nr(n,i,c)}):ed(n,i,a)}function ed(n,i,a){i.status="fulfilled",i.value=a,td(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,Wf(n,a)))}function Nr(n,i,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,td(i),i=i.next;while(i!==c)}n.action=null}function td(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function nd(n,i){return i}function id(n,i){if(De){var a=Oe.formState;if(a!==null){e:{var c=_e;if(De){if(Ze){t:{for(var d=Ze,g=Zt;d.nodeType!==8;){if(!g){d=null;break t}if(d=Ft(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Ze=Ft(d.nextSibling),c=d.data==="F!";break e}}oi(c)}c=!1}c&&(i=a[0])}}return a=yt(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:i},a.queue=c,a=Sd.bind(null,_e,c),c.dispatch=a,c=Mr(!1),g=Ur.bind(null,_e,!1,c.queue),c=yt(),d={state:i,dispatch:null,action:n,pending:null},c.queue=d,a=qv.bind(null,_e,d,g,a),d.dispatch=a,c.memoizedState=n,[i,a,!1]}function ld(n){var i=We();return od(i,Le,n)}function od(n,i,a){if(i=Ar(n,i,nd)[0],n=fa(cn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Wl(i)}catch(T){throw T===Jl?oa:T}else c=i;i=We();var d=i.queue,g=d.dispatch;return a!==i.memoizedState&&(_e.flags|=2048,Fi(9,da(),Gv.bind(null,d,a),null)),[c,g,n]}function Gv(n,i){n.action=i}function ad(n){var i=We(),a=Le;if(a!==null)return od(i,a,n);We(),i=i.memoizedState,a=We();var c=a.queue.dispatch;return a.memoizedState=n,[i,c,!1]}function Fi(n,i,a,c){return n={tag:n,create:a,deps:c,inst:i,next:null},i=_e.updateQueue,i===null&&(i=Cr(),_e.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n),n}function da(){return{destroy:void 0,resource:void 0}}function sd(){return We().memoizedState}function ma(n,i,a,c){var d=yt();c=c===void 0?null:c,_e.flags|=n,d.memoizedState=Fi(1|i,da(),a,c)}function jl(n,i,a,c){var d=We();c=c===void 0?null:c;var g=d.memoizedState.inst;Le!==null&&c!==null&&vr(c,Le.memoizedState.deps)?d.memoizedState=Fi(i,g,a,c):(_e.flags|=n,d.memoizedState=Fi(1|i,g,a,c))}function rd(n,i){ma(8390656,8,n,i)}function ud(n,i){jl(2048,8,n,i)}function cd(n,i){return jl(4,2,n,i)}function fd(n,i){return jl(4,4,n,i)}function dd(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function md(n,i,a){a=a!=null?a.concat([n]):null,jl(4,4,dd.bind(null,i,n),a)}function Rr(){}function pd(n,i){var a=We();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&vr(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function hd(n,i){var a=We();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&vr(i,c[1]))return c[0];if(c=n(),ui){Cn(!0);try{n()}finally{Cn(!1)}}return a.memoizedState=[c,i],c}function wr(n,i,a){return a===void 0||(wn&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=vm(),_e.lanes|=n,Pn|=n,a)}function gd(n,i,a,c){return Ct(a,i)?a:Bi.current!==null?(n=wr(n,a,c),Ct(n,i)||(it=!0),n):(wn&42)===0?(it=!0,n.memoizedState=a):(n=vm(),_e.lanes|=n,Pn|=n,i)}function yd(n,i,a,c,d){var g=X.p;X.p=g!==0&&8>g?g:8;var T=P.T,S={};P.T=S,Ur(n,!1,i,a);try{var E=d(),D=P.S;if(D!==null&&D(S,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var q=Lv(E,c);eo(n,i,q,Nt(n))}else eo(n,i,c,Nt(n))}catch(O){eo(n,i,{then:function(){},status:"rejected",reason:O},Nt())}finally{X.p=g,P.T=T}}function Ov(){}function Dr(n,i,a,c){if(n.tag!==5)throw Error(o(476));var d=vd(n).queue;yd(n,d,i,re,a===null?Ov:function(){return xd(n),a(c)})}function vd(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:re},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function xd(n){var i=vd(n).next.queue;eo(n,i,{},Nt())}function Ir(){return ct(xo)}function Td(){return We().memoizedState}function _d(){return We().memoizedState}function Bv(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nt();n=Nn(a);var c=Rn(i,n,a);c!==null&&(Rt(c,i,a),Kl(c,i,a)),i={cache:rr()},n.payload=i;return}i=i.return}}function zv(n,i,a){var c=Nt();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},pa(n)?Cd(i,a):(a=Ws(n,i,a,c),a!==null&&(Rt(a,n,c),Ed(a,i,c)))}function Sd(n,i,a){var c=Nt();eo(n,i,a,c)}function eo(n,i,a,c){var d={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(pa(n))Cd(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var T=i.lastRenderedState,S=g(T,a);if(d.hasEagerState=!0,d.eagerState=S,Ct(S,T))return Qo(n,i,d,0),Oe===null&&Xo(),!1}catch{}finally{}if(a=Ws(n,i,d,c),a!==null)return Rt(a,n,c),Ed(a,i,c),!0}return!1}function Ur(n,i,a,c){if(c={lane:2,revertLane:fu(),action:c,hasEagerState:!1,eagerState:null,next:null},pa(n)){if(i)throw Error(o(479))}else i=Ws(n,a,c,2),i!==null&&Rt(i,n,2)}function pa(n){var i=n.alternate;return n===_e||i!==null&&i===_e}function Cd(n,i){zi=ra=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Ed(n,i,a){if((a&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Dc(n,a)}}var ha={readContext:ct,use:ca,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e},Ad={readContext:ct,use:ca,useCallback:function(n,i){return yt().memoizedState=[n,i===void 0?null:i],n},useContext:ct,useEffect:rd,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,ma(4194308,4,dd.bind(null,i,n),a)},useLayoutEffect:function(n,i){return ma(4194308,4,n,i)},useInsertionEffect:function(n,i){ma(4,2,n,i)},useMemo:function(n,i){var a=yt();i=i===void 0?null:i;var c=n();if(ui){Cn(!0);try{n()}finally{Cn(!1)}}return a.memoizedState=[c,i],c},useReducer:function(n,i,a){var c=yt();if(a!==void 0){var d=a(i);if(ui){Cn(!0);try{a(i)}finally{Cn(!1)}}}else d=i;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=zv.bind(null,_e,n),[c.memoizedState,n]},useRef:function(n){var i=yt();return n={current:n},i.memoizedState=n},useState:function(n){n=Mr(n);var i=n.queue,a=Sd.bind(null,_e,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Rr,useDeferredValue:function(n,i){var a=yt();return wr(a,n,i)},useTransition:function(){var n=Mr(!1);return n=yd.bind(null,_e,n.queue,!0,!1),yt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var c=_e,d=yt();if(De){if(a===void 0)throw Error(o(407));a=a()}else{if(a=i(),Oe===null)throw Error(o(349));(Ne&124)!==0||Jf(c,i,a)}d.memoizedState=a;var g={value:a,getSnapshot:i};return d.queue=g,rd(Kf.bind(null,c,g,n),[n]),c.flags|=2048,Fi(9,da(),Zf.bind(null,c,g,a,i),null),a},useId:function(){var n=yt(),i=Oe.identifierPrefix;if(De){var a=sn,c=an;a=(c&~(1<<32-St(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=ua++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Vv++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Ir,useFormState:id,useActionState:id,useOptimistic:function(n){var i=yt();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Ur.bind(null,_e,!0,a),a.dispatch=i,[n,i]},useMemoCache:Er,useCacheRefresh:function(){return yt().memoizedState=Bv.bind(null,_e)}},bd={readContext:ct,use:ca,useCallback:pd,useContext:ct,useEffect:ud,useImperativeHandle:md,useInsertionEffect:cd,useLayoutEffect:fd,useMemo:hd,useReducer:fa,useRef:sd,useState:function(){return fa(cn)},useDebugValue:Rr,useDeferredValue:function(n,i){var a=We();return gd(a,Le.memoizedState,n,i)},useTransition:function(){var n=fa(cn)[0],i=We().memoizedState;return[typeof n=="boolean"?n:Wl(n),i]},useSyncExternalStore:Yf,useId:Td,useHostTransitionStatus:Ir,useFormState:ld,useActionState:ld,useOptimistic:function(n,i){var a=We();return Qf(a,Le,n,i)},useMemoCache:Er,useCacheRefresh:_d},Hv={readContext:ct,use:ca,useCallback:pd,useContext:ct,useEffect:ud,useImperativeHandle:md,useInsertionEffect:cd,useLayoutEffect:fd,useMemo:hd,useReducer:br,useRef:sd,useState:function(){return br(cn)},useDebugValue:Rr,useDeferredValue:function(n,i){var a=We();return Le===null?wr(a,n,i):gd(a,Le.memoizedState,n,i)},useTransition:function(){var n=br(cn)[0],i=We().memoizedState;return[typeof n=="boolean"?n:Wl(n),i]},useSyncExternalStore:Yf,useId:Td,useHostTransitionStatus:Ir,useFormState:ad,useActionState:ad,useOptimistic:function(n,i){var a=We();return Le!==null?Qf(a,Le,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Er,useCacheRefresh:_d},Yi=null,to=0;function ga(n){var i=to;return to+=1,Yi===null&&(Yi=[]),Pf(Yi,n,i)}function no(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function ya(n,i){throw i.$$typeof===_?Error(o(525)):(n=Object.prototype.toString.call(i),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Md(n){var i=n._init;return i(n._payload)}function Nd(n){function i(R,M){if(n){var w=R.deletions;w===null?(R.deletions=[M],R.flags|=16):w.push(M)}}function a(R,M){if(!n)return null;for(;M!==null;)i(R,M),M=M.sibling;return null}function c(R){for(var M=new Map;R!==null;)R.key!==null?M.set(R.key,R):M.set(R.index,R),R=R.sibling;return M}function d(R,M){return R=on(R,M),R.index=0,R.sibling=null,R}function g(R,M,w){return R.index=w,n?(w=R.alternate,w!==null?(w=w.index,w<M?(R.flags|=67108866,M):w):(R.flags|=67108866,M)):(R.flags|=1048576,M)}function T(R){return n&&R.alternate===null&&(R.flags|=67108866),R}function S(R,M,w,G){return M===null||M.tag!==6?(M=er(w,R.mode,G),M.return=R,M):(M=d(M,w),M.return=R,M)}function E(R,M,w,G){var te=w.type;return te===N?q(R,M,w.props.children,G,w.key):M!==null&&(M.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Se&&Md(te)===M.type)?(M=d(M,w.props),no(M,w),M.return=R,M):(M=jo(w.type,w.key,w.props,null,R.mode,G),no(M,w),M.return=R,M)}function D(R,M,w,G){return M===null||M.tag!==4||M.stateNode.containerInfo!==w.containerInfo||M.stateNode.implementation!==w.implementation?(M=tr(w,R.mode,G),M.return=R,M):(M=d(M,w.children||[]),M.return=R,M)}function q(R,M,w,G,te){return M===null||M.tag!==7?(M=ti(w,R.mode,G,te),M.return=R,M):(M=d(M,w),M.return=R,M)}function O(R,M,w){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=er(""+M,R.mode,w),M.return=R,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case C:return w=jo(M.type,M.key,M.props,null,R.mode,w),no(w,M),w.return=R,w;case b:return M=tr(M,R.mode,w),M.return=R,M;case Se:var G=M._init;return M=G(M._payload),O(R,M,w)}if(Ee(M)||se(M))return M=ti(M,R.mode,w,null),M.return=R,M;if(typeof M.then=="function")return O(R,ga(M),w);if(M.$$typeof===H)return O(R,ia(R,M),w);ya(R,M)}return null}function I(R,M,w,G){var te=M!==null?M.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return te!==null?null:S(R,M,""+w,G);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case C:return w.key===te?E(R,M,w,G):null;case b:return w.key===te?D(R,M,w,G):null;case Se:return te=w._init,w=te(w._payload),I(R,M,w,G)}if(Ee(w)||se(w))return te!==null?null:q(R,M,w,G,null);if(typeof w.then=="function")return I(R,M,ga(w),G);if(w.$$typeof===H)return I(R,M,ia(R,w),G);ya(R,w)}return null}function U(R,M,w,G,te){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return R=R.get(w)||null,S(M,R,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return R=R.get(G.key===null?w:G.key)||null,E(M,R,G,te);case b:return R=R.get(G.key===null?w:G.key)||null,D(M,R,G,te);case Se:var Ce=G._init;return G=Ce(G._payload),U(R,M,w,G,te)}if(Ee(G)||se(G))return R=R.get(w)||null,q(M,R,G,te,null);if(typeof G.then=="function")return U(R,M,w,ga(G),te);if(G.$$typeof===H)return U(R,M,w,ia(M,G),te);ya(M,G)}return null}function ge(R,M,w,G){for(var te=null,Ce=null,ae=M,de=M=0,ot=null;ae!==null&&de<w.length;de++){ae.index>de?(ot=ae,ae=null):ot=ae.sibling;var Re=I(R,ae,w[de],G);if(Re===null){ae===null&&(ae=ot);break}n&&ae&&Re.alternate===null&&i(R,ae),M=g(Re,M,de),Ce===null?te=Re:Ce.sibling=Re,Ce=Re,ae=ot}if(de===w.length)return a(R,ae),De&&ii(R,de),te;if(ae===null){for(;de<w.length;de++)ae=O(R,w[de],G),ae!==null&&(M=g(ae,M,de),Ce===null?te=ae:Ce.sibling=ae,Ce=ae);return De&&ii(R,de),te}for(ae=c(ae);de<w.length;de++)ot=U(ae,R,de,w[de],G),ot!==null&&(n&&ot.alternate!==null&&ae.delete(ot.key===null?de:ot.key),M=g(ot,M,de),Ce===null?te=ot:Ce.sibling=ot,Ce=ot);return n&&ae.forEach(function(Jn){return i(R,Jn)}),De&&ii(R,de),te}function fe(R,M,w,G){if(w==null)throw Error(o(151));for(var te=null,Ce=null,ae=M,de=M=0,ot=null,Re=w.next();ae!==null&&!Re.done;de++,Re=w.next()){ae.index>de?(ot=ae,ae=null):ot=ae.sibling;var Jn=I(R,ae,Re.value,G);if(Jn===null){ae===null&&(ae=ot);break}n&&ae&&Jn.alternate===null&&i(R,ae),M=g(Jn,M,de),Ce===null?te=Jn:Ce.sibling=Jn,Ce=Jn,ae=ot}if(Re.done)return a(R,ae),De&&ii(R,de),te;if(ae===null){for(;!Re.done;de++,Re=w.next())Re=O(R,Re.value,G),Re!==null&&(M=g(Re,M,de),Ce===null?te=Re:Ce.sibling=Re,Ce=Re);return De&&ii(R,de),te}for(ae=c(ae);!Re.done;de++,Re=w.next())Re=U(ae,R,de,Re.value,G),Re!==null&&(n&&Re.alternate!==null&&ae.delete(Re.key===null?de:Re.key),M=g(Re,M,de),Ce===null?te=Re:Ce.sibling=Re,Ce=Re);return n&&ae.forEach(function(Fx){return i(R,Fx)}),De&&ii(R,de),te}function Pe(R,M,w,G){if(typeof w=="object"&&w!==null&&w.type===N&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case C:e:{for(var te=w.key;M!==null;){if(M.key===te){if(te=w.type,te===N){if(M.tag===7){a(R,M.sibling),G=d(M,w.props.children),G.return=R,R=G;break e}}else if(M.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Se&&Md(te)===M.type){a(R,M.sibling),G=d(M,w.props),no(G,w),G.return=R,R=G;break e}a(R,M);break}else i(R,M);M=M.sibling}w.type===N?(G=ti(w.props.children,R.mode,G,w.key),G.return=R,R=G):(G=jo(w.type,w.key,w.props,null,R.mode,G),no(G,w),G.return=R,R=G)}return T(R);case b:e:{for(te=w.key;M!==null;){if(M.key===te)if(M.tag===4&&M.stateNode.containerInfo===w.containerInfo&&M.stateNode.implementation===w.implementation){a(R,M.sibling),G=d(M,w.children||[]),G.return=R,R=G;break e}else{a(R,M);break}else i(R,M);M=M.sibling}G=tr(w,R.mode,G),G.return=R,R=G}return T(R);case Se:return te=w._init,w=te(w._payload),Pe(R,M,w,G)}if(Ee(w))return ge(R,M,w,G);if(se(w)){if(te=se(w),typeof te!="function")throw Error(o(150));return w=te.call(w),fe(R,M,w,G)}if(typeof w.then=="function")return Pe(R,M,ga(w),G);if(w.$$typeof===H)return Pe(R,M,ia(R,w),G);ya(R,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,M!==null&&M.tag===6?(a(R,M.sibling),G=d(M,w),G.return=R,R=G):(a(R,M),G=er(w,R.mode,G),G.return=R,R=G),T(R)):a(R,M)}return function(R,M,w,G){try{to=0;var te=Pe(R,M,w,G);return Yi=null,te}catch(ae){if(ae===Jl||ae===oa)throw ae;var Ce=Et(29,ae,null,R.mode);return Ce.lanes=G,Ce.return=R,Ce}finally{}}}var Ji=Nd(!0),Rd=Nd(!1),Pt=V(null),Kt=null;function Dn(n){var i=n.alternate;$(tt,tt.current&1),$(Pt,n),Kt===null&&(i===null||Bi.current!==null||i.memoizedState!==null)&&(Kt=n)}function wd(n){if(n.tag===22){if($(tt,tt.current),$(Pt,n),Kt===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Kt=n)}}else In()}function In(){$(tt,tt.current),$(Pt,Pt.current)}function fn(n){J(Pt),Kt===n&&(Kt=null),J(tt)}var tt=V(0);function va(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Cu(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function kr(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:v({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Lr={enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Nt(),d=Nn(c);d.payload=i,a!=null&&(d.callback=a),i=Rn(n,d,c),i!==null&&(Rt(i,n,c),Kl(i,n,c))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Nt(),d=Nn(c);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Rn(n,d,c),i!==null&&(Rt(i,n,c),Kl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Nt(),c=Nn(a);c.tag=2,i!=null&&(c.callback=i),i=Rn(n,c,a),i!==null&&(Rt(i,n,a),Kl(i,n,a))}};function Dd(n,i,a,c,d,g,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,T):i.prototype&&i.prototype.isPureReactComponent?!ql(a,c)||!ql(d,g):!0}function Id(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Lr.enqueueReplaceState(i,i.state,null)}function ci(n,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(n=n.defaultProps){a===i&&(a=v({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var xa=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ud(n){xa(n)}function kd(n){console.error(n)}function Ld(n){xa(n)}function Ta(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Vd(n,i,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Vr(n,i,a){return a=Nn(a),a.tag=3,a.payload={element:null},a.callback=function(){Ta(n,i)},a}function Pd(n){return n=Nn(n),n.tag=3,n}function qd(n,i,a,c){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;n.payload=function(){return d(g)},n.callback=function(){Vd(i,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Vd(i,a,c),typeof d!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function Fv(n,i,a,c,d){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Hl(i,a,d,!0),a=Pt.current,a!==null){switch(a.tag){case 13:return Kt===null?au():a.alternate===null&&Ke===0&&(Ke=3),a.flags&=-257,a.flags|=65536,a.lanes=d,c===fr?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),ru(n,c,d)),!1;case 22:return a.flags|=65536,c===fr?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),ru(n,c,d)),!1}throw Error(o(435,a.tag))}return ru(n,c,d),au(),!1}if(De)return i=Pt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,c!==lr&&(n=Error(o(422),{cause:c}),zl(Ut(n,a)))):(c!==lr&&(i=Error(o(423),{cause:c}),zl(Ut(i,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=Ut(c,a),d=Vr(n.stateNode,c,d),pr(n,d),Ke!==4&&(Ke=2)),!1;var g=Error(o(520),{cause:c});if(g=Ut(g,a),uo===null?uo=[g]:uo.push(g),Ke!==4&&(Ke=2),i===null)return!0;c=Ut(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=Vr(a.stateNode,c,n),pr(a,n),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(qn===null||!qn.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Pd(d),qd(d,n,a,c),pr(a,d),!1}a=a.return}while(a!==null);return!1}var Gd=Error(o(461)),it=!1;function at(n,i,a,c){i.child=n===null?Rd(i,null,a,c):Ji(i,n.child,a,c)}function Od(n,i,a,c,d){a=a.render;var g=i.ref;if("ref"in c){var T={};for(var S in c)S!=="ref"&&(T[S]=c[S])}else T=c;return si(i),c=xr(n,i,a,T,g,d),S=Tr(),n!==null&&!it?(_r(n,i,d),dn(n,i,d)):(De&&S&&nr(i),i.flags|=1,at(n,i,c,d),i.child)}function Bd(n,i,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!js(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,zd(n,i,g,c,d)):(n=jo(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Fr(n,d)){var T=g.memoizedProps;if(a=a.compare,a=a!==null?a:ql,a(T,c)&&n.ref===i.ref)return dn(n,i,d)}return i.flags|=1,n=on(g,c),n.ref=i.ref,n.return=i,i.child=n}function zd(n,i,a,c,d){if(n!==null){var g=n.memoizedProps;if(ql(g,c)&&n.ref===i.ref)if(it=!1,i.pendingProps=c=g,Fr(n,d))(n.flags&131072)!==0&&(it=!0);else return i.lanes=n.lanes,dn(n,i,d)}return Pr(n,i,a,c,d)}function Hd(n,i,a){var c=i.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,n!==null){for(d=i.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;i.childLanes=g&~c}else i.childLanes=0,i.child=null;return Fd(n,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&la(i,g!==null?g.cachePool:null),g!==null?zf(i,g):gr(),wd(i);else return i.lanes=i.childLanes=536870912,Fd(n,i,g!==null?g.baseLanes|a:a,a)}else g!==null?(la(i,g.cachePool),zf(i,g),In(),i.memoizedState=null):(n!==null&&la(i,null),gr(),In());return at(n,i,d,a),i.child}function Fd(n,i,a,c){var d=cr();return d=d===null?null:{parent:et._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&la(i,null),gr(),wd(i),n!==null&&Hl(n,i,c,!0),null}function _a(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Pr(n,i,a,c,d){return si(i),a=xr(n,i,a,c,void 0,d),c=Tr(),n!==null&&!it?(_r(n,i,d),dn(n,i,d)):(De&&c&&nr(i),i.flags|=1,at(n,i,a,d),i.child)}function Yd(n,i,a,c,d,g){return si(i),i.updateQueue=null,a=Ff(i,c,a,d),Hf(n),c=Tr(),n!==null&&!it?(_r(n,i,g),dn(n,i,g)):(De&&c&&nr(i),i.flags|=1,at(n,i,a,g),i.child)}function Jd(n,i,a,c,d){if(si(i),i.stateNode===null){var g=Vi,T=a.contextType;typeof T=="object"&&T!==null&&(g=ct(T)),g=new a(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Lr,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},dr(i),T=a.contextType,g.context=typeof T=="object"&&T!==null?ct(T):Vi,g.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(kr(i,a,T,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Lr.enqueueReplaceState(g,g.state,null),Xl(i,c,g,d),$l(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var S=i.memoizedProps,E=ci(a,S);g.props=E;var D=g.context,q=a.contextType;T=Vi,typeof q=="object"&&q!==null&&(T=ct(q));var O=a.getDerivedStateFromProps;q=typeof O=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||D!==T)&&Id(i,g,c,T),Mn=!1;var I=i.memoizedState;g.state=I,Xl(i,c,g,d),$l(),D=i.memoizedState,S||I!==D||Mn?(typeof O=="function"&&(kr(i,a,O,c),D=i.memoizedState),(E=Mn||Dd(i,a,E,c,I,D,T))?(q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),g.props=c,g.state=D,g.context=T,c=E):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,mr(n,i),T=i.memoizedProps,q=ci(a,T),g.props=q,O=i.pendingProps,I=g.context,D=a.contextType,E=Vi,typeof D=="object"&&D!==null&&(E=ct(D)),S=a.getDerivedStateFromProps,(D=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==O||I!==E)&&Id(i,g,c,E),Mn=!1,I=i.memoizedState,g.state=I,Xl(i,c,g,d),$l();var U=i.memoizedState;T!==O||I!==U||Mn||n!==null&&n.dependencies!==null&&na(n.dependencies)?(typeof S=="function"&&(kr(i,a,S,c),U=i.memoizedState),(q=Mn||Dd(i,a,q,c,I,U,E)||n!==null&&n.dependencies!==null&&na(n.dependencies))?(D||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,U,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,U,E)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=U),g.props=c,g.state=U,g.context=E,c=q):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&I===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,_a(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=Ji(i,n.child,null,d),i.child=Ji(i,null,a,d)):at(n,i,a,d),i.memoizedState=g.state,n=i.child):n=dn(n,i,d),n}function Zd(n,i,a,c){return Bl(),i.flags|=256,at(n,i,a,c),i.child}var qr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gr(n){return{baseLanes:n,cachePool:kf()}}function Or(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=qt),n}function Kd(n,i,a){var c=i.pendingProps,d=!1,g=(i.flags&128)!==0,T;if((T=g)||(T=n!==null&&n.memoizedState===null?!1:(tt.current&2)!==0),T&&(d=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,n===null){if(De){if(d?Dn(i):In(),De){var S=Ze,E;if(E=S){e:{for(E=S,S=Zt;E.nodeType!==8;){if(!S){S=null;break e}if(E=Ft(E.nextSibling),E===null){S=null;break e}}S=E}S!==null?(i.memoizedState={dehydrated:S,treeContext:ni!==null?{id:an,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},E=Et(18,null,null,0),E.stateNode=S,E.return=i,i.child=E,mt=i,Ze=null,E=!0):E=!1}E||oi(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Cu(S)?i.lanes=32:i.lanes=536870912,null;fn(i)}return S=c.children,c=c.fallback,d?(In(),d=i.mode,S=Sa({mode:"hidden",children:S},d),c=ti(c,d,a,null),S.return=i,c.return=i,S.sibling=c,i.child=S,d=i.child,d.memoizedState=Gr(a),d.childLanes=Or(n,T,a),i.memoizedState=qr,c):(Dn(i),Br(i,S))}if(E=n.memoizedState,E!==null&&(S=E.dehydrated,S!==null)){if(g)i.flags&256?(Dn(i),i.flags&=-257,i=zr(n,i,a)):i.memoizedState!==null?(In(),i.child=n.child,i.flags|=128,i=null):(In(),d=c.fallback,S=i.mode,c=Sa({mode:"visible",children:c.children},S),d=ti(d,S,a,null),d.flags|=2,c.return=i,d.return=i,c.sibling=d,i.child=c,Ji(i,n.child,null,a),c=i.child,c.memoizedState=Gr(a),c.childLanes=Or(n,T,a),i.memoizedState=qr,i=d);else if(Dn(i),Cu(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var D=T.dgst;T=D,c=Error(o(419)),c.stack="",c.digest=T,zl({value:c,source:null,stack:null}),i=zr(n,i,a)}else if(it||Hl(n,i,a,!1),T=(a&n.childLanes)!==0,it||T){if(T=Oe,T!==null&&(c=a&-a,c=(c&42)!==0?1:Es(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==E.retryLane))throw E.retryLane=c,Li(n,c),Rt(T,n,c),Gd;S.data==="$?"||au(),i=zr(n,i,a)}else S.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=E.treeContext,Ze=Ft(S.nextSibling),mt=i,De=!0,li=null,Zt=!1,n!==null&&(Lt[Vt++]=an,Lt[Vt++]=sn,Lt[Vt++]=ni,an=n.id,sn=n.overflow,ni=i),i=Br(i,c.children),i.flags|=4096);return i}return d?(In(),d=c.fallback,S=i.mode,E=n.child,D=E.sibling,c=on(E,{mode:"hidden",children:c.children}),c.subtreeFlags=E.subtreeFlags&65011712,D!==null?d=on(D,d):(d=ti(d,S,a,null),d.flags|=2),d.return=i,c.return=i,c.sibling=d,i.child=c,c=d,d=i.child,S=n.child.memoizedState,S===null?S=Gr(a):(E=S.cachePool,E!==null?(D=et._currentValue,E=E.parent!==D?{parent:D,pool:D}:E):E=kf(),S={baseLanes:S.baseLanes|a,cachePool:E}),d.memoizedState=S,d.childLanes=Or(n,T,a),i.memoizedState=qr,c):(Dn(i),a=n.child,n=a.sibling,a=on(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,n!==null&&(T=i.deletions,T===null?(i.deletions=[n],i.flags|=16):T.push(n)),i.child=a,i.memoizedState=null,a)}function Br(n,i){return i=Sa({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Sa(n,i){return n=Et(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function zr(n,i,a){return Ji(i,n.child,null,a),n=Br(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function $d(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),ar(n.return,i,a)}function Hr(n,i,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function Xd(n,i,a){var c=i.pendingProps,d=c.revealOrder,g=c.tail;if(at(n,i,c.children,a),c=tt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$d(n,a,i);else if(n.tag===19)$d(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch($(tt,c),d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&va(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Hr(i,!1,d,a,g);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&va(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Hr(i,!0,a,null,g);break;case"together":Hr(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function dn(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Pn|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Hl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(o(153));if(i.child!==null){for(n=i.child,a=on(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=on(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Fr(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&na(n)))}function Yv(n,i,a){switch(i.tag){case 3:Fe(i,i.stateNode.containerInfo),bn(i,et,n.memoizedState.cache),Bl();break;case 27:case 5:xs(i);break;case 4:Fe(i,i.stateNode.containerInfo);break;case 10:bn(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Dn(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Kd(n,i,a):(Dn(i),n=dn(n,i,a),n!==null?n.sibling:null);Dn(i);break;case 19:var d=(n.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Hl(n,i,a,!1),c=(a&i.childLanes)!==0),d){if(c)return Xd(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$(tt,tt.current),c)break;return null;case 22:case 23:return i.lanes=0,Hd(n,i,a);case 24:bn(i,et,n.memoizedState.cache)}return dn(n,i,a)}function Qd(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)it=!0;else{if(!Fr(n,a)&&(i.flags&128)===0)return it=!1,Yv(n,i,a);it=(n.flags&131072)!==0}else it=!1,De&&(i.flags&1048576)!==0&&Mf(i,ta,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,d=c._init;if(c=d(c._payload),i.type=c,typeof c=="function")js(c)?(n=ci(c,n),i.tag=1,i=Jd(null,i,c,n,a)):(i.tag=0,i=Pr(null,i,c,n,a));else{if(c!=null){if(d=c.$$typeof,d===Q){i.tag=11,i=Od(null,i,c,n,a);break e}else if(d===W){i.tag=14,i=Bd(null,i,c,n,a);break e}}throw i=Ge(c)||c,Error(o(306,i,""))}}return i;case 0:return Pr(n,i,i.type,i.pendingProps,a);case 1:return c=i.type,d=ci(c,i.pendingProps),Jd(n,i,c,d,a);case 3:e:{if(Fe(i,i.stateNode.containerInfo),n===null)throw Error(o(387));c=i.pendingProps;var g=i.memoizedState;d=g.element,mr(n,i),Xl(i,c,null,a);var T=i.memoizedState;if(c=T.cache,bn(i,et,c),c!==g.cache&&sr(i,[et],a,!0),$l(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Zd(n,i,c,a);break e}else if(c!==d){d=Ut(Error(o(424)),i),zl(d),i=Zd(n,i,c,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ze=Ft(n.firstChild),mt=i,De=!0,li=null,Zt=!0,a=Rd(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Bl(),c===d){i=dn(n,i,a);break e}at(n,i,c,a)}i=i.child}return i;case 26:return _a(n,i),n===null?(a=tp(i.type,null,i.pendingProps,null))?i.memoizedState=a:De||(a=i.type,n=i.pendingProps,c=Va(he.current).createElement(a),c[ut]=i,c[ht]=n,rt(c,a,n),nt(c),i.stateNode=c):i.memoizedState=tp(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return xs(i),n===null&&De&&(c=i.stateNode=Wm(i.type,i.pendingProps,he.current),mt=i,Zt=!0,d=Ze,Bn(i.type)?(Eu=d,Ze=Ft(c.firstChild)):Ze=d),at(n,i,i.pendingProps.children,a),_a(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&De&&((d=c=Ze)&&(c=xx(c,i.type,i.pendingProps,Zt),c!==null?(i.stateNode=c,mt=i,Ze=Ft(c.firstChild),Zt=!1,d=!0):d=!1),d||oi(i)),xs(i),d=i.type,g=i.pendingProps,T=n!==null?n.memoizedProps:null,c=g.children,Tu(d,g)?c=null:T!==null&&Tu(d,T)&&(i.flags|=32),i.memoizedState!==null&&(d=xr(n,i,Pv,null,null,a),xo._currentValue=d),_a(n,i),at(n,i,c,a),i.child;case 6:return n===null&&De&&((n=a=Ze)&&(a=Tx(a,i.pendingProps,Zt),a!==null?(i.stateNode=a,mt=i,Ze=null,n=!0):n=!1),n||oi(i)),null;case 13:return Kd(n,i,a);case 4:return Fe(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Ji(i,null,c,a):at(n,i,c,a),i.child;case 11:return Od(n,i,i.type,i.pendingProps,a);case 7:return at(n,i,i.pendingProps,a),i.child;case 8:return at(n,i,i.pendingProps.children,a),i.child;case 12:return at(n,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,bn(i,i.type,c.value),at(n,i,c.children,a),i.child;case 9:return d=i.type._context,c=i.pendingProps.children,si(i),d=ct(d),c=c(d),i.flags|=1,at(n,i,c,a),i.child;case 14:return Bd(n,i,i.type,i.pendingProps,a);case 15:return zd(n,i,i.type,i.pendingProps,a);case 19:return Xd(n,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},n===null?(a=Sa(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=on(n.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Hd(n,i,a);case 24:return si(i),c=ct(et),n===null?(d=cr(),d===null&&(d=Oe,g=rr(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),i.memoizedState={parent:c,cache:d},dr(i),bn(i,et,d)):((n.lanes&a)!==0&&(mr(n,i),Xl(i,null,null,a),$l()),d=n.memoizedState,g=i.memoizedState,d.parent!==c?(d={parent:c,cache:c},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),bn(i,et,c)):(c=g.cache,bn(i,et,c),c!==d.cache&&sr(i,[et],a,!0))),at(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function mn(n){n.flags|=4}function Wd(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ap(i)){if(i=Pt.current,i!==null&&((Ne&4194048)===Ne?Kt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||i!==Kt))throw Zl=fr,Lf;n.flags|=8192}}function Ca(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Rc():536870912,n.lanes|=i,Xi|=i)}function io(n,i){if(!De)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Je(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Jv(n,i,a){var c=i.pendingProps;switch(ir(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(i),null;case 1:return Je(i),null;case 3:return a=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),un(et),Sn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ol(i)?mn(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wf())),Je(i),null;case 26:return a=i.memoizedState,n===null?(mn(i),a!==null?(Je(i),Wd(i,a)):(Je(i),i.flags&=-16777217)):a?a!==n.memoizedState?(mn(i),Je(i),Wd(i,a)):(Je(i),i.flags&=-16777217):(n.memoizedProps!==c&&mn(i),Je(i),i.flags&=-16777217),null;case 27:ko(i),a=he.current;var d=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&mn(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return Je(i),null}n=ue.current,Ol(i)?Nf(i):(n=Wm(d,c,a),i.stateNode=n,mn(i))}return Je(i),null;case 5:if(ko(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&mn(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return Je(i),null}if(n=ue.current,Ol(i))Nf(i);else{switch(d=Va(he.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?d.createElement(a,{is:c.is}):d.createElement(a)}}n[ut]=i,n[ht]=c;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=n;e:switch(rt(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&mn(i)}}return Je(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&mn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(o(166));if(n=he.current,Ol(i)){if(n=i.stateNode,a=i.memoizedProps,c=null,d=mt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[ut]=i,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Ym(n.nodeValue,a)),n||oi(i)}else n=Va(n).createTextNode(c),n[ut]=i,i.stateNode=n}return Je(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ol(i),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(o(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[ut]=i}else Bl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Je(i),d=!1}else d=wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(fn(i),i):(fn(i),null)}if(fn(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=i.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Ca(i,i.updateQueue),Je(i),null;case 4:return Sn(),n===null&&hu(i.stateNode.containerInfo),Je(i),null;case 10:return un(i.type),Je(i),null;case 19:if(J(tt),d=i.memoizedState,d===null)return Je(i),null;if(c=(i.flags&128)!==0,g=d.rendering,g===null)if(c)io(d,!1);else{if(Ke!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=va(n),g!==null){for(i.flags|=128,io(d,!1),n=g.updateQueue,i.updateQueue=n,Ca(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)bf(a,n),a=a.sibling;return $(tt,tt.current&1|2),i.child}n=n.sibling}d.tail!==null&&Jt()>ba&&(i.flags|=128,c=!0,io(d,!1),i.lanes=4194304)}else{if(!c)if(n=va(g),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,Ca(i,n),io(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!De)return Je(i),null}else 2*Jt()-d.renderingStartTime>ba&&a!==536870912&&(i.flags|=128,c=!0,io(d,!1),i.lanes=4194304);d.isBackwards?(g.sibling=i.child,i.child=g):(n=d.last,n!==null?n.sibling=g:i.child=g,d.last=g)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Jt(),i.sibling=null,n=tt.current,$(tt,c?n&1|2:n&1),i):(Je(i),null);case 22:case 23:return fn(i),yr(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(Je(i),i.subtreeFlags&6&&(i.flags|=8192)):Je(i),a=i.updateQueue,a!==null&&Ca(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),n!==null&&J(ri),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),un(et),Je(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function Zv(n,i){switch(ir(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return un(et),Sn(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ko(i),null;case 13:if(fn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Bl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(tt),null;case 4:return Sn(),null;case 10:return un(i.type),null;case 22:case 23:return fn(i),yr(),n!==null&&J(ri),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return un(et),null;case 25:return null;default:return null}}function jd(n,i){switch(ir(i),i.tag){case 3:un(et),Sn();break;case 26:case 27:case 5:ko(i);break;case 4:Sn();break;case 13:fn(i);break;case 19:J(tt);break;case 10:un(i.type);break;case 22:case 23:fn(i),yr(),n!==null&&J(ri);break;case 24:un(et)}}function lo(n,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&n)===n){c=void 0;var g=a.create,T=a.inst;c=g(),T.destroy=c}a=a.next}while(a!==d)}}catch(S){qe(i,i.return,S)}}function Un(n,i,a){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){var T=c.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,d=i;var E=a,D=S;try{D()}catch(q){qe(d,E,q)}}}c=c.next}while(c!==g)}}catch(q){qe(i,i.return,q)}}function em(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Bf(i,a)}catch(c){qe(n,n.return,c)}}}function tm(n,i,a){a.props=ci(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){qe(n,i,c)}}function oo(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(d){qe(n,i,d)}}function $t(n,i){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(d){qe(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){qe(n,i,d)}else a.current=null}function nm(n){var i=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(d){qe(n,n.return,d)}}function Yr(n,i,a){try{var c=n.stateNode;px(c,n.type,a,i),c[ht]=i}catch(d){qe(n,n.return,d)}}function im(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Bn(n.type)||n.tag===4}function Jr(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||im(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Bn(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zr(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=La));else if(c!==4&&(c===27&&Bn(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Zr(n,i,a),n=n.sibling;n!==null;)Zr(n,i,a),n=n.sibling}function Ea(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(c===27&&Bn(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Ea(n,i,a),n=n.sibling;n!==null;)Ea(n,i,a),n=n.sibling}function lm(n){var i=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);rt(i,c,a),i[ut]=n,i[ht]=a}catch(g){qe(n,n.return,g)}}var pn=!1,Xe=!1,Kr=!1,om=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Kv(n,i){if(n=n.containerInfo,vu=za,n=gf(n),Js(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var T=0,S=-1,E=-1,D=0,q=0,O=n,I=null;t:for(;;){for(var U;O!==a||d!==0&&O.nodeType!==3||(S=T+d),O!==g||c!==0&&O.nodeType!==3||(E=T+c),O.nodeType===3&&(T+=O.nodeValue.length),(U=O.firstChild)!==null;)I=O,O=U;for(;;){if(O===n)break t;if(I===a&&++D===d&&(S=T),I===g&&++q===c&&(E=T),(U=O.nextSibling)!==null)break;O=I,I=O.parentNode}O=U}a=S===-1||E===-1?null:{start:S,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(xu={focusedElem:n,selectionRange:a},za=!1,lt=i;lt!==null;)if(i=lt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,lt=n;else for(;lt!==null;){switch(i=lt,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,a=i,d=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var ge=ci(a.type,d,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(ge,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(fe){qe(a,a.return,fe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Su(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Su(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=i.sibling,n!==null){n.return=i.return,lt=n;break}lt=i.return}}function am(n,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:kn(n,a),c&4&&lo(5,a);break;case 1:if(kn(n,a),c&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(T){qe(a,a.return,T)}else{var d=ci(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){qe(a,a.return,T)}}c&64&&em(a),c&512&&oo(a,a.return);break;case 3:if(kn(n,a),c&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Bf(n,i)}catch(T){qe(a,a.return,T)}}break;case 27:i===null&&c&4&&lm(a);case 26:case 5:kn(n,a),i===null&&c&4&&nm(a),c&512&&oo(a,a.return);break;case 12:kn(n,a);break;case 13:kn(n,a),c&4&&um(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=ix.bind(null,a),_x(n,a))));break;case 22:if(c=a.memoizedState!==null||pn,!c){i=i!==null&&i.memoizedState!==null||Xe,d=pn;var g=Xe;pn=c,(Xe=i)&&!g?Ln(n,a,(a.subtreeFlags&8772)!==0):kn(n,a),pn=d,Xe=g}break;case 30:break;default:kn(n,a)}}function sm(n){var i=n.alternate;i!==null&&(n.alternate=null,sm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ms(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ye=null,vt=!1;function hn(n,i,a){for(a=a.child;a!==null;)rm(n,i,a),a=a.sibling}function rm(n,i,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(bl,a)}catch{}switch(a.tag){case 26:Xe||$t(a,i),hn(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Xe||$t(a,i);var c=Ye,d=vt;Bn(a.type)&&(Ye=a.stateNode,vt=!1),hn(n,i,a),ho(a.stateNode),Ye=c,vt=d;break;case 5:Xe||$t(a,i);case 6:if(c=Ye,d=vt,Ye=null,hn(n,i,a),Ye=c,vt=d,Ye!==null)if(vt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(a.stateNode)}catch(g){qe(a,i,g)}else try{Ye.removeChild(a.stateNode)}catch(g){qe(a,i,g)}break;case 18:Ye!==null&&(vt?(n=Ye,Xm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Co(n)):Xm(Ye,a.stateNode));break;case 4:c=Ye,d=vt,Ye=a.stateNode.containerInfo,vt=!0,hn(n,i,a),Ye=c,vt=d;break;case 0:case 11:case 14:case 15:Xe||Un(2,a,i),Xe||Un(4,a,i),hn(n,i,a);break;case 1:Xe||($t(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&tm(a,i,c)),hn(n,i,a);break;case 21:hn(n,i,a);break;case 22:Xe=(c=Xe)||a.memoizedState!==null,hn(n,i,a),Xe=c;break;default:hn(n,i,a)}}function um(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Co(n)}catch(a){qe(i,i.return,a)}}function $v(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new om),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new om),i;default:throw Error(o(435,n.tag))}}function $r(n,i){var a=$v(n);i.forEach(function(c){var d=lx.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}function At(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c],g=n,T=i,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(Bn(S.type)){Ye=S.stateNode,vt=!1;break e}break;case 5:Ye=S.stateNode,vt=!1;break e;case 3:case 4:Ye=S.stateNode.containerInfo,vt=!0;break e}S=S.return}if(Ye===null)throw Error(o(160));rm(g,T,d),Ye=null,vt=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)cm(i,n),i=i.sibling}var Ht=null;function cm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:At(i,n),bt(n),c&4&&(Un(3,n,n.return),lo(3,n),Un(5,n,n.return));break;case 1:At(i,n),bt(n),c&512&&(Xe||a===null||$t(a,a.return)),c&64&&pn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var d=Ht;if(At(i,n),bt(n),c&512&&(Xe||a===null||$t(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Rl]||g[ut]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),rt(g,c,a),g[ut]=n,nt(g),c=g;break e;case"link":var T=lp("link","href",d).get(c+(a.href||""));if(T){for(var S=0;S<T.length;S++)if(g=T[S],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(S,1);break t}}g=d.createElement(c),rt(g,c,a),d.head.appendChild(g);break;case"meta":if(T=lp("meta","content",d).get(c+(a.content||""))){for(S=0;S<T.length;S++)if(g=T[S],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(S,1);break t}}g=d.createElement(c),rt(g,c,a),d.head.appendChild(g);break;default:throw Error(o(468,c))}g[ut]=n,nt(g),c=g}n.stateNode=c}else op(d,n.type,n.stateNode);else n.stateNode=ip(d,c,n.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?op(d,n.type,n.stateNode):ip(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Yr(n,n.memoizedProps,a.memoizedProps)}break;case 27:At(i,n),bt(n),c&512&&(Xe||a===null||$t(a,a.return)),a!==null&&c&4&&Yr(n,n.memoizedProps,a.memoizedProps);break;case 5:if(At(i,n),bt(n),c&512&&(Xe||a===null||$t(a,a.return)),n.flags&32){d=n.stateNode;try{Ni(d,"")}catch(U){qe(n,n.return,U)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,Yr(n,d,a!==null?a.memoizedProps:d)),c&1024&&(Kr=!0);break;case 6:if(At(i,n),bt(n),c&4){if(n.stateNode===null)throw Error(o(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(U){qe(n,n.return,U)}}break;case 3:if(Ga=null,d=Ht,Ht=Pa(i.containerInfo),At(i,n),Ht=d,bt(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Co(i.containerInfo)}catch(U){qe(n,n.return,U)}Kr&&(Kr=!1,fm(n));break;case 4:c=Ht,Ht=Pa(n.stateNode.containerInfo),At(i,n),bt(n),Ht=c;break;case 12:At(i,n),bt(n);break;case 13:At(i,n),bt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(tu=Jt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$r(n,c)));break;case 22:d=n.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,D=pn,q=Xe;if(pn=D||d,Xe=q||E,At(i,n),Xe=q,pn=D,bt(n),c&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||E||pn||Xe||fi(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){E=a=i;try{if(g=E.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=E.stateNode;var O=E.memoizedProps.style,I=O!=null&&O.hasOwnProperty("display")?O.display:null;S.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(U){qe(E,E.return,U)}}}else if(i.tag===6){if(a===null){E=i;try{E.stateNode.nodeValue=d?"":E.memoizedProps}catch(U){qe(E,E.return,U)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,$r(n,a))));break;case 19:At(i,n),bt(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$r(n,c)));break;case 30:break;case 21:break;default:At(i,n),bt(n)}}function bt(n){var i=n.flags;if(i&2){try{for(var a,c=n.return;c!==null;){if(im(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var d=a.stateNode,g=Jr(n);Ea(n,g,d);break;case 5:var T=a.stateNode;a.flags&32&&(Ni(T,""),a.flags&=-33);var S=Jr(n);Ea(n,S,T);break;case 3:case 4:var E=a.stateNode.containerInfo,D=Jr(n);Zr(n,D,E);break;default:throw Error(o(161))}}catch(q){qe(n,n.return,q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function fm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;fm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function kn(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)am(n,i.alternate,i),i=i.sibling}function fi(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Un(4,i,i.return),fi(i);break;case 1:$t(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&tm(i,i.return,a),fi(i);break;case 27:ho(i.stateNode);case 26:case 5:$t(i,i.return),fi(i);break;case 22:i.memoizedState===null&&fi(i);break;case 30:fi(i);break;default:fi(i)}n=n.sibling}}function Ln(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,d=n,g=i,T=g.flags;switch(g.tag){case 0:case 11:case 15:Ln(d,g,a),lo(4,g);break;case 1:if(Ln(d,g,a),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(D){qe(c,c.return,D)}if(c=g,d=c.updateQueue,d!==null){var S=c.stateNode;try{var E=d.shared.hiddenCallbacks;if(E!==null)for(d.shared.hiddenCallbacks=null,d=0;d<E.length;d++)Of(E[d],S)}catch(D){qe(c,c.return,D)}}a&&T&64&&em(g),oo(g,g.return);break;case 27:lm(g);case 26:case 5:Ln(d,g,a),a&&c===null&&T&4&&nm(g),oo(g,g.return);break;case 12:Ln(d,g,a);break;case 13:Ln(d,g,a),a&&T&4&&um(d,g);break;case 22:g.memoizedState===null&&Ln(d,g,a),oo(g,g.return);break;case 30:break;default:Ln(d,g,a)}i=i.sibling}}function Xr(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Fl(a))}function Qr(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Fl(n))}function Xt(n,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dm(n,i,a,c),i=i.sibling}function dm(n,i,a,c){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Xt(n,i,a,c),d&2048&&lo(9,i);break;case 1:Xt(n,i,a,c);break;case 3:Xt(n,i,a,c),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Fl(n)));break;case 12:if(d&2048){Xt(n,i,a,c),n=i.stateNode;try{var g=i.memoizedProps,T=g.id,S=g.onPostCommit;typeof S=="function"&&S(T,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(E){qe(i,i.return,E)}}else Xt(n,i,a,c);break;case 13:Xt(n,i,a,c);break;case 23:break;case 22:g=i.stateNode,T=i.alternate,i.memoizedState!==null?g._visibility&2?Xt(n,i,a,c):ao(n,i):g._visibility&2?Xt(n,i,a,c):(g._visibility|=2,Zi(n,i,a,c,(i.subtreeFlags&10256)!==0)),d&2048&&Xr(T,i);break;case 24:Xt(n,i,a,c),d&2048&&Qr(i.alternate,i);break;default:Xt(n,i,a,c)}}function Zi(n,i,a,c,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,T=i,S=a,E=c,D=T.flags;switch(T.tag){case 0:case 11:case 15:Zi(g,T,S,E,d),lo(8,T);break;case 23:break;case 22:var q=T.stateNode;T.memoizedState!==null?q._visibility&2?Zi(g,T,S,E,d):ao(g,T):(q._visibility|=2,Zi(g,T,S,E,d)),d&&D&2048&&Xr(T.alternate,T);break;case 24:Zi(g,T,S,E,d),d&&D&2048&&Qr(T.alternate,T);break;default:Zi(g,T,S,E,d)}i=i.sibling}}function ao(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,c=i,d=c.flags;switch(c.tag){case 22:ao(a,c),d&2048&&Xr(c.alternate,c);break;case 24:ao(a,c),d&2048&&Qr(c.alternate,c);break;default:ao(a,c)}i=i.sibling}}var so=8192;function Ki(n){if(n.subtreeFlags&so)for(n=n.child;n!==null;)mm(n),n=n.sibling}function mm(n){switch(n.tag){case 26:Ki(n),n.flags&so&&n.memoizedState!==null&&kx(Ht,n.memoizedState,n.memoizedProps);break;case 5:Ki(n);break;case 3:case 4:var i=Ht;Ht=Pa(n.stateNode.containerInfo),Ki(n),Ht=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=so,so=16777216,Ki(n),so=i):Ki(n));break;default:Ki(n)}}function pm(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ro(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];lt=c,gm(c,n)}pm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hm(n),n=n.sibling}function hm(n){switch(n.tag){case 0:case 11:case 15:ro(n),n.flags&2048&&Un(9,n,n.return);break;case 3:ro(n);break;case 12:ro(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Aa(n)):ro(n);break;default:ro(n)}}function Aa(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];lt=c,gm(c,n)}pm(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Un(8,i,i.return),Aa(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Aa(i));break;default:Aa(i)}n=n.sibling}}function gm(n,i){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:Un(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Fl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,lt=c;else e:for(a=n;lt!==null;){c=lt;var d=c.sibling,g=c.return;if(sm(c),c===a){lt=null;break e}if(d!==null){d.return=g,lt=d;break e}lt=g}}}var Xv={getCacheForType:function(n){var i=ct(et),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},Qv=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Oe=null,Ae=null,Ne=0,Ue=0,Mt=null,Vn=!1,$i=!1,Wr=!1,gn=0,Ke=0,Pn=0,di=0,jr=0,qt=0,Xi=0,uo=null,xt=null,eu=!1,tu=0,ba=1/0,Ma=null,qn=null,st=0,Gn=null,Qi=null,Wi=0,nu=0,iu=null,ym=null,co=0,lu=null;function Nt(){if((Ie&2)!==0&&Ne!==0)return Ne&-Ne;if(P.T!==null){var n=Gi;return n!==0?n:fu()}return Ic()}function vm(){qt===0&&(qt=(Ne&536870912)===0||De?Nc():536870912);var n=Pt.current;return n!==null&&(n.flags|=32),qt}function Rt(n,i,a){(n===Oe&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)&&(ji(n,0),On(n,Ne,qt,!1)),Nl(n,a),((Ie&2)===0||n!==Oe)&&(n===Oe&&((Ie&2)===0&&(di|=a),Ke===4&&On(n,Ne,qt,!1)),Qt(n))}function xm(n,i,a){if((Ie&6)!==0)throw Error(o(327));var c=!a&&(i&124)===0&&(i&n.expiredLanes)===0||Ml(n,i),d=c?ex(n,i):su(n,i,!0),g=c;do{if(d===0){$i&&!c&&On(n,i,0,!1);break}else{if(a=n.current.alternate,g&&!Wv(a)){d=su(n,i,!1),g=!1;continue}if(d===2){if(g=i,n.errorRecoveryDisabledLanes&g)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var S=n;d=uo;var E=S.current.memoizedState.isDehydrated;if(E&&(ji(S,T).flags|=256),T=su(S,T,!1),T!==2){if(Wr&&!E){S.errorRecoveryDisabledLanes|=g,di|=g,d=4;break e}g=xt,xt=d,g!==null&&(xt===null?xt=g:xt.push.apply(xt,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){ji(n,0),On(n,i,0,!0);break}e:{switch(c=n,g=d,g){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:On(c,i,qt,!Vn);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(d=tu+300-Jt(),10<d)){if(On(c,i,qt,!Vn),qo(c,0,!0)!==0)break e;c.timeoutHandle=Km(Tm.bind(null,c,a,xt,Ma,eu,i,qt,di,Xi,Vn,g,2,-0,0),d);break e}Tm(c,a,xt,Ma,eu,i,qt,di,Xi,Vn,g,0,-0,0)}}break}while(!0);Qt(n)}function Tm(n,i,a,c,d,g,T,S,E,D,q,O,I,U){if(n.timeoutHandle=-1,O=i.subtreeFlags,(O&8192||(O&16785408)===16785408)&&(vo={stylesheets:null,count:0,unsuspend:Ux},mm(i),O=Lx(),O!==null)){n.cancelPendingCommit=O(Mm.bind(null,n,i,g,a,c,d,T,S,E,q,1,I,U)),On(n,g,T,!D);return}Mm(n,i,g,a,c,d,T,S,E)}function Wv(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Ct(g(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function On(n,i,a,c){i&=~jr,i&=~di,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var d=i;0<d;){var g=31-St(d),T=1<<g;c[g]=-1,d&=~T}a!==0&&wc(n,a,i)}function Na(){return(Ie&6)===0?(fo(0),!1):!0}function ou(){if(Ae!==null){if(Ue===0)var n=Ae.return;else n=Ae,rn=ai=null,Sr(n),Yi=null,to=0,n=Ae;for(;n!==null;)jd(n.alternate,n),n=n.return;Ae=null}}function ji(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,gx(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ou(),Oe=n,Ae=a=on(n.current,null),Ne=i,Ue=0,Mt=null,Vn=!1,$i=Ml(n,i),Wr=!1,Xi=qt=jr=di=Pn=Ke=0,xt=uo=null,eu=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var d=31-St(c),g=1<<d;i|=n[d],c&=~g}return gn=i,Xo(),a}function _m(n,i){_e=null,P.H=ha,i===Jl||i===oa?(i=qf(),Ue=3):i===Lf?(i=qf(),Ue=4):Ue=i===Gd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Mt=i,Ae===null&&(Ke=1,Ta(n,Ut(i,n.current)))}function Sm(){var n=P.H;return P.H=ha,n===null?ha:n}function Cm(){var n=P.A;return P.A=Xv,n}function au(){Ke=4,Vn||(Ne&4194048)!==Ne&&Pt.current!==null||($i=!0),(Pn&134217727)===0&&(di&134217727)===0||Oe===null||On(Oe,Ne,qt,!1)}function su(n,i,a){var c=Ie;Ie|=2;var d=Sm(),g=Cm();(Oe!==n||Ne!==i)&&(Ma=null,ji(n,i)),i=!1;var T=Ke;e:do try{if(Ue!==0&&Ae!==null){var S=Ae,E=Mt;switch(Ue){case 8:ou(),T=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(i=!0);var D=Ue;if(Ue=0,Mt=null,el(n,S,E,D),a&&$i){T=0;break e}break;default:D=Ue,Ue=0,Mt=null,el(n,S,E,D)}}jv(),T=Ke;break}catch(q){_m(n,q)}while(!0);return i&&n.shellSuspendCounter++,rn=ai=null,Ie=c,P.H=d,P.A=g,Ae===null&&(Oe=null,Ne=0,Xo()),T}function jv(){for(;Ae!==null;)Em(Ae)}function ex(n,i){var a=Ie;Ie|=2;var c=Sm(),d=Cm();Oe!==n||Ne!==i?(Ma=null,ba=Jt()+500,ji(n,i)):$i=Ml(n,i);e:do try{if(Ue!==0&&Ae!==null){i=Ae;var g=Mt;t:switch(Ue){case 1:Ue=0,Mt=null,el(n,i,g,1);break;case 2:case 9:if(Vf(g)){Ue=0,Mt=null,Am(i);break}i=function(){Ue!==2&&Ue!==9||Oe!==n||(Ue=7),Qt(n)},g.then(i,i);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:Vf(g)?(Ue=0,Mt=null,Am(i)):(Ue=0,Mt=null,el(n,i,g,7));break;case 5:var T=null;switch(Ae.tag){case 26:T=Ae.memoizedState;case 5:case 27:var S=Ae;if(!T||ap(T)){Ue=0,Mt=null;var E=S.sibling;if(E!==null)Ae=E;else{var D=S.return;D!==null?(Ae=D,Ra(D)):Ae=null}break t}}Ue=0,Mt=null,el(n,i,g,5);break;case 6:Ue=0,Mt=null,el(n,i,g,6);break;case 8:ou(),Ke=6;break e;default:throw Error(o(462))}}tx();break}catch(q){_m(n,q)}while(!0);return rn=ai=null,P.H=c,P.A=d,Ie=a,Ae!==null?0:(Oe=null,Ne=0,Xo(),Ke)}function tx(){for(;Ae!==null&&!Cy();)Em(Ae)}function Em(n){var i=Qd(n.alternate,n,gn);n.memoizedProps=n.pendingProps,i===null?Ra(n):Ae=i}function Am(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Yd(a,i,i.pendingProps,i.type,void 0,Ne);break;case 11:i=Yd(a,i,i.pendingProps,i.type.render,i.ref,Ne);break;case 5:Sr(i);default:jd(a,i),i=Ae=bf(i,gn),i=Qd(a,i,gn)}n.memoizedProps=n.pendingProps,i===null?Ra(n):Ae=i}function el(n,i,a,c){rn=ai=null,Sr(i),Yi=null,to=0;var d=i.return;try{if(Fv(n,d,i,a,Ne)){Ke=1,Ta(n,Ut(a,n.current)),Ae=null;return}}catch(g){if(d!==null)throw Ae=d,g;Ke=1,Ta(n,Ut(a,n.current)),Ae=null;return}i.flags&32768?(De||c===1?n=!0:$i||(Ne&536870912)!==0?n=!1:(Vn=n=!0,(c===2||c===9||c===3||c===6)&&(c=Pt.current,c!==null&&c.tag===13&&(c.flags|=16384))),bm(i,n)):Ra(i)}function Ra(n){var i=n;do{if((i.flags&32768)!==0){bm(i,Vn);return}n=i.return;var a=Jv(i.alternate,i,gn);if(a!==null){Ae=a;return}if(i=i.sibling,i!==null){Ae=i;return}Ae=i=n}while(i!==null);Ke===0&&(Ke=5)}function bm(n,i){do{var a=Zv(n.alternate,n);if(a!==null){a.flags&=32767,Ae=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ae=n;return}Ae=n=a}while(n!==null);Ke=6,Ae=null}function Mm(n,i,a,c,d,g,T,S,E){n.cancelPendingCommit=null;do wa();while(st!==0);if((Ie&6)!==0)throw Error(o(327));if(i!==null){if(i===n.current)throw Error(o(177));if(g=i.lanes|i.childLanes,g|=Qs,Uy(n,a,g,T,S,E),n===Oe&&(Ae=Oe=null,Ne=0),Qi=i,Gn=n,Wi=a,nu=g,iu=d,ym=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ox(Lo,function(){return Im(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=P.T,P.T=null,d=X.p,X.p=2,T=Ie,Ie|=4;try{Kv(n,i,a)}finally{Ie=T,X.p=d,P.T=c}}st=1,Nm(),Rm(),wm()}}function Nm(){if(st===1){st=0;var n=Gn,i=Qi,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var c=X.p;X.p=2;var d=Ie;Ie|=4;try{cm(i,n);var g=xu,T=gf(n.containerInfo),S=g.focusedElem,E=g.selectionRange;if(T!==S&&S&&S.ownerDocument&&hf(S.ownerDocument.documentElement,S)){if(E!==null&&Js(S)){var D=E.start,q=E.end;if(q===void 0&&(q=D),"selectionStart"in S)S.selectionStart=D,S.selectionEnd=Math.min(q,S.value.length);else{var O=S.ownerDocument||document,I=O&&O.defaultView||window;if(I.getSelection){var U=I.getSelection(),ge=S.textContent.length,fe=Math.min(E.start,ge),Pe=E.end===void 0?fe:Math.min(E.end,ge);!U.extend&&fe>Pe&&(T=Pe,Pe=fe,fe=T);var R=pf(S,fe),M=pf(S,Pe);if(R&&M&&(U.rangeCount!==1||U.anchorNode!==R.node||U.anchorOffset!==R.offset||U.focusNode!==M.node||U.focusOffset!==M.offset)){var w=O.createRange();w.setStart(R.node,R.offset),U.removeAllRanges(),fe>Pe?(U.addRange(w),U.extend(M.node,M.offset)):(w.setEnd(M.node,M.offset),U.addRange(w))}}}}for(O=[],U=S;U=U.parentNode;)U.nodeType===1&&O.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<O.length;S++){var G=O[S];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}za=!!vu,xu=vu=null}finally{Ie=d,X.p=c,P.T=a}}n.current=i,st=2}}function Rm(){if(st===2){st=0;var n=Gn,i=Qi,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var c=X.p;X.p=2;var d=Ie;Ie|=4;try{am(n,i.alternate,i)}finally{Ie=d,X.p=c,P.T=a}}st=3}}function wm(){if(st===4||st===3){st=0,Ey();var n=Gn,i=Qi,a=Wi,c=ym;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?st=5:(st=0,Qi=Gn=null,Dm(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(qn=null),As(a),i=i.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(bl,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=P.T,d=X.p,X.p=2,P.T=null;try{for(var g=n.onRecoverableError,T=0;T<c.length;T++){var S=c[T];g(S.value,{componentStack:S.stack})}}finally{P.T=i,X.p=d}}(Wi&3)!==0&&wa(),Qt(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===lu?co++:(co=0,lu=n):co=0,fo(0)}}function Dm(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Fl(i)))}function wa(n){return Nm(),Rm(),wm(),Im()}function Im(){if(st!==5)return!1;var n=Gn,i=nu;nu=0;var a=As(Wi),c=P.T,d=X.p;try{X.p=32>a?32:a,P.T=null,a=iu,iu=null;var g=Gn,T=Wi;if(st=0,Qi=Gn=null,Wi=0,(Ie&6)!==0)throw Error(o(331));var S=Ie;if(Ie|=4,hm(g.current),dm(g,g.current,T,a),Ie=S,fo(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(bl,g)}catch{}return!0}finally{X.p=d,P.T=c,Dm(n,i)}}function Um(n,i,a){i=Ut(a,i),i=Vr(n.stateNode,i,2),n=Rn(n,i,2),n!==null&&(Nl(n,2),Qt(n))}function qe(n,i,a){if(n.tag===3)Um(n,n,a);else for(;i!==null;){if(i.tag===3){Um(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(qn===null||!qn.has(c))){n=Ut(a,n),a=Pd(2),c=Rn(i,a,2),c!==null&&(qd(a,c,i,n),Nl(c,2),Qt(c));break}}i=i.return}}function ru(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Qv;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(Wr=!0,d.add(a),n=nx.bind(null,n,i,a),i.then(n,n))}function nx(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Oe===n&&(Ne&a)===a&&(Ke===4||Ke===3&&(Ne&62914560)===Ne&&300>Jt()-tu?(Ie&2)===0&&ji(n,0):jr|=a,Xi===Ne&&(Xi=0)),Qt(n)}function km(n,i){i===0&&(i=Rc()),n=Li(n,i),n!==null&&(Nl(n,i),Qt(n))}function ix(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),km(n,a)}function lx(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(i),km(n,a)}function ox(n,i){return _s(n,i)}var Da=null,tl=null,uu=!1,Ia=!1,cu=!1,mi=0;function Qt(n){n!==tl&&n.next===null&&(tl===null?Da=tl=n:tl=tl.next=n),Ia=!0,uu||(uu=!0,sx())}function fo(n,i){if(!cu&&Ia){cu=!0;do for(var a=!1,c=Da;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var T=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-St(42|n)+1)-1,g&=d&~(T&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,qm(c,g))}else g=Ne,g=qo(c,c===Oe?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ml(c,g)||(a=!0,qm(c,g));c=c.next}while(a);cu=!1}}function ax(){Lm()}function Lm(){Ia=uu=!1;var n=0;mi!==0&&(hx()&&(n=mi),mi=0);for(var i=Jt(),a=null,c=Da;c!==null;){var d=c.next,g=Vm(c,i);g===0?(c.next=null,a===null?Da=d:a.next=d,d===null&&(tl=a)):(a=c,(n!==0||(g&3)!==0)&&(Ia=!0)),c=d}fo(n)}function Vm(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var T=31-St(g),S=1<<T,E=d[T];E===-1?((S&a)===0||(S&c)!==0)&&(d[T]=Iy(S,i)):E<=i&&(n.expiredLanes|=S),g&=~S}if(i=Oe,a=Ne,a=qo(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===i&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ss(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ml(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(c!==null&&Ss(c),As(a)){case 2:case 8:a=bc;break;case 32:a=Lo;break;case 268435456:a=Mc;break;default:a=Lo}return c=Pm.bind(null,n),a=_s(a,c),n.callbackPriority=i,n.callbackNode=a,i}return c!==null&&c!==null&&Ss(c),n.callbackPriority=2,n.callbackNode=null,2}function Pm(n,i){if(st!==0&&st!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(wa()&&n.callbackNode!==a)return null;var c=Ne;return c=qo(n,n===Oe?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(xm(n,c,i),Vm(n,Jt()),n.callbackNode!=null&&n.callbackNode===a?Pm.bind(null,n):null)}function qm(n,i){if(wa())return null;xm(n,i,!0)}function sx(){yx(function(){(Ie&6)!==0?_s(Ac,ax):Lm()})}function fu(){return mi===0&&(mi=Nc()),mi}function Gm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ho(""+n)}function Om(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function rx(n,i,a,c,d){if(i==="submit"&&a&&a.stateNode===d){var g=Gm((d[ht]||null).action),T=c.submitter;T&&(i=(i=T[ht]||null)?Gm(i.formAction):T.getAttribute("formAction"),i!==null&&(g=i,T=null));var S=new Zo("action","action",null,c,d);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(mi!==0){var E=T?Om(d,T):new FormData(d);Dr(a,{pending:!0,data:E,method:d.method,action:g},null,E)}}else typeof g=="function"&&(S.preventDefault(),E=T?Om(d,T):new FormData(d),Dr(a,{pending:!0,data:E,method:d.method,action:g},g,E))},currentTarget:d}]})}}for(var du=0;du<Xs.length;du++){var mu=Xs[du],ux=mu.toLowerCase(),cx=mu[0].toUpperCase()+mu.slice(1);zt(ux,"on"+cx)}zt(xf,"onAnimationEnd"),zt(Tf,"onAnimationIteration"),zt(_f,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(Mv,"onTransitionRun"),zt(Nv,"onTransitionStart"),zt(Rv,"onTransitionCancel"),zt(Sf,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mo));function Bm(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var T=c.length-1;0<=T;T--){var S=c[T],E=S.instance,D=S.currentTarget;if(S=S.listener,E!==g&&d.isPropagationStopped())break e;g=S,d.currentTarget=D;try{g(d)}catch(q){xa(q)}d.currentTarget=null,g=E}else for(T=0;T<c.length;T++){if(S=c[T],E=S.instance,D=S.currentTarget,S=S.listener,E!==g&&d.isPropagationStopped())break e;g=S,d.currentTarget=D;try{g(d)}catch(q){xa(q)}d.currentTarget=null,g=E}}}}function be(n,i){var a=i[bs];a===void 0&&(a=i[bs]=new Set);var c=n+"__bubble";a.has(c)||(zm(i,n,2,!1),a.add(c))}function pu(n,i,a){var c=0;i&&(c|=4),zm(a,n,c,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function hu(n){if(!n[Ua]){n[Ua]=!0,kc.forEach(function(a){a!=="selectionchange"&&(fx.has(a)||pu(a,!1,n),pu(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,pu("selectionchange",!1,i))}}function zm(n,i,a,c){switch(dp(i)){case 2:var d=qx;break;case 8:d=Gx;break;default:d=Ru}a=d.bind(null,i,a,n),d=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function gu(n,i,a,c,d){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var S=c.stateNode.containerInfo;if(S===d)break;if(T===4)for(T=c.return;T!==null;){var E=T.tag;if((E===3||E===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;S!==null;){if(T=Si(S),T===null)return;if(E=T.tag,E===5||E===6||E===26||E===27){c=g=T;continue e}S=S.parentNode}}c=c.return}Kc(function(){var D=g,q=Ls(a),O=[];e:{var I=Cf.get(n);if(I!==void 0){var U=Zo,ge=n;switch(n){case"keypress":if(Yo(a)===0)break e;case"keydown":case"keyup":U=ov;break;case"focusin":ge="focus",U=Bs;break;case"focusout":ge="blur",U=Bs;break;case"beforeblur":case"afterblur":U=Bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Zy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=rv;break;case xf:case Tf:case _f:U=Xy;break;case Sf:U=cv;break;case"scroll":case"scrollend":U=Yy;break;case"wheel":U=dv;break;case"copy":case"cut":case"paste":U=Wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=jc;break;case"toggle":case"beforetoggle":U=pv}var fe=(i&4)!==0,Pe=!fe&&(n==="scroll"||n==="scrollend"),R=fe?I!==null?I+"Capture":null:I;fe=[];for(var M=D,w;M!==null;){var G=M;if(w=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||w===null||R===null||(G=Dl(M,R),G!=null&&fe.push(po(M,G,w))),Pe)break;M=M.return}0<fe.length&&(I=new U(I,ge,null,a,q),O.push({event:I,listeners:fe}))}}if((i&7)===0){e:{if(I=n==="mouseover"||n==="pointerover",U=n==="mouseout"||n==="pointerout",I&&a!==ks&&(ge=a.relatedTarget||a.fromElement)&&(Si(ge)||ge[_i]))break e;if((U||I)&&(I=q.window===q?q:(I=q.ownerDocument)?I.defaultView||I.parentWindow:window,U?(ge=a.relatedTarget||a.toElement,U=D,ge=ge?Si(ge):null,ge!==null&&(Pe=f(ge),fe=ge.tag,ge!==Pe||fe!==5&&fe!==27&&fe!==6)&&(ge=null)):(U=null,ge=D),U!==ge)){if(fe=Qc,G="onMouseLeave",R="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(fe=jc,G="onPointerLeave",R="onPointerEnter",M="pointer"),Pe=U==null?I:wl(U),w=ge==null?I:wl(ge),I=new fe(G,M+"leave",U,a,q),I.target=Pe,I.relatedTarget=w,G=null,Si(q)===D&&(fe=new fe(R,M+"enter",ge,a,q),fe.target=w,fe.relatedTarget=Pe,G=fe),Pe=G,U&&ge)t:{for(fe=U,R=ge,M=0,w=fe;w;w=nl(w))M++;for(w=0,G=R;G;G=nl(G))w++;for(;0<M-w;)fe=nl(fe),M--;for(;0<w-M;)R=nl(R),w--;for(;M--;){if(fe===R||R!==null&&fe===R.alternate)break t;fe=nl(fe),R=nl(R)}fe=null}else fe=null;U!==null&&Hm(O,I,U,fe,!1),ge!==null&&Pe!==null&&Hm(O,Pe,ge,fe,!0)}}e:{if(I=D?wl(D):window,U=I.nodeName&&I.nodeName.toLowerCase(),U==="select"||U==="input"&&I.type==="file")var te=rf;else if(af(I))if(uf)te=Ev;else{te=Sv;var Ce=_v}else U=I.nodeName,!U||U.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?D&&Us(D.elementType)&&(te=rf):te=Cv;if(te&&(te=te(n,D))){sf(O,te,a,q);break e}Ce&&Ce(n,I,D),n==="focusout"&&D&&I.type==="number"&&D.memoizedProps.value!=null&&Is(I,"number",I.value)}switch(Ce=D?wl(D):window,n){case"focusin":(af(Ce)||Ce.contentEditable==="true")&&(Ii=Ce,Zs=D,Gl=null);break;case"focusout":Gl=Zs=Ii=null;break;case"mousedown":Ks=!0;break;case"contextmenu":case"mouseup":case"dragend":Ks=!1,yf(O,a,q);break;case"selectionchange":if(bv)break;case"keydown":case"keyup":yf(O,a,q)}var ae;if(Hs)e:{switch(n){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Di?lf(n,a)&&(de="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(de="onCompositionStart");de&&(ef&&a.locale!=="ko"&&(Di||de!=="onCompositionStart"?de==="onCompositionEnd"&&Di&&(ae=$c()):(An=q,qs="value"in An?An.value:An.textContent,Di=!0)),Ce=ka(D,de),0<Ce.length&&(de=new Wc(de,n,null,a,q),O.push({event:de,listeners:Ce}),ae?de.data=ae:(ae=of(a),ae!==null&&(de.data=ae)))),(ae=gv?yv(n,a):vv(n,a))&&(de=ka(D,"onBeforeInput"),0<de.length&&(Ce=new Wc("onBeforeInput","beforeinput",null,a,q),O.push({event:Ce,listeners:de}),Ce.data=ae)),rx(O,n,D,a,q)}Bm(O,i)})}function po(n,i,a){return{instance:n,listener:i,currentTarget:a}}function ka(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Dl(n,a),d!=null&&c.unshift(po(n,d,g)),d=Dl(n,i),d!=null&&c.push(po(n,d,g))),n.tag===3)return c;n=n.return}return[]}function nl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Hm(n,i,a,c,d){for(var g=i._reactName,T=[];a!==null&&a!==c;){var S=a,E=S.alternate,D=S.stateNode;if(S=S.tag,E!==null&&E===c)break;S!==5&&S!==26&&S!==27||D===null||(E=D,d?(D=Dl(a,g),D!=null&&T.unshift(po(a,D,E))):d||(D=Dl(a,g),D!=null&&T.push(po(a,D,E)))),a=a.return}T.length!==0&&n.push({event:i,listeners:T})}var dx=/\r\n?/g,mx=/\u0000|\uFFFD/g;function Fm(n){return(typeof n=="string"?n:""+n).replace(dx,`
`).replace(mx,"")}function Ym(n,i){return i=Fm(i),Fm(n)===i}function La(){}function Ve(n,i,a,c,d,g){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Ni(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Ni(n,""+c);break;case"className":Oo(n,"class",c);break;case"tabIndex":Oo(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Oo(n,a,c);break;case"style":Jc(n,c,g);break;case"data":if(i!=="object"){Oo(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ho(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&Ve(n,i,"name",d.name,d,null),Ve(n,i,"formEncType",d.formEncType,d,null),Ve(n,i,"formMethod",d.formMethod,d,null),Ve(n,i,"formTarget",d.formTarget,d,null)):(Ve(n,i,"encType",d.encType,d,null),Ve(n,i,"method",d.method,d,null),Ve(n,i,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ho(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=La);break;case"onScroll":c!=null&&be("scroll",n);break;case"onScrollEnd":c!=null&&be("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Ho(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":be("beforetoggle",n),be("toggle",n),Go(n,"popover",c);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Go(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hy.get(a)||a,Go(n,a,c))}}function yu(n,i,a,c,d,g){switch(a){case"style":Jc(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Ni(n,c):(typeof c=="number"||typeof c=="bigint")&&Ni(n,""+c);break;case"onScroll":c!=null&&be("scroll",n);break;case"onScrollEnd":c!=null&&be("scrollend",n);break;case"onClick":c!=null&&(n.onclick=La);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),g=n[ht]||null,g=g!=null?g[a]:null,typeof g=="function"&&n.removeEventListener(i,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,c,d);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Go(n,a,c)}}}function rt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",n),be("load",n);var c=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var T=a[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ve(n,i,g,T,a,null)}}d&&Ve(n,i,"srcSet",a.srcSet,a,null),c&&Ve(n,i,"src",a.src,a,null);return;case"input":be("invalid",n);var S=g=T=d=null,E=null,D=null;for(c in a)if(a.hasOwnProperty(c)){var q=a[c];if(q!=null)switch(c){case"name":d=q;break;case"type":T=q;break;case"checked":E=q;break;case"defaultChecked":D=q;break;case"value":g=q;break;case"defaultValue":S=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,i));break;default:Ve(n,i,c,q,a,null)}}zc(n,g,S,E,D,T,d,!1),Bo(n);return;case"select":be("invalid",n),c=T=g=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":g=S;break;case"defaultValue":T=S;break;case"multiple":c=S;default:Ve(n,i,d,S,a,null)}i=g,a=T,n.multiple=!!c,i!=null?Mi(n,!!c,i,!1):a!=null&&Mi(n,!!c,a,!0);return;case"textarea":be("invalid",n),g=d=c=null;for(T in a)if(a.hasOwnProperty(T)&&(S=a[T],S!=null))switch(T){case"value":c=S;break;case"defaultValue":d=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:Ve(n,i,T,S,a,null)}Fc(n,c,d,g),Bo(n);return;case"option":for(E in a)if(a.hasOwnProperty(E)&&(c=a[E],c!=null))switch(E){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ve(n,i,E,c,a,null)}return;case"dialog":be("beforetoggle",n),be("toggle",n),be("cancel",n),be("close",n);break;case"iframe":case"object":be("load",n);break;case"video":case"audio":for(c=0;c<mo.length;c++)be(mo[c],n);break;case"image":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"embed":case"source":case"link":be("error",n),be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in a)if(a.hasOwnProperty(D)&&(c=a[D],c!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ve(n,i,D,c,a,null)}return;default:if(Us(i)){for(q in a)a.hasOwnProperty(q)&&(c=a[q],c!==void 0&&yu(n,i,q,c,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(c=a[S],c!=null&&Ve(n,i,S,c,a,null))}function px(n,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,S=null,E=null,D=null,q=null;for(U in a){var O=a[U];if(a.hasOwnProperty(U)&&O!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":E=O;default:c.hasOwnProperty(U)||Ve(n,i,U,null,c,O)}}for(var I in c){var U=c[I];if(O=a[I],c.hasOwnProperty(I)&&(U!=null||O!=null))switch(I){case"type":g=U;break;case"name":d=U;break;case"checked":D=U;break;case"defaultChecked":q=U;break;case"value":T=U;break;case"defaultValue":S=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(137,i));break;default:U!==O&&Ve(n,i,I,U,c,O)}}Ds(n,T,S,E,D,q,g,d);return;case"select":U=T=S=I=null;for(g in a)if(E=a[g],a.hasOwnProperty(g)&&E!=null)switch(g){case"value":break;case"multiple":U=E;default:c.hasOwnProperty(g)||Ve(n,i,g,null,c,E)}for(d in c)if(g=c[d],E=a[d],c.hasOwnProperty(d)&&(g!=null||E!=null))switch(d){case"value":I=g;break;case"defaultValue":S=g;break;case"multiple":T=g;default:g!==E&&Ve(n,i,d,g,c,E)}i=S,a=T,c=U,I!=null?Mi(n,!!a,I,!1):!!c!=!!a&&(i!=null?Mi(n,!!a,i,!0):Mi(n,!!a,a?[]:"",!1));return;case"textarea":U=I=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ve(n,i,S,null,c,d)}for(T in c)if(d=c[T],g=a[T],c.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":I=d;break;case"defaultValue":U=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==g&&Ve(n,i,T,d,c,g)}Hc(n,I,U);return;case"option":for(var ge in a)if(I=a[ge],a.hasOwnProperty(ge)&&I!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":n.selected=!1;break;default:Ve(n,i,ge,null,c,I)}for(E in c)if(I=c[E],U=a[E],c.hasOwnProperty(E)&&I!==U&&(I!=null||U!=null))switch(E){case"selected":n.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Ve(n,i,E,I,c,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in a)I=a[fe],a.hasOwnProperty(fe)&&I!=null&&!c.hasOwnProperty(fe)&&Ve(n,i,fe,null,c,I);for(D in c)if(I=c[D],U=a[D],c.hasOwnProperty(D)&&I!==U&&(I!=null||U!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(137,i));break;default:Ve(n,i,D,I,c,U)}return;default:if(Us(i)){for(var Pe in a)I=a[Pe],a.hasOwnProperty(Pe)&&I!==void 0&&!c.hasOwnProperty(Pe)&&yu(n,i,Pe,void 0,c,I);for(q in c)I=c[q],U=a[q],!c.hasOwnProperty(q)||I===U||I===void 0&&U===void 0||yu(n,i,q,I,c,U);return}}for(var R in a)I=a[R],a.hasOwnProperty(R)&&I!=null&&!c.hasOwnProperty(R)&&Ve(n,i,R,null,c,I);for(O in c)I=c[O],U=a[O],!c.hasOwnProperty(O)||I===U||I==null&&U==null||Ve(n,i,O,I,c,U)}var vu=null,xu=null;function Va(n){return n.nodeType===9?n:n.ownerDocument}function Jm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zm(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Tu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _u=null;function hx(){var n=window.event;return n&&n.type==="popstate"?n===_u?!1:(_u=n,!0):(_u=null,!1)}var Km=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,$m=typeof Promise=="function"?Promise:void 0,yx=typeof queueMicrotask=="function"?queueMicrotask:typeof $m<"u"?function(n){return $m.resolve(null).then(n).catch(vx)}:Km;function vx(n){setTimeout(function(){throw n})}function Bn(n){return n==="head"}function Xm(n,i){var a=i,c=0,d=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var T=n.ownerDocument;if(a&1&&ho(T.documentElement),a&2&&ho(T.body),a&4)for(a=T.head,ho(a),T=a.firstChild;T;){var S=T.nextSibling,E=T.nodeName;T[Rl]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=S}}if(d===0){n.removeChild(g),Co(i);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);Co(i)}function Su(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Su(a),Ms(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function xx(n,i,a,c){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Rl])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Ft(n.nextSibling),n===null)break}return null}function Tx(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ft(n.nextSibling),n===null))return null;return n}function Cu(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function _x(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ft(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Eu=null;function Qm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function Wm(n,i,a){switch(i=Va(a),n){case"html":if(n=i.documentElement,!n)throw Error(o(452));return n;case"head":if(n=i.head,!n)throw Error(o(453));return n;case"body":if(n=i.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function ho(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ms(n)}var Gt=new Map,jm=new Set;function Pa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var yn=X.d;X.d={f:Sx,r:Cx,D:Ex,C:Ax,L:bx,m:Mx,X:Rx,S:Nx,M:wx};function Sx(){var n=yn.f(),i=Na();return n||i}function Cx(n){var i=Ci(n);i!==null&&i.tag===5&&i.type==="form"?xd(i):yn.r(n)}var il=typeof document>"u"?null:document;function ep(n,i,a){var c=il;if(c&&typeof i=="string"&&i){var d=It(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),jm.has(d)||(jm.add(d),n={rel:n,crossOrigin:a,href:i},c.querySelector(d)===null&&(i=c.createElement("link"),rt(i,"link",n),nt(i),c.head.appendChild(i)))}}function Ex(n){yn.D(n),ep("dns-prefetch",n,null)}function Ax(n,i){yn.C(n,i),ep("preconnect",n,i)}function bx(n,i,a){yn.L(n,i,a);var c=il;if(c&&n&&i){var d='link[rel="preload"][as="'+It(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+It(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+It(a.imageSizes)+'"]')):d+='[href="'+It(n)+'"]';var g=d;switch(i){case"style":g=ll(n);break;case"script":g=ol(n)}Gt.has(g)||(n=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Gt.set(g,n),c.querySelector(d)!==null||i==="style"&&c.querySelector(go(g))||i==="script"&&c.querySelector(yo(g))||(i=c.createElement("link"),rt(i,"link",n),nt(i),c.head.appendChild(i)))}}function Mx(n,i){yn.m(n,i);var a=il;if(a&&n){var c=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(n)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ol(n)}if(!Gt.has(g)&&(n=v({rel:"modulepreload",href:n},i),Gt.set(g,n),a.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yo(g)))return}c=a.createElement("link"),rt(c,"link",n),nt(c),a.head.appendChild(c)}}}function Nx(n,i,a){yn.S(n,i,a);var c=il;if(c&&n){var d=Ei(c).hoistableStyles,g=ll(n);i=i||"default";var T=d.get(g);if(!T){var S={loading:0,preload:null};if(T=c.querySelector(go(g)))S.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Gt.get(g))&&Au(n,a);var E=T=c.createElement("link");nt(E),rt(E,"link",n),E._p=new Promise(function(D,q){E.onload=D,E.onerror=q}),E.addEventListener("load",function(){S.loading|=1}),E.addEventListener("error",function(){S.loading|=2}),S.loading|=4,qa(T,i,c)}T={type:"stylesheet",instance:T,count:1,state:S},d.set(g,T)}}}function Rx(n,i){yn.X(n,i);var a=il;if(a&&n){var c=Ei(a).hoistableScripts,d=ol(n),g=c.get(d);g||(g=a.querySelector(yo(d)),g||(n=v({src:n,async:!0},i),(i=Gt.get(d))&&bu(n,i),g=a.createElement("script"),nt(g),rt(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function wx(n,i){yn.M(n,i);var a=il;if(a&&n){var c=Ei(a).hoistableScripts,d=ol(n),g=c.get(d);g||(g=a.querySelector(yo(d)),g||(n=v({src:n,async:!0,type:"module"},i),(i=Gt.get(d))&&bu(n,i),g=a.createElement("script"),nt(g),rt(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function tp(n,i,a,c){var d=(d=he.current)?Pa(d):null;if(!d)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ll(a.href),a=Ei(d).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ll(a.href);var g=Ei(d).hoistableStyles,T=g.get(n);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,T),(g=d.querySelector(go(n)))&&!g._p&&(T.instance=g,T.state.loading=5),Gt.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gt.set(n,a),g||Dx(d,n,a,T.state))),i&&c===null)throw Error(o(528,""));return T}if(i&&c!==null)throw Error(o(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ol(a),a=Ei(d).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function ll(n){return'href="'+It(n)+'"'}function go(n){return'link[rel="stylesheet"]['+n+"]"}function np(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function Dx(n,i,a,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),rt(i,"link",a),nt(i),n.head.appendChild(i))}function ol(n){return'[src="'+It(n)+'"]'}function yo(n){return"script[async]"+n}function ip(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+It(a.href)+'"]');if(c)return i.instance=c,nt(c),c;var d=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),nt(c),rt(c,"style",d),qa(c,a.precedence,n),i.instance=c;case"stylesheet":d=ll(a.href);var g=n.querySelector(go(d));if(g)return i.state.loading|=4,i.instance=g,nt(g),g;c=np(a),(d=Gt.get(d))&&Au(c,d),g=(n.ownerDocument||n).createElement("link"),nt(g);var T=g;return T._p=new Promise(function(S,E){T.onload=S,T.onerror=E}),rt(g,"link",c),i.state.loading|=4,qa(g,a.precedence,n),i.instance=g;case"script":return g=ol(a.src),(d=n.querySelector(yo(g)))?(i.instance=d,nt(d),d):(c=a,(d=Gt.get(g))&&(c=v({},a),bu(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),nt(d),rt(d,"link",c),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,qa(c,a.precedence,n));return i.instance}function qa(n,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,T=0;T<c.length;T++){var S=c[T];if(S.dataset.precedence===i)g=S;else if(g!==d)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Au(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function bu(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ga=null;function lp(n,i,a){if(Ga===null){var c=new Map,d=Ga=new Map;d.set(a,c)}else d=Ga,c=d.get(a),c||(c=new Map,d.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var g=a[d];if(!(g[Rl]||g[ut]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(i)||"";T=n+T;var S=c.get(T);S?S.push(g):c.set(T,[g])}}return c}function op(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Ix(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ap(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var vo=null;function Ux(){}function kx(n,i,a){if(vo===null)throw Error(o(475));var c=vo;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=ll(a.href),g=n.querySelector(go(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Oa.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=g,nt(g);return}g=n.ownerDocument||n,a=np(a),(d=Gt.get(d))&&Au(a,d),g=g.createElement("link"),nt(g);var T=g;T._p=new Promise(function(S,E){T.onload=S,T.onerror=E}),rt(g,"link",a),i.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=Oa.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function Lx(){if(vo===null)throw Error(o(475));var n=vo;return n.stylesheets&&n.count===0&&Mu(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Mu(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Oa(){if(this.count--,this.count===0){if(this.stylesheets)Mu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ba=null;function Mu(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ba=new Map,i.forEach(Vx,n),Ba=null,Oa.call(n))}function Vx(n,i){if(!(i.state.loading&4)){var a=Ba.get(n);if(a)var c=a.get(null);else{a=new Map,Ba.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}d=i.instance,T=d.getAttribute("data-precedence"),g=a.get(T)||c,g===c&&a.set(null,d),a.set(T,d),this.count++,c=Oa.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var xo={$$typeof:H,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Px(n,i,a,c,d,g,T,S){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.hiddenUpdates=Cs(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function sp(n,i,a,c,d,g,T,S,E,D,q,O){return n=new Px(n,i,a,T,S,E,D,O),i=1,g===!0&&(i|=24),g=Et(3,null,null,i),n.current=g,g.stateNode=n,i=rr(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:i},dr(g),n}function rp(n){return n?(n=Vi,n):Vi}function up(n,i,a,c,d,g){d=rp(d),c.context===null?c.context=d:c.pendingContext=d,c=Nn(i),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Rn(n,c,i),a!==null&&(Rt(a,n,i),Kl(a,n,i))}function cp(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Nu(n,i){cp(n,i),(n=n.alternate)&&cp(n,i)}function fp(n){if(n.tag===13){var i=Li(n,67108864);i!==null&&Rt(i,n,67108864),Nu(n,67108864)}}var za=!0;function qx(n,i,a,c){var d=P.T;P.T=null;var g=X.p;try{X.p=2,Ru(n,i,a,c)}finally{X.p=g,P.T=d}}function Gx(n,i,a,c){var d=P.T;P.T=null;var g=X.p;try{X.p=8,Ru(n,i,a,c)}finally{X.p=g,P.T=d}}function Ru(n,i,a,c){if(za){var d=wu(c);if(d===null)gu(n,i,c,Ha,a),mp(n,c);else if(Bx(d,n,i,a,c))c.stopPropagation();else if(mp(n,c),i&4&&-1<Ox.indexOf(n)){for(;d!==null;){var g=Ci(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Xn(g.pendingLanes);if(T!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var E=1<<31-St(T);S.entanglements[1]|=E,T&=~E}Qt(g),(Ie&6)===0&&(ba=Jt()+500,fo(0))}}break;case 13:S=Li(g,2),S!==null&&Rt(S,g,2),Na(),Nu(g,2)}if(g=wu(c),g===null&&gu(n,i,c,Ha,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else gu(n,i,c,null,a)}}function wu(n){return n=Ls(n),Du(n)}var Ha=null;function Du(n){if(Ha=null,n=Si(n),n!==null){var i=f(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ha=n,null}function dp(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ay()){case Ac:return 2;case bc:return 8;case Lo:case by:return 32;case Mc:return 268435456;default:return 32}default:return 32}}var Iu=!1,zn=null,Hn=null,Fn=null,To=new Map,_o=new Map,Yn=[],Ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mp(n,i){switch(n){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":To.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(i.pointerId)}}function So(n,i,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},i!==null&&(i=Ci(i),i!==null&&fp(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Bx(n,i,a,c,d){switch(i){case"focusin":return zn=So(zn,n,i,a,c,d),!0;case"dragenter":return Hn=So(Hn,n,i,a,c,d),!0;case"mouseover":return Fn=So(Fn,n,i,a,c,d),!0;case"pointerover":var g=d.pointerId;return To.set(g,So(To.get(g)||null,n,i,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,_o.set(g,So(_o.get(g)||null,n,i,a,c,d)),!0}return!1}function pp(n){var i=Si(n.target);if(i!==null){var a=f(i);if(a!==null){if(i=a.tag,i===13){if(i=m(a),i!==null){n.blockedOn=i,ky(n.priority,function(){if(a.tag===13){var c=Nt();c=Es(c);var d=Li(a,c);d!==null&&Rt(d,a,c),Nu(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fa(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=wu(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);ks=c,a.target.dispatchEvent(c),ks=null}else return i=Ci(a),i!==null&&fp(i),n.blockedOn=a,!1;i.shift()}return!0}function hp(n,i,a){Fa(n)&&a.delete(i)}function zx(){Iu=!1,zn!==null&&Fa(zn)&&(zn=null),Hn!==null&&Fa(Hn)&&(Hn=null),Fn!==null&&Fa(Fn)&&(Fn=null),To.forEach(hp),_o.forEach(hp)}function Ya(n,i){n.blockedOn===i&&(n.blockedOn=null,Iu||(Iu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zx)))}var Ja=null;function gp(n){Ja!==n&&(Ja=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ja===n&&(Ja=null);for(var i=0;i<n.length;i+=3){var a=n[i],c=n[i+1],d=n[i+2];if(typeof c!="function"){if(Du(c||a)===null)continue;break}var g=Ci(a);g!==null&&(n.splice(i,3),i-=3,Dr(g,{pending:!0,data:d,method:a.method,action:c},c,d))}}))}function Co(n){function i(E){return Ya(E,n)}zn!==null&&Ya(zn,n),Hn!==null&&Ya(Hn,n),Fn!==null&&Ya(Fn,n),To.forEach(i),_o.forEach(i);for(var a=0;a<Yn.length;a++){var c=Yn[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)pp(a),a.blockedOn===null&&Yn.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var d=a[c],g=a[c+1],T=d[ht]||null;if(typeof g=="function")T||gp(a);else if(T){var S=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[ht]||null)S=T.formAction;else if(Du(d)!==null)continue}else S=T.action;typeof S=="function"?a[c+1]=S:(a.splice(c,3),c-=3),gp(a)}}}function Uu(n){this._internalRoot=n}Za.prototype.render=Uu.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(o(409));var a=i.current,c=Nt();up(a,c,n,i,null,null)},Za.prototype.unmount=Uu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;up(n.current,2,null,n,null,null),Na(),i[_i]=null}};function Za(n){this._internalRoot=n}Za.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ic();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Yn.length&&i!==0&&i<Yn[a].priority;a++);Yn.splice(a,0,n),a===0&&pp(n)}};var yp=e.version;if(yp!=="19.1.0")throw Error(o(527,yp,"19.1.0"));X.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=y(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var Hx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{bl=Ka.inject(Hx),_t=Ka}catch{}}return Ao.createRoot=function(n,i){if(!s(n))throw Error(o(299));var a=!1,c="",d=Ud,g=kd,T=Ld,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=sp(n,1,!1,null,null,a,c,d,g,T,S,null),n[_i]=i.current,hu(n),new Uu(i)},Ao.hydrateRoot=function(n,i,a){if(!s(n))throw Error(o(299));var c=!1,d="",g=Ud,T=kd,S=Ld,E=null,D=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(E=a.unstable_transitionCallbacks),a.formState!==void 0&&(D=a.formState)),i=sp(n,1,!0,i,a??null,c,d,g,T,S,E,D),i.context=rp(null),a=i.current,c=Nt(),c=Es(c),d=Nn(c),d.callback=null,Rn(a,d,c),a=c,i.current.lanes=a,Nl(i,a),Qt(i),n[_i]=i.current,hu(n),new Za(i)},Ao.version="19.1.0",Ao}var Mp;function jx(){if(Mp)return Lu.exports;Mp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lu.exports=Wx(),Lu.exports}var yg=jx(),z=dc();const xl=Yx(z),Fu=[{label:"XX-Small",value:"0.75"},{label:"X-Small",value:"0.85"},{label:"Small",value:"1.0"},{label:"Medium",value:"1.15"},{label:"Large",value:"1.3"},{label:"X-Large",value:"1.5"}],vg=2,eT="JapaneseAnalyzerDB",tT=1,dl="text_entries",ml="review_deck",is="settings",ls="transient_state";let $a=null;const mc=()=>$a||($a=new Promise((t,e)=>{const l=indexedDB.open(eT,tT);l.onupgradeneeded=o=>{const s=o.target.result;if(s.objectStoreNames.contains(dl)||s.createObjectStore(dl,{keyPath:"id"}).createIndex("updatedAt","updatedAt",{unique:!1}),!s.objectStoreNames.contains(ml)){const f=s.createObjectStore(ml,{keyPath:"id"});f.createIndex("nextReviewDate","nextReviewDate",{unique:!1}),f.createIndex("textEntryId","textEntryId",{unique:!1})}s.objectStoreNames.contains(is)||s.createObjectStore(is,{keyPath:"key"}),s.objectStoreNames.contains(ls)||s.createObjectStore(ls,{keyPath:"key"})},l.onsuccess=o=>{t(o.target.result)},l.onerror=o=>{console.error("IndexedDB error:",o.target.error),e("IndexedDB error")}}),$a),Tl=async(t,e)=>(await mc()).transaction(t,e).objectStore(t),nT=async(t,e)=>{const l=await Tl(t,"readonly");return new Promise((o,s)=>{const f=l.get(e);f.onsuccess=()=>o(f.result),f.onerror=()=>s(f.error)})},pc=async t=>{const e=await Tl(t,"readonly");return new Promise((l,o)=>{const s=e.getAll();s.onsuccess=()=>l(s.result),s.onerror=()=>o(s.error)})},hc=async(t,e)=>{const l=await Tl(t,"readwrite");return new Promise((o,s)=>{const f=l.put(e);f.onsuccess=()=>o(f.result),f.onerror=()=>s(f.error)})},xg=async(t,e)=>{const l=await Tl(t,"readwrite");return new Promise((o,s)=>{const f=l.delete(e);f.onsuccess=()=>o(f.result),f.onerror=()=>s(f.error)})},Tg=async t=>{const e=await Tl(t,"readwrite");return new Promise((l,o)=>{const s=e.clear();s.onsuccess=()=>l(s.result),s.onerror=()=>o(s.error)})},_g=()=>pc(dl).then(t=>t.sort((e,l)=>l.updatedAt-e.updatedAt)),sl=t=>hc(dl,t),iT=t=>xg(dl,t),Yu=()=>Tg(dl),Sg=()=>pc(ml).then(t=>t.sort((e,l)=>e.addedAt-l.addedAt)),Ju=t=>hc(ml,t),lT=t=>xg(ml,t),Cg=()=>Tg(ml),gc=async()=>{const e=(await pc(is)).reduce((l,{key:o,value:s})=>(l[o]=s,l),{});return{theme:e.theme||"light",showFurigana:e.showFurigana!==!1,showColorCoding:e.showColorCoding!==!1,showPitchAccent:e.showPitchAccent!==!1,analysisDepth:e.analysisDepth||"medium",fontSizeIndex:e.fontSizeIndex??vg,newWordsPerDay:e.newWordsPerDay||10,userApiKey:e.userApiKey||null}},Eg=async t=>{const e=await Tl(is,"readwrite"),l=Object.entries(t).map(([o,s])=>new Promise((f,m)=>{const h=e.put({key:o,value:s});h.onsuccess=f,h.onerror=m}));return Promise.all(l)},Np=t=>nT(ls,t).then(e=>e==null?void 0:e.value),os=(t,e)=>hc(ls,{key:t,value:e});var ze=(t=>(t.Editor="EDITOR",t.Reader="READER",t.ReadingMode="READING_MODE",t.Review="REVIEW",t))(ze||{});const Ag={isLoading:!0,view:"EDITOR",currentTextEntryId:null,editingEntryId:null,selectedSentence:null,history:[],reviewDeck:[]},oT=(t,e)=>{switch(e.type){case"INITIALIZE_DATA_SUCCESS":return{...t,isLoading:!1,...e.payload};case"INITIALIZE_DATA_FAILURE":return{...t,isLoading:!1};case"SET_VIEW":return{...t,view:e.payload,selectedSentence:null};case"START_EDITING":return{...t,view:"EDITOR",editingEntryId:e.payload,currentTextEntryId:e.payload,selectedSentence:null};case"RESET_VIEW":return os("unsaved-title",""),os("unsaved-text",""),{...t,view:"EDITOR",currentTextEntryId:null,selectedSentence:null,editingEntryId:null};case"SET_CURRENT_TEXT_ENTRY_ID":return{...t,currentTextEntryId:e.payload,selectedSentence:null};case"SET_SELECTED_SENTENCE":return{...t,selectedSentence:e.payload};case"SET_HISTORY":{const l=e.payload;return Yu().then(()=>{l.forEach(o=>sl(o))}),{...t,history:l}}case"ADD_OR_UPDATE_TEXT_ENTRY":{const l=e.payload;sl(l);const o=t.history.findIndex(f=>f.id===l.id);let s;return o>-1?(s=[...t.history],s[o]=l):s=[l,...t.history],s.sort((f,m)=>m.updatedAt-f.updatedAt),{...t,history:s,editingEntryId:null}}case"REMOVE_TEXT_ENTRY":{const l=e.payload;iT(l);const o=t.history.filter(f=>f.id!==l),s=t.currentTextEntryId===l;return{...t,history:o,currentTextEntryId:s?null:t.currentTextEntryId,view:s?"EDITOR":t.view,selectedSentence:s?null:t.selectedSentence}}case"CLEAR_HISTORY":return Yu(),{...t,history:[],currentTextEntryId:null,view:"EDITOR",selectedSentence:null};case"SET_REVIEW_DECK":{const l=e.payload;return Cg().then(()=>{l.forEach(o=>Ju(o))}),{...t,reviewDeck:l}}case"ADD_OR_UPDATE_REVIEW_ITEM":{const l=e.payload;Ju(l);const o=t.reviewDeck.findIndex(f=>f.id===l.id);let s;return o>-1?(s=[...t.reviewDeck],s[o]=l):s=[...t.reviewDeck,l],s.sort((f,m)=>f.addedAt-m.addedAt),{...t,reviewDeck:s}}case"REMOVE_REVIEW_ITEM":{const l=e.payload;lT(l);const o=t.reviewDeck.filter(s=>s.id!==l);return{...t,reviewDeck:o}}case"NAVIGATE_SENTENCE":{if(!t.currentTextEntryId)return t;const l=t.history.findIndex(y=>y.id===t.currentTextEntryId);if(l===-1)return t;const o=[...t.history],s={...o[l]},f=s.text.split(`
`).flatMap(y=>{var p;return((p=y.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:p.filter(v=>v==null?void 0:v.trim()))||[]}),h=s.readingProgress+(e.payload.direction==="next"?1:-1);return h>=0&&h<f.length?(s.readingProgress=h,o[l]=s,sl(s),{...t,history:o}):t}case"JUMP_TO_SENTENCE":{if(!t.currentTextEntryId)return t;const l=t.history.findIndex(h=>h.id===t.currentTextEntryId);if(l===-1)return t;const o=[...t.history],s={...o[l]},f=s.text.split(`
`).flatMap(h=>{var y;return((y=h.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:y.filter(p=>p==null?void 0:p.trim()))||[]}),m=e.payload.index;return m>=0&&m<f.length?(s.readingProgress=m,o[l]=s,sl(s),{...t,history:o}):t}case"CACHE_ANALYSIS":{const{entryId:l,sentence:o,depth:s,analysis:f}=e.payload,m=t.history.findIndex(C=>C.id===l);if(m===-1)return t;const h=[...t.history],y=h[m],p={...y.analyzedSentences[o]||{},[s]:f},v={...y.analyzedSentences,[o]:p},_={...y,analyzedSentences:v};return h[m]=_,sl(_),{...t,history:h}}default:return t}},bg=z.createContext({state:Ag,dispatch:()=>null});function Mg({children:t,_testDispatch:e,_testState:l}){const[o,s]=z.useReducer(oT,l||Ag),f=e||s;return z.useEffect(()=>{if(l)return;const m=async()=>{try{const h=await _g(),y=await Sg();s({type:"INITIALIZE_DATA_SUCCESS",payload:{history:h,reviewDeck:y}})}catch(h){console.error("Failed to load app data from IndexedDB",h),s({type:"INITIALIZE_DATA_FAILURE"})}};mc().then(m).catch(h=>{console.error("DB Init failed",h),s({type:"INITIALIZE_DATA_FAILURE"})})},[l]),x.jsx(bg.Provider,{value:{state:o,dispatch:f},children:t})}const wt=()=>z.useContext(bg),Rp=["low","medium","high"],Ng={isLoading:!0,theme:"light",showFurigana:!0,showColorCoding:!0,showPitchAccent:!0,analysisDepth:"medium",fontSizeIndex:vg,newWordsPerDay:10,userApiKey:null},wp=t=>{document.documentElement.classList.toggle("dark",t.theme==="dark"),document.documentElement.style.setProperty("--font-size-multiplier",Fu[t.fontSizeIndex].value)},aT=(t,e)=>{switch(e.type){case"INITIALIZE_SETTINGS_SUCCESS":return wp(e.payload),{...t,isLoading:!1,...e.payload};case"INITIALIZE_SETTINGS_FAILURE":return{...t,isLoading:!1};case"UPDATE_SETTINGS":{const l={...t,...e.payload},o={...e.payload};return typeof o.userApiKey=="string"&&o.userApiKey.trim().length>0?o.userApiKey=o.userApiKey.trim():o.userApiKey=null,Eg(o),wp(l),l}default:return t}},Rg=z.createContext({state:Ng,dispatch:()=>null});function wg({children:t,_testState:e}){const[l,o]=z.useReducer(aT,e||Ng);return z.useEffect(()=>{if(e)return;const s=async()=>{try{const f=await gc();o({type:"INITIALIZE_SETTINGS_SUCCESS",payload:f})}catch(f){console.error("Failed to load settings from IndexedDB",f),o({type:"INITIALIZE_SETTINGS_FAILURE"})}};mc().then(s).catch(f=>{console.error("DB Init failed",f),o({type:"INITIALIZE_SETTINGS_FAILURE"})})},[e]),x.jsx(Rg.Provider,{value:{state:l,dispatch:o},children:t})}const Yt=()=>z.useContext(Rg),Ro={isHistoryPanelOpen:!1,tooltip:{visible:!1,content:null,position:{top:0,left:0},pinned:!1,targetElement:null},bottomSheet:{visible:!1,content:{title:"",body:null},targetElement:null}},sT=(t,e)=>{switch(e.type){case"SET_HISTORY_PANEL_OPEN":return{...t,isHistoryPanelOpen:e.payload};case"SHOW_TOOLTIP":return t.tooltip.pinned?t:{...t,tooltip:{...t.tooltip,visible:!0,pinned:!1,...e.payload}};case"HIDE_TOOLTIP":return{...t,tooltip:{...Ro.tooltip}};case"PIN_TOOLTIP":return t.tooltip.targetElement===e.payload.targetElement&&t.tooltip.pinned?{...t,tooltip:{...Ro.tooltip}}:{...t,tooltip:{visible:!0,pinned:!0,...e.payload}};case"SHOW_BOTTOM_SHEET":return document.body.classList.add("overflow-hidden","md:overflow-auto"),{...t,bottomSheet:{visible:!0,...e.payload}};case"HIDE_BOTTOM_SHEET":return document.body.classList.remove("overflow-hidden","md:overflow-auto"),{...t,bottomSheet:{...Ro.bottomSheet}};default:return t}},Dg=z.createContext({state:Ro,dispatch:()=>null});function Ig({children:t}){const[e,l]=z.useReducer(sT,Ro);return x.jsx(Dg.Provider,{value:{state:e,dispatch:l},children:t})}const xn=()=>z.useContext(Dg);var ps=gg();const Ug=z.createContext(void 0);function kg({children:t}){const[e,l]=z.useState({isOpen:!1,message:""}),o=()=>{l({isOpen:!1,message:""})},s=()=>{var y;(y=e.onConfirm)==null||y.call(e),o()},f=()=>{var y;(y=e.onCancel)==null||y.call(e),o()},m=z.useCallback((y,p,v={})=>{l({isOpen:!0,message:y,onConfirm:p,onCancel:()=>{},confirmText:v.confirmText||"Confirm",confirmClass:v.confirmClass||"bg-destructive hover:bg-destructive-hover",cancelText:v.cancelText||"Cancel",isAlert:!1})},[]),h=z.useCallback((y,p={})=>{l({isOpen:!0,message:y,onConfirm:p.onOk,confirmText:"OK",confirmClass:"bg-accent hover:bg-accent/90",isAlert:!0})},[]);return x.jsxs(Ug.Provider,{value:{showConfirmation:m,showAlert:h},children:[t,e.isOpen&&ps.createPortal(x.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 transition-opacity animate-fade-in",children:x.jsxs("div",{className:"glass-morphism rounded-2xl shadow-2xl p-8 w-full max-w-md transform transition-all animate-slide-in",children:[x.jsx("p",{className:"text-text-secondary text-lg mb-8",children:e.message}),x.jsxs("div",{className:"flex justify-end gap-4",children:[!e.isAlert&&x.jsx("button",{onClick:f,className:"px-5 py-3 rounded-xl text-base font-medium text-text-secondary bg-surface-subtle hover:bg-surface-hover transition-colors shadow-sm",children:e.cancelText}),x.jsx("button",{onClick:s,className:`px-5 py-3 rounded-xl text-base font-medium text-primary-text transition-colors shadow-lg ${e.confirmClass}`,children:e.confirmText})]})]})}),document.body)]})}const _l=()=>{const t=z.useContext(Ug);if(t===void 0)throw new Error("useModal must be used within a ModalProvider");return t};var we;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function l(s){throw new Error}t.assertNever=l,t.arrayToEnum=s=>{const f={};for(const m of s)f[m]=m;return f},t.getValidEnumValues=s=>{const f=t.objectKeys(s).filter(h=>typeof s[s[h]]!="number"),m={};for(const h of f)m[h]=s[h];return t.objectValues(m)},t.objectValues=s=>t.objectKeys(s).map(function(f){return s[f]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const f=[];for(const m in s)Object.prototype.hasOwnProperty.call(s,m)&&f.push(m);return f},t.find=(s,f)=>{for(const m of s)if(f(m))return m},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function o(s,f=" | "){return s.map(m=>typeof m=="string"?`'${m}'`:m).join(f)}t.joinValues=o,t.jsonStringifyReplacer=(s,f)=>typeof f=="bigint"?f.toString():f})(we||(we={}));var Dp;(function(t){t.mergeShapes=(e,l)=>({...e,...l})})(Dp||(Dp={}));const ne=we.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zn=t=>{switch(typeof t){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return Number.isNaN(t)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(t)?ne.array:t===null?ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ne.promise:typeof Map<"u"&&t instanceof Map?ne.map:typeof Set<"u"&&t instanceof Set?ne.set:typeof Date<"u"&&t instanceof Date?ne.date:ne.object;default:return ne.unknown}},Z=we.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class vn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const l=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,l):this.__proto__=l,this.name="ZodError",this.issues=e}format(e){const l=e||function(f){return f.message},o={_errors:[]},s=f=>{for(const m of f.issues)if(m.code==="invalid_union")m.unionErrors.map(s);else if(m.code==="invalid_return_type")s(m.returnTypeError);else if(m.code==="invalid_arguments")s(m.argumentsError);else if(m.path.length===0)o._errors.push(l(m));else{let h=o,y=0;for(;y<m.path.length;){const p=m.path[y];y===m.path.length-1?(h[p]=h[p]||{_errors:[]},h[p]._errors.push(l(m))):h[p]=h[p]||{_errors:[]},h=h[p],y++}}};return s(this),o}static assert(e){if(!(e instanceof vn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,we.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=l=>l.message){const l={},o=[];for(const s of this.issues)if(s.path.length>0){const f=s.path[0];l[f]=l[f]||[],l[f].push(e(s))}else o.push(e(s));return{formErrors:o,fieldErrors:l}}get formErrors(){return this.flatten()}}vn.create=t=>new vn(t);const Zu=(t,e)=>{let l;switch(t.code){case Z.invalid_type:t.received===ne.undefined?l="Required":l=`Expected ${t.expected}, received ${t.received}`;break;case Z.invalid_literal:l=`Invalid literal value, expected ${JSON.stringify(t.expected,we.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:l=`Unrecognized key(s) in object: ${we.joinValues(t.keys,", ")}`;break;case Z.invalid_union:l="Invalid input";break;case Z.invalid_union_discriminator:l=`Invalid discriminator value. Expected ${we.joinValues(t.options)}`;break;case Z.invalid_enum_value:l=`Invalid enum value. Expected ${we.joinValues(t.options)}, received '${t.received}'`;break;case Z.invalid_arguments:l="Invalid function arguments";break;case Z.invalid_return_type:l="Invalid function return type";break;case Z.invalid_date:l="Invalid date";break;case Z.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(l=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(l=`${l} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?l=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?l=`Invalid input: must end with "${t.validation.endsWith}"`:we.assertNever(t.validation):t.validation!=="regex"?l=`Invalid ${t.validation}`:l="Invalid";break;case Z.too_small:t.type==="array"?l=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?l=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?l=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?l=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?l=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:l="Invalid input";break;case Z.too_big:t.type==="array"?l=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?l=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?l=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?l=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?l=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:l="Invalid input";break;case Z.custom:l="Invalid input";break;case Z.invalid_intersection_types:l="Intersection results could not be merged";break;case Z.not_multiple_of:l=`Number must be a multiple of ${t.multipleOf}`;break;case Z.not_finite:l="Number must be finite";break;default:l=e.defaultError,we.assertNever(t)}return{message:l}};let rT=Zu;function uT(){return rT}const cT=t=>{const{data:e,path:l,errorMaps:o,issueData:s}=t,f=[...l,...s.path||[]],m={...s,path:f};if(s.message!==void 0)return{...s,path:f,message:s.message};let h="";const y=o.filter(p=>!!p).slice().reverse();for(const p of y)h=p(m,{data:e,defaultError:h}).message;return{...s,path:f,message:h}};function ee(t,e){const l=uT(),o=cT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,l,l===Zu?void 0:Zu].filter(s=>!!s)});t.common.issues.push(o)}class pt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,l){const o=[];for(const s of l){if(s.status==="aborted")return ve;s.status==="dirty"&&e.dirty(),o.push(s.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,l){const o=[];for(const s of l){const f=await s.key,m=await s.value;o.push({key:f,value:m})}return pt.mergeObjectSync(e,o)}static mergeObjectSync(e,l){const o={};for(const s of l){const{key:f,value:m}=s;if(f.status==="aborted"||m.status==="aborted")return ve;f.status==="dirty"&&e.dirty(),m.status==="dirty"&&e.dirty(),f.value!=="__proto__"&&(typeof m.value<"u"||s.alwaysSet)&&(o[f.value]=m.value)}return{status:e.value,value:o}}}const ve=Object.freeze({status:"aborted"}),Mo=t=>({status:"dirty",value:t}),Bt=t=>({status:"valid",value:t}),Ip=t=>t.status==="aborted",Up=t=>t.status==="dirty",pl=t=>t.status==="valid",as=t=>typeof Promise<"u"&&t instanceof Promise;var le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));class tn{constructor(e,l,o,s){this._cachedPath=[],this.parent=e,this.data=l,this._path=o,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kp=(t,e)=>{if(pl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const l=new vn(t.common.issues);return this._error=l,this._error}}};function Te(t){if(!t)return{};const{errorMap:e,invalid_type_error:l,required_error:o,description:s}=t;if(e&&(l||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(m,h)=>{const{message:y}=t;return m.code==="invalid_enum_value"?{message:y??h.defaultError}:typeof h.data>"u"?{message:y??o??h.defaultError}:m.code!=="invalid_type"?{message:h.defaultError}:{message:y??l??h.defaultError}},description:s}}class Me{get description(){return this._def.description}_getType(e){return Zn(e.data)}_getOrReturnCtx(e,l){return l||{common:e.parent.common,data:e.data,parsedType:Zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pt,ctx:{common:e.parent.common,data:e.data,parsedType:Zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const l=this._parse(e);if(as(l))throw new Error("Synchronous parse encountered promise.");return l}_parseAsync(e){const l=this._parse(e);return Promise.resolve(l)}parse(e,l){const o=this.safeParse(e,l);if(o.success)return o.data;throw o.error}safeParse(e,l){const o={common:{issues:[],async:(l==null?void 0:l.async)??!1,contextualErrorMap:l==null?void 0:l.errorMap},path:(l==null?void 0:l.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)},s=this._parseSync({data:e,path:o.path,parent:o});return kp(o,s)}"~validate"(e){var o,s;const l={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)};if(!this["~standard"].async)try{const f=this._parseSync({data:e,path:[],parent:l});return pl(f)?{value:f.value}:{issues:l.common.issues}}catch(f){(s=(o=f==null?void 0:f.message)==null?void 0:o.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),l.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:l}).then(f=>pl(f)?{value:f.value}:{issues:l.common.issues})}async parseAsync(e,l){const o=await this.safeParseAsync(e,l);if(o.success)return o.data;throw o.error}async safeParseAsync(e,l){const o={common:{issues:[],contextualErrorMap:l==null?void 0:l.errorMap,async:!0},path:(l==null?void 0:l.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)},s=this._parse({data:e,path:o.path,parent:o}),f=await(as(s)?s:Promise.resolve(s));return kp(o,f)}refine(e,l){const o=s=>typeof l=="string"||typeof l>"u"?{message:l}:typeof l=="function"?l(s):l;return this._refinement((s,f)=>{const m=e(s),h=()=>f.addIssue({code:Z.custom,...o(s)});return typeof Promise<"u"&&m instanceof Promise?m.then(y=>y?!0:(h(),!1)):m?!0:(h(),!1)})}refinement(e,l){return this._refinement((o,s)=>e(o)?!0:(s.addIssue(typeof l=="function"?l(o,s):l),!1))}_refinement(e){return new yl({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:l=>this["~validate"](l)}}optional(){return Kn.create(this,this._def)}nullable(){return vl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return en.create(this)}promise(){return fs.create(this,this._def)}or(e){return rs.create([this,e],this._def)}and(e){return us.create(this,e,this._def)}transform(e){return new yl({...Te(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const l=typeof e=="function"?e:()=>e;return new Qu({...Te(this._def),innerType:this,defaultValue:l,typeName:ye.ZodDefault})}brand(){return new UT({typeName:ye.ZodBranded,type:this,...Te(this._def)})}catch(e){const l=typeof e=="function"?e:()=>e;return new Wu({...Te(this._def),innerType:this,catchValue:l,typeName:ye.ZodCatch})}describe(e){const l=this.constructor;return new l({...this._def,description:e})}pipe(e){return yc.create(this,e)}readonly(){return ju.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fT=/^c[^\s-]{8,}$/i,dT=/^[0-9a-z]+$/,mT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hT=/^[a-z0-9_-]{21}$/i,gT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,yT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ou;const TT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_T=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ST=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,CT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ET=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Lg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bT=new RegExp(`^${Lg}$`);function Vg(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const l=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${l}`}function MT(t){return new RegExp(`^${Vg(t)}$`)}function NT(t){let e=`${Lg}T${Vg(t)}`;const l=[];return l.push(t.local?"Z?":"Z"),t.offset&&l.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${l.join("|")})`,new RegExp(`^${e}$`)}function RT(t,e){return!!((e==="v4"||!e)&&TT.test(t)||(e==="v6"||!e)&&ST.test(t))}function wT(t,e){if(!gT.test(t))return!1;try{const[l]=t.split(".");if(!l)return!1;const o=l.replace(/-/g,"+").replace(/_/g,"/").padEnd(l.length+(4-l.length%4)%4,"="),s=JSON.parse(atob(o));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function DT(t,e){return!!((e==="v4"||!e)&&_T.test(t)||(e==="v6"||!e)&&CT.test(t))}class Wt extends Me{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){const f=this._getOrReturnCtx(e);return ee(f,{code:Z.invalid_type,expected:ne.string,received:f.parsedType}),ve}const o=new pt;let s;for(const f of this._def.checks)if(f.kind==="min")e.data.length<f.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),o.dirty());else if(f.kind==="max")e.data.length>f.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),o.dirty());else if(f.kind==="length"){const m=e.data.length>f.value,h=e.data.length<f.value;(m||h)&&(s=this._getOrReturnCtx(e,s),m?ee(s,{code:Z.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}):h&&ee(s,{code:Z.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}),o.dirty())}else if(f.kind==="email")vT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"email",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="emoji")Ou||(Ou=new RegExp(xT,"u")),Ou.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"emoji",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="uuid")pT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"uuid",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="nanoid")hT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"nanoid",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="cuid")fT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="cuid2")dT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid2",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="ulid")mT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ulid",code:Z.invalid_string,message:f.message}),o.dirty());else if(f.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ee(s,{validation:"url",code:Z.invalid_string,message:f.message}),o.dirty()}else f.kind==="regex"?(f.regex.lastIndex=0,f.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"regex",code:Z.invalid_string,message:f.message}),o.dirty())):f.kind==="trim"?e.data=e.data.trim():f.kind==="includes"?e.data.includes(f.value,f.position)||(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.invalid_string,validation:{includes:f.value,position:f.position},message:f.message}),o.dirty()):f.kind==="toLowerCase"?e.data=e.data.toLowerCase():f.kind==="toUpperCase"?e.data=e.data.toUpperCase():f.kind==="startsWith"?e.data.startsWith(f.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.invalid_string,validation:{startsWith:f.value},message:f.message}),o.dirty()):f.kind==="endsWith"?e.data.endsWith(f.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.invalid_string,validation:{endsWith:f.value},message:f.message}),o.dirty()):f.kind==="datetime"?NT(f).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.invalid_string,validation:"datetime",message:f.message}),o.dirty()):f.kind==="date"?bT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.invalid_string,validation:"date",message:f.message}),o.dirty()):f.kind==="time"?MT(f).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.invalid_string,validation:"time",message:f.message}),o.dirty()):f.kind==="duration"?yT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"duration",code:Z.invalid_string,message:f.message}),o.dirty()):f.kind==="ip"?RT(e.data,f.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ip",code:Z.invalid_string,message:f.message}),o.dirty()):f.kind==="jwt"?wT(e.data,f.alg)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"jwt",code:Z.invalid_string,message:f.message}),o.dirty()):f.kind==="cidr"?DT(e.data,f.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cidr",code:Z.invalid_string,message:f.message}),o.dirty()):f.kind==="base64"?ET.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64",code:Z.invalid_string,message:f.message}),o.dirty()):f.kind==="base64url"?AT.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64url",code:Z.invalid_string,message:f.message}),o.dirty()):we.assertNever(f);return{status:o.value,value:e.data}}_regex(e,l,o){return this.refinement(s=>e.test(s),{validation:l,code:Z.invalid_string,...le.errToObj(o)})}_addCheck(e){return new Wt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,l){return this._addCheck({kind:"regex",regex:e,...le.errToObj(l)})}includes(e,l){return this._addCheck({kind:"includes",value:e,position:l==null?void 0:l.position,...le.errToObj(l==null?void 0:l.message)})}startsWith(e,l){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(l)})}endsWith(e,l){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(l)})}min(e,l){return this._addCheck({kind:"min",value:e,...le.errToObj(l)})}max(e,l){return this._addCheck({kind:"max",value:e,...le.errToObj(l)})}length(e,l){return this._addCheck({kind:"length",value:e,...le.errToObj(l)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const l of this._def.checks)l.kind==="min"&&(e===null||l.value>e)&&(e=l.value);return e}get maxLength(){let e=null;for(const l of this._def.checks)l.kind==="max"&&(e===null||l.value<e)&&(e=l.value);return e}}Wt.create=t=>new Wt({checks:[],typeName:ye.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Te(t)});function IT(t,e){const l=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,s=l>o?l:o,f=Number.parseInt(t.toFixed(s).replace(".","")),m=Number.parseInt(e.toFixed(s).replace(".",""));return f%m/10**s}class hi extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){const f=this._getOrReturnCtx(e);return ee(f,{code:Z.invalid_type,expected:ne.number,received:f.parsedType}),ve}let o;const s=new pt;for(const f of this._def.checks)f.kind==="int"?we.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.invalid_type,expected:"integer",received:"float",message:f.message}),s.dirty()):f.kind==="min"?(f.inclusive?e.data<f.value:e.data<=f.value)&&(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),s.dirty()):f.kind==="max"?(f.inclusive?e.data>f.value:e.data>=f.value)&&(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),s.dirty()):f.kind==="multipleOf"?IT(e.data,f.value)!==0&&(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):f.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.not_finite,message:f.message}),s.dirty()):we.assertNever(f);return{status:s.value,value:e.data}}gte(e,l){return this.setLimit("min",e,!0,le.toString(l))}gt(e,l){return this.setLimit("min",e,!1,le.toString(l))}lte(e,l){return this.setLimit("max",e,!0,le.toString(l))}lt(e,l){return this.setLimit("max",e,!1,le.toString(l))}setLimit(e,l,o,s){return new hi({...this._def,checks:[...this._def.checks,{kind:e,value:l,inclusive:o,message:le.toString(s)}]})}_addCheck(e){return new hi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,l){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(l)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const l of this._def.checks)l.kind==="min"&&(e===null||l.value>e)&&(e=l.value);return e}get maxValue(){let e=null;for(const l of this._def.checks)l.kind==="max"&&(e===null||l.value<e)&&(e=l.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&we.isInteger(e.value))}get isFinite(){let e=null,l=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(l===null||o.value>l)&&(l=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(l)&&Number.isFinite(e)}}hi.create=t=>new hi({checks:[],typeName:ye.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class gi extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ne.bigint)return this._getInvalidInput(e);let o;const s=new pt;for(const f of this._def.checks)f.kind==="min"?(f.inclusive?e.data<f.value:e.data<=f.value)&&(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.too_small,type:"bigint",minimum:f.value,inclusive:f.inclusive,message:f.message}),s.dirty()):f.kind==="max"?(f.inclusive?e.data>f.value:e.data>=f.value)&&(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.too_big,type:"bigint",maximum:f.value,inclusive:f.inclusive,message:f.message}),s.dirty()):f.kind==="multipleOf"?e.data%f.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),ee(o,{code:Z.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):we.assertNever(f);return{status:s.value,value:e.data}}_getInvalidInput(e){const l=this._getOrReturnCtx(e);return ee(l,{code:Z.invalid_type,expected:ne.bigint,received:l.parsedType}),ve}gte(e,l){return this.setLimit("min",e,!0,le.toString(l))}gt(e,l){return this.setLimit("min",e,!1,le.toString(l))}lte(e,l){return this.setLimit("max",e,!0,le.toString(l))}lt(e,l){return this.setLimit("max",e,!1,le.toString(l))}setLimit(e,l,o,s){return new gi({...this._def,checks:[...this._def.checks,{kind:e,value:l,inclusive:o,message:le.toString(s)}]})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,l){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(l)})}get minValue(){let e=null;for(const l of this._def.checks)l.kind==="min"&&(e===null||l.value>e)&&(e=l.value);return e}get maxValue(){let e=null;for(const l of this._def.checks)l.kind==="max"&&(e===null||l.value<e)&&(e=l.value);return e}}gi.create=t=>new gi({checks:[],typeName:ye.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Te(t)});class ss extends Me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ne.boolean){const o=this._getOrReturnCtx(e);return ee(o,{code:Z.invalid_type,expected:ne.boolean,received:o.parsedType}),ve}return Bt(e.data)}}ss.create=t=>new ss({typeName:ye.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class hl extends Me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){const f=this._getOrReturnCtx(e);return ee(f,{code:Z.invalid_type,expected:ne.date,received:f.parsedType}),ve}if(Number.isNaN(e.data.getTime())){const f=this._getOrReturnCtx(e);return ee(f,{code:Z.invalid_date}),ve}const o=new pt;let s;for(const f of this._def.checks)f.kind==="min"?e.data.getTime()<f.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.too_small,message:f.message,inclusive:!0,exact:!1,minimum:f.value,type:"date"}),o.dirty()):f.kind==="max"?e.data.getTime()>f.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:Z.too_big,message:f.message,inclusive:!0,exact:!1,maximum:f.value,type:"date"}),o.dirty()):we.assertNever(f);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new hl({...this._def,checks:[...this._def.checks,e]})}min(e,l){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(l)})}max(e,l){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(l)})}get minDate(){let e=null;for(const l of this._def.checks)l.kind==="min"&&(e===null||l.value>e)&&(e=l.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const l of this._def.checks)l.kind==="max"&&(e===null||l.value<e)&&(e=l.value);return e!=null?new Date(e):null}}hl.create=t=>new hl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ye.ZodDate,...Te(t)});class Lp extends Me{_parse(e){if(this._getType(e)!==ne.symbol){const o=this._getOrReturnCtx(e);return ee(o,{code:Z.invalid_type,expected:ne.symbol,received:o.parsedType}),ve}return Bt(e.data)}}Lp.create=t=>new Lp({typeName:ye.ZodSymbol,...Te(t)});class Vp extends Me{_parse(e){if(this._getType(e)!==ne.undefined){const o=this._getOrReturnCtx(e);return ee(o,{code:Z.invalid_type,expected:ne.undefined,received:o.parsedType}),ve}return Bt(e.data)}}Vp.create=t=>new Vp({typeName:ye.ZodUndefined,...Te(t)});class Pp extends Me{_parse(e){if(this._getType(e)!==ne.null){const o=this._getOrReturnCtx(e);return ee(o,{code:Z.invalid_type,expected:ne.null,received:o.parsedType}),ve}return Bt(e.data)}}Pp.create=t=>new Pp({typeName:ye.ZodNull,...Te(t)});class qp extends Me{constructor(){super(...arguments),this._any=!0}_parse(e){return Bt(e.data)}}qp.create=t=>new qp({typeName:ye.ZodAny,...Te(t)});class Ku extends Me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bt(e.data)}}Ku.create=t=>new Ku({typeName:ye.ZodUnknown,...Te(t)});class $n extends Me{_parse(e){const l=this._getOrReturnCtx(e);return ee(l,{code:Z.invalid_type,expected:ne.never,received:l.parsedType}),ve}}$n.create=t=>new $n({typeName:ye.ZodNever,...Te(t)});class Gp extends Me{_parse(e){if(this._getType(e)!==ne.undefined){const o=this._getOrReturnCtx(e);return ee(o,{code:Z.invalid_type,expected:ne.void,received:o.parsedType}),ve}return Bt(e.data)}}Gp.create=t=>new Gp({typeName:ye.ZodVoid,...Te(t)});class en extends Me{_parse(e){const{ctx:l,status:o}=this._processInputParams(e),s=this._def;if(l.parsedType!==ne.array)return ee(l,{code:Z.invalid_type,expected:ne.array,received:l.parsedType}),ve;if(s.exactLength!==null){const m=l.data.length>s.exactLength.value,h=l.data.length<s.exactLength.value;(m||h)&&(ee(l,{code:m?Z.too_big:Z.too_small,minimum:h?s.exactLength.value:void 0,maximum:m?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),o.dirty())}if(s.minLength!==null&&l.data.length<s.minLength.value&&(ee(l,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),o.dirty()),s.maxLength!==null&&l.data.length>s.maxLength.value&&(ee(l,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),o.dirty()),l.common.async)return Promise.all([...l.data].map((m,h)=>s.type._parseAsync(new tn(l,m,l.path,h)))).then(m=>pt.mergeArray(o,m));const f=[...l.data].map((m,h)=>s.type._parseSync(new tn(l,m,l.path,h)));return pt.mergeArray(o,f)}get element(){return this._def.type}min(e,l){return new en({...this._def,minLength:{value:e,message:le.toString(l)}})}max(e,l){return new en({...this._def,maxLength:{value:e,message:le.toString(l)}})}length(e,l){return new en({...this._def,exactLength:{value:e,message:le.toString(l)}})}nonempty(e){return this.min(1,e)}}en.create=(t,e)=>new en({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Te(e)});function rl(t){if(t instanceof je){const e={};for(const l in t.shape){const o=t.shape[l];e[l]=Kn.create(rl(o))}return new je({...t._def,shape:()=>e})}else return t instanceof en?new en({...t._def,type:rl(t.element)}):t instanceof Kn?Kn.create(rl(t.unwrap())):t instanceof vl?vl.create(rl(t.unwrap())):t instanceof yi?yi.create(t.items.map(e=>rl(e))):t}class je extends Me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),l=we.objectKeys(e);return this._cached={shape:e,keys:l},this._cached}_parse(e){if(this._getType(e)!==ne.object){const p=this._getOrReturnCtx(e);return ee(p,{code:Z.invalid_type,expected:ne.object,received:p.parsedType}),ve}const{status:o,ctx:s}=this._processInputParams(e),{shape:f,keys:m}=this._getCached(),h=[];if(!(this._def.catchall instanceof $n&&this._def.unknownKeys==="strip"))for(const p in s.data)m.includes(p)||h.push(p);const y=[];for(const p of m){const v=f[p],_=s.data[p];y.push({key:{status:"valid",value:p},value:v._parse(new tn(s,_,s.path,p)),alwaysSet:p in s.data})}if(this._def.catchall instanceof $n){const p=this._def.unknownKeys;if(p==="passthrough")for(const v of h)y.push({key:{status:"valid",value:v},value:{status:"valid",value:s.data[v]}});else if(p==="strict")h.length>0&&(ee(s,{code:Z.unrecognized_keys,keys:h}),o.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const v of h){const _=s.data[v];y.push({key:{status:"valid",value:v},value:p._parse(new tn(s,_,s.path,v)),alwaysSet:v in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const p=[];for(const v of y){const _=await v.key,C=await v.value;p.push({key:_,value:C,alwaysSet:v.alwaysSet})}return p}).then(p=>pt.mergeObjectSync(o,p)):pt.mergeObjectSync(o,y)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new je({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(l,o)=>{var f,m;const s=((m=(f=this._def).errorMap)==null?void 0:m.call(f,l,o).message)??o.defaultError;return l.code==="unrecognized_keys"?{message:le.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new je({...this._def,unknownKeys:"strip"})}passthrough(){return new je({...this._def,unknownKeys:"passthrough"})}extend(e){return new je({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new je({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,l){return this.augment({[e]:l})}catchall(e){return new je({...this._def,catchall:e})}pick(e){const l={};for(const o of we.objectKeys(e))e[o]&&this.shape[o]&&(l[o]=this.shape[o]);return new je({...this._def,shape:()=>l})}omit(e){const l={};for(const o of we.objectKeys(this.shape))e[o]||(l[o]=this.shape[o]);return new je({...this._def,shape:()=>l})}deepPartial(){return rl(this)}partial(e){const l={};for(const o of we.objectKeys(this.shape)){const s=this.shape[o];e&&!e[o]?l[o]=s:l[o]=s.optional()}return new je({...this._def,shape:()=>l})}required(e){const l={};for(const o of we.objectKeys(this.shape))if(e&&!e[o])l[o]=this.shape[o];else{let f=this.shape[o];for(;f instanceof Kn;)f=f._def.innerType;l[o]=f}return new je({...this._def,shape:()=>l})}keyof(){return Pg(we.objectKeys(this.shape))}}je.create=(t,e)=>new je({shape:()=>t,unknownKeys:"strip",catchall:$n.create(),typeName:ye.ZodObject,...Te(e)});je.strictCreate=(t,e)=>new je({shape:()=>t,unknownKeys:"strict",catchall:$n.create(),typeName:ye.ZodObject,...Te(e)});je.lazycreate=(t,e)=>new je({shape:t,unknownKeys:"strip",catchall:$n.create(),typeName:ye.ZodObject,...Te(e)});class rs extends Me{_parse(e){const{ctx:l}=this._processInputParams(e),o=this._def.options;function s(f){for(const h of f)if(h.result.status==="valid")return h.result;for(const h of f)if(h.result.status==="dirty")return l.common.issues.push(...h.ctx.common.issues),h.result;const m=f.map(h=>new vn(h.ctx.common.issues));return ee(l,{code:Z.invalid_union,unionErrors:m}),ve}if(l.common.async)return Promise.all(o.map(async f=>{const m={...l,common:{...l.common,issues:[]},parent:null};return{result:await f._parseAsync({data:l.data,path:l.path,parent:m}),ctx:m}})).then(s);{let f;const m=[];for(const y of o){const p={...l,common:{...l.common,issues:[]},parent:null},v=y._parseSync({data:l.data,path:l.path,parent:p});if(v.status==="valid")return v;v.status==="dirty"&&!f&&(f={result:v,ctx:p}),p.common.issues.length&&m.push(p.common.issues)}if(f)return l.common.issues.push(...f.ctx.common.issues),f.result;const h=m.map(y=>new vn(y));return ee(l,{code:Z.invalid_union,unionErrors:h}),ve}}get options(){return this._def.options}}rs.create=(t,e)=>new rs({options:t,typeName:ye.ZodUnion,...Te(e)});function $u(t,e){const l=Zn(t),o=Zn(e);if(t===e)return{valid:!0,data:t};if(l===ne.object&&o===ne.object){const s=we.objectKeys(e),f=we.objectKeys(t).filter(h=>s.indexOf(h)!==-1),m={...t,...e};for(const h of f){const y=$u(t[h],e[h]);if(!y.valid)return{valid:!1};m[h]=y.data}return{valid:!0,data:m}}else if(l===ne.array&&o===ne.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let f=0;f<t.length;f++){const m=t[f],h=e[f],y=$u(m,h);if(!y.valid)return{valid:!1};s.push(y.data)}return{valid:!0,data:s}}else return l===ne.date&&o===ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class us extends Me{_parse(e){const{status:l,ctx:o}=this._processInputParams(e),s=(f,m)=>{if(Ip(f)||Ip(m))return ve;const h=$u(f.value,m.value);return h.valid?((Up(f)||Up(m))&&l.dirty(),{status:l.value,value:h.data}):(ee(o,{code:Z.invalid_intersection_types}),ve)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([f,m])=>s(f,m)):s(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}us.create=(t,e,l)=>new us({left:t,right:e,typeName:ye.ZodIntersection,...Te(l)});class yi extends Me{_parse(e){const{status:l,ctx:o}=this._processInputParams(e);if(o.parsedType!==ne.array)return ee(o,{code:Z.invalid_type,expected:ne.array,received:o.parsedType}),ve;if(o.data.length<this._def.items.length)return ee(o,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&o.data.length>this._def.items.length&&(ee(o,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),l.dirty());const f=[...o.data].map((m,h)=>{const y=this._def.items[h]||this._def.rest;return y?y._parse(new tn(o,m,o.path,h)):null}).filter(m=>!!m);return o.common.async?Promise.all(f).then(m=>pt.mergeArray(l,m)):pt.mergeArray(l,f)}get items(){return this._def.items}rest(e){return new yi({...this._def,rest:e})}}yi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new yi({items:t,typeName:ye.ZodTuple,rest:null,...Te(e)})};class cs extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:l,ctx:o}=this._processInputParams(e);if(o.parsedType!==ne.object)return ee(o,{code:Z.invalid_type,expected:ne.object,received:o.parsedType}),ve;const s=[],f=this._def.keyType,m=this._def.valueType;for(const h in o.data)s.push({key:f._parse(new tn(o,h,o.path,h)),value:m._parse(new tn(o,o.data[h],o.path,h)),alwaysSet:h in o.data});return o.common.async?pt.mergeObjectAsync(l,s):pt.mergeObjectSync(l,s)}get element(){return this._def.valueType}static create(e,l,o){return l instanceof Me?new cs({keyType:e,valueType:l,typeName:ye.ZodRecord,...Te(o)}):new cs({keyType:Wt.create(),valueType:e,typeName:ye.ZodRecord,...Te(l)})}}class Op extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:l,ctx:o}=this._processInputParams(e);if(o.parsedType!==ne.map)return ee(o,{code:Z.invalid_type,expected:ne.map,received:o.parsedType}),ve;const s=this._def.keyType,f=this._def.valueType,m=[...o.data.entries()].map(([h,y],p)=>({key:s._parse(new tn(o,h,o.path,[p,"key"])),value:f._parse(new tn(o,y,o.path,[p,"value"]))}));if(o.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const y of m){const p=await y.key,v=await y.value;if(p.status==="aborted"||v.status==="aborted")return ve;(p.status==="dirty"||v.status==="dirty")&&l.dirty(),h.set(p.value,v.value)}return{status:l.value,value:h}})}else{const h=new Map;for(const y of m){const p=y.key,v=y.value;if(p.status==="aborted"||v.status==="aborted")return ve;(p.status==="dirty"||v.status==="dirty")&&l.dirty(),h.set(p.value,v.value)}return{status:l.value,value:h}}}}Op.create=(t,e,l)=>new Op({valueType:e,keyType:t,typeName:ye.ZodMap,...Te(l)});class Do extends Me{_parse(e){const{status:l,ctx:o}=this._processInputParams(e);if(o.parsedType!==ne.set)return ee(o,{code:Z.invalid_type,expected:ne.set,received:o.parsedType}),ve;const s=this._def;s.minSize!==null&&o.data.size<s.minSize.value&&(ee(o,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),l.dirty()),s.maxSize!==null&&o.data.size>s.maxSize.value&&(ee(o,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),l.dirty());const f=this._def.valueType;function m(y){const p=new Set;for(const v of y){if(v.status==="aborted")return ve;v.status==="dirty"&&l.dirty(),p.add(v.value)}return{status:l.value,value:p}}const h=[...o.data.values()].map((y,p)=>f._parse(new tn(o,y,o.path,p)));return o.common.async?Promise.all(h).then(y=>m(y)):m(h)}min(e,l){return new Do({...this._def,minSize:{value:e,message:le.toString(l)}})}max(e,l){return new Do({...this._def,maxSize:{value:e,message:le.toString(l)}})}size(e,l){return this.min(e,l).max(e,l)}nonempty(e){return this.min(1,e)}}Do.create=(t,e)=>new Do({valueType:t,minSize:null,maxSize:null,typeName:ye.ZodSet,...Te(e)});class Xu extends Me{get schema(){return this._def.getter()}_parse(e){const{ctx:l}=this._processInputParams(e);return this._def.getter()._parse({data:l.data,path:l.path,parent:l})}}Xu.create=(t,e)=>new Xu({getter:t,typeName:ye.ZodLazy,...Te(e)});class Bp extends Me{_parse(e){if(e.data!==this._def.value){const l=this._getOrReturnCtx(e);return ee(l,{received:l.data,code:Z.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bp.create=(t,e)=>new Bp({value:t,typeName:ye.ZodLiteral,...Te(e)});function Pg(t,e){return new gl({values:t,typeName:ye.ZodEnum,...Te(e)})}class gl extends Me{_parse(e){if(typeof e.data!="string"){const l=this._getOrReturnCtx(e),o=this._def.values;return ee(l,{expected:we.joinValues(o),received:l.parsedType,code:Z.invalid_type}),ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const l=this._getOrReturnCtx(e),o=this._def.values;return ee(l,{received:l.data,code:Z.invalid_enum_value,options:o}),ve}return Bt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const l of this._def.values)e[l]=l;return e}get Values(){const e={};for(const l of this._def.values)e[l]=l;return e}get Enum(){const e={};for(const l of this._def.values)e[l]=l;return e}extract(e,l=this._def){return gl.create(e,{...this._def,...l})}exclude(e,l=this._def){return gl.create(this.options.filter(o=>!e.includes(o)),{...this._def,...l})}}gl.create=Pg;class zp extends Me{_parse(e){const l=we.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==ne.string&&o.parsedType!==ne.number){const s=we.objectValues(l);return ee(o,{expected:we.joinValues(s),received:o.parsedType,code:Z.invalid_type}),ve}if(this._cache||(this._cache=new Set(we.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=we.objectValues(l);return ee(o,{received:o.data,code:Z.invalid_enum_value,options:s}),ve}return Bt(e.data)}get enum(){return this._def.values}}zp.create=(t,e)=>new zp({values:t,typeName:ye.ZodNativeEnum,...Te(e)});class fs extends Me{unwrap(){return this._def.type}_parse(e){const{ctx:l}=this._processInputParams(e);if(l.parsedType!==ne.promise&&l.common.async===!1)return ee(l,{code:Z.invalid_type,expected:ne.promise,received:l.parsedType}),ve;const o=l.parsedType===ne.promise?l.data:Promise.resolve(l.data);return Bt(o.then(s=>this._def.type.parseAsync(s,{path:l.path,errorMap:l.common.contextualErrorMap})))}}fs.create=(t,e)=>new fs({type:t,typeName:ye.ZodPromise,...Te(e)});class yl extends Me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:l,ctx:o}=this._processInputParams(e),s=this._def.effect||null,f={addIssue:m=>{ee(o,m),m.fatal?l.abort():l.dirty()},get path(){return o.path}};if(f.addIssue=f.addIssue.bind(f),s.type==="preprocess"){const m=s.transform(o.data,f);if(o.common.async)return Promise.resolve(m).then(async h=>{if(l.value==="aborted")return ve;const y=await this._def.schema._parseAsync({data:h,path:o.path,parent:o});return y.status==="aborted"?ve:y.status==="dirty"||l.value==="dirty"?Mo(y.value):y});{if(l.value==="aborted")return ve;const h=this._def.schema._parseSync({data:m,path:o.path,parent:o});return h.status==="aborted"?ve:h.status==="dirty"||l.value==="dirty"?Mo(h.value):h}}if(s.type==="refinement"){const m=h=>{const y=s.refinement(h,f);if(o.common.async)return Promise.resolve(y);if(y instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(o.common.async===!1){const h=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return h.status==="aborted"?ve:(h.status==="dirty"&&l.dirty(),m(h.value),{status:l.value,value:h.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(h=>h.status==="aborted"?ve:(h.status==="dirty"&&l.dirty(),m(h.value).then(()=>({status:l.value,value:h.value}))))}if(s.type==="transform")if(o.common.async===!1){const m=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!pl(m))return ve;const h=s.transform(m.value,f);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:l.value,value:h}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(m=>pl(m)?Promise.resolve(s.transform(m.value,f)).then(h=>({status:l.value,value:h})):ve);we.assertNever(s)}}yl.create=(t,e,l)=>new yl({schema:t,typeName:ye.ZodEffects,effect:e,...Te(l)});yl.createWithPreprocess=(t,e,l)=>new yl({schema:e,effect:{type:"preprocess",transform:t},typeName:ye.ZodEffects,...Te(l)});class Kn extends Me{_parse(e){return this._getType(e)===ne.undefined?Bt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Kn.create=(t,e)=>new Kn({innerType:t,typeName:ye.ZodOptional,...Te(e)});class vl extends Me{_parse(e){return this._getType(e)===ne.null?Bt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vl.create=(t,e)=>new vl({innerType:t,typeName:ye.ZodNullable,...Te(e)});class Qu extends Me{_parse(e){const{ctx:l}=this._processInputParams(e);let o=l.data;return l.parsedType===ne.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:l.path,parent:l})}removeDefault(){return this._def.innerType}}Qu.create=(t,e)=>new Qu({innerType:t,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});class Wu extends Me{_parse(e){const{ctx:l}=this._processInputParams(e),o={...l,common:{...l.common,issues:[]}},s=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return as(s)?s.then(f=>({status:"valid",value:f.status==="valid"?f.value:this._def.catchValue({get error(){return new vn(o.common.issues)},input:o.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new vn(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}Wu.create=(t,e)=>new Wu({innerType:t,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});class Hp extends Me{_parse(e){if(this._getType(e)!==ne.nan){const o=this._getOrReturnCtx(e);return ee(o,{code:Z.invalid_type,expected:ne.nan,received:o.parsedType}),ve}return{status:"valid",value:e.data}}}Hp.create=t=>new Hp({typeName:ye.ZodNaN,...Te(t)});class UT extends Me{_parse(e){const{ctx:l}=this._processInputParams(e),o=l.data;return this._def.type._parse({data:o,path:l.path,parent:l})}unwrap(){return this._def.type}}class yc extends Me{_parse(e){const{status:l,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const f=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return f.status==="aborted"?ve:f.status==="dirty"?(l.dirty(),Mo(f.value)):this._def.out._parseAsync({data:f.value,path:o.path,parent:o})})();{const s=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?ve:s.status==="dirty"?(l.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:o.path,parent:o})}}static create(e,l){return new yc({in:e,out:l,typeName:ye.ZodPipeline})}}class ju extends Me{_parse(e){const l=this._def.innerType._parse(e),o=s=>(pl(s)&&(s.value=Object.freeze(s.value)),s);return as(l)?l.then(s=>o(s)):o(l)}unwrap(){return this._def.innerType}}ju.create=(t,e)=>new ju({innerType:t,typeName:ye.ZodReadonly,...Te(e)});var ye;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ye||(ye={}));const pi=Wt.create,Fp=hi.create;gi.create;const kT=ss.create;hl.create;const Yp=Ku.create;$n.create;const No=en.create,LT=je.create,VT=rs.create;us.create;yi.create;const PT=cs.create,qT=Xu.create,GT=gl.create;fs.create;Kn.create;vl.create;const al={string:t=>Wt.create({...t,coerce:!0}),number:t=>hi.create({...t,coerce:!0}),boolean:t=>ss.create({...t,coerce:!0}),bigint:t=>gi.create({...t,coerce:!0}),date:t=>hl.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let OT,BT;function zT(){return{geminiUrl:OT,vertexUrl:BT}}function HT(t,e,l){var o,s,f;if(!(!((o=t.httpOptions)===null||o===void 0)&&o.baseUrl)){const m=zT();return t.vertexai?(s=m.vertexUrl)!==null&&s!==void 0?s:e:(f=m.geminiUrl)!==null&&f!==void 0?f:l}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xi{}function oe(t,e){const l=/\{([^}]+)\}/g;return t.replace(l,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const f=e[s];return f!=null?String(f):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function u(t,e,l){for(let f=0;f<e.length-1;f++){const m=e[f];if(m.endsWith("[]")){const h=m.slice(0,-2);if(!(h in t))if(Array.isArray(l))t[h]=Array.from({length:l.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(t[h])){const y=t[h];if(Array.isArray(l))for(let p=0;p<y.length;p++){const v=y[p];u(v,e.slice(f+1),l[p])}else for(const p of y)u(p,e.slice(f+1),l)}return}else if(m.endsWith("[0]")){const h=m.slice(0,-3);h in t||(t[h]=[{}]);const y=t[h];u(y[0],e.slice(f+1),l);return}(!t[m]||typeof t[m]!="object")&&(t[m]={}),t=t[m]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!l||typeof l=="object"&&Object.keys(l).length===0||l===s)return;if(typeof s=="object"&&typeof l=="object"&&s!==null&&l!==null)Object.assign(s,l);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=l}function r(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let l=0;l<e.length;l++){if(typeof t!="object"||t===null)return;const o=e[l];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const f=t[s];return Array.isArray(f)?f.map(m=>r(m,e.slice(l+1))):void 0}else return}else t=t[o]}return t}catch(l){if(l instanceof TypeError)return;throw l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jp||(Jp={}));var Zp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zp||(Zp={}));var jt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(jt||(jt={}));var Kp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Kp||(Kp={}));var $p;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($p||($p={}));var Xp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xp||(Xp={}));var Qp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Qp||(Qp={}));var Wp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Wp||(Wp={}));var jp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jp||(jp={}));var eh;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eh||(eh={}));var th;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(th||(th={}));var nh;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(nh||(nh={}));var ih;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ih||(ih={}));var lh;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lh||(lh={}));var oh;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(oh||(oh={}));var ah;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ah||(ah={}));var ds;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ds||(ds={}));var sh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sh||(sh={}));var ec;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ec||(ec={}));var rh;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rh||(rh={}));var uh;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(uh||(uh={}));var ch;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ch||(ch={}));var fh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fh||(fh={}));var dh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(dh||(dh={}));var mh;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(mh||(mh={}));var ph;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ph||(ph={}));var hh;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(hh||(hh={}));var gh;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gh||(gh={}));var yh;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yh||(yh={}));var vh;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vh||(vh={}));var xh;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xh||(xh={}));var Th;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Th||(Th={}));var _h;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_h||(_h={}));var Sh;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Sh||(Sh={}));var Ch;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ch||(Ch={}));var Eh;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Eh||(Eh={}));var Ah;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ah||(Ah={}));var bh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(bh||(bh={}));var Mh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mh||(Mh={}));var Nh;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Nh||(Nh={}));var Rh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Rh||(Rh={}));var ul;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ul||(ul={}));class tc{constructor(e){const l={};for(const o of e.headers.entries())l[o[0]]=o[1];this.headers=l,this.responseInternal=e}json(){return this.responseInternal.json()}}class bo{get text(){var e,l,o,s,f,m,h,y;if(((s=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const C of(y=(h=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[b,N]of Object.entries(C))b!=="text"&&b!=="thought"&&(N!==null||N!==void 0)&&_.push(b);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;v=!0,p+=C.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,l,o,s,f,m,h,y;if(((s=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(y=(h=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[C,b]of Object.entries(_))C!=="inlineData"&&(b!==null||b!==void 0)&&v.push(C);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,l,o,s,f,m,h,y;if(((s=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(h=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,l,o,s,f,m,h,y,p;if(((s=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(h=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,l,o,s,f,m,h,y,p;if(((s=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(h=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class wh{}class Dh{}class FT{}class YT{}class Ih{}class Uh{}class kh{}class JT{}class Lh{}class Vh{}class Ph{}class ZT{}class KT{}class $T{}class qh{}class XT{get text(){var e,l,o;let s="",f=!1;const m=[];for(const h of(o=(l=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&o!==void 0?o:[]){for(const[y,p]of Object.entries(h))y!=="text"&&y!=="thought"&&p!==null&&m.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,s+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?s:void 0}get data(){var e,l,o;let s="";const f=[];for(const m of(o=(l=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&o!==void 0?o:[]){for(const[h,y]of Object.entries(m))h!=="inlineData"&&y!==null&&f.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(s+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class QT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ke(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const l=e.split("/",2);return`publishers/${l[0]}/models/${l[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function qg(t,e){const l=ke(t,e);return l?l.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${l}`:l.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${l}`:l:""}function Gg(t){return Array.isArray(t)?t.map(e=>ms(e)):[ms(t)]}function ms(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Og(t){const e=ms(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Bg(t){const e=ms(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function zg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gh(e)):[Gh(t)]}function nc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Oh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Bh(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dt(t){if(t==null)throw new Error("ContentUnion is required");return nc(t)?t:{role:"user",parts:zg(t)}}function Hg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(l=>{const o=dt(l);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const l=dt(e);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]}return Array.isArray(e)?e.map(l=>dt(l)):[dt(e)]}function Ot(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Oh(t)||Bh(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dt(t)]}const e=[],l=[],o=nc(t[0]);for(const s of t){const f=nc(s);if(f!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(s);else{if(Oh(s)||Bh(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");l.push(s)}}return o||e.push({role:"user",parts:zg(l)}),e}const WT=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),zh=GT(["string","number","integer","object","array","boolean","null"]),jT=VT([zh,No(zh)]);function e_(t=!0){const e=qT(()=>{const l=LT({type:jT.optional(),format:pi().optional(),title:pi().optional(),description:pi().optional(),default:Yp().optional(),items:e.optional(),minItems:al.string().optional(),maxItems:al.string().optional(),enum:No(Yp()).optional(),properties:PT(pi(),e).optional(),required:No(pi()).optional(),minProperties:al.string().optional(),maxProperties:al.string().optional(),propertyOrdering:No(pi()).optional(),minimum:Fp().optional(),maximum:Fp().optional(),minLength:al.string().optional(),maxLength:al.string().optional(),pattern:pi().optional(),anyOf:No(e).optional(),additionalProperties:kT().optional()});return t?l.strict():l});return e}function t_(t,e){t.includes("null")&&(e.nullable=!0);const l=t.filter(o=>o!=="null");if(l.length===1)e.type=Object.values(jt).includes(l[0].toUpperCase())?l[0].toUpperCase():jt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of l)e.anyOf.push({type:Object.values(jt).includes(o.toUpperCase())?o.toUpperCase():jt.TYPE_UNSPECIFIED})}}function cl(t){const e={},l=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=t.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,t=f[1]):f[1].type==="null"&&(e.nullable=!0,t=f[0])),t.type instanceof Array&&t_(t.type,e);for(const[m,h]of Object.entries(t))if(h!=null)if(m=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(jt).includes(h.toUpperCase())?h.toUpperCase():jt.TYPE_UNSPECIFIED}else if(l.includes(m))e[m]=cl(h);else if(o.includes(m)){const y=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}y.push(cl(p))}e[m]=y}else if(s.includes(m)){const y={};for(const[p,v]of Object.entries(h))y[p]=cl(v);e[m]=y}else{if(m==="additionalProperties")continue;e[m]=h}return e}function Io(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=e_().parse(t);return cl(e)}else return cl(t)}function vc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function xc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Sl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Io(e.parameters)),e.response&&(e.response=Io(e.response));return t}function Cl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const l of t)e.push(l);return e}function n_(t,e,l,o=1){const s=!e.startsWith(`${l}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${l}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${l}/${e}`:e:s?`${l}/${e}`:e}function Tn(t,e){if(typeof e!="string")throw new Error("name must be a string");return n_(t,e,"cachedContents")}function Fg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function _n(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function i_(t){return t!=null&&typeof t=="object"&&"name"in t}function l_(t){return t!=null&&typeof t=="object"&&"video"in t}function o_(t){return t!=null&&typeof t=="object"&&"uri"in t}function Yg(t){var e;let l;if(i_(t)&&(l=t.name),!(o_(t)&&(l=t.uri,l===void 0))&&!(l_(t)&&(l=(e=t.video)===null||e===void 0?void 0:e.uri,l===void 0))){if(typeof t=="string"&&(l=t),l===void 0)throw new Error("Could not extract file name from the provided input.");if(l.startsWith("https://")){const s=l.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${l}`);l=s[0]}else l.startsWith("files/")&&(l=l.split("files/")[1]);return l}}function Jg(t,e){let l;return t.isVertexAI()?l=e?"publishers/google/models":"models":l=e?"models":"tunedModels",l}function Zg(t){for(const e of["models","tunedModels","publisherModels"])if(a_(t,e))return t[e];return[]}function a_(t,e){return t!==null&&typeof t=="object"&&e in t}function s_(t,e={}){const l=t,o={name:l.name,description:l.description,parameters:cl(hs(l.inputSchema))};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function r_(t,e={}){const l=[],o=new Set;for(const s of t){const f=s.name;if(o.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);o.add(f);const m=s_(s,e);m.functionDeclarations&&l.push(...m.functionDeclarations)}return{functionDeclarations:l}}function u_(t){const e=[];for(const l of t)e.push(hs(l));return e}function c_(t){const e={};for(const[l,o]of Object.entries(t)){const s=o;e[l]=hs(s)}return e}function hs(t){const e=new Set(["items"]),l=new Set(["anyOf"]),o=new Set(["properties"]),s={};for(const[f,m]of Object.entries(t))if(e.has(f))s[f]=hs(m);else if(l.has(f))s[f]=u_(m);else if(o.has(f))s[f]=c_(m);else if(f==="type"){const h=m.toUpperCase();s[f]=Object.values(jt).includes(h)?h:jt.TYPE_UNSPECIFIED}else WT.has(f)&&(s[f]=m);return s}function Kg(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function f_(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function El(t,e){const l=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(l))return l.split("/").pop();throw new Error(`Invalid batch job name: ${l}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(l))return l.split("/").pop();if(/^\d+$/.test(l))return l;throw new Error(`Invalid batch job name: ${l}.`)}function $g(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d_(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function m_(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function p_(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function h_(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],d_(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],m_(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],p_(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function Xg(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>h_(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function g_(t){const e={},l=r(t,["anyOf"]);l!=null&&u(e,["anyOf"],l);const o=r(t,["default"]);o!=null&&u(e,["default"],o);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const h=r(t,["format"]);h!=null&&u(e,["format"],h);const y=r(t,["items"]);y!=null&&u(e,["items"],y);const p=r(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const _=r(t,["maxProperties"]);_!=null&&u(e,["maxProperties"],_);const C=r(t,["maximum"]);C!=null&&u(e,["maximum"],C);const b=r(t,["minItems"]);b!=null&&u(e,["minItems"],b);const N=r(t,["minLength"]);N!=null&&u(e,["minLength"],N);const k=r(t,["minProperties"]);k!=null&&u(e,["minProperties"],k);const L=r(t,["minimum"]);L!=null&&u(e,["minimum"],L);const F=r(t,["nullable"]);F!=null&&u(e,["nullable"],F);const Y=r(t,["pattern"]);Y!=null&&u(e,["pattern"],Y);const H=r(t,["properties"]);H!=null&&u(e,["properties"],H);const Q=r(t,["propertyOrdering"]);Q!=null&&u(e,["propertyOrdering"],Q);const B=r(t,["required"]);B!=null&&u(e,["required"],B);const j=r(t,["title"]);j!=null&&u(e,["title"],j);const W=r(t,["type"]);return W!=null&&u(e,["type"],W),e}function y_(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const l=r(t,["category"]);l!=null&&u(e,["category"],l);const o=r(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function v_(t){const e={},l=r(t,["behavior"]);l!=null&&u(e,["behavior"],l);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function x_(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function T_(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],x_(l)),e}function __(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function S_(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],__(l)),e}function C_(){return{}}function E_(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(p=>v_(p))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],T_(o));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],S_(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],C_());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const h=r(t,["computerUse"]);return h!=null&&u(e,["computerUse"],h),e}function A_(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function b_(t){const e={},l=r(t,["latitude"]);l!=null&&u(e,["latitude"],l);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function M_(t){const e={},l=r(t,["latLng"]);l!=null&&u(e,["latLng"],b_(l));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function N_(t){const e={},l=r(t,["functionCallingConfig"]);l!=null&&u(e,["functionCallingConfig"],A_(l));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],M_(o)),e}function R_(t){const e={},l=r(t,["voiceName"]);return l!=null&&u(e,["voiceName"],l),e}function Qg(t){const e={},l=r(t,["prebuiltVoiceConfig"]);return l!=null&&u(e,["prebuiltVoiceConfig"],R_(l)),e}function w_(t){const e={},l=r(t,["speaker"]);l!=null&&u(e,["speaker"],l);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Qg(o)),e}function D_(t){const e={},l=r(t,["speakerVoiceConfigs"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>w_(s))),u(e,["speakerVoiceConfigs"],o)}return e}function I_(t){const e={},l=r(t,["voiceConfig"]);l!=null&&u(e,["voiceConfig"],Qg(l));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],D_(o));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function U_(t){const e={},l=r(t,["includeThoughts"]);l!=null&&u(e,["includeThoughts"],l);const o=r(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function k_(t,e,l){const o={},s=r(e,["systemInstruction"]);l!==void 0&&s!=null&&u(l,["systemInstruction"],Xg(dt(s)));const f=r(e,["temperature"]);f!=null&&u(o,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(o,["topP"],m);const h=r(e,["topK"]);h!=null&&u(o,["topK"],h);const y=r(e,["candidateCount"]);y!=null&&u(o,["candidateCount"],y);const p=r(e,["maxOutputTokens"]);p!=null&&u(o,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const _=r(e,["responseLogprobs"]);_!=null&&u(o,["responseLogprobs"],_);const C=r(e,["logprobs"]);C!=null&&u(o,["logprobs"],C);const b=r(e,["presencePenalty"]);b!=null&&u(o,["presencePenalty"],b);const N=r(e,["frequencyPenalty"]);N!=null&&u(o,["frequencyPenalty"],N);const k=r(e,["seed"]);k!=null&&u(o,["seed"],k);const L=r(e,["responseMimeType"]);L!=null&&u(o,["responseMimeType"],L);const F=r(e,["responseSchema"]);F!=null&&u(o,["responseSchema"],g_(Io(F)));const Y=r(e,["responseJsonSchema"]);if(Y!=null&&u(o,["responseJsonSchema"],Y),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=r(e,["safetySettings"]);if(l!==void 0&&H!=null){let ce=H;Array.isArray(ce)&&(ce=ce.map(se=>y_(se))),u(l,["safetySettings"],ce)}const Q=r(e,["tools"]);if(l!==void 0&&Q!=null){let ce=Cl(Q);Array.isArray(ce)&&(ce=ce.map(se=>E_(Sl(se)))),u(l,["tools"],ce)}const B=r(e,["toolConfig"]);if(l!==void 0&&B!=null&&u(l,["toolConfig"],N_(B)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=r(e,["cachedContent"]);l!==void 0&&j!=null&&u(l,["cachedContent"],Tn(t,j));const W=r(e,["responseModalities"]);W!=null&&u(o,["responseModalities"],W);const Se=r(e,["mediaResolution"]);Se!=null&&u(o,["mediaResolution"],Se);const K=r(e,["speechConfig"]);if(K!=null&&u(o,["speechConfig"],I_(vc(K))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=r(e,["thinkingConfig"]);return pe!=null&&u(o,["thinkingConfig"],U_(pe)),o}function L_(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["request","model"],ke(t,o));const s=r(e,["contents"]);if(s!=null){let m=Ot(s);Array.isArray(m)&&(m=m.map(h=>Xg(h))),u(l,["request","contents"],m)}const f=r(e,["config"]);return f!=null&&u(l,["request","generationConfig"],k_(t,f,l)),l}function V_(t,e){const l={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=r(e,["fileName"]);o!=null&&u(l,["fileName"],o);const s=r(e,["inlinedRequests"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>L_(t,m))),u(l,["requests","requests"],f)}return l}function P_(t,e){const l={},o=r(t,["displayName"]);if(e!==void 0&&o!=null&&u(e,["batch","displayName"],o),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return l}function q_(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["src"]);s!=null&&u(l,["batch","inputConfig"],V_(t,Kg(t,s)));const f=r(e,["config"]);return f!=null&&u(l,["config"],P_(f,l)),l}function G_(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],El(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function O_(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],El(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function B_(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);if(e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return l}function z_(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],B_(l,e)),e}function H_(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],El(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function F_(t){const e={},l=r(t,["format"]);l!=null&&u(e,["instancesFormat"],l);const o=r(t,["gcsUri"]);o!=null&&u(e,["gcsSource","uris"],o);const s=r(t,["bigqueryUri"]);if(s!=null&&u(e,["bigquerySource","inputUri"],s),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Y_(t){const e={},l=r(t,["format"]);l!=null&&u(e,["predictionsFormat"],l);const o=r(t,["gcsUri"]);o!=null&&u(e,["gcsDestination","outputUriPrefix"],o);const s=r(t,["bigqueryUri"]);if(s!=null&&u(e,["bigqueryDestination","outputUri"],s),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function J_(t,e){const l={},o=r(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=r(t,["dest"]);return e!==void 0&&s!=null&&u(e,["outputConfig"],Y_(f_(s))),l}function Z_(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["model"],ke(t,o));const s=r(e,["src"]);s!=null&&u(l,["inputConfig"],F_(Kg(t,s)));const f=r(e,["config"]);return f!=null&&u(l,["config"],J_(f,l)),l}function K_(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],El(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function $_(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],El(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function X_(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),l}function Q_(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],X_(l,e)),e}function W_(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],El(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function Wg(){return{}}function j_(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function eS(t){const e={},l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function tS(t){const e={},l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function nS(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],j_(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],eS(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],tS(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function iS(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>nS(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function lS(t){const e={},l=r(t,["citationSources"]);return l!=null&&u(e,["citations"],l),e}function oS(t){const e={},l=r(t,["retrievedUrl"]);l!=null&&u(e,["retrievedUrl"],l);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function aS(t){const e={},l=r(t,["urlMetadata"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>oS(s))),u(e,["urlMetadata"],o)}return e}function sS(t){const e={},l=r(t,["content"]);l!=null&&u(e,["content"],iS(l));const o=r(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],lS(o));const s=r(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],aS(m));const h=r(t,["avgLogprobs"]);h!=null&&u(e,["avgLogprobs"],h);const y=r(t,["groundingMetadata"]);y!=null&&u(e,["groundingMetadata"],y);const p=r(t,["index"]);p!=null&&u(e,["index"],p);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const _=r(t,["safetyRatings"]);return _!=null&&u(e,["safetyRatings"],_),e}function rS(t){const e={},l=r(t,["candidates"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>sS(h))),u(e,["candidates"],m)}const o=r(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=r(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const f=r(t,["usageMetadata"]);return f!=null&&u(e,["usageMetadata"],f),e}function uS(t){const e={},l=r(t,["response"]);return l!=null&&u(e,["response"],rS(l)),r(t,["error"])!=null&&u(e,["error"],Wg()),e}function cS(t){const e={},l=r(t,["responsesFile"]);l!=null&&u(e,["fileName"],l);const o=r(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>uS(f))),u(e,["inlinedResponses"],s)}return e}function ic(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["metadata","displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["metadata","state"]);s!=null&&u(e,["state"],$g(s));const f=r(t,["metadata","createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["metadata","endTime"]);m!=null&&u(e,["endTime"],m);const h=r(t,["metadata","updateTime"]);h!=null&&u(e,["updateTime"],h);const y=r(t,["metadata","model"]);y!=null&&u(e,["model"],y);const p=r(t,["metadata","output"]);return p!=null&&u(e,["dest"],cS(p)),e}function fS(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>ic(f))),u(e,["batchJobs"],s)}return e}function dS(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["done"]);return o!=null&&u(e,["done"],o),r(t,["error"])!=null&&u(e,["error"],Wg()),e}function jg(t){const e={},l=r(t,["details"]);l!=null&&u(e,["details"],l);const o=r(t,["code"]);o!=null&&u(e,["code"],o);const s=r(t,["message"]);return s!=null&&u(e,["message"],s),e}function mS(t){const e={},l=r(t,["instancesFormat"]);l!=null&&u(e,["format"],l);const o=r(t,["gcsSource","uris"]);o!=null&&u(e,["gcsUri"],o);const s=r(t,["bigquerySource","inputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function pS(t){const e={},l=r(t,["predictionsFormat"]);l!=null&&u(e,["format"],l);const o=r(t,["gcsDestination","outputUriPrefix"]);o!=null&&u(e,["gcsUri"],o);const s=r(t,["bigqueryDestination","outputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function lc(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["state"]);s!=null&&u(e,["state"],$g(s));const f=r(t,["error"]);f!=null&&u(e,["error"],jg(f));const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const h=r(t,["startTime"]);h!=null&&u(e,["startTime"],h);const y=r(t,["endTime"]);y!=null&&u(e,["endTime"],y);const p=r(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const v=r(t,["model"]);v!=null&&u(e,["model"],v);const _=r(t,["inputConfig"]);_!=null&&u(e,["src"],mS(_));const C=r(t,["outputConfig"]);return C!=null&&u(e,["dest"],pS(C)),e}function hS(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>lc(f))),u(e,["batchJobs"],s)}return e}function gS(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["done"]);o!=null&&u(e,["done"],o);const s=r(t,["error"]);return s!=null&&u(e,["error"],jg(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(vi||(vi={}));class Uo{constructor(e,l,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=l,this.init(e,o,s)}init(e,l,o){var s,f;this.nameInternal=e,this.pageInternal=l[this.nameInternal]||[],this.idxInternal=0;let m={config:{}};o?typeof o=="object"?m=Object.assign({},o):m=o:m={config:{}},m.config&&(m.config.pageToken=l.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(f=(s=m.config)===null||s===void 0?void 0:s.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yS extends xi{constructor(e){super(),this.apiClient=e,this.create=async l=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(l.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(l.config=l.config||{},l.config.displayName===void 0&&(l.config.displayName="genaiBatchJob_${timestampStr}"),l.config.dest===void 0&&typeof l.src=="string")if(l.src.startsWith("gs://")&&l.src.endsWith(".jsonl"))l.config.dest=`${l.src.slice(0,-6)}/dest`;else if(l.src.startsWith("bq://"))l.config.dest=`${l.src}_dest_${s}`;else throw new Error("Unsupported source:"+l.src)}return await this.createInternal(l)},this.list=async(l={})=>new Uo(vi.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(l),l)}async createInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=Z_(this.apiClient,e);return h=oe("batchPredictionJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>lc(v))}else{const p=q_(this.apiClient,e);return h=oe("{model}:batchGenerateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>ic(v))}}async get(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=K_(this.apiClient,e);return h=oe("batchPredictionJobs/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>lc(v))}else{const p=G_(this.apiClient,e);return h=oe("batches/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>ic(v))}}async cancel(e){var l,o,s,f;let m="",h={};if(this.apiClient.isVertexAI()){const y=$_(this.apiClient,e);m=oe("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=O_(this.apiClient,e);m=oe("batches/{name}:cancel",y._url),h=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=Q_(e);return h=oe("batchPredictionJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=hS(v),C=new qh;return Object.assign(C,_),C})}else{const p=z_(e);return h=oe("batches",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=fS(v),C=new qh;return Object.assign(C,_),C})}}async delete(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=W_(this.apiClient,e);return h=oe("batchPredictionJobs/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>gS(v))}else{const p=H_(this.apiClient,e);return h=oe("batches/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>dS(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vS(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function xS(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function TS(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function _S(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],vS(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],xS(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],TS(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function Hh(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>_S(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function SS(t){const e={},l=r(t,["behavior"]);l!=null&&u(e,["behavior"],l);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function CS(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function ES(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],CS(l)),e}function AS(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function bS(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],AS(l)),e}function MS(){return{}}function NS(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(p=>SS(p))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],ES(o));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],bS(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],MS());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const h=r(t,["computerUse"]);return h!=null&&u(e,["computerUse"],h),e}function RS(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function wS(t){const e={},l=r(t,["latitude"]);l!=null&&u(e,["latitude"],l);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function DS(t){const e={},l=r(t,["latLng"]);l!=null&&u(e,["latLng"],wS(l));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function IS(t){const e={},l=r(t,["functionCallingConfig"]);l!=null&&u(e,["functionCallingConfig"],RS(l));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],DS(o)),e}function US(t,e){const l={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const s=r(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const m=r(t,["contents"]);if(e!==void 0&&m!=null){let v=Ot(m);Array.isArray(v)&&(v=v.map(_=>Hh(_))),u(e,["contents"],v)}const h=r(t,["systemInstruction"]);e!==void 0&&h!=null&&u(e,["systemInstruction"],Hh(dt(h)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>NS(_))),u(e,["tools"],v)}const p=r(t,["toolConfig"]);if(e!==void 0&&p!=null&&u(e,["toolConfig"],IS(p)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return l}function kS(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["model"],qg(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],US(s,l)),l}function LS(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],Tn(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function VS(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],Tn(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function PS(t,e){const l={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const s=r(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),l}function qS(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],Tn(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],PS(s,l)),l}function GS(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),l}function OS(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],GS(l,e)),e}function BS(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function zS(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function HS(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function FS(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],BS(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],zS(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],HS(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function Fh(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>FS(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function YS(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=r(t,["description"]);l!=null&&u(e,["description"],l);const o=r(t,["name"]);o!=null&&u(e,["name"],o);const s=r(t,["parameters"]);s!=null&&u(e,["parameters"],s);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const h=r(t,["responseJsonSchema"]);return h!=null&&u(e,["responseJsonSchema"],h),e}function JS(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function ZS(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],JS(l)),e}function KS(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function $S(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],KS(l)),e}function XS(){return{}}function QS(t){const e={},l=r(t,["apiKeyString"]);return l!=null&&u(e,["apiKeyString"],l),e}function WS(t){const e={},l=r(t,["apiKeyConfig"]);l!=null&&u(e,["apiKeyConfig"],QS(l));const o=r(t,["authType"]);o!=null&&u(e,["authType"],o);const s=r(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const h=r(t,["oidcConfig"]);return h!=null&&u(e,["oidcConfig"],h),e}function jS(t){const e={},l=r(t,["authConfig"]);return l!=null&&u(e,["authConfig"],WS(l)),e}function eC(){return{}}function tC(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(C=>YS(C))),u(e,["functionDeclarations"],_)}const o=r(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const s=r(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],ZS(s));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],$S(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],XS());const h=r(t,["googleMaps"]);h!=null&&u(e,["googleMaps"],jS(h)),r(t,["urlContext"])!=null&&u(e,["urlContext"],eC());const p=r(t,["codeExecution"]);p!=null&&u(e,["codeExecution"],p);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function nC(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function iC(t){const e={},l=r(t,["latitude"]);l!=null&&u(e,["latitude"],l);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function lC(t){const e={},l=r(t,["latLng"]);l!=null&&u(e,["latLng"],iC(l));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function oC(t){const e={},l=r(t,["functionCallingConfig"]);l!=null&&u(e,["functionCallingConfig"],nC(l));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],lC(o)),e}function aC(t,e){const l={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const s=r(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const m=r(t,["contents"]);if(e!==void 0&&m!=null){let _=Ot(m);Array.isArray(_)&&(_=_.map(C=>Fh(C))),u(e,["contents"],_)}const h=r(t,["systemInstruction"]);e!==void 0&&h!=null&&u(e,["systemInstruction"],Fh(dt(h)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(C=>tC(C))),u(e,["tools"],_)}const p=r(t,["toolConfig"]);e!==void 0&&p!=null&&u(e,["toolConfig"],oC(p));const v=r(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),l}function sC(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["model"],qg(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],aC(s,l)),l}function rC(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],Tn(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function uC(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],Tn(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function cC(t,e){const l={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const s=r(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),l}function fC(t,e){const l={},o=r(e,["name"]);o!=null&&u(l,["_url","name"],Tn(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],cC(s,l)),l}function dC(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),l}function mC(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],dC(l,e)),e}function es(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["model"]);s!=null&&u(e,["model"],s);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const h=r(t,["expireTime"]);h!=null&&u(e,["expireTime"],h);const y=r(t,["usageMetadata"]);return y!=null&&u(e,["usageMetadata"],y),e}function pC(){return{}}function hC(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>es(f))),u(e,["cachedContents"],s)}return e}function ts(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["model"]);s!=null&&u(e,["model"],s);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const h=r(t,["expireTime"]);h!=null&&u(e,["expireTime"],h);const y=r(t,["usageMetadata"]);return y!=null&&u(e,["usageMetadata"],y),e}function gC(){return{}}function yC(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>ts(f))),u(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vC extends xi{constructor(e){super(),this.apiClient=e,this.list=async(l={})=>new Uo(vi.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(l),l)}async create(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=sC(this.apiClient,e);return h=oe("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>ts(v))}else{const p=kS(this.apiClient,e);return h=oe("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>es(v))}}async get(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=rC(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>ts(v))}else{const p=LS(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>es(v))}}async delete(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=uC(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(()=>{const v=gC(),_=new Vh;return Object.assign(_,v),_})}else{const p=VS(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(()=>{const v=pC(),_=new Vh;return Object.assign(_,v),_})}}async update(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=fC(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>ts(v))}else{const p=qS(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>es(v))}}async listInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=mC(e);return h=oe("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=yC(v),C=new Ph;return Object.assign(C,_),C})}else{const p=OS(e);return h=oe("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=hC(v),C=new Ph;return Object.assign(C,_),C})}}}function Yh(t){var e=typeof Symbol=="function"&&Symbol.iterator,l=e&&t[e],o=0;if(l)return l.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function fl(t,e,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=l.apply(t,e||[]),s,f=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",m),s[Symbol.asyncIterator]=function(){return this},s;function m(b){return function(N){return Promise.resolve(N).then(b,_)}}function h(b,N){o[b]&&(s[b]=function(k){return new Promise(function(L,F){f.push([b,k,L,F])>1||y(b,k)})},N&&(s[b]=N(s[b])))}function y(b,N){try{p(o[b](N))}catch(k){C(f[0][3],k)}}function p(b){b.value instanceof Be?Promise.resolve(b.value.v).then(v,_):C(f[0][2],b)}function v(b){y("next",b)}function _(b){y("throw",b)}function C(b,N){b(N),f.shift(),f.length&&y(f[0][0],f[0][1])}}function wo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],l;return e?e.call(t):(t=typeof Yh=="function"?Yh(t):t[Symbol.iterator](),l={},o("next"),o("throw"),o("return"),l[Symbol.asyncIterator]=function(){return this},l);function o(f){l[f]=t[f]&&function(m){return new Promise(function(h,y){m=t[f](m),s(h,y,m.done,m.value)})}}function s(f,m,h,y){Promise.resolve(y).then(function(p){f({value:p,done:h})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const l=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return l===void 0?!1:ey(l)}function ey(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function TC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jh(t){if(t===void 0||t.length===0)return[];const e=[],l=t.length;let o=0;for(;o<l;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let f=!0;for(;o<l&&t[o].role==="model";)s.push(t[o]),f&&!ey(t[o])&&(f=!1),o++;f?e.push(...s):e.pop()}return e}class _C{constructor(e,l){this.modelsModule=e,this.apiClient=l}create(e){return new SC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class SC{constructor(e,l,o,s={},f=[]){this.apiClient=e,this.modelsModule=l,this.model=o,this.config=s,this.history=f,this.sendPromise=Promise.resolve(),TC(f)}async sendMessage(e){var l;await this.sendPromise;const o=dt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(l=e.config)!==null&&l!==void 0?l:this.config});return this.sendPromise=(async()=>{var f,m,h;const y=await s,p=(m=(f=y.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let C=[];v!=null&&(C=(h=v.slice(_))!==null&&h!==void 0?h:[]);const b=p?[p]:[];this.recordHistory(o,b,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var l;await this.sendPromise;const o=dt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(l=e.config)!==null&&l!==void 0?l:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const f=await s;return this.processStreamResponse(f,o)}getHistory(e=!1){const l=e?Jh(this.history):this.history;return structuredClone(l)}processStreamResponse(e,l){var o,s;return fl(this,arguments,function*(){var m,h,y,p;const v=[];try{for(var _=!0,C=wo(e),b;b=yield Be(C.next()),m=b.done,!m;_=!0){p=b.value,_=!1;const N=p;if(xC(N)){const k=(s=(o=N.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;k!==void 0&&v.push(k)}yield yield Be(N)}}catch(N){h={error:N}}finally{try{!_&&!m&&(y=C.return)&&(yield Be(y.call(C)))}finally{if(h)throw h.error}}this.recordHistory(l,v)})}recordHistory(e,l,o){let s=[];l.length>0&&l.every(f=>f.role!==void 0)?s=l:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Jh(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gs.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CC(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),l}function EC(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],CC(l,e)),e}function AC(t){const e={},l=r(t,["details"]);l!=null&&u(e,["details"],l);const o=r(t,["message"]);o!=null&&u(e,["message"],o);const s=r(t,["code"]);return s!=null&&u(e,["code"],s),e}function bC(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["mimeType"]);s!=null&&u(e,["mimeType"],s);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const h=r(t,["expirationTime"]);h!=null&&u(e,["expirationTime"],h);const y=r(t,["updateTime"]);y!=null&&u(e,["updateTime"],y);const p=r(t,["sha256Hash"]);p!=null&&u(e,["sha256Hash"],p);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const _=r(t,["downloadUri"]);_!=null&&u(e,["downloadUri"],_);const C=r(t,["state"]);C!=null&&u(e,["state"],C);const b=r(t,["source"]);b!=null&&u(e,["source"],b);const N=r(t,["videoMetadata"]);N!=null&&u(e,["videoMetadata"],N);const k=r(t,["error"]);return k!=null&&u(e,["error"],AC(k)),e}function MC(t){const e={},l=r(t,["file"]);l!=null&&u(e,["file"],bC(l));const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function NC(t){const e={},l=r(t,["name"]);l!=null&&u(e,["_url","file"],Yg(l));const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function RC(t){const e={},l=r(t,["name"]);l!=null&&u(e,["_url","file"],Yg(l));const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function wC(t){const e={},l=r(t,["details"]);l!=null&&u(e,["details"],l);const o=r(t,["message"]);o!=null&&u(e,["message"],o);const s=r(t,["code"]);return s!=null&&u(e,["code"],s),e}function oc(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["mimeType"]);s!=null&&u(e,["mimeType"],s);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const h=r(t,["expirationTime"]);h!=null&&u(e,["expirationTime"],h);const y=r(t,["updateTime"]);y!=null&&u(e,["updateTime"],y);const p=r(t,["sha256Hash"]);p!=null&&u(e,["sha256Hash"],p);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const _=r(t,["downloadUri"]);_!=null&&u(e,["downloadUri"],_);const C=r(t,["state"]);C!=null&&u(e,["state"],C);const b=r(t,["source"]);b!=null&&u(e,["source"],b);const N=r(t,["videoMetadata"]);N!=null&&u(e,["videoMetadata"],N);const k=r(t,["error"]);return k!=null&&u(e,["error"],wC(k)),e}function DC(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>oc(f))),u(e,["files"],s)}return e}function IC(){return{}}function UC(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kC extends xi{constructor(e){super(),this.apiClient=e,this.list=async(l={})=>new Uo(vi.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(l),l)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(l=>oc(l))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=EC(e);return f=oe("files",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>{const p=DC(y),v=new ZT;return Object.assign(v,p),v})}}async createInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MC(e);return f=oe("upload/v1beta/files",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(()=>{const y=IC(),p=new KT;return Object.assign(p,y),p})}}async get(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=NC(e);return f=oe("files/{file}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>oc(y))}}async delete(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=RC(e);return f=oe("files/{file}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(()=>{const y=UC(),p=new $T;return Object.assign(p,y),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LC(t){const e={},l=r(t,["voiceName"]);return l!=null&&u(e,["voiceName"],l),e}function VC(t){const e={},l=r(t,["voiceName"]);return l!=null&&u(e,["voiceName"],l),e}function ty(t){const e={},l=r(t,["prebuiltVoiceConfig"]);return l!=null&&u(e,["prebuiltVoiceConfig"],LC(l)),e}function PC(t){const e={},l=r(t,["prebuiltVoiceConfig"]);return l!=null&&u(e,["prebuiltVoiceConfig"],VC(l)),e}function qC(t){const e={},l=r(t,["speaker"]);l!=null&&u(e,["speaker"],l);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],ty(o)),e}function GC(t){const e={},l=r(t,["speakerVoiceConfigs"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>qC(s))),u(e,["speakerVoiceConfigs"],o)}return e}function OC(t){const e={},l=r(t,["voiceConfig"]);l!=null&&u(e,["voiceConfig"],ty(l));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],GC(o));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function BC(t){const e={},l=r(t,["voiceConfig"]);if(l!=null&&u(e,["voiceConfig"],PC(l)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function zC(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function HC(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function FC(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function YC(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function JC(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ZC(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function KC(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],zC(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],FC(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],JC(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function $C(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],HC(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],YC(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],ZC(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function XC(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>KC(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function QC(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>$C(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function WC(t){const e={},l=r(t,["behavior"]);l!=null&&u(e,["behavior"],l);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function jC(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=r(t,["description"]);l!=null&&u(e,["description"],l);const o=r(t,["name"]);o!=null&&u(e,["name"],o);const s=r(t,["parameters"]);s!=null&&u(e,["parameters"],s);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const h=r(t,["responseJsonSchema"]);return h!=null&&u(e,["responseJsonSchema"],h),e}function eE(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function tE(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function nE(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],eE(l)),e}function iE(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],tE(l)),e}function lE(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function oE(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function aE(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],lE(l)),e}function sE(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],oE(l)),e}function rE(){return{}}function uE(t){const e={},l=r(t,["apiKeyString"]);return l!=null&&u(e,["apiKeyString"],l),e}function cE(t){const e={},l=r(t,["apiKeyConfig"]);l!=null&&u(e,["apiKeyConfig"],uE(l));const o=r(t,["authType"]);o!=null&&u(e,["authType"],o);const s=r(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const h=r(t,["oidcConfig"]);return h!=null&&u(e,["oidcConfig"],h),e}function fE(t){const e={},l=r(t,["authConfig"]);return l!=null&&u(e,["authConfig"],cE(l)),e}function dE(){return{}}function mE(){return{}}function pE(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(p=>WC(p))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],nE(o));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],aE(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],dE());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const h=r(t,["computerUse"]);return h!=null&&u(e,["computerUse"],h),e}function hE(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(C=>jC(C))),u(e,["functionDeclarations"],_)}const o=r(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const s=r(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],iE(s));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],sE(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],rE());const h=r(t,["googleMaps"]);h!=null&&u(e,["googleMaps"],fE(h)),r(t,["urlContext"])!=null&&u(e,["urlContext"],mE());const p=r(t,["codeExecution"]);p!=null&&u(e,["codeExecution"],p);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function gE(t){const e={},l=r(t,["handle"]);if(l!=null&&u(e,["handle"],l),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yE(t){const e={},l=r(t,["handle"]);l!=null&&u(e,["handle"],l);const o=r(t,["transparent"]);return o!=null&&u(e,["transparent"],o),e}function Zh(){return{}}function Kh(){return{}}function vE(t){const e={},l=r(t,["disabled"]);l!=null&&u(e,["disabled"],l);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const s=r(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function xE(t){const e={},l=r(t,["disabled"]);l!=null&&u(e,["disabled"],l);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const s=r(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function TE(t){const e={},l=r(t,["automaticActivityDetection"]);l!=null&&u(e,["automaticActivityDetection"],vE(l));const o=r(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const s=r(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function _E(t){const e={},l=r(t,["automaticActivityDetection"]);l!=null&&u(e,["automaticActivityDetection"],xE(l));const o=r(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const s=r(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function SE(t){const e={},l=r(t,["targetTokens"]);return l!=null&&u(e,["targetTokens"],l),e}function CE(t){const e={},l=r(t,["targetTokens"]);return l!=null&&u(e,["targetTokens"],l),e}function EE(t){const e={},l=r(t,["triggerTokens"]);l!=null&&u(e,["triggerTokens"],l);const o=r(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],SE(o)),e}function AE(t){const e={},l=r(t,["triggerTokens"]);l!=null&&u(e,["triggerTokens"],l);const o=r(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],CE(o)),e}function bE(t){const e={},l=r(t,["proactiveAudio"]);return l!=null&&u(e,["proactiveAudio"],l),e}function ME(t){const e={},l=r(t,["proactiveAudio"]);return l!=null&&u(e,["proactiveAudio"],l),e}function NE(t,e){const l={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const h=r(t,["topK"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","topK"],h);const y=r(t,["maxOutputTokens"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","maxOutputTokens"],y);const p=r(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const _=r(t,["speechConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","speechConfig"],OC(xc(_)));const C=r(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=r(t,["systemInstruction"]);e!==void 0&&b!=null&&u(e,["setup","systemInstruction"],XC(dt(b)));const N=r(t,["tools"]);if(e!==void 0&&N!=null){let B=Cl(N);Array.isArray(B)&&(B=B.map(j=>pE(Sl(j)))),u(e,["setup","tools"],B)}const k=r(t,["sessionResumption"]);e!==void 0&&k!=null&&u(e,["setup","sessionResumption"],gE(k));const L=r(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],Zh());const F=r(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","outputAudioTranscription"],Zh());const Y=r(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&u(e,["setup","realtimeInputConfig"],TE(Y));const H=r(t,["contextWindowCompression"]);e!==void 0&&H!=null&&u(e,["setup","contextWindowCompression"],EE(H));const Q=r(t,["proactivity"]);return e!==void 0&&Q!=null&&u(e,["setup","proactivity"],bE(Q)),l}function RE(t,e){const l={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const h=r(t,["topK"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","topK"],h);const y=r(t,["maxOutputTokens"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","maxOutputTokens"],y);const p=r(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const _=r(t,["speechConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","speechConfig"],BC(xc(_)));const C=r(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=r(t,["systemInstruction"]);e!==void 0&&b!=null&&u(e,["setup","systemInstruction"],QC(dt(b)));const N=r(t,["tools"]);if(e!==void 0&&N!=null){let B=Cl(N);Array.isArray(B)&&(B=B.map(j=>hE(Sl(j)))),u(e,["setup","tools"],B)}const k=r(t,["sessionResumption"]);e!==void 0&&k!=null&&u(e,["setup","sessionResumption"],yE(k));const L=r(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],Kh());const F=r(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","outputAudioTranscription"],Kh());const Y=r(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&u(e,["setup","realtimeInputConfig"],_E(Y));const H=r(t,["contextWindowCompression"]);e!==void 0&&H!=null&&u(e,["setup","contextWindowCompression"],AE(H));const Q=r(t,["proactivity"]);return e!==void 0&&Q!=null&&u(e,["setup","proactivity"],ME(Q)),l}function wE(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["setup","model"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],NE(s,l)),l}function DE(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["setup","model"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],RE(s,l)),l}function IE(){return{}}function UE(){return{}}function kE(){return{}}function LE(){return{}}function VE(t){const e={},l=r(t,["media"]);l!=null&&u(e,["mediaChunks"],Gg(l));const o=r(t,["audio"]);o!=null&&u(e,["audio"],Bg(o));const s=r(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const f=r(t,["video"]);f!=null&&u(e,["video"],Og(f));const m=r(t,["text"]);return m!=null&&u(e,["text"],m),r(t,["activityStart"])!=null&&u(e,["activityStart"],IE()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],kE()),e}function PE(t){const e={},l=r(t,["media"]);l!=null&&u(e,["mediaChunks"],Gg(l));const o=r(t,["audio"]);o!=null&&u(e,["audio"],Bg(o));const s=r(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const f=r(t,["video"]);f!=null&&u(e,["video"],Og(f));const m=r(t,["text"]);return m!=null&&u(e,["text"],m),r(t,["activityStart"])!=null&&u(e,["activityStart"],UE()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],LE()),e}function ny(t){const e={},l=r(t,["text"]);l!=null&&u(e,["text"],l);const o=r(t,["weight"]);return o!=null&&u(e,["weight"],o),e}function qE(t){const e={},l=r(t,["weightedPrompts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>ny(s))),u(e,["weightedPrompts"],o)}return e}function iy(t){const e={},l=r(t,["temperature"]);l!=null&&u(e,["temperature"],l);const o=r(t,["topK"]);o!=null&&u(e,["topK"],o);const s=r(t,["seed"]);s!=null&&u(e,["seed"],s);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const m=r(t,["bpm"]);m!=null&&u(e,["bpm"],m);const h=r(t,["density"]);h!=null&&u(e,["density"],h);const y=r(t,["brightness"]);y!=null&&u(e,["brightness"],y);const p=r(t,["scale"]);p!=null&&u(e,["scale"],p);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const _=r(t,["muteDrums"]);_!=null&&u(e,["muteDrums"],_);const C=r(t,["onlyBassAndDrums"]);return C!=null&&u(e,["onlyBassAndDrums"],C),e}function GE(t){const e={},l=r(t,["musicGenerationConfig"]);return l!=null&&u(e,["musicGenerationConfig"],iy(l)),e}function ly(t){const e={},l=r(t,["model"]);return l!=null&&u(e,["model"],l),e}function oy(t){const e={},l=r(t,["weightedPrompts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>ny(s))),u(e,["weightedPrompts"],o)}return e}function ac(t){const e={},l=r(t,["setup"]);l!=null&&u(e,["setup"],ly(l));const o=r(t,["clientContent"]);o!=null&&u(e,["clientContent"],oy(o));const s=r(t,["musicGenerationConfig"]);s!=null&&u(e,["musicGenerationConfig"],iy(s));const f=r(t,["playbackControl"]);return f!=null&&u(e,["playbackControl"],f),e}function OE(){return{}}function BE(t){const e={},l=r(t,["sessionId"]);return l!=null&&u(e,["sessionId"],l),e}function zE(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function HE(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function FE(t){const e={},l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function YE(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function JE(t){const e={},l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ZE(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function KE(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],zE(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],FE(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],JE(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function $E(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],HE(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],YE(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],ZE(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function XE(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>KE(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function QE(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>$E(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function $h(t){const e={},l=r(t,["text"]);l!=null&&u(e,["text"],l);const o=r(t,["finished"]);return o!=null&&u(e,["finished"],o),e}function Xh(t){const e={},l=r(t,["text"]);l!=null&&u(e,["text"],l);const o=r(t,["finished"]);return o!=null&&u(e,["finished"],o),e}function WE(t){const e={},l=r(t,["retrievedUrl"]);l!=null&&u(e,["retrievedUrl"],l);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function jE(t){const e={},l=r(t,["urlMetadata"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>WE(s))),u(e,["urlMetadata"],o)}return e}function e0(t){const e={},l=r(t,["modelTurn"]);l!=null&&u(e,["modelTurn"],XE(l));const o=r(t,["turnComplete"]);o!=null&&u(e,["turnComplete"],o);const s=r(t,["interrupted"]);s!=null&&u(e,["interrupted"],s);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const m=r(t,["generationComplete"]);m!=null&&u(e,["generationComplete"],m);const h=r(t,["inputTranscription"]);h!=null&&u(e,["inputTranscription"],$h(h));const y=r(t,["outputTranscription"]);y!=null&&u(e,["outputTranscription"],$h(y));const p=r(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],jE(p)),e}function t0(t){const e={},l=r(t,["modelTurn"]);l!=null&&u(e,["modelTurn"],QE(l));const o=r(t,["turnComplete"]);o!=null&&u(e,["turnComplete"],o);const s=r(t,["interrupted"]);s!=null&&u(e,["interrupted"],s);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const m=r(t,["generationComplete"]);m!=null&&u(e,["generationComplete"],m);const h=r(t,["inputTranscription"]);h!=null&&u(e,["inputTranscription"],Xh(h));const y=r(t,["outputTranscription"]);return y!=null&&u(e,["outputTranscription"],Xh(y)),e}function n0(t){const e={},l=r(t,["id"]);l!=null&&u(e,["id"],l);const o=r(t,["args"]);o!=null&&u(e,["args"],o);const s=r(t,["name"]);return s!=null&&u(e,["name"],s),e}function i0(t){const e={},l=r(t,["args"]);l!=null&&u(e,["args"],l);const o=r(t,["name"]);return o!=null&&u(e,["name"],o),e}function l0(t){const e={},l=r(t,["functionCalls"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>n0(s))),u(e,["functionCalls"],o)}return e}function o0(t){const e={},l=r(t,["functionCalls"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>i0(s))),u(e,["functionCalls"],o)}return e}function a0(t){const e={},l=r(t,["ids"]);return l!=null&&u(e,["ids"],l),e}function s0(t){const e={},l=r(t,["ids"]);return l!=null&&u(e,["ids"],l),e}function Xa(t){const e={},l=r(t,["modality"]);l!=null&&u(e,["modality"],l);const o=r(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function Qa(t){const e={},l=r(t,["modality"]);l!=null&&u(e,["modality"],l);const o=r(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function r0(t){const e={},l=r(t,["promptTokenCount"]);l!=null&&u(e,["promptTokenCount"],l);const o=r(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);const s=r(t,["responseTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const m=r(t,["thoughtsTokenCount"]);m!=null&&u(e,["thoughtsTokenCount"],m);const h=r(t,["totalTokenCount"]);h!=null&&u(e,["totalTokenCount"],h);const y=r(t,["promptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(b=>Xa(b))),u(e,["promptTokensDetails"],C)}const p=r(t,["cacheTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(b=>Xa(b))),u(e,["cacheTokensDetails"],C)}const v=r(t,["responseTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(b=>Xa(b))),u(e,["responseTokensDetails"],C)}const _=r(t,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(b=>Xa(b))),u(e,["toolUsePromptTokensDetails"],C)}return e}function u0(t){const e={},l=r(t,["promptTokenCount"]);l!=null&&u(e,["promptTokenCount"],l);const o=r(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);const s=r(t,["candidatesTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const m=r(t,["thoughtsTokenCount"]);m!=null&&u(e,["thoughtsTokenCount"],m);const h=r(t,["totalTokenCount"]);h!=null&&u(e,["totalTokenCount"],h);const y=r(t,["promptTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(N=>Qa(N))),u(e,["promptTokensDetails"],b)}const p=r(t,["cacheTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(N=>Qa(N))),u(e,["cacheTokensDetails"],b)}const v=r(t,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(N=>Qa(N))),u(e,["responseTokensDetails"],b)}const _=r(t,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(N=>Qa(N))),u(e,["toolUsePromptTokensDetails"],b)}const C=r(t,["trafficType"]);return C!=null&&u(e,["trafficType"],C),e}function c0(t){const e={},l=r(t,["timeLeft"]);return l!=null&&u(e,["timeLeft"],l),e}function f0(t){const e={},l=r(t,["timeLeft"]);return l!=null&&u(e,["timeLeft"],l),e}function d0(t){const e={},l=r(t,["newHandle"]);l!=null&&u(e,["newHandle"],l);const o=r(t,["resumable"]);o!=null&&u(e,["resumable"],o);const s=r(t,["lastConsumedClientMessageIndex"]);return s!=null&&u(e,["lastConsumedClientMessageIndex"],s),e}function m0(t){const e={},l=r(t,["newHandle"]);l!=null&&u(e,["newHandle"],l);const o=r(t,["resumable"]);o!=null&&u(e,["resumable"],o);const s=r(t,["lastConsumedClientMessageIndex"]);return s!=null&&u(e,["lastConsumedClientMessageIndex"],s),e}function p0(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],OE());const o=r(t,["serverContent"]);o!=null&&u(e,["serverContent"],e0(o));const s=r(t,["toolCall"]);s!=null&&u(e,["toolCall"],l0(s));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],a0(f));const m=r(t,["usageMetadata"]);m!=null&&u(e,["usageMetadata"],r0(m));const h=r(t,["goAway"]);h!=null&&u(e,["goAway"],c0(h));const y=r(t,["sessionResumptionUpdate"]);return y!=null&&u(e,["sessionResumptionUpdate"],d0(y)),e}function h0(t){const e={},l=r(t,["setupComplete"]);l!=null&&u(e,["setupComplete"],BE(l));const o=r(t,["serverContent"]);o!=null&&u(e,["serverContent"],t0(o));const s=r(t,["toolCall"]);s!=null&&u(e,["toolCall"],o0(s));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],s0(f));const m=r(t,["usageMetadata"]);m!=null&&u(e,["usageMetadata"],u0(m));const h=r(t,["goAway"]);h!=null&&u(e,["goAway"],f0(h));const y=r(t,["sessionResumptionUpdate"]);return y!=null&&u(e,["sessionResumptionUpdate"],m0(y)),e}function g0(){return{}}function y0(t){const e={},l=r(t,["text"]);l!=null&&u(e,["text"],l);const o=r(t,["weight"]);return o!=null&&u(e,["weight"],o),e}function v0(t){const e={},l=r(t,["weightedPrompts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>y0(s))),u(e,["weightedPrompts"],o)}return e}function x0(t){const e={},l=r(t,["temperature"]);l!=null&&u(e,["temperature"],l);const o=r(t,["topK"]);o!=null&&u(e,["topK"],o);const s=r(t,["seed"]);s!=null&&u(e,["seed"],s);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const m=r(t,["bpm"]);m!=null&&u(e,["bpm"],m);const h=r(t,["density"]);h!=null&&u(e,["density"],h);const y=r(t,["brightness"]);y!=null&&u(e,["brightness"],y);const p=r(t,["scale"]);p!=null&&u(e,["scale"],p);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const _=r(t,["muteDrums"]);_!=null&&u(e,["muteDrums"],_);const C=r(t,["onlyBassAndDrums"]);return C!=null&&u(e,["onlyBassAndDrums"],C),e}function T0(t){const e={},l=r(t,["clientContent"]);l!=null&&u(e,["clientContent"],v0(l));const o=r(t,["musicGenerationConfig"]);return o!=null&&u(e,["musicGenerationConfig"],x0(o)),e}function _0(t){const e={},l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);o!=null&&u(e,["mimeType"],o);const s=r(t,["sourceMetadata"]);return s!=null&&u(e,["sourceMetadata"],T0(s)),e}function S0(t){const e={},l=r(t,["audioChunks"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>_0(s))),u(e,["audioChunks"],o)}return e}function C0(t){const e={},l=r(t,["text"]);l!=null&&u(e,["text"],l);const o=r(t,["filteredReason"]);return o!=null&&u(e,["filteredReason"],o),e}function E0(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],g0());const o=r(t,["serverContent"]);o!=null&&u(e,["serverContent"],S0(o));const s=r(t,["filteredPrompt"]);return s!=null&&u(e,["filteredPrompt"],C0(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A0(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function b0(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function M0(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function N0(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],A0(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],b0(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],M0(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function ys(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>N0(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function R0(t){const e={},l=r(t,["anyOf"]);l!=null&&u(e,["anyOf"],l);const o=r(t,["default"]);o!=null&&u(e,["default"],o);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const h=r(t,["format"]);h!=null&&u(e,["format"],h);const y=r(t,["items"]);y!=null&&u(e,["items"],y);const p=r(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const _=r(t,["maxProperties"]);_!=null&&u(e,["maxProperties"],_);const C=r(t,["maximum"]);C!=null&&u(e,["maximum"],C);const b=r(t,["minItems"]);b!=null&&u(e,["minItems"],b);const N=r(t,["minLength"]);N!=null&&u(e,["minLength"],N);const k=r(t,["minProperties"]);k!=null&&u(e,["minProperties"],k);const L=r(t,["minimum"]);L!=null&&u(e,["minimum"],L);const F=r(t,["nullable"]);F!=null&&u(e,["nullable"],F);const Y=r(t,["pattern"]);Y!=null&&u(e,["pattern"],Y);const H=r(t,["properties"]);H!=null&&u(e,["properties"],H);const Q=r(t,["propertyOrdering"]);Q!=null&&u(e,["propertyOrdering"],Q);const B=r(t,["required"]);B!=null&&u(e,["required"],B);const j=r(t,["title"]);j!=null&&u(e,["title"],j);const W=r(t,["type"]);return W!=null&&u(e,["type"],W),e}function w0(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const l=r(t,["category"]);l!=null&&u(e,["category"],l);const o=r(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function D0(t){const e={},l=r(t,["behavior"]);l!=null&&u(e,["behavior"],l);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function I0(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function U0(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],I0(l)),e}function k0(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function L0(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],k0(l)),e}function V0(){return{}}function P0(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(p=>D0(p))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],U0(o));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],L0(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],V0());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const h=r(t,["computerUse"]);return h!=null&&u(e,["computerUse"],h),e}function q0(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function G0(t){const e={},l=r(t,["latitude"]);l!=null&&u(e,["latitude"],l);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function O0(t){const e={},l=r(t,["latLng"]);l!=null&&u(e,["latLng"],G0(l));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function B0(t){const e={},l=r(t,["functionCallingConfig"]);l!=null&&u(e,["functionCallingConfig"],q0(l));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],O0(o)),e}function z0(t){const e={},l=r(t,["voiceName"]);return l!=null&&u(e,["voiceName"],l),e}function ay(t){const e={},l=r(t,["prebuiltVoiceConfig"]);return l!=null&&u(e,["prebuiltVoiceConfig"],z0(l)),e}function H0(t){const e={},l=r(t,["speaker"]);l!=null&&u(e,["speaker"],l);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],ay(o)),e}function F0(t){const e={},l=r(t,["speakerVoiceConfigs"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>H0(s))),u(e,["speakerVoiceConfigs"],o)}return e}function Y0(t){const e={},l=r(t,["voiceConfig"]);l!=null&&u(e,["voiceConfig"],ay(l));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],F0(o));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function J0(t){const e={},l=r(t,["includeThoughts"]);l!=null&&u(e,["includeThoughts"],l);const o=r(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function Z0(t,e,l){const o={},s=r(e,["systemInstruction"]);l!==void 0&&s!=null&&u(l,["systemInstruction"],ys(dt(s)));const f=r(e,["temperature"]);f!=null&&u(o,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(o,["topP"],m);const h=r(e,["topK"]);h!=null&&u(o,["topK"],h);const y=r(e,["candidateCount"]);y!=null&&u(o,["candidateCount"],y);const p=r(e,["maxOutputTokens"]);p!=null&&u(o,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const _=r(e,["responseLogprobs"]);_!=null&&u(o,["responseLogprobs"],_);const C=r(e,["logprobs"]);C!=null&&u(o,["logprobs"],C);const b=r(e,["presencePenalty"]);b!=null&&u(o,["presencePenalty"],b);const N=r(e,["frequencyPenalty"]);N!=null&&u(o,["frequencyPenalty"],N);const k=r(e,["seed"]);k!=null&&u(o,["seed"],k);const L=r(e,["responseMimeType"]);L!=null&&u(o,["responseMimeType"],L);const F=r(e,["responseSchema"]);F!=null&&u(o,["responseSchema"],R0(Io(F)));const Y=r(e,["responseJsonSchema"]);if(Y!=null&&u(o,["responseJsonSchema"],Y),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=r(e,["safetySettings"]);if(l!==void 0&&H!=null){let ce=H;Array.isArray(ce)&&(ce=ce.map(se=>w0(se))),u(l,["safetySettings"],ce)}const Q=r(e,["tools"]);if(l!==void 0&&Q!=null){let ce=Cl(Q);Array.isArray(ce)&&(ce=ce.map(se=>P0(Sl(se)))),u(l,["tools"],ce)}const B=r(e,["toolConfig"]);if(l!==void 0&&B!=null&&u(l,["toolConfig"],B0(B)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=r(e,["cachedContent"]);l!==void 0&&j!=null&&u(l,["cachedContent"],Tn(t,j));const W=r(e,["responseModalities"]);W!=null&&u(o,["responseModalities"],W);const Se=r(e,["mediaResolution"]);Se!=null&&u(o,["mediaResolution"],Se);const K=r(e,["speechConfig"]);if(K!=null&&u(o,["speechConfig"],Y0(vc(K))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=r(e,["thinkingConfig"]);return pe!=null&&u(o,["thinkingConfig"],J0(pe)),o}function Qh(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);if(s!=null){let m=Ot(s);Array.isArray(m)&&(m=m.map(h=>ys(h))),u(l,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(l,["generationConfig"],Z0(t,f,l)),l}function K0(t,e){const l={},o=r(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);const s=r(t,["title"]);e!==void 0&&s!=null&&u(e,["requests[]","title"],s);const f=r(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function $0(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);s!=null&&u(l,["requests[]","content"],Hg(t,s));const f=r(e,["config"]);f!=null&&u(l,["config"],K0(f,l));const m=r(e,["model"]);return m!==void 0&&u(l,["requests[]","model"],ke(t,m)),l}function X0(t,e){const l={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=r(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const f=r(t,["guidanceScale"]);if(e!==void 0&&f!=null&&u(e,["parameters","guidanceScale"],f),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=r(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&u(e,["parameters","safetySetting"],m);const h=r(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const y=r(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&u(e,["parameters","includeSafetyAttributes"],y);const p=r(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const v=r(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const _=r(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const C=r(t,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&u(e,["parameters","outputOptions","compressionQuality"],C),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return l}function Q0(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["prompt"]);s!=null&&u(l,["instances[0]","prompt"],s);const f=r(e,["config"]);return f!=null&&u(l,["config"],X0(f,l)),l}function W0(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","name"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function j0(t,e,l){const o={},s=r(e,["pageSize"]);l!==void 0&&s!=null&&u(l,["_query","pageSize"],s);const f=r(e,["pageToken"]);l!==void 0&&f!=null&&u(l,["_query","pageToken"],f);const m=r(e,["filter"]);l!==void 0&&m!=null&&u(l,["_query","filter"],m);const h=r(e,["queryBase"]);return l!==void 0&&h!=null&&u(l,["_url","models_url"],Jg(t,h)),o}function eA(t,e){const l={},o=r(e,["config"]);return o!=null&&u(l,["config"],j0(t,o,l)),l}function tA(t,e){const l={},o=r(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=r(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),l}function nA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","name"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],tA(s,l)),l}function iA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","name"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function lA(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function oA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);if(s!=null){let m=Ot(s);Array.isArray(m)&&(m=m.map(h=>ys(h))),u(l,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(l,["config"],lA(f)),l}function aA(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const l=r(t,["imageBytes"]);l!=null&&u(e,["bytesBase64Encoded"],_n(l));const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function sA(t,e){const l={},o=r(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=r(t,["durationSeconds"]);if(e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=r(t,["aspectRatio"]);if(e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f),r(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const m=r(t,["personGeneration"]);if(e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=r(t,["negativePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","negativePrompt"],h);const y=r(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&u(e,["parameters","enhancePrompt"],y),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return l}function rA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["prompt"]);s!=null&&u(l,["instances[0]","prompt"],s);const f=r(e,["image"]);if(f!=null&&u(l,["instances[0]","image"],aA(f)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const m=r(e,["config"]);return m!=null&&u(l,["config"],sA(m,l)),l}function uA(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function cA(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function fA(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function dA(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],uA(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],cA(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],fA(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function Al(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>dA(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function mA(t){const e={},l=r(t,["anyOf"]);l!=null&&u(e,["anyOf"],l);const o=r(t,["default"]);o!=null&&u(e,["default"],o);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const h=r(t,["format"]);h!=null&&u(e,["format"],h);const y=r(t,["items"]);y!=null&&u(e,["items"],y);const p=r(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const _=r(t,["maxProperties"]);_!=null&&u(e,["maxProperties"],_);const C=r(t,["maximum"]);C!=null&&u(e,["maximum"],C);const b=r(t,["minItems"]);b!=null&&u(e,["minItems"],b);const N=r(t,["minLength"]);N!=null&&u(e,["minLength"],N);const k=r(t,["minProperties"]);k!=null&&u(e,["minProperties"],k);const L=r(t,["minimum"]);L!=null&&u(e,["minimum"],L);const F=r(t,["nullable"]);F!=null&&u(e,["nullable"],F);const Y=r(t,["pattern"]);Y!=null&&u(e,["pattern"],Y);const H=r(t,["properties"]);H!=null&&u(e,["properties"],H);const Q=r(t,["propertyOrdering"]);Q!=null&&u(e,["propertyOrdering"],Q);const B=r(t,["required"]);B!=null&&u(e,["required"],B);const j=r(t,["title"]);j!=null&&u(e,["title"],j);const W=r(t,["type"]);return W!=null&&u(e,["type"],W),e}function pA(t){const e={},l=r(t,["featureSelectionPreference"]);return l!=null&&u(e,["featureSelectionPreference"],l),e}function hA(t){const e={},l=r(t,["method"]);l!=null&&u(e,["method"],l);const o=r(t,["category"]);o!=null&&u(e,["category"],o);const s=r(t,["threshold"]);return s!=null&&u(e,["threshold"],s),e}function gA(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=r(t,["description"]);l!=null&&u(e,["description"],l);const o=r(t,["name"]);o!=null&&u(e,["name"],o);const s=r(t,["parameters"]);s!=null&&u(e,["parameters"],s);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const h=r(t,["responseJsonSchema"]);return h!=null&&u(e,["responseJsonSchema"],h),e}function yA(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function vA(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],yA(l)),e}function xA(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function TA(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],xA(l)),e}function _A(){return{}}function SA(t){const e={},l=r(t,["apiKeyString"]);return l!=null&&u(e,["apiKeyString"],l),e}function CA(t){const e={},l=r(t,["apiKeyConfig"]);l!=null&&u(e,["apiKeyConfig"],SA(l));const o=r(t,["authType"]);o!=null&&u(e,["authType"],o);const s=r(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const h=r(t,["oidcConfig"]);return h!=null&&u(e,["oidcConfig"],h),e}function EA(t){const e={},l=r(t,["authConfig"]);return l!=null&&u(e,["authConfig"],CA(l)),e}function AA(){return{}}function sy(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(C=>gA(C))),u(e,["functionDeclarations"],_)}const o=r(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const s=r(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],vA(s));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],TA(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],_A());const h=r(t,["googleMaps"]);h!=null&&u(e,["googleMaps"],EA(h)),r(t,["urlContext"])!=null&&u(e,["urlContext"],AA());const p=r(t,["codeExecution"]);p!=null&&u(e,["codeExecution"],p);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function bA(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function MA(t){const e={},l=r(t,["latitude"]);l!=null&&u(e,["latitude"],l);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function NA(t){const e={},l=r(t,["latLng"]);l!=null&&u(e,["latLng"],MA(l));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function RA(t){const e={},l=r(t,["functionCallingConfig"]);l!=null&&u(e,["functionCallingConfig"],bA(l));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],NA(o)),e}function wA(t){const e={},l=r(t,["voiceName"]);return l!=null&&u(e,["voiceName"],l),e}function DA(t){const e={},l=r(t,["prebuiltVoiceConfig"]);return l!=null&&u(e,["prebuiltVoiceConfig"],wA(l)),e}function IA(t){const e={},l=r(t,["voiceConfig"]);if(l!=null&&u(e,["voiceConfig"],DA(l)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function UA(t){const e={},l=r(t,["includeThoughts"]);l!=null&&u(e,["includeThoughts"],l);const o=r(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function kA(t,e,l){const o={},s=r(e,["systemInstruction"]);l!==void 0&&s!=null&&u(l,["systemInstruction"],Al(dt(s)));const f=r(e,["temperature"]);f!=null&&u(o,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(o,["topP"],m);const h=r(e,["topK"]);h!=null&&u(o,["topK"],h);const y=r(e,["candidateCount"]);y!=null&&u(o,["candidateCount"],y);const p=r(e,["maxOutputTokens"]);p!=null&&u(o,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const _=r(e,["responseLogprobs"]);_!=null&&u(o,["responseLogprobs"],_);const C=r(e,["logprobs"]);C!=null&&u(o,["logprobs"],C);const b=r(e,["presencePenalty"]);b!=null&&u(o,["presencePenalty"],b);const N=r(e,["frequencyPenalty"]);N!=null&&u(o,["frequencyPenalty"],N);const k=r(e,["seed"]);k!=null&&u(o,["seed"],k);const L=r(e,["responseMimeType"]);L!=null&&u(o,["responseMimeType"],L);const F=r(e,["responseSchema"]);F!=null&&u(o,["responseSchema"],mA(Io(F)));const Y=r(e,["responseJsonSchema"]);Y!=null&&u(o,["responseJsonSchema"],Y);const H=r(e,["routingConfig"]);H!=null&&u(o,["routingConfig"],H);const Q=r(e,["modelSelectionConfig"]);Q!=null&&u(o,["modelConfig"],pA(Q));const B=r(e,["safetySettings"]);if(l!==void 0&&B!=null){let Ee=B;Array.isArray(Ee)&&(Ee=Ee.map(P=>hA(P))),u(l,["safetySettings"],Ee)}const j=r(e,["tools"]);if(l!==void 0&&j!=null){let Ee=Cl(j);Array.isArray(Ee)&&(Ee=Ee.map(P=>sy(Sl(P)))),u(l,["tools"],Ee)}const W=r(e,["toolConfig"]);l!==void 0&&W!=null&&u(l,["toolConfig"],RA(W));const Se=r(e,["labels"]);l!==void 0&&Se!=null&&u(l,["labels"],Se);const K=r(e,["cachedContent"]);l!==void 0&&K!=null&&u(l,["cachedContent"],Tn(t,K));const pe=r(e,["responseModalities"]);pe!=null&&u(o,["responseModalities"],pe);const ce=r(e,["mediaResolution"]);ce!=null&&u(o,["mediaResolution"],ce);const se=r(e,["speechConfig"]);se!=null&&u(o,["speechConfig"],IA(vc(se)));const He=r(e,["audioTimestamp"]);He!=null&&u(o,["audioTimestamp"],He);const Ge=r(e,["thinkingConfig"]);return Ge!=null&&u(o,["thinkingConfig"],UA(Ge)),o}function Wh(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);if(s!=null){let m=Ot(s);Array.isArray(m)&&(m=m.map(h=>Al(h))),u(l,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(l,["generationConfig"],kA(t,f,l)),l}function LA(t,e){const l={},o=r(t,["taskType"]);e!==void 0&&o!=null&&u(e,["instances[]","task_type"],o);const s=r(t,["title"]);e!==void 0&&s!=null&&u(e,["instances[]","title"],s);const f=r(t,["outputDimensionality"]);e!==void 0&&f!=null&&u(e,["parameters","outputDimensionality"],f);const m=r(t,["mimeType"]);e!==void 0&&m!=null&&u(e,["instances[]","mimeType"],m);const h=r(t,["autoTruncate"]);return e!==void 0&&h!=null&&u(e,["parameters","autoTruncate"],h),l}function VA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);s!=null&&u(l,["instances[]","content"],Hg(t,s));const f=r(e,["config"]);return f!=null&&u(l,["config"],LA(f,l)),l}function PA(t,e){const l={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=r(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const m=r(t,["aspectRatio"]);e!==void 0&&m!=null&&u(e,["parameters","aspectRatio"],m);const h=r(t,["guidanceScale"]);e!==void 0&&h!=null&&u(e,["parameters","guidanceScale"],h);const y=r(t,["seed"]);e!==void 0&&y!=null&&u(e,["parameters","seed"],y);const p=r(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const _=r(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&u(e,["parameters","includeSafetyAttributes"],_);const C=r(t,["includeRaiReason"]);e!==void 0&&C!=null&&u(e,["parameters","includeRaiReason"],C);const b=r(t,["language"]);e!==void 0&&b!=null&&u(e,["parameters","language"],b);const N=r(t,["outputMimeType"]);e!==void 0&&N!=null&&u(e,["parameters","outputOptions","mimeType"],N);const k=r(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&u(e,["parameters","outputOptions","compressionQuality"],k);const L=r(t,["addWatermark"]);e!==void 0&&L!=null&&u(e,["parameters","addWatermark"],L);const F=r(t,["enhancePrompt"]);return e!==void 0&&F!=null&&u(e,["parameters","enhancePrompt"],F),l}function qA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["prompt"]);s!=null&&u(l,["instances[0]","prompt"],s);const f=r(e,["config"]);return f!=null&&u(l,["config"],PA(f,l)),l}function vs(t){const e={},l=r(t,["gcsUri"]);l!=null&&u(e,["gcsUri"],l);const o=r(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],_n(o));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function GA(t){const e={},l=r(t,["maskMode"]);l!=null&&u(e,["maskMode"],l);const o=r(t,["segmentationClasses"]);o!=null&&u(e,["maskClasses"],o);const s=r(t,["maskDilation"]);return s!=null&&u(e,["dilation"],s),e}function OA(t){const e={},l=r(t,["controlType"]);l!=null&&u(e,["controlType"],l);const o=r(t,["enableControlImageComputation"]);return o!=null&&u(e,["computeControl"],o),e}function BA(t){const e={},l=r(t,["styleDescription"]);return l!=null&&u(e,["styleDescription"],l),e}function zA(t){const e={},l=r(t,["subjectType"]);l!=null&&u(e,["subjectType"],l);const o=r(t,["subjectDescription"]);return o!=null&&u(e,["subjectDescription"],o),e}function HA(t){const e={},l=r(t,["referenceImage"]);l!=null&&u(e,["referenceImage"],vs(l));const o=r(t,["referenceId"]);o!=null&&u(e,["referenceId"],o);const s=r(t,["referenceType"]);s!=null&&u(e,["referenceType"],s);const f=r(t,["maskImageConfig"]);f!=null&&u(e,["maskImageConfig"],GA(f));const m=r(t,["controlImageConfig"]);m!=null&&u(e,["controlImageConfig"],OA(m));const h=r(t,["styleImageConfig"]);h!=null&&u(e,["styleImageConfig"],BA(h));const y=r(t,["subjectImageConfig"]);return y!=null&&u(e,["subjectImageConfig"],zA(y)),e}function FA(t,e){const l={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=r(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const m=r(t,["aspectRatio"]);e!==void 0&&m!=null&&u(e,["parameters","aspectRatio"],m);const h=r(t,["guidanceScale"]);e!==void 0&&h!=null&&u(e,["parameters","guidanceScale"],h);const y=r(t,["seed"]);e!==void 0&&y!=null&&u(e,["parameters","seed"],y);const p=r(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const _=r(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&u(e,["parameters","includeSafetyAttributes"],_);const C=r(t,["includeRaiReason"]);e!==void 0&&C!=null&&u(e,["parameters","includeRaiReason"],C);const b=r(t,["language"]);e!==void 0&&b!=null&&u(e,["parameters","language"],b);const N=r(t,["outputMimeType"]);e!==void 0&&N!=null&&u(e,["parameters","outputOptions","mimeType"],N);const k=r(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&u(e,["parameters","outputOptions","compressionQuality"],k);const L=r(t,["editMode"]);e!==void 0&&L!=null&&u(e,["parameters","editMode"],L);const F=r(t,["baseSteps"]);return e!==void 0&&F!=null&&u(e,["parameters","editConfig","baseSteps"],F),l}function YA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["prompt"]);s!=null&&u(l,["instances[0]","prompt"],s);const f=r(e,["referenceImages"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>HA(y))),u(l,["instances[0]","referenceImages"],h)}const m=r(e,["config"]);return m!=null&&u(l,["config"],FA(m,l)),l}function JA(t,e){const l={},o=r(t,["includeRaiReason"]);e!==void 0&&o!=null&&u(e,["parameters","includeRaiReason"],o);const s=r(t,["outputMimeType"]);e!==void 0&&s!=null&&u(e,["parameters","outputOptions","mimeType"],s);const f=r(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","compressionQuality"],f);const m=r(t,["enhanceInputImage"]);e!==void 0&&m!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],m);const h=r(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const y=r(t,["numberOfImages"]);e!==void 0&&y!=null&&u(e,["parameters","sampleCount"],y);const p=r(t,["mode"]);return e!==void 0&&p!=null&&u(e,["parameters","mode"],p),l}function ZA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["image"]);s!=null&&u(l,["instances[0]","image"],vs(s));const f=r(e,["upscaleFactor"]);f!=null&&u(l,["parameters","upscaleConfig","upscaleFactor"],f);const m=r(e,["config"]);return m!=null&&u(l,["config"],JA(m,l)),l}function KA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","name"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function $A(t,e,l){const o={},s=r(e,["pageSize"]);l!==void 0&&s!=null&&u(l,["_query","pageSize"],s);const f=r(e,["pageToken"]);l!==void 0&&f!=null&&u(l,["_query","pageToken"],f);const m=r(e,["filter"]);l!==void 0&&m!=null&&u(l,["_query","filter"],m);const h=r(e,["queryBase"]);return l!==void 0&&h!=null&&u(l,["_url","models_url"],Jg(t,h)),o}function XA(t,e){const l={},o=r(e,["config"]);return o!=null&&u(l,["config"],$A(t,o,l)),l}function QA(t,e){const l={},o=r(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=r(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),l}function WA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],QA(s,l)),l}function jA(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","name"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],s),l}function eb(t,e){const l={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&u(e,["systemInstruction"],Al(dt(o)));const s=r(t,["tools"]);if(e!==void 0&&s!=null){let m=s;Array.isArray(m)&&(m=m.map(h=>sy(h))),u(e,["tools"],m)}const f=r(t,["generationConfig"]);return e!==void 0&&f!=null&&u(e,["generationConfig"],f),l}function tb(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);if(s!=null){let m=Ot(s);Array.isArray(m)&&(m=m.map(h=>Al(h))),u(l,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(l,["config"],eb(f,l)),l}function nb(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["contents"]);if(s!=null){let m=Ot(s);Array.isArray(m)&&(m=m.map(h=>Al(h))),u(l,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(l,["config"],f),l}function ib(t){const e={},l=r(t,["uri"]);l!=null&&u(e,["gcsUri"],l);const o=r(t,["videoBytes"]);o!=null&&u(e,["bytesBase64Encoded"],_n(o));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function lb(t,e){const l={},o=r(t,["numberOfVideos"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=r(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const f=r(t,["fps"]);e!==void 0&&f!=null&&u(e,["parameters","fps"],f);const m=r(t,["durationSeconds"]);e!==void 0&&m!=null&&u(e,["parameters","durationSeconds"],m);const h=r(t,["seed"]);e!==void 0&&h!=null&&u(e,["parameters","seed"],h);const y=r(t,["aspectRatio"]);e!==void 0&&y!=null&&u(e,["parameters","aspectRatio"],y);const p=r(t,["resolution"]);e!==void 0&&p!=null&&u(e,["parameters","resolution"],p);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const _=r(t,["pubsubTopic"]);e!==void 0&&_!=null&&u(e,["parameters","pubsubTopic"],_);const C=r(t,["negativePrompt"]);e!==void 0&&C!=null&&u(e,["parameters","negativePrompt"],C);const b=r(t,["enhancePrompt"]);e!==void 0&&b!=null&&u(e,["parameters","enhancePrompt"],b);const N=r(t,["generateAudio"]);e!==void 0&&N!=null&&u(e,["parameters","generateAudio"],N);const k=r(t,["lastFrame"]);e!==void 0&&k!=null&&u(e,["instances[0]","lastFrame"],vs(k));const L=r(t,["compressionQuality"]);return e!==void 0&&L!=null&&u(e,["parameters","compressionQuality"],L),l}function ob(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["_url","model"],ke(t,o));const s=r(e,["prompt"]);s!=null&&u(l,["instances[0]","prompt"],s);const f=r(e,["image"]);f!=null&&u(l,["instances[0]","image"],vs(f));const m=r(e,["video"]);m!=null&&u(l,["instances[0]","video"],ib(m));const h=r(e,["config"]);return h!=null&&u(l,["config"],lb(h,l)),l}function ab(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function sb(t){const e={},l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function rb(t){const e={},l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ub(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],ab(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],sb(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],rb(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function cb(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>ub(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function fb(t){const e={},l=r(t,["citationSources"]);return l!=null&&u(e,["citations"],l),e}function db(t){const e={},l=r(t,["retrievedUrl"]);l!=null&&u(e,["retrievedUrl"],l);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function mb(t){const e={},l=r(t,["urlMetadata"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>db(s))),u(e,["urlMetadata"],o)}return e}function pb(t){const e={},l=r(t,["content"]);l!=null&&u(e,["content"],cb(l));const o=r(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],fb(o));const s=r(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],mb(m));const h=r(t,["avgLogprobs"]);h!=null&&u(e,["avgLogprobs"],h);const y=r(t,["groundingMetadata"]);y!=null&&u(e,["groundingMetadata"],y);const p=r(t,["index"]);p!=null&&u(e,["index"],p);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const _=r(t,["safetyRatings"]);return _!=null&&u(e,["safetyRatings"],_),e}function jh(t){const e={},l=r(t,["candidates"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>pb(h))),u(e,["candidates"],m)}const o=r(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=r(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const f=r(t,["usageMetadata"]);return f!=null&&u(e,["usageMetadata"],f),e}function hb(t){const e={},l=r(t,["values"]);return l!=null&&u(e,["values"],l),e}function gb(){return{}}function yb(t){const e={},l=r(t,["embeddings"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>hb(f))),u(e,["embeddings"],s)}return r(t,["metadata"])!=null&&u(e,["metadata"],gb()),e}function vb(t){const e={},l=r(t,["bytesBase64Encoded"]);l!=null&&u(e,["imageBytes"],_n(l));const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ry(t){const e={},l=r(t,["safetyAttributes","categories"]);l!=null&&u(e,["categories"],l);const o=r(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);const s=r(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function xb(t){const e={},l=r(t,["_self"]);l!=null&&u(e,["image"],vb(l));const o=r(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);const s=r(t,["_self"]);return s!=null&&u(e,["safetyAttributes"],ry(s)),e}function Tb(t){const e={},l=r(t,["predictions"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>xb(f))),u(e,["generatedImages"],s)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],ry(o)),e}function _b(t){const e={},l=r(t,["baseModel"]);l!=null&&u(e,["baseModel"],l);const o=r(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=r(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function sc(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["version"]);f!=null&&u(e,["version"],f);const m=r(t,["_self"]);m!=null&&u(e,["tunedModelInfo"],_b(m));const h=r(t,["inputTokenLimit"]);h!=null&&u(e,["inputTokenLimit"],h);const y=r(t,["outputTokenLimit"]);y!=null&&u(e,["outputTokenLimit"],y);const p=r(t,["supportedGenerationMethods"]);return p!=null&&u(e,["supportedActions"],p),e}function Sb(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["_self"]);if(o!=null){let s=Zg(o);Array.isArray(s)&&(s=s.map(f=>sc(f))),u(e,["models"],s)}return e}function Cb(){return{}}function Eb(t){const e={},l=r(t,["totalTokens"]);l!=null&&u(e,["totalTokens"],l);const o=r(t,["cachedContentTokenCount"]);return o!=null&&u(e,["cachedContentTokenCount"],o),e}function Ab(t){const e={},l=r(t,["video","uri"]);l!=null&&u(e,["uri"],l);const o=r(t,["video","encodedVideo"]);o!=null&&u(e,["videoBytes"],_n(o));const s=r(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function bb(t){const e={},l=r(t,["_self"]);return l!=null&&u(e,["video"],Ab(l)),e}function Mb(t){const e={},l=r(t,["generatedSamples"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>bb(m))),u(e,["generatedVideos"],f)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function Nb(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response","generateVideoResponse"]);return m!=null&&u(e,["response"],Mb(m)),e}function Rb(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function wb(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function Db(t){const e={},l=r(t,["displayName"]);l!=null&&u(e,["displayName"],l);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function Ib(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],Rb(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],wb(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],Db(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function Ub(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>Ib(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function kb(t){const e={},l=r(t,["citations"]);return l!=null&&u(e,["citations"],l),e}function Lb(t){const e={},l=r(t,["retrievedUrl"]);l!=null&&u(e,["retrievedUrl"],l);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function Vb(t){const e={},l=r(t,["urlMetadata"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>Lb(s))),u(e,["urlMetadata"],o)}return e}function Pb(t){const e={},l=r(t,["content"]);l!=null&&u(e,["content"],Ub(l));const o=r(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],kb(o));const s=r(t,["finishMessage"]);s!=null&&u(e,["finishMessage"],s);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],Vb(m));const h=r(t,["avgLogprobs"]);h!=null&&u(e,["avgLogprobs"],h);const y=r(t,["groundingMetadata"]);y!=null&&u(e,["groundingMetadata"],y);const p=r(t,["index"]);p!=null&&u(e,["index"],p);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const _=r(t,["safetyRatings"]);return _!=null&&u(e,["safetyRatings"],_),e}function eg(t){const e={},l=r(t,["candidates"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(p=>Pb(p))),u(e,["candidates"],y)}const o=r(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=r(t,["responseId"]);s!=null&&u(e,["responseId"],s);const f=r(t,["modelVersion"]);f!=null&&u(e,["modelVersion"],f);const m=r(t,["promptFeedback"]);m!=null&&u(e,["promptFeedback"],m);const h=r(t,["usageMetadata"]);return h!=null&&u(e,["usageMetadata"],h),e}function qb(t){const e={},l=r(t,["truncated"]);l!=null&&u(e,["truncated"],l);const o=r(t,["token_count"]);return o!=null&&u(e,["tokenCount"],o),e}function Gb(t){const e={},l=r(t,["values"]);l!=null&&u(e,["values"],l);const o=r(t,["statistics"]);return o!=null&&u(e,["statistics"],qb(o)),e}function Ob(t){const e={},l=r(t,["billableCharacterCount"]);return l!=null&&u(e,["billableCharacterCount"],l),e}function Bb(t){const e={},l=r(t,["predictions[]","embeddings"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>Gb(f))),u(e,["embeddings"],s)}const o=r(t,["metadata"]);return o!=null&&u(e,["metadata"],Ob(o)),e}function zb(t){const e={},l=r(t,["gcsUri"]);l!=null&&u(e,["gcsUri"],l);const o=r(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],_n(o));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function uy(t){const e={},l=r(t,["safetyAttributes","categories"]);l!=null&&u(e,["categories"],l);const o=r(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);const s=r(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function Tc(t){const e={},l=r(t,["_self"]);l!=null&&u(e,["image"],zb(l));const o=r(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);const s=r(t,["_self"]);s!=null&&u(e,["safetyAttributes"],uy(s));const f=r(t,["prompt"]);return f!=null&&u(e,["enhancedPrompt"],f),e}function Hb(t){const e={},l=r(t,["predictions"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>Tc(f))),u(e,["generatedImages"],s)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],uy(o)),e}function Fb(t){const e={},l=r(t,["predictions"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>Tc(s))),u(e,["generatedImages"],o)}return e}function Yb(t){const e={},l=r(t,["predictions"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>Tc(s))),u(e,["generatedImages"],o)}return e}function Jb(t){const e={},l=r(t,["endpoint"]);l!=null&&u(e,["name"],l);const o=r(t,["deployedModelId"]);return o!=null&&u(e,["deployedModelId"],o),e}function Zb(t){const e={},l=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);l!=null&&u(e,["baseModel"],l);const o=r(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=r(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function Kb(t){const e={},l=r(t,["checkpointId"]);l!=null&&u(e,["checkpointId"],l);const o=r(t,["epoch"]);o!=null&&u(e,["epoch"],o);const s=r(t,["step"]);return s!=null&&u(e,["step"],s),e}function rc(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const s=r(t,["description"]);s!=null&&u(e,["description"],s);const f=r(t,["versionId"]);f!=null&&u(e,["version"],f);const m=r(t,["deployedModels"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(C=>Jb(C))),u(e,["endpoints"],_)}const h=r(t,["labels"]);h!=null&&u(e,["labels"],h);const y=r(t,["_self"]);y!=null&&u(e,["tunedModelInfo"],Zb(y));const p=r(t,["defaultCheckpointId"]);p!=null&&u(e,["defaultCheckpointId"],p);const v=r(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(C=>Kb(C))),u(e,["checkpoints"],_)}return e}function $b(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["_self"]);if(o!=null){let s=Zg(o);Array.isArray(s)&&(s=s.map(f=>rc(f))),u(e,["models"],s)}return e}function Xb(){return{}}function Qb(t){const e={},l=r(t,["totalTokens"]);return l!=null&&u(e,["totalTokens"],l),e}function Wb(t){const e={},l=r(t,["tokensInfo"]);return l!=null&&u(e,["tokensInfo"],l),e}function jb(t){const e={},l=r(t,["gcsUri"]);l!=null&&u(e,["uri"],l);const o=r(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],_n(o));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function eM(t){const e={},l=r(t,["_self"]);return l!=null&&u(e,["video"],jb(l)),e}function tM(t){const e={},l=r(t,["videos"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>eM(m))),u(e,["generatedVideos"],f)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function nM(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response"]);return m!=null&&u(e,["response"],tM(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iM="Content-Type",lM="X-Server-Timeout",oM="User-Agent",uc="x-goog-api-client",aM="1.8.0",sM=`google-genai-sdk/${aM}`,rM="v1beta1",uM="v1beta",tg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class cM{constructor(e){var l,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:rM,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:uM,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),l=new URL(e);return l.protocol=l.protocol=="http:"?"ws":"wss",l.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,l,o){const s=[this.getRequestUrlInternal(l)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let l=this.clientOptions.httpOptions;e.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,l,o);if(e.queryParams)for(const[m,h]of Object.entries(e.queryParams))s.searchParams.append(m,String(h));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,l,e.abortSignal),this.unaryApiCall(s,f,e.httpMethod)}patchHttpOptions(e,l){const o=JSON.parse(JSON.stringify(e));for(const[s,f]of Object.entries(l))typeof f=="object"?o[s]=Object.assign(Object.assign({},o[s]),f):f!==void 0&&(o[s]=f);return o}async requestStream(e){let l=this.clientOptions.httpOptions;e.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,l,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,l,e.abortSignal),this.streamApiCall(s,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,l,o){if(l&&l.timeout||o){const s=new AbortController,f=s.signal;l.timeout&&(l==null?void 0:l.timeout)>0&&setTimeout(()=>s.abort(),l.timeout),o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=f}return l&&l.extraBody!==null&&fM(e,l.extraBody),e.headers=await this.getHeadersInternal(l),e}async unaryApiCall(e,l,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},l),{method:o})).then(async s=>(await ng(s),new tc(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,l,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},l),{method:o})).then(async s=>(await ng(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var l;return fl(this,arguments,function*(){const s=(l=e==null?void 0:e.body)===null||l===void 0?void 0:l.getReader(),f=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let m="";for(;;){const{done:h,value:y}=yield Be(s.read());if(h){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=f.decode(y);try{const _=JSON.parse(p);if("error"in _){const C=JSON.parse(JSON.stringify(_.error)),b=C.status,N=C.code,k=`got status: ${b}. ${JSON.stringify(_)}`;if(N>=400&&N<600)throw new gs({message:k,status:N})}}catch(_){if(_.name==="ApiError")throw _}m+=p;let v=m.match(tg);for(;v;){const _=v[1];try{const C=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Be(new tc(C)),m=m.slice(v[0].length),v=m.match(tg)}catch(C){throw new Error(`exception parsing stream chunk ${_}. ${C}`)}}}}finally{s.releaseLock()}})}async apiCall(e,l){return fetch(e,l).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},l=sM+" "+this.clientOptions.userAgentExtra;return e[oM]=l,e[uc]=l,e[iM]="application/json",e}async getHeadersInternal(e){const l=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))l.append(o,s);e.timeout&&e.timeout>0&&l.append(lM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(l),l}async uploadFile(e,l){var o;const s={};l!=null&&(s.mimeType=l.mimeType,s.name=l.name,s.displayName=l.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const f=this.clientOptions.uploader,m=await f.stat(e);s.sizeBytes=String(m.size);const h=(o=l==null?void 0:l.mimeType)!==null&&o!==void 0?o:m.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=h;const y=await this.fetchUploadUrl(s,l);return f.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,l){var o;let s={};l!=null&&l.httpOptions?s=l.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},m=await this.request({path:oe("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:s});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(o=m==null?void 0:m.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function ng(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const l=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw l>=400&&l<600?new gs({message:s,status:l}):new Error(s)}}function fM(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let l={};if(typeof t.body=="string"&&t.body.length>0)try{const f=JSON.parse(t.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))l=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(f,m){const h=Object.assign({},f);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const p=m[y],v=h[y];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[y]=o(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[y]=p)}return h}const s=o(l,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dM="mcp_used/unknown";function cy(t){for(const e of t)if(_c(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function fy(t){var e;const l=(e=t[uc])!==null&&e!==void 0?e:"";t[uc]=(l+` ${dM}`).trimStart()}function mM(t){var e,l,o;return(o=(l=(e=t.config)===null||e===void 0?void 0:e.tools)===null||l===void 0?void 0:l.some(s=>_c(s)))!==null&&o!==void 0?o:!1}function pM(t){var e,l,o;return(o=(l=(e=t.config)===null||e===void 0?void 0:e.tools)===null||l===void 0?void 0:l.some(s=>!_c(s)))!==null&&o!==void 0?o:!1}function _c(t){return t!==null&&typeof t=="object"&&t instanceof Sc}function hM(t,e=100){return fl(this,arguments,function*(){let o,s=0;for(;s<e;){const f=yield Be(t.listTools({cursor:o}));for(const m of f.tools)yield yield Be(m),s++;if(!f.nextCursor)break;o=f.nextCursor}})}class Sc{constructor(e=[],l){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=l}static create(e,l){return new Sc(e,l)}async initialize(){var e,l,o,s;if(this.mcpTools.length>0)return;const f={},m=[];for(const v of this.mcpClients)try{for(var h=!0,y=(l=void 0,wo(hM(v))),p;p=await y.next(),e=p.done,!e;h=!0){s=p.value,h=!1;const _=s;m.push(_);const C=_.name;if(f[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);f[C]=v}}catch(_){l={error:_}}finally{try{!h&&!e&&(o=y.return)&&await o.call(y)}finally{if(l)throw l.error}}this.mcpTools=m,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),r_(this.mcpTools,this.config)}async callTool(e){await this.initialize();const l=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const m=await s.callTool({name:o.name,arguments:o.args},void 0,f);l.push({functionResponse:{name:o.name,response:m.isError?{error:m}:m}})}return l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gM(t,e,l){const o=new QT;let s;l.data instanceof Blob?s=JSON.parse(await l.data.text()):s=JSON.parse(l.data);const f=E0(s);Object.assign(o,f),e(o)}class yM{constructor(e,l,o){this.apiClient=e,this.auth=l,this.webSocketFactory=o}async connect(e){var l,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m=TM(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${s}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(H=>{p=H}),_=e.callbacks,C=function(){p({})},b=this.apiClient,N={onopen:C,onmessage:H=>{gM(b,_.onmessage,H)},onerror:(l=_==null?void 0:_.onerror)!==null&&l!==void 0?l:function(H){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(H){}},k=this.webSocketFactory.create(y,xM(m),N);k.connect(),await v;const L=ke(this.apiClient,e.model),F=ly({model:L}),Y=ac({setup:F});return k.send(JSON.stringify(Y)),new vM(k,this.apiClient)}}class vM{constructor(e,l){this.conn=e,this.apiClient=l}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const l=qE(e),o=oy(l);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const l=GE(e),o=ac(l);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const l=ac({playbackControl:e});this.conn.send(JSON.stringify(l))}play(){this.sendPlaybackControl(ul.PLAY)}pause(){this.sendPlaybackControl(ul.PAUSE)}stop(){this.sendPlaybackControl(ul.STOP)}resetContext(){this.sendPlaybackControl(ul.RESET_CONTEXT)}close(){this.conn.close()}}function xM(t){const e={};return t.forEach((l,o)=>{e[o]=l}),e}function TM(t){const e=new Headers;for(const[l,o]of Object.entries(t))e.append(l,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _M="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function SM(t,e,l){const o=new XT;let s;l.data instanceof Blob?s=await l.data.text():l.data instanceof ArrayBuffer?s=new TextDecoder().decode(l.data):s=l.data;const f=JSON.parse(s);if(t.isVertexAI()){const m=h0(f);Object.assign(o,m)}else{const m=p0(f);Object.assign(o,m)}e(o)}class CM{constructor(e,l,o){this.apiClient=e,this.auth=l,this.webSocketFactory=o,this.music=new yM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var l,o,s,f,m,h;const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&cy(e.config.tools)&&fy(_);const C=MM(_);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C);else{const K=this.apiClient.getApiKey();let pe="BidiGenerateContent",ce="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),pe="BidiGenerateContentConstrained",ce="access_token"),v=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${pe}?${ce}=${K}`}let b=()=>{};const N=new Promise(K=>{b=K}),k=e.callbacks,L=function(){var K;(K=k==null?void 0:k.onopen)===null||K===void 0||K.call(k),b({})},F=this.apiClient,Y={onopen:L,onmessage:K=>{SM(F,k.onmessage,K)},onerror:(l=k==null?void 0:k.onerror)!==null&&l!==void 0?l:function(K){},onclose:(o=k==null?void 0:k.onclose)!==null&&o!==void 0?o:function(K){}},H=this.webSocketFactory.create(v,bM(C),Y);H.connect(),await N;let Q=ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const K=this.apiClient.getProject(),pe=this.apiClient.getLocation();Q=`projects/${K}/locations/${pe}/`+Q}let B={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ds.AUDIO]}:e.config.responseModalities=[ds.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(h=(m=e.config)===null||m===void 0?void 0:m.tools)!==null&&h!==void 0?h:[],W=[];for(const K of j)if(this.isCallableTool(K)){const pe=K;W.push(await pe.tool())}else W.push(K);W.length>0&&(e.config.tools=W);const Se={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=DE(this.apiClient,Se):B=wE(this.apiClient,Se),delete B.config,H.send(JSON.stringify(B)),new AM(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const EM={turnComplete:!0};class AM{constructor(e,l){this.conn=e,this.apiClient=l}tLiveClientContent(e,l){if(l.turns!==null&&l.turns!==void 0){let o=[];try{o=Ot(l.turns),e.isVertexAI()?o=o.map(s=>Al(s)):o=o.map(s=>ys(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof l.turns}'`)}return{clientContent:{turns:o,turnComplete:l.turnComplete}}}return{clientContent:{turnComplete:l.turnComplete}}}tLiveClienttToolResponse(e,l){let o=[];if(l.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(l.functionResponses)?o=l.functionResponses:o=[l.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const f of o){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(_M)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},EM),e);const l=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(l))}sendRealtimeInput(e){let l={};this.apiClient.isVertexAI()?l={realtimeInput:PE(e)}:l={realtimeInput:VE(e)},this.conn.send(JSON.stringify(l))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const l=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(l))}close(){this.conn.close()}}function bM(t){const e={};return t.forEach((l,o)=>{e[o]=l}),e}function MM(t){const e=new Headers;for(const[l,o]of Object.entries(t))e.append(l,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig=10;function lg(t){var e,l,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const m of(l=t==null?void 0:t.tools)!==null&&l!==void 0?l:[])if(ns(m)){s=!0;break}if(!s)return!0;const f=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function ns(t){return"callTool"in t&&typeof t.callTool=="function"}function og(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NM extends xi{constructor(e){super(),this.apiClient=e,this.generateContent=async l=>{var o,s,f,m,h;const y=await this.processParamsForMcpUsage(l);if(!mM(l)||lg(l.config))return await this.generateContentInternal(y);if(pM(l))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const _=Ot(y.contents),C=(f=(s=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&f!==void 0?f:ig;let b=0;for(;b<C&&(p=await this.generateContentInternal(y),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,k=[];for(const L of(h=(m=l.config)===null||m===void 0?void 0:m.tools)!==null&&h!==void 0?h:[])if(ns(L)){const Y=await L.callTool(p.functionCalls);k.push(...Y)}b++,v={role:"user",parts:k},y.contents=Ot(y.contents),y.contents.push(N),y.contents.push(v),og(y.config)&&(_.push(N),_.push(v))}return og(y.config)&&(p.automaticFunctionCallingHistory=_),p},this.generateContentStream=async l=>{if(lg(l.config)){const o=await this.processParamsForMcpUsage(l);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(l)},this.generateImages=async l=>await this.generateImagesInternal(l).then(o=>{var s;let f;const m=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((s=y==null?void 0:y.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?f=y==null?void 0:y.safetyAttributes:m.push(y);let h;return f?h={generatedImages:m,positivePromptSafetyAttributes:f}:h={generatedImages:m},h}),this.list=async l=>{var o;const m={config:Object.assign(Object.assign({},{queryBase:!0}),l==null?void 0:l.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((o=m.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Uo(vi.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(m),m)},this.editImage=async l=>{const o={model:l.model,prompt:l.prompt,referenceImages:[],config:l.config};return l.referenceImages&&l.referenceImages&&(o.referenceImages=l.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async l=>{let o={numberOfImages:1,mode:"upscale"};l.config&&(o=Object.assign(Object.assign({},o),l.config));const s={model:l.model,image:l.image,upscaleFactor:l.upscaleFactor,config:o};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var l,o,s;const f=(l=e.config)===null||l===void 0?void 0:l.tools;if(!f)return e;const m=await Promise.all(f.map(async y=>ns(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:m})};if(h.config.tools=m,e.config&&e.config.tools&&cy(e.config.tools)){const y=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),fy(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var l,o,s;const f=new Map;for(const m of(o=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&o!==void 0?o:[])if(ns(m)){const h=m,y=await h.tool();for(const p of(s=y.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(f.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);f.set(p.name,h)}}return f}async processAfcStream(e){var l,o,s;const f=(s=(o=(l=e.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:ig;let m=!1,h=0;const y=await this.initAfcToolsMap(e);return function(p,v,_){var C,b;return fl(this,arguments,function*(){for(var N,k,L,F;h<f;){m&&(h++,m=!1);const B=yield Be(p.processParamsForMcpUsage(_)),j=yield Be(p.generateContentStreamInternal(B)),W=[],Se=[];try{for(var Y=!0,H=(k=void 0,wo(j)),Q;Q=yield Be(H.next()),N=Q.done,!N;Y=!0){F=Q.value,Y=!1;const K=F;if(yield yield Be(K),K.candidates&&(!((C=K.candidates[0])===null||C===void 0)&&C.content)){Se.push(K.candidates[0].content);for(const pe of(b=K.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(h<f&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(pe.functionCall.name)){const ce=yield Be(v.get(pe.functionCall.name).callTool([pe.functionCall]));W.push(...ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(K){k={error:K}}finally{try{!Y&&!N&&(L=H.return)&&(yield Be(L.call(H)))}finally{if(k)throw k.error}}if(W.length>0){m=!0;const K=new bo;K.candidates=[{content:{role:"user",parts:W}}],yield yield Be(K);const pe=[];pe.push(...Se),pe.push({role:"user",parts:W});const ce=Ot(_.contents).concat(pe);_.contents=ce}else break}})}(this,y,e)}async generateContentInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=Wh(this.apiClient,e);return h=oe("{model}:generateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=eg(v),C=new bo;return Object.assign(C,_),C})}else{const p=Qh(this.apiClient,e);return h=oe("{model}:generateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=jh(v),C=new bo;return Object.assign(C,_),C})}}async generateContentStreamInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=Wh(this.apiClient,e);return h=oe("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),m.then(function(_){return fl(this,arguments,function*(){var C,b,N,k;try{for(var L=!0,F=wo(_),Y;Y=yield Be(F.next()),C=Y.done,!C;L=!0){k=Y.value,L=!1;const Q=eg(yield Be(k.json())),B=new bo;Object.assign(B,Q),yield yield Be(B)}}catch(H){b={error:H}}finally{try{!L&&!C&&(N=F.return)&&(yield Be(N.call(F)))}finally{if(b)throw b.error}}})})}else{const p=Qh(this.apiClient,e);return h=oe("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),m.then(function(_){return fl(this,arguments,function*(){var C,b,N,k;try{for(var L=!0,F=wo(_),Y;Y=yield Be(F.next()),C=Y.done,!C;L=!0){k=Y.value,L=!1;const Q=jh(yield Be(k.json())),B=new bo;Object.assign(B,Q),yield yield Be(B)}}catch(H){b={error:H}}finally{try{!L&&!C&&(N=F.return)&&(yield Be(N.call(F)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=VA(this.apiClient,e);return h=oe("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=Bb(v),C=new wh;return Object.assign(C,_),C})}else{const p=$0(this.apiClient,e);return h=oe("{model}:batchEmbedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=yb(v),C=new wh;return Object.assign(C,_),C})}}async generateImagesInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=qA(this.apiClient,e);return h=oe("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=Hb(v),C=new Dh;return Object.assign(C,_),C})}else{const p=Q0(this.apiClient,e);return h=oe("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=Tb(v),C=new Dh;return Object.assign(C,_),C})}}async editImageInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI()){const h=YA(this.apiClient,e);return f=oe("{model}:predict",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>{const p=Fb(y),v=new FT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI()){const h=ZA(this.apiClient,e);return f=oe("{model}:predict",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>{const p=Yb(y),v=new YT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=KA(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>rc(v))}else{const p=W0(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>sc(v))}}async listInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=XA(this.apiClient,e);return h=oe("{models_url}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=$b(v),C=new Ih;return Object.assign(C,_),C})}else{const p=eA(this.apiClient,e);return h=oe("{models_url}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=Sb(v),C=new Ih;return Object.assign(C,_),C})}}async update(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=WA(this.apiClient,e);return h=oe("{model}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>rc(v))}else{const p=nA(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>sc(v))}}async delete(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=jA(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(()=>{const v=Xb(),_=new Uh;return Object.assign(_,v),_})}else{const p=iA(this.apiClient,e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(()=>{const v=Cb(),_=new Uh;return Object.assign(_,v),_})}}async countTokens(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=tb(this.apiClient,e);return h=oe("{model}:countTokens",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=Qb(v),C=new kh;return Object.assign(C,_),C})}else{const p=oA(this.apiClient,e);return h=oe("{model}:countTokens",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=Eb(v),C=new kh;return Object.assign(C,_),C})}}async computeTokens(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI()){const h=nb(this.apiClient,e);return f=oe("{model}:computeTokens",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>{const p=Wb(y),v=new JT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=ob(this.apiClient,e);return h=oe("{model}:predictLongRunning",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>nM(v))}else{const p=rA(this.apiClient,e);return h=oe("{model}:predictLongRunning",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Nb(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RM(t){const e={},l=r(t,["operationName"]);l!=null&&u(e,["_url","operationName"],l);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function wM(t){const e={},l=r(t,["operationName"]);l!=null&&u(e,["_url","operationName"],l);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function DM(t){const e={},l=r(t,["operationName"]);l!=null&&u(e,["operationName"],l);const o=r(t,["resourceName"]);o!=null&&u(e,["_url","resourceName"],o);const s=r(t,["config"]);return s!=null&&u(e,["config"],s),e}function IM(t){const e={},l=r(t,["video","uri"]);l!=null&&u(e,["uri"],l);const o=r(t,["video","encodedVideo"]);o!=null&&u(e,["videoBytes"],_n(o));const s=r(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function UM(t){const e={},l=r(t,["_self"]);return l!=null&&u(e,["video"],IM(l)),e}function kM(t){const e={},l=r(t,["generatedSamples"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>UM(m))),u(e,["generatedVideos"],f)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function LM(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response","generateVideoResponse"]);return m!=null&&u(e,["response"],kM(m)),e}function VM(t){const e={},l=r(t,["gcsUri"]);l!=null&&u(e,["uri"],l);const o=r(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],_n(o));const s=r(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function PM(t){const e={},l=r(t,["_self"]);return l!=null&&u(e,["video"],VM(l)),e}function qM(t){const e={},l=r(t,["videos"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>PM(m))),u(e,["generatedVideos"],f)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function ag(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response"]);return m!=null&&u(e,["response"],qM(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GM extends xi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const l=e.operation,o=e.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=l.name.split("/operations/")[0];let f;return o&&"httpOptions"in o&&(f=o.httpOptions),this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:s,config:{httpOptions:f}})}else return this.getVideosOperationInternal({operationName:l.name,config:o})}async getVideosOperationInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=wM(e);return h=oe("{operationName}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>ag(v))}else{const p=RM(e);return h=oe("{operationName}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>LM(v))}}async fetchPredictVideosOperationInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI()){const h=DM(e);return f=oe("{resourceName}:fetchPredictOperation",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>ag(y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OM(t){const e={},l=r(t,["voiceName"]);return l!=null&&u(e,["voiceName"],l),e}function dy(t){const e={},l=r(t,["prebuiltVoiceConfig"]);return l!=null&&u(e,["prebuiltVoiceConfig"],OM(l)),e}function BM(t){const e={},l=r(t,["speaker"]);l!=null&&u(e,["speaker"],l);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],dy(o)),e}function zM(t){const e={},l=r(t,["speakerVoiceConfigs"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>BM(s))),u(e,["speakerVoiceConfigs"],o)}return e}function HM(t){const e={},l=r(t,["voiceConfig"]);l!=null&&u(e,["voiceConfig"],dy(l));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],zM(o));const s=r(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function FM(t){const e={},l=r(t,["fps"]);l!=null&&u(e,["fps"],l);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const s=r(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function YM(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["data"]);l!=null&&u(e,["data"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function JM(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=r(t,["fileUri"]);l!=null&&u(e,["fileUri"],l);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ZM(t){const e={},l=r(t,["videoMetadata"]);l!=null&&u(e,["videoMetadata"],FM(l));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const s=r(t,["inlineData"]);s!=null&&u(e,["inlineData"],YM(s));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],JM(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const h=r(t,["codeExecutionResult"]);h!=null&&u(e,["codeExecutionResult"],h);const y=r(t,["executableCode"]);y!=null&&u(e,["executableCode"],y);const p=r(t,["functionCall"]);p!=null&&u(e,["functionCall"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const _=r(t,["text"]);return _!=null&&u(e,["text"],_),e}function KM(t){const e={},l=r(t,["parts"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(f=>ZM(f))),u(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function $M(t){const e={},l=r(t,["behavior"]);l!=null&&u(e,["behavior"],l);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const s=r(t,["name"]);s!=null&&u(e,["name"],s);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const y=r(t,["responseJsonSchema"]);return y!=null&&u(e,["responseJsonSchema"],y),e}function XM(t){const e={},l=r(t,["startTime"]);l!=null&&u(e,["startTime"],l);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function QM(t){const e={},l=r(t,["timeRangeFilter"]);return l!=null&&u(e,["timeRangeFilter"],XM(l)),e}function WM(t){const e={},l=r(t,["mode"]);l!=null&&u(e,["mode"],l);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function jM(t){const e={},l=r(t,["dynamicRetrievalConfig"]);return l!=null&&u(e,["dynamicRetrievalConfig"],WM(l)),e}function eN(){return{}}function tN(t){const e={},l=r(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(p=>$M(p))),u(e,["functionDeclarations"],y)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],QM(o));const s=r(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],jM(s)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],eN());const m=r(t,["codeExecution"]);m!=null&&u(e,["codeExecution"],m);const h=r(t,["computerUse"]);return h!=null&&u(e,["computerUse"],h),e}function nN(t){const e={},l=r(t,["handle"]);if(l!=null&&u(e,["handle"],l),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sg(){return{}}function iN(t){const e={},l=r(t,["disabled"]);l!=null&&u(e,["disabled"],l);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const s=r(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function lN(t){const e={},l=r(t,["automaticActivityDetection"]);l!=null&&u(e,["automaticActivityDetection"],iN(l));const o=r(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const s=r(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function oN(t){const e={},l=r(t,["targetTokens"]);return l!=null&&u(e,["targetTokens"],l),e}function aN(t){const e={},l=r(t,["triggerTokens"]);l!=null&&u(e,["triggerTokens"],l);const o=r(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],oN(o)),e}function sN(t){const e={},l=r(t,["proactiveAudio"]);return l!=null&&u(e,["proactiveAudio"],l),e}function rN(t,e){const l={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const h=r(t,["topK"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","topK"],h);const y=r(t,["maxOutputTokens"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","maxOutputTokens"],y);const p=r(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const _=r(t,["speechConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","speechConfig"],HM(xc(_)));const C=r(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=r(t,["systemInstruction"]);e!==void 0&&b!=null&&u(e,["setup","systemInstruction"],KM(dt(b)));const N=r(t,["tools"]);if(e!==void 0&&N!=null){let B=Cl(N);Array.isArray(B)&&(B=B.map(j=>tN(Sl(j)))),u(e,["setup","tools"],B)}const k=r(t,["sessionResumption"]);e!==void 0&&k!=null&&u(e,["setup","sessionResumption"],nN(k));const L=r(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],sg());const F=r(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","outputAudioTranscription"],sg());const Y=r(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&u(e,["setup","realtimeInputConfig"],lN(Y));const H=r(t,["contextWindowCompression"]);e!==void 0&&H!=null&&u(e,["setup","contextWindowCompression"],aN(H));const Q=r(t,["proactivity"]);return e!==void 0&&Q!=null&&u(e,["setup","proactivity"],sN(Q)),l}function uN(t,e){const l={},o=r(e,["model"]);o!=null&&u(l,["setup","model"],ke(t,o));const s=r(e,["config"]);return s!=null&&u(l,["config"],rN(s,l)),l}function cN(t,e,l){const o={},s=r(e,["expireTime"]);l!==void 0&&s!=null&&u(l,["expireTime"],s);const f=r(e,["newSessionExpireTime"]);l!==void 0&&f!=null&&u(l,["newSessionExpireTime"],f);const m=r(e,["uses"]);l!==void 0&&m!=null&&u(l,["uses"],m);const h=r(e,["liveConnectConstraints"]);l!==void 0&&h!=null&&u(l,["bidiGenerateContentSetup"],uN(t,h));const y=r(e,["lockAdditionalFields"]);return l!==void 0&&y!=null&&u(l,["fieldMask"],y),o}function fN(t,e){const l={},o=r(e,["config"]);return o!=null&&u(l,["config"],cN(t,o,l)),l}function dN(t){const e={},l=r(t,["name"]);return l!=null&&u(e,["name"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(t){const e=[];for(const l in t)if(Object.prototype.hasOwnProperty.call(t,l)){const o=t[l];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(f=>`${l}.${f}`);e.push(...s)}else e.push(l)}return e.join(",")}function pN(t,e){let l=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const f=o.setup;typeof f=="object"&&f!==null?(t.bidiGenerateContentSetup=f,l=f):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(l){const f=mN(l);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?t.fieldMask=f:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];s.length>0&&(h=s.map(p=>m.includes(p)?`generationConfig.${p}`:p));const y=[];f&&y.push(f),h.length>0&&y.push(...h),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class hN extends xi{constructor(e){super(),this.apiClient=e}async create(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=fN(this.apiClient,e);f=oe("auth_tokens",h._url),m=h._query,delete h.config,delete h._url,delete h._query;const y=pN(h,e.config);return s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>dN(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gN(t){const e={},l=r(t,["name"]);l!=null&&u(e,["_url","name"],l);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function yN(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),l}function vN(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],yN(l,e)),e}function xN(t){const e={},l=r(t,["textInput"]);l!=null&&u(e,["textInput"],l);const o=r(t,["output"]);return o!=null&&u(e,["output"],o),e}function TN(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const l=r(t,["examples"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(s=>xN(s))),u(e,["examples","examples"],o)}return e}function _N(t,e){const l={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=r(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=r(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","epochCount"],s);const f=r(t,["learningRateMultiplier"]);if(f!=null&&u(l,["tuningTask","hyperparameters","learningRateMultiplier"],f),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=r(t,["batchSize"]);e!==void 0&&m!=null&&u(e,["tuningTask","hyperparameters","batchSize"],m);const h=r(t,["learningRate"]);return e!==void 0&&h!=null&&u(e,["tuningTask","hyperparameters","learningRate"],h),l}function SN(t){const e={},l=r(t,["baseModel"]);l!=null&&u(e,["baseModel"],l);const o=r(t,["trainingDataset"]);o!=null&&u(e,["tuningTask","trainingData"],TN(o));const s=r(t,["config"]);return s!=null&&u(e,["config"],_N(s,e)),e}function CN(t){const e={},l=r(t,["name"]);l!=null&&u(e,["_url","name"],l);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function EN(t,e){const l={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),l}function AN(t){const e={},l=r(t,["config"]);return l!=null&&u(e,["config"],EN(l,e)),e}function bN(t,e){const l={},o=r(t,["gcsUri"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],o);const s=r(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return l}function MN(t,e){const l={},o=r(t,["gcsUri"]);o!=null&&u(l,["validationDatasetUri"],o);const s=r(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s),l}function NN(t,e){const l={},o=r(t,["validationDataset"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec"],MN(o,l));const s=r(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&u(e,["tunedModelDisplayName"],s);const f=r(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);const m=r(t,["epochCount"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const h=r(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const y=r(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const p=r(t,["adapterSize"]);if(e!==void 0&&p!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return l}function RN(t){const e={},l=r(t,["baseModel"]);l!=null&&u(e,["baseModel"],l);const o=r(t,["trainingDataset"]);o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],bN(o,e));const s=r(t,["config"]);return s!=null&&u(e,["config"],NN(s,e)),e}function wN(t){const e={},l=r(t,["name"]);l!=null&&u(e,["model"],l);const o=r(t,["name"]);return o!=null&&u(e,["endpoint"],o),e}function my(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["state"]);o!=null&&u(e,["state"],Fg(o));const s=r(t,["createTime"]);s!=null&&u(e,["createTime"],s);const f=r(t,["tuningTask","startTime"]);f!=null&&u(e,["startTime"],f);const m=r(t,["tuningTask","completeTime"]);m!=null&&u(e,["endTime"],m);const h=r(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const y=r(t,["description"]);y!=null&&u(e,["description"],y);const p=r(t,["baseModel"]);p!=null&&u(e,["baseModel"],p);const v=r(t,["_self"]);v!=null&&u(e,["tunedModel"],wN(v));const _=r(t,["distillationSpec"]);_!=null&&u(e,["distillationSpec"],_);const C=r(t,["experiment"]);C!=null&&u(e,["experiment"],C);const b=r(t,["labels"]);b!=null&&u(e,["labels"],b);const N=r(t,["pipelineJob"]);N!=null&&u(e,["pipelineJob"],N);const k=r(t,["satisfiesPzi"]);k!=null&&u(e,["satisfiesPzi"],k);const L=r(t,["satisfiesPzs"]);L!=null&&u(e,["satisfiesPzs"],L);const F=r(t,["serviceAccount"]);F!=null&&u(e,["serviceAccount"],F);const Y=r(t,["tunedModelDisplayName"]);return Y!=null&&u(e,["tunedModelDisplayName"],Y),e}function DN(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>my(f))),u(e,["tuningJobs"],s)}return e}function IN(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const s=r(t,["done"]);s!=null&&u(e,["done"],s);const f=r(t,["error"]);return f!=null&&u(e,["error"],f),e}function UN(t){const e={},l=r(t,["checkpointId"]);l!=null&&u(e,["checkpointId"],l);const o=r(t,["epoch"]);o!=null&&u(e,["epoch"],o);const s=r(t,["step"]);s!=null&&u(e,["step"],s);const f=r(t,["endpoint"]);return f!=null&&u(e,["endpoint"],f),e}function kN(t){const e={},l=r(t,["model"]);l!=null&&u(e,["model"],l);const o=r(t,["endpoint"]);o!=null&&u(e,["endpoint"],o);const s=r(t,["checkpoints"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>UN(m))),u(e,["checkpoints"],f)}return e}function cc(t){const e={},l=r(t,["name"]);l!=null&&u(e,["name"],l);const o=r(t,["state"]);o!=null&&u(e,["state"],Fg(o));const s=r(t,["createTime"]);s!=null&&u(e,["createTime"],s);const f=r(t,["startTime"]);f!=null&&u(e,["startTime"],f);const m=r(t,["endTime"]);m!=null&&u(e,["endTime"],m);const h=r(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const y=r(t,["error"]);y!=null&&u(e,["error"],y);const p=r(t,["description"]);p!=null&&u(e,["description"],p);const v=r(t,["baseModel"]);v!=null&&u(e,["baseModel"],v);const _=r(t,["tunedModel"]);_!=null&&u(e,["tunedModel"],kN(_));const C=r(t,["supervisedTuningSpec"]);C!=null&&u(e,["supervisedTuningSpec"],C);const b=r(t,["tuningDataStats"]);b!=null&&u(e,["tuningDataStats"],b);const N=r(t,["encryptionSpec"]);N!=null&&u(e,["encryptionSpec"],N);const k=r(t,["partnerModelTuningSpec"]);k!=null&&u(e,["partnerModelTuningSpec"],k);const L=r(t,["distillationSpec"]);L!=null&&u(e,["distillationSpec"],L);const F=r(t,["experiment"]);F!=null&&u(e,["experiment"],F);const Y=r(t,["labels"]);Y!=null&&u(e,["labels"],Y);const H=r(t,["pipelineJob"]);H!=null&&u(e,["pipelineJob"],H);const Q=r(t,["satisfiesPzi"]);Q!=null&&u(e,["satisfiesPzi"],Q);const B=r(t,["satisfiesPzs"]);B!=null&&u(e,["satisfiesPzs"],B);const j=r(t,["serviceAccount"]);j!=null&&u(e,["serviceAccount"],j);const W=r(t,["tunedModelDisplayName"]);return W!=null&&u(e,["tunedModelDisplayName"],W),e}function LN(t){const e={},l=r(t,["nextPageToken"]);l!=null&&u(e,["nextPageToken"],l);const o=r(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>cc(f))),u(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VN extends xi{constructor(e){super(),this.apiClient=e,this.get=async l=>await this.getInternal(l),this.list=async(l={})=>new Uo(vi.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(l),l),this.tune=async l=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(l);{const o=await this.tuneMldevInternal(l);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:ec.JOB_STATE_QUEUED}}}}async getInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=CN(e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>cc(v))}else{const p=gN(e);return h=oe("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>my(v))}}async listInternal(e){var l,o,s,f;let m,h="",y={};if(this.apiClient.isVertexAI()){const p=AN(e);return h=oe("tuningJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const _=LN(v),C=new Lh;return Object.assign(C,_),C})}else{const p=vN(e);return h=oe("tunedModels",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const _=DN(v),C=new Lh;return Object.assign(C,_),C})}}async tuneInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI()){const h=RN(e);return f=oe("tuningJobs",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>cc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var l,o;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SN(e);return f=oe("tunedModels",h._url),m=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),s.then(y=>IN(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PN{async download(e,l){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qN=1024*1024*8,GN=3,ON=1e3,BN=2,Bu="x-goog-upload-status";async function zN(t,e,l){var o,s,f;let m=0,h=0,y=new tc(new Response),p="upload";for(m=t.size;h<m;){const _=Math.min(qN,m-h),C=t.slice(h,h+_);h+_>=m&&(p+=", finalize");let b=0,N=ON;for(;b<GN&&(y=await l.request({path:"",body:C,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(_)}}}),!(!((o=y==null?void 0:y.headers)===null||o===void 0)&&o[Bu]));)b++,await FN(N),N=N*BN;if(h+=_,((s=y==null?void 0:y.headers)===null||s===void 0?void 0:s[Bu])!=="active")break;if(m<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((f=y==null?void 0:y.headers)===null||f===void 0?void 0:f[Bu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function HN(t){return{size:t.size,type:t.type}}function FN(t){return new Promise(e=>setTimeout(e,t))}class YN{async upload(e,l,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zN(e,l,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JN{create(e,l,o){return new ZN(e,l,o)}}class ZN{constructor(e,l,o){this.url=e,this.headers=l,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rg="x-goog-api-key";class KN{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(rg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(rg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $N="gl-node/";class XN{constructor(e){var l;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(l=e.vertexai)!==null&&l!==void 0?l:!1,this.apiKey=e.apiKey;const o=HT(e,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new KN(this.apiKey);this.apiClient=new cM({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:$N+"web",uploader:new YN,downloader:new PN}),this.models=new NM(this.apiClient),this.live=new CM(this.apiClient,s,new JN),this.batches=new yS(this.apiClient),this.chats=new _C(this.models,this.apiClient),this.caches=new vC(this.apiClient),this.files=new kC(this.apiClient),this.operations=new GM(this.apiClient),this.authTokens=new hN(this.apiClient),this.tunings=new VN(this.apiClient)}}const QN={low:"Identify only the most essential and defining grammar patterns of the sentence. Focus on major conjunctions, verb conjugations (tense/politeness), and sentence-ending particles. Avoid breaking down common compound words or very simple phrases.",medium:"Provide a balanced analysis. Identify all major grammar patterns, common set phrases, and important vocabulary usage. This is the standard level of detail suitable for most learners.",high:"Perform an exhaustive analysis. Identify every possible grammatical pattern, nuance, idiomatic expression, and compound word structure, no matter how small or common. Deconstruct everything for a very detailed view for advanced study."};function WN(t){return`You are an advanced linguistic analysis model, acting as a patient, insightful teacher of the Japanese language.
Your primary task is to take a single Japanese sentence and produce a detailed, structured analysis according to the specified JSON schema. Your explanations should be clear enough for a language learner.

Detailed Task Breakdown:
1.  **Sentence Analysis**: Deconstruct the input sentence into its smallest meaningful components (words, particles, etc.).
    For each component in the 'analysis' array:
    *   **Grammatical Category**: Assign a highly specific category. Use the format \`BASE_TYPE-FORM-TENSE-POLARITY\`.
        *   Examples: \`VERB_GODAN-TE-PAST-AFFIRMATIVE\`, \`ADJECTIVE_I-PLAIN-PRESENT-NEGATIVE\`, \`NOUN_COMMON\`.
        *   Available Categories: NOUN_COMMON, NOUN_PROPER, NOUN_PRONOUN, NOUN_COUNTER, VERB_ICHIDAN, VERB_GODAN, VERB_IRREGULAR, VERB_SURU, ADJECTIVE_I, ADJECTIVE_NA, ADVERB, PARTICLE, AUXILIARY_VERB, GRAMMATICAL_AUXILIARY, CONJUNCTION, INTERJECTION, SUFFIX, PREFIX, PUNCTUATION.
    *   **Reading**: Provide the reading in Hiragana or Katakana.
    *   **English Equivalent**: Provide a concise English meaning.
    *   **Pitch Accent**: THIS IS A CRITICAL, MANDATORY FIELD.
        *   Provide the standard Tokyo-dialect pitch accent as a string of 'H' (High) and 'L' (Low).
        *   **RULE: The length of the 'pitch_accent' string MUST EXACTLY match the character length of the 'reading' string.**
        *   Example: If 'reading' is 'ねこ' (2 chars), 'pitch_accent' MUST be 'LH' (2 chars).
        *   Example: If 'reading' is 'ともだち' (4 chars), 'pitch_accent' (heiban) MUST be 'LHHH' (4 chars).
        *   For particles or single-mora words with no accent drop, use the appropriate single letter ('H' or 'L').
        *   If pitch is truly not applicable (like punctuation), provide an empty string "". DO NOT OMIT THE FIELD. Avoid common pitfalls like providing a pattern shorter than the reading.

2.  **Full Translation**: Provide a natural, fluent English translation of the entire sentence.

3.  **Grammar & Phrase Explanations**: In the 'grammar_patterns' array, identify and explain all notable grammar points, set phrases, or nuanced vocabulary.
    *   **Analysis Thoroughness Level: ${t.toUpperCase()}**
    *   **Instruction: ${QN[t]}**
    *   For each pattern, provide its name, a clear explanation for a learner, and the 'constituent_indices' that form the pattern in the 'analysis' array. This section must be comprehensive according to the specified thoroughness level.

Input is a single Japanese sentence. You must respond ONLY with the JSON object defined in the schema. Do not add any conversational text or markdown fences.`}function jN(){return`You are a Japanese language teaching assistant.
Your task is to provide 2-3 simple, distinct, and pedagogically useful example sentences for the Japanese grammar pattern provided as the user input.

For each example sentence, you MUST provide:
1.  'japanese': The full sentence in Japanese, using Kanji where appropriate.
2.  'reading': The complete furigana reading of the sentence in Hiragana.
3.  'english': A natural and accurate English translation.
4.  'highlight_indices': A two-element array \`[startIndex, endIndex]\` indicating the exact location of the grammar pattern within the 'japanese' string. 'startIndex' is the zero-based index of the first character of the pattern, and 'endIndex' is the zero-based index of the character immediately AFTER the last character of the pattern.

Example for pattern "〜について":
If the user input is "〜について" and a sentence is "日本の文化について話します。", the pattern "について" starts at index 5 and ends at index 9. So, 'highlight_indices' would be [5, 9].

Respond ONLY with a JSON object that adheres to the provided schema. Do not add any extra text or markdown fences.`}function eR(){return`You are an expert web content extraction model. You will be given the full raw HTML of a webpage.
Your task is to perform the following actions:
1.  Identify the main article or content body of the HTML. Ignore navigation menus, sidebars, advertisements, footers, comment sections, and other boilerplate content.
2.  Extract the main title of the article from elements like \`<title>\` or \`<h1>\`.
3.  Extract the full text of the article.
4.  The extracted text MUST be in Japanese. If the main content is not in Japanese, you must treat it as if no content was found.
5.  Clean the extracted text by removing any remaining HTML tags and unnecessary whitespace, presenting it as clean paragraphs separated by single newline characters.

You must respond ONLY with a JSON object that adheres to the specified schema.
If no valid Japanese article text can be found on the page, the 'japanese_text' field in your JSON response must be an empty string. The 'title' can still be populated if found.
`}const tR={type:"OBJECT",properties:{original_japanese_sentence:{type:"STRING",description:"The original Japanese sentence provided by the user."},analysis:{type:"ARRAY",description:"An array of objects, each representing a segmented component of the Japanese sentence.",items:{type:"OBJECT",properties:{japanese_segment:{type:"STRING",description:"The individual Japanese segment (word, particle, etc.)."},reading:{type:"STRING",description:"The reading of the Japanese segment in Hiragana or Katakana."},category:{type:"STRING",description:"A highly specific grammatical category label for the segment (e.g., 'NOUN_COMMON', 'VERB_ICHIDAN-TE-PAST-AFFIRMATIVE')."},english_equivalent:{type:"STRING",description:"A direct, concise English equivalent of the segment."},pitch_accent:{type:"STRING",description:`CRITICAL: A string representing the pitch accent pattern using 'H' for high and 'L' for low. This string's length MUST exactly match the character length of the 'reading' field. For heiban words, use 'L' followed by all 'H's (e.g., reading 'ともだち' -> pitch 'LHHH'). For non-applicable segments like punctuation, this MUST be an empty string "". Do not omit this field.`}},required:["japanese_segment","reading","category","english_equivalent","pitch_accent"]}},grammar_patterns:{type:"ARRAY",description:"A comprehensive array of identified grammatical patterns, idiomatic phrases, or nuanced vocabulary in the sentence.",items:{type:"OBJECT",properties:{pattern_name:{type:"STRING",description:"The name of the grammatical pattern or the phrase being explained (e.g., '〜なければならない', 'よろしくお願いします')."},explanation:{type:"STRING",description:"A detailed explanation of the pattern's meaning, usage, and nuance for a language learner."},constituent_indices:{type:"ARRAY",description:"An array of zero-based indices from the 'analysis' array that form this pattern.",items:{type:"NUMBER"}}},required:["pattern_name","explanation","constituent_indices"]}},english_translation:{type:"STRING",description:"The complete, natural-sounding English translation of the entire Japanese sentence."}},required:["original_japanese_sentence","analysis","grammar_patterns","english_translation"]},nR={type:"ARRAY",description:"An array of 2-3 simple example sentences for the given grammar pattern.",items:{type:"OBJECT",properties:{japanese:{type:"STRING",description:"The full example sentence in Japanese, including Kanji."},reading:{type:"STRING",description:"The complete reading of the Japanese sentence in Hiragana."},english:{type:"STRING",description:"The natural English translation of the sentence."},highlight_indices:{type:"ARRAY",description:"A two-element array [startIndex, endIndex] indicating the character position of the grammar pattern within the 'japanese' string. startIndex is inclusive, endIndex is exclusive.",items:{type:"NUMBER"},minItems:2,maxItems:2}},required:["japanese","reading","english","highlight_indices"]}},iR={type:"OBJECT",properties:{title:{type:"STRING",description:"The extracted main title of the article. Should be an empty string if no title is found."},japanese_text:{type:"STRING",description:"The extracted and cleaned main Japanese text of the article, formatted with paragraphs separated by newlines. Should be an empty string if no Japanese article is found."}},required:["title","japanese_text"]},Cc=async()=>{const e=(await gc()).userApiKey||void 0;if(!e)throw new Error("API Key is not configured. Please set your key in the settings menu or ensure the default key is present.");return new XN({apiKey:e})},Ec=t=>{var s;const e=t.text;if(typeof e!="string"||e.trim()===""){const f=(s=t.candidates)==null?void 0:s[0];throw f&&f.finishReason!=="STOP"?new Error(`The AI model's response was incomplete. Reason: ${f.finishReason}.`):new Error("The AI model returned an empty response.")}const l=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,o=e.trim().match(l);return o?o[1].trim():e.trim()},py=t=>{const[e,l]=z.useState(!1),[o,s]=z.useState(null),[f,m]=z.useState(null),h=z.useCallback(async(...y)=>{l(!0),s(null),m(null);try{const p=await t(...y);return m(p),p}catch(p){s(p)}finally{l(!1)}},[t]);return{isLoading:e,error:o,data:f,execute:h}},lR=async(t,e,l=!1)=>{const o=await Cc(),s=t.trim().replace(/^[「『]/,"").replace(/[」』]$/,"").trim();if(!s)return{original_japanese_sentence:t,analysis:[{japanese_segment:t,reading:t,category:"PUNCTUATION",english_equivalent:"Punctuation/Quotes",pitch_accent:""}],grammar_patterns:[],english_translation:"(Sentence consists only of punctuation)"};const f=await o.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:s,config:{systemInstruction:WN(e),responseMimeType:"application/json",responseSchema:tR,temperature:.1,seed:42}}),m=Ec(f),h=JSON.parse(m),y=Array.isArray(h)?h[0]:h;return y.original_japanese_sentence=t,y},oR=async t=>{const l=await(await Cc()).models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:t,config:{systemInstruction:jN(),responseMimeType:"application/json",responseSchema:nR,temperature:.01,seed:42}}),o=Ec(l);return JSON.parse(o)},aR=async t=>{let e="";const l=[p=>`https://api.allorigins.win/raw?url=${encodeURIComponent(p)}`,p=>`https://corsproxy.io/?${p}`];let s=null;for(const p of l){const v=p(t),_=new AbortController,C=setTimeout(()=>_.abort(),15e3);try{const b=await fetch(v,{signal:_.signal});if(clearTimeout(C),!b.ok)throw b.status===408||b.status===504?new Error("Proxy timed out waiting for the target website."):b.status===404?new Error("The requested URL was not found (404). Please check the URL."):b.status===403?new Error("Access to this website is forbidden (403). It may be blocking access."):b.status>=500?new Error("The website's server encountered an error. Please try again later."):new Error(`Failed to fetch content (status: ${b.status}).`);const N=await b.text();if(!N||N.trim()==="")throw new Error("Retrieved empty content. The page might be protected or require JavaScript.");e=N,s=null;break}catch(b){clearTimeout(C);const N=new URL(v).hostname;console.warn(`Proxy ${N} failed. Trying next...`,b),s=b instanceof Error?b:new Error("An unknown fetch error occurred"),s.name==="AbortError"&&(s=new Error(`The request to ${N} timed out.`))}}if(!e)throw new Error(`Failed to fetch from all proxies. Last error: ${(s==null?void 0:s.message)||"Unknown issue."}`);const m=await(await Cc()).models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:e,config:{systemInstruction:eR(),responseMimeType:"application/json",responseSchema:iR,temperature:0,seed:42}}),h=Ec(m),y=JSON.parse(h);if(!y.japanese_text||y.japanese_text.trim()==="")throw new Error("No Japanese article content could be found at the provided URL.");return y},hy=()=>{const t=z.useCallback(lR,[]);return py(t)},sR=()=>{const t=z.useCallback(oR,[]);return py(t)},ug="unsaved-title",cg="unsaved-text";function fg(){const{state:t,dispatch:e}=wt(),{state:l}=Yt(),{showAlert:o}=_l(),[s,f]=z.useState(""),[m,h]=z.useState(""),[y,p]=z.useState(!1),[v,_]=z.useState(""),[C,b]=z.useState(!1),[N,k]=z.useState(null),[L,F]=z.useState("manual"),Y=!!l.userApiKey,H=t.editingEntryId?t.history.find(K=>K.id===t.editingEntryId):null;z.useEffect(()=>{(async()=>{if(H)f(H.title),h(H.text),F("manual");else{const pe=await Np(ug)||"",ce=await Np(cg)||"";f(pe),h(ce)}p(!0)})()},[H]),z.useEffect(()=>{y&&!H&&os(ug,s)},[s,H,y]),z.useEffect(()=>{y&&!H&&os(cg,m)},[m,H,y]);const Q=async()=>{if(k(null),!v){k("Please enter a URL.");return}try{new URL(v)}catch{k("Invalid URL format.");return}b(!0);try{const K=await aR(v);f(K.title),h(K.japanese_text),_(""),F("manual")}catch(K){k(K.message)}finally{b(!1)}},B=()=>{if(!Y){o("API Key is not configured. Please add your key in the settings menu.");return}const K=m.trim();if(!K)return;const pe=s.trim()||K.substring(0,40)+"...";if(H){const ce=H.analyzedSentences,se={};K.split(`
`).flatMap(Ee=>{var P;return((P=Ee.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:P.filter(X=>X==null?void 0:X.trim()))||[]}).forEach(Ee=>{ce[Ee]&&(se[Ee]=ce[Ee])});const Ge={...H,title:pe,text:K,updatedAt:Date.now(),analyzedSentences:se,readingProgress:0};e({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:Ge}),e({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:Ge.id}),e({type:"SET_VIEW",payload:ze.Reader})}else{const ce={id:Date.now().toString(),title:pe,text:K,createdAt:Date.now(),updatedAt:Date.now(),analyzedSentences:{},readingProgress:0};e({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:ce}),e({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:ce.id}),e({type:"SET_VIEW",payload:ze.Reader})}},j="px-4 py-3 text-sm font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background rounded-t-lg",W="border-b-2 border-primary text-primary",Se="text-text-muted hover:text-text-primary hover:bg-surface-hover";return x.jsx("div",{className:"h-screen md:h-auto input-area p-6 bg-gradient-to-b from-background/50 to-surface overflow-y-auto no-scrollbar flex flex-col",children:x.jsxs("div",{className:"space-y-6 flex-grow flex flex-col",children:[x.jsx("div",{className:"border-b border-border-subtle flex-shrink-0",children:x.jsxs("nav",{className:"-mb-px flex space-x-4","aria-label":"Tabs",children:[x.jsx("button",{onClick:()=>F("manual"),className:`${j} ${L==="manual"?W:Se}`,"aria-current":L==="manual"?"page":void 0,children:"Manual Input"}),x.jsx("button",{onClick:()=>F("url"),className:`${j} ${L==="url"?W:Se}`,"aria-current":L==="url"?"page":void 0,children:"Import from URL"})]})}),x.jsxs("div",{className:"flex-grow min-h-0 py-2",children:[L==="manual"&&x.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"text-title-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Title"}),x.jsx("input",{type:"text",id:"text-title-input",placeholder:"Enter a title for your text...",className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-lg font-medium px-4 py-3",value:s,onChange:K=>f(K.target.value)})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"sentence-input",className:"block text-sm font-medium text-text-secondary mb-2",children:"Japanese Text"}),x.jsx("textarea",{id:"sentence-input",placeholder:"Enter Japanese text here. e.g., 猫が大好きです。犬も好きです。",rows:8,className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-base px-4 py-3 font-japanese resize-y transition-all duration-200",value:m,onChange:K=>h(K.target.value)})]})]}),L==="url"&&x.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x.jsx("label",{htmlFor:"url-input",className:"block text-sm font-medium text-text-secondary",children:"Paste article URL"}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("input",{type:"url",id:"url-input",placeholder:"https://example.com/japanese-article",className:"w-full rounded-xl border-border-subtle bg-surface shadow-sm focus-ring text-base px-4 py-3",value:v,onChange:K=>_(K.target.value),onKeyDown:K=>K.key==="Enter"&&Q(),disabled:C}),x.jsx("button",{onClick:Q,disabled:C||!v.trim(),className:"px-4 py-3 rounded-xl bg-accent text-primary-text font-medium hover:bg-accent/90 transition-colors shadow-sm focus-ring disabled:opacity-60 disabled:cursor-not-allowed flex-shrink-0",title:"Fetch content from URL",children:C?x.jsx("i",{className:"bi bi-arrow-repeat text-xl animate-spin"}):x.jsx("i",{className:"bi bi-cloud-arrow-down text-xl"})})]}),N&&x.jsxs("p",{className:"text-sm text-destructive mt-1.5 px-2",children:[x.jsx("i",{className:"bi bi-exclamation-circle-fill mr-1 align-middle"}),N]})]})]}),x.jsxs("div",{className:"mt-auto flex-shrink-0 pt-4",children:[x.jsxs("button",{onClick:B,className:"w-full btn-primary text-lg flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!m.trim()||!Y,title:Y?"":"API Key not configured. Please add one in settings.",children:[x.jsx("i",{className:"bi bi-search"}),"Analyze Text"]}),!Y&&x.jsxs("p",{className:"text-center text-sm text-warning-text mt-3",children:[x.jsx("i",{className:"bi bi-exclamation-triangle-fill mr-1 align-middle"}),"Please set your API key in settings to enable analysis."]})]})]})})}const gy=(t,e)=>{const{state:l,dispatch:o}=wt(),{state:s}=Yt(),{execute:f,error:m,isLoading:h}=hy(),[y,p]=z.useState(null),v=z.useMemo(()=>t?l.history.find(N=>N.id===t):null,[t,l.history]),_=s.analysisDepth;z.useEffect(()=>{var L;let N=!1;if(!e){p(null);return}if((y==null?void 0:y.sentence)===e)return;const k=((L=v==null?void 0:v.analyzedSentences[e])==null?void 0:L[_])||null;if(k){p({sentence:e,analysis:k});return}return p(null),f(e,_).then(F=>{!N&&F&&p({sentence:e,analysis:F})}),()=>{N=!0}},[e,_,v,f,y==null?void 0:y.sentence]),z.useEffect(()=>{var N;y&&t&&((N=v==null?void 0:v.analyzedSentences[y.sentence])!=null&&N[_]||o({type:"CACHE_ANALYSIS",payload:{entryId:t,sentence:y.sentence,depth:_,analysis:y.analysis}}))},[y,t,_,v,o]);const C=z.useCallback(()=>{e&&(p(null),f(e,_,!0).then(N=>{N&&p({sentence:e,analysis:N})}))},[e,_,f]),b=(y==null?void 0:y.sentence)===e?y.analysis:null;return{analysis:b,isLoading:h||!!e&&!b&&!m,error:m,reanalyze:C}};let fc=null;function dg(t){fc=t}function rR(){if(!("speechSynthesis"in window)){document.body.classList.remove("tts-available");return}const t=()=>{const e=window.speechSynthesis.getVoices().filter(f=>f.lang==="ja-JP");if(e.length===0){dg(null),document.body.classList.remove("tts-available");return}const l=e.find(f=>f.name.includes("Google")),o=e.find(f=>!f.localService),s=l||o||e[0]||null;dg(s),document.body.classList.toggle("tts-available",!!s)};t(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=t)}function uR(t){if(!("speechSynthesis"in window)||!fc){console.warn("Speech synthesis not available or no Japanese voice found.");return}window.speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(t);e.voice=fc,e.lang="ja-JP",e.rate=.9,e.pitch=1,window.speechSynthesis.speak(e)}const cR=({text:t,title:e="Read aloud"})=>x.jsx("button",{className:"tts-button btn-ghost p-1 text-text-muted hover:text-text-primary",title:e,onClick:l=>{l.stopPropagation(),uR(t)},children:x.jsx("i",{className:"bi bi-volume-up text-base"})}),zu=xl.memo(function({text:e}){const l=z.useMemo(()=>e.split("").map((o,s)=>/[一-龯]/.test(o)?x.jsx("a",{href:`https://jisho.org/search/${encodeURIComponent(o)}%20%23kanji`,target:"_blank",rel:"noopener noreferrer",className:"underline decoration-text-muted/50 decoration-1 underline-offset-2 hover:text-accent hover:decoration-accent transition",onClick:f=>f.stopPropagation(),children:o},s):o),[e]);return x.jsx(x.Fragment,{children:l})}),Wa=t=>/[一-龯]/.test(t),Ti=xl.memo(function({base:e,reading:l,interactiveKanji:o=!1}){const{state:s}=Yt(),{showFurigana:f}=s,m=z.useMemo(()=>{if(!f||!l||e===l)return o?x.jsx(zu,{text:e}):e;const h=[];let y=0,p=0;for(;p<e.length;)if(Wa(e[p])){let v="",_=p;for(;_<e.length&&Wa(e[_]);)v+=e[_],_++;let C="",b=_;for(;b<e.length&&!Wa(e[b]);)C+=e[b],b++;let N="",k=C?l.indexOf(C,y):-1;if(C&&k===y){const F=l.indexOf(C,y+1);F!==-1&&(k=F)}if(k!==-1)N=l.substring(y,k);else{const F=e.substring(p),Y=l.substring(y),H=F.split("").filter(Q=>!Wa(Q)).length;N=Y.slice(0,Y.length-H)}const L=o?x.jsx(zu,{text:v}):v;h.push(x.jsxs("ruby",{children:[L,x.jsx("rt",{className:"text-xs text-text-muted select-none",children:N})]},p)),y+=N.length,p+=v.length}else h.push(e[p]),y<l.length&&e[p]===l[y]&&y++,p++;return h},[e,l,o,f]);return f?x.jsx(x.Fragment,{children:m}):o?x.jsx(zu,{text:e}):e}),yy=xl.memo(function({reading:e,pitchAccent:l}){const{state:o}=Yt();if(!o.showPitchAccent||!e||!l||e.length!==l.length)return null;const s=l.split("").map((f,m)=>({x:100/e.length*(m+.5),y:f==="H"?2:8}));return x.jsxs("svg",{className:"pitch-accent-svg absolute top-0 left-0 w-full h-[14px] overflow-visible pointer-events-none",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:[s.length>1&&x.jsx("polyline",{points:s.map(f=>`${f.x},${f.y}`).join(" "),className:"fill-none stroke-text-muted",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.map((f,m)=>x.jsx("circle",{cx:f.x,cy:f.y,r:"1.2",className:"fill-text-muted"},m))]})});function vy({itemId:t,itemType:e,itemContent:l}){const{state:o,dispatch:s}=wt(),{showAlert:f}=_l(),m=!!o.reviewDeck.find(y=>y.id===t),h=y=>{y.stopPropagation();const{currentTextEntryId:p}=o;if(!p){f("Cannot add an item to the deck without first saving the text.");return}const v=m?"REMOVE_REVIEW_ITEM":"ADD_OR_UPDATE_REVIEW_ITEM";if(v==="REMOVE_REVIEW_ITEM")s({type:v,payload:t});else{const _={id:t,type:e,content:l,textEntryId:p,srsStage:0,intervalModifier:1,incorrectAnswerCount:0,nextReviewDate:new Date().setHours(0,0,0,0),addedAt:Date.now()};s({type:v,payload:_})}};return m?x.jsxs("button",{onClick:h,className:"in-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent bg-accent-subtle-bg hover:bg-destructive-subtle-bg hover:text-destructive hover:border-destructive transition inline-flex items-center gap-2",title:"Remove from Review Deck",children:[x.jsx("i",{className:"bi bi-check-lg text-base"}),"In Deck"]}):x.jsxs("button",{onClick:h,className:"add-to-deck-button text-xs font-semibold px-2 py-1 rounded-md border border-primary-subtle-text text-primary-subtle-text hover:bg-primary-subtle-bg hover:text-primary-subtle-text/80 transition inline-flex items-center gap-2",title:"Add to Review Deck",children:[x.jsx("i",{className:"bi bi-plus-lg text-base"}),"Add to Deck"]})}function fR(t){const e=(t||"unknown").split(/[-_]/)[0].toLowerCase(),l={noun:"bg-pos-noun-bg text-pos-noun-text",verb:"bg-pos-verb-bg text-pos-verb-text",particle:"bg-pos-particle-bg text-pos-particle-text",adjective:"bg-pos-adjective-bg text-pos-adjective-text",adverb:"bg-pos-adverb-bg text-pos-adverb-text",auxiliary:"bg-pos-auxiliary-bg text-pos-auxiliary-text",grammatical:"bg-pos-auxiliary-bg text-pos-auxiliary-text",conjunction:"bg-pos-conjunction-bg text-pos-conjunction-text",suffix:"bg-pos-suffix-bg text-pos-suffix-text",punctuation:"bg-transparent",unknown:"bg-surface-soft"};return l[e]||l.unknown}function mg(t,e){const l=t*137.5%360;return e==="dark"?`hsl(${l}, 65%, 60%)`:`hsl(${l}, 70%, 45%)`}const dR=({segment:t})=>x.jsxs("div",{children:[x.jsx("div",{className:"text-lg font-japanese font-semibold mb-3 pb-2 border-b border-border-subtle",children:x.jsx(Ti,{base:t.japanese_segment,reading:t.reading||"",interactiveKanji:!0})}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Meaning:"})," ",t.english_equivalent]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",x.jsx("span",{className:"capitalize",children:t.category.replace(/_/g," ").toLowerCase()})]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",t.reading]})]}),x.jsx("div",{className:"mt-4 pt-3 border-t border-border-subtle",children:x.jsx(vy,{itemId:`word-${t.japanese_segment}-${t.reading}`,itemType:"word",itemContent:t})})]}),mR=({segment:t})=>{const{state:e}=Yt(),{state:l,dispatch:o}=xn(),{japanese_segment:s,reading:f,category:m,pitch_accent:h,patterns:y}=t,p=b=>{const N=b.currentTarget,k=x.jsx(dR,{segment:t});if(window.innerWidth<768)l.bottomSheet.visible&&l.bottomSheet.targetElement===N?o({type:"HIDE_BOTTOM_SHEET"}):o({type:"SHOW_BOTTOM_SHEET",payload:{content:{title:s,body:k},targetElement:N}});else{const L=N.getBoundingClientRect(),F={top:L.top-10,left:L.left+L.width/2};o({type:"PIN_TOOLTIP",payload:{content:k,position:F,targetElement:N}})}},v=z.useMemo(()=>{if(!y||y.length===0)return{};const b=3,N=2,k=b+N,L=y.map(B=>`linear-gradient(to right, ${B.color}, ${B.color})`).join(", "),F=y.map((B,j)=>`0 calc(100% - ${j*k}px)`).join(", "),Y=y.map(()=>`100% ${b}px`).join(", "),H=4,Q=y.length*k-N;return{backgroundImage:L,backgroundPosition:F,backgroundSize:Y,paddingBottom:`${H+Q}px`}},[y]),_=["segment","relative","inline-block","rounded-md","px-2","cursor-pointer","transition-transform","duration-200","hover:-translate-y-0.5","leading-loose",e.showColorCoding?fR(m):"bg-surface-soft",y&&y.length>0?"grammar-pattern":""].filter(Boolean).join(" "),C={paddingTop:e.showPitchAccent?"18px":"0.25rem",paddingBottom:"0.25rem",...v};return x.jsxs("span",{className:_,style:C,onClick:p,children:[x.jsx(yy,{reading:f,pitchAccent:h}),x.jsx("div",{children:x.jsx(Ti,{base:s,reading:f})})]})};function pR({pattern:t,onNoteClick:e,isFocused:l}){const{isLoading:o,error:s,data:f,execute:m}=sR(),[h,y]=z.useState(!1),p=b=>{b.stopPropagation(),f?y(!h):(m(t.pattern_name),y(!0))},v=`grammar-${t.pattern_name}`,_=(t.constituent_indices||[]).map(b=>{const N=t.fullAnalysis.analysis[b];return N?N.japanese_segment:null}).filter(Boolean).join(""),C={pattern_name:t.pattern_name,explanation:t.explanation,original_sentence:t.fullAnalysis.original_japanese_sentence,constituent_text:_};return x.jsxs("li",{className:`flex gap-4 p-4 rounded-lg bg-surface-subtle cursor-pointer transition-all duration-200 ${l?"is-focused ring-2 ring-focus-ring bg-surface-soft":""}`,"data-pattern-id":t.idClass,onClick:()=>e(t),children:[x.jsx("span",{className:"flex-shrink-0 w-1.5 rounded-full",style:{backgroundColor:t.color}}),x.jsxs("div",{className:"flex-grow",children:[x.jsx("strong",{className:"font-semibold text-accent",children:t.pattern_name}),x.jsx("p",{className:"text-sm text-text-muted mt-1",children:t.explanation}),x.jsxs("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[x.jsxs("button",{className:"show-examples-button text-xs font-semibold px-2 py-1 rounded-md border border-accent text-accent hover:bg-accent hover:text-primary-text transition inline-flex items-center gap-2 disabled:opacity-50",onClick:p,disabled:o,children:[o?x.jsx("i",{className:"bi bi-arrow-repeat text-base animate-spin"}):x.jsx("i",{className:"bi bi-card-list text-base"}),x.jsx("span",{className:"button-text",children:h&&f?"Hide":"Examples"})]}),x.jsx(vy,{itemId:v,itemType:"grammar",itemContent:C})]}),h&&x.jsxs("div",{className:"examples-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:[s&&x.jsx("p",{className:"text-xs text-destructive-subtle-text",children:s.message}),f&&x.jsx("dl",{className:"flex flex-col gap-4",children:f.map((b,N)=>x.jsxs(xl.Fragment,{children:[x.jsx("dt",{children:x.jsx("span",{className:"text-lg font-jp",children:x.jsx(Ti,{base:b.japanese,reading:b.reading})})}),x.jsx("dd",{className:"text-sm text-text-muted -mt-1",children:b.english})]},N))})]})]})]})}const hR=()=>x.jsxs("div",{className:"mt-6 p-4 border-t border-border-subtle text-center",children:[x.jsx("h4",{className:"text-xs font-bold uppercase text-text-muted tracking-wider mb-3",children:"Hotkeys"}),x.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-xs text-text-secondary",children:[x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"F"})," Furigana"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"C"})," Colors"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"T"})," Translate"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"S"})," Speak"]}),x.jsx("div",{className:"w-px h-4 bg-border mx-2 self-center"}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"J"}),"/",x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"K"})," Nav"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"E"})," Examples"]}),x.jsxs("span",{children:[x.jsx("kbd",{className:"font-sans font-semibold p-1 px-1.5 rounded bg-surface border border-border-subtle shadow-sm",children:"Esc"})," Deselect"]})]})]});function xy({analysis:t,onReanalyze:e}){const[l,o]=z.useState(null),[s,f]=z.useState(!1),{state:m}=Yt(),h=z.useMemo(()=>{if(!t.grammar_patterns)return t.analysis.map(v=>({...v,patterns:[]}));const p=new Map;return t.grammar_patterns.forEach((v,_)=>{var N;const C=mg(_,m.theme),b=`pattern-dynamic-${_}`;(N=v.constituent_indices)==null||N.forEach(k=>{p.has(k)||p.set(k,[]),p.get(k).push({...v,idClass:b,color:C})})}),t.analysis.map((v,_)=>({...v,patterns:p.get(_)||[]}))},[t,m.theme]),y=p=>{o(v=>(v==null?void 0:v.idClass)===p.idClass?null:p)};return x.jsxs("div",{className:"analysis-view-container animate-fade-in max-w-4xl mx-auto w-full",children:[x.jsxs("div",{id:"analysis-header",className:"relative sticky top-0 z-20 bg-surface-soft rounded-lg transition-colors duration-300 p-4 min-h-36",children:[x.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl max-h-[50vh] overflow-y-auto no-scrollbar pr-8",children:h.map((p,v)=>x.jsx("div",{className:`transition-opacity duration-300 ${l&&!p.patterns.some(_=>_.idClass===l.idClass)?"opacity-30":"opacity-100"}`,children:x.jsx(mR,{segment:p})},v))}),s&&x.jsx("div",{className:"translation-text-container mt-4 pt-4 border-t border-dashed border-border-subtle",children:x.jsx("p",{className:"text-text-primary text-base",children:t.english_translation})}),x.jsxs("div",{className:"absolute top-4 right-4 flex flex-col items-center gap-2",children:[x.jsx(cR,{text:t.original_japanese_sentence,title:"Read sentence (S)"}),x.jsx("button",{onClick:e,title:"Force re-analysis",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:x.jsx("i",{className:"bi bi-arrow-clockwise text-base"})}),x.jsx("button",{id:"toggle-translation-button",onClick:()=>f(p=>!p),title:"Toggle translation (T)",className:"btn-ghost p-1 text-text-muted hover:text-text-primary",children:x.jsx("i",{className:"bi bi-translate text-base"})})]})]}),x.jsx("div",{className:"p-4 space-y-4",children:t.grammar_patterns&&t.grammar_patterns.length>0&&x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold uppercase text-text-muted mb-3 tracking-wider",children:"Grammar & Phrases"}),x.jsx("ul",{className:"space-y-3",children:t.grammar_patterns.map((p,v)=>{const _=mg(v,m.theme),C=`pattern-dynamic-${v}`,b={...p,idClass:C,color:_,fullAnalysis:t};return x.jsx(pR,{pattern:b,onNoteClick:y,isFocused:(l==null?void 0:l.idClass)===C},v)})})]})}),x.jsx(hR,{})]})}const pg=5,Ty=({error:t,onRetry:e})=>{const[l,o]=z.useState(!1),[s,f]=z.useState(0),m=(t==null?void 0:t.message)||"An unknown error occurred.";z.useEffect(()=>{const v=/rate limit|429/i.test(m);if(o(v),v){f(pg);const _=setInterval(()=>{f(C=>C<=1?(clearInterval(_),0):C-1)},1e3);return()=>clearInterval(_)}else f(0)},[m]);const h=()=>{e&&(l&&f(pg),e())},y=l?"Too many requests":"API Error",p=l?"You are analyzing sentences too quickly. Please wait a moment before trying again.":m;return x.jsx("div",{role:"alert",className:"p-4 bg-destructive-subtle-bg border-l-4 border-destructive rounded-r-lg shadow-md my-4 transition-all duration-300",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("i",{className:"bi bi-x-circle-fill text-xl text-destructive","aria-hidden":"true"})}),x.jsxs("div",{className:"ml-3 flex-1",children:[x.jsx("p",{className:"text-sm font-semibold text-destructive-subtle-text",children:y}),p&&x.jsx("div",{className:"mt-2 text-sm text-destructive-subtle-text/80",children:x.jsx("p",{children:p})}),e&&x.jsx("button",{onClick:h,disabled:s>0,className:"mt-3 text-xs font-semibold px-2 py-1 rounded-md border border-destructive-subtle-text text-destructive-subtle-text hover:bg-destructive-subtle-text/10 transition disabled:opacity-50 disabled:cursor-wait",children:s>0?`Try Again in ${s}s`:"Try Again"})]})]})})},_y=({sentence:t,isLoading:e=!0})=>x.jsxs("div",{className:"relative p-4 bg-surface-soft rounded-lg min-h-36 animate-fade-in",children:[x.jsx("div",{className:"flex flex-wrap items-start gap-x-1.5 gap-y-1 text-2xl pr-8",children:x.jsx("p",{className:`text-2xl text-text-muted font-japanese transition-opacity duration-500 ${e?"opacity-50":"opacity-100"}`,children:t})}),e&&x.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:x.jsx("i",{className:"bi bi-arrow-repeat text-lg text-text-muted animate-spin",role:"status","aria-label":"Loading analysis"})})]}),gR=({entry:t,onExit:e,onSentenceChange:l,totalSentences:o,isVisible:s})=>{const f=t.readingProgress,[m,h]=z.useState(String(f+1));z.useEffect(()=>{h(String(f+1))},[f]);const y=()=>{let v=parseInt(m,10);(isNaN(v)||v<1)&&(v=1),v>o&&(v=o),l(v-1),h(String(v))},p=v=>{v.key==="Enter"&&(y(),v.currentTarget.blur())};return x.jsx("header",{className:`fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl z-30 bg-surface/90 backdrop-blur-md shadow-sm rounded-b-lg transition-transform duration-250 ease-in-out ${s?"translate-y-0":"-translate-y-full"}`,children:x.jsx("div",{className:"p-2",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("button",{onClick:e,title:"Exit Reading Mode",className:"p-2 rounded-full hover:bg-surface-hover transition-colors",children:x.jsx("i",{className:"bi bi-box-arrow-right text-2xl text-text-secondary"})}),x.jsxs("div",{className:"font-medium text-text-secondary flex items-center gap-1",children:[x.jsx("input",{type:"number",value:m,onChange:v=>h(v.target.value),onBlur:y,onKeyDown:p,min:"1",max:o,title:"Enter sentence number and press Enter",className:"w-12 text-center bg-surface-subtle rounded-md p-1 focus:ring-2 focus:ring-focus-ring focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),x.jsxs("span",{children:["/ ",o]})]})]})})})},yR=({isVisible:t,onNav:e,sentenceIndex:l,totalSentences:o})=>x.jsx("div",{className:`fixed top-3/4 -translate-y-1/2 left-0 right-0 z-20 pointer-events-none transition-all duration-300 ${t?"opacity-100":"opacity-0"}`,children:x.jsxs("div",{className:"w-full max-w-4xl mx-auto relative h-0",children:[x.jsx("button",{id:"reading-nav-prev",onClick:()=>e("prev"),disabled:l===0,"aria-label":"Previous sentence",className:`absolute top-0 left-2 md:left-auto md:right-full md:mr-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${t?"scale-100":"scale-90"}`,children:"←"}),x.jsx("button",{id:"reading-nav-next",onClick:()=>e("next"),disabled:l>=o-1,"aria-label":"Next sentence",className:`absolute top-0 right-2 md:right-auto md:left-full md:ml-4 w-12 h-12 bg-surface/50 backdrop-blur-sm text-text-primary rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-300 hover:bg-surface/80 disabled:opacity-20 disabled:cursor-not-allowed pointer-events-auto ${t?"scale-100":"scale-90"}`,children:"→"})]})}),vR=()=>{const{state:t,dispatch:e}=wt(),{state:l}=Yt(),{dispatch:o}=xn(),[s,f]=z.useState(!1),[m,h]=z.useState(!0),y=z.useRef(null),p=z.useRef(null),v=z.useRef({x:0,y:0,time:0}),_=z.useRef(null),C=t.history.find(se=>se.id===t.currentTextEntryId),b=z.useMemo(()=>(C==null?void 0:C.text.split(`
`).flatMap(se=>{var He;return((He=se.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:He.filter(Ge=>Ge==null?void 0:Ge.trim()))||[]}))||[],[C==null?void 0:C.text]),N=(C==null?void 0:C.readingProgress)??0,k=b[N],L=b[N+1],{analysis:F,isLoading:Y,error:H,reanalyze:Q}=gy(C==null?void 0:C.id,k),{execute:B}=hy(),j=z.useCallback(()=>{f(!0),y.current&&window.clearTimeout(y.current),y.current=window.setTimeout(()=>{f(!1)},4e3)},[]),W=z.useCallback(()=>{h(!0),p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>{h(!1)},1500)},[]),Se=z.useCallback(se=>{const He=se==="prev"&&N>0,Ge=se==="next"&&N<b.length-1;(He||Ge)&&(e({type:"NAVIGATE_SENTENCE",payload:{direction:se}}),navigator.vibrate&&navigator.vibrate(10),W())},[e,N,b.length,W]),K=z.useCallback(se=>{e({type:"JUMP_TO_SENTENCE",payload:{index:se}})},[e]);z.useEffect(()=>{o({type:"HIDE_BOTTOM_SHEET"}),o({type:"HIDE_TOOLTIP"}),W()},[k,o,W]),z.useEffect(()=>{W();const se=_.current;return se&&se.addEventListener("scroll",W,{passive:!0}),()=>{y.current&&window.clearTimeout(y.current),p.current&&window.clearTimeout(p.current),se&&se.removeEventListener("scroll",W)}},[W]);const pe=se=>{W();const He=se.touches[0];v.current={x:He.clientX,y:He.clientY,time:Date.now()}},ce=se=>{const He=se.changedTouches[0],{x:Ge,y:Ee,time:P}=v.current,{clientX:X,clientY:re}=He,ie=Date.now()-P,A=X-Ge,V=re-Ee;if(Ee<50&&V>30&&Math.abs(A)<30){j();return}if(ie<500&&Math.abs(A)>50&&Math.abs(V)<50){Se(A>0?"prev":"next");return}if(ie<250&&Math.abs(A)<10&&Math.abs(V)<10){W();return}};return z.useEffect(()=>{var se;C&&L&&((se=C.analyzedSentences[L])!=null&&se[l.analysisDepth]||B(L,l.analysisDepth).then(Ge=>{Ge&&C&&e({type:"CACHE_ANALYSIS",payload:{entryId:C.id,sentence:L,depth:l.analysisDepth,analysis:Ge}})}))},[L,C,l.analysisDepth,B,e]),C?x.jsxs("div",{className:"reading-mode-view h-screen flex flex-col bg-surface",onTouchStart:pe,onTouchEnd:ce,onClick:W,children:[x.jsx("div",{className:"fixed top-0 left-0 right-0 h-5 z-40",onClick:j}),x.jsx(gR,{entry:C,onExit:()=>e({type:"SET_VIEW",payload:ze.Reader}),onSentenceChange:K,totalSentences:b.length,isVisible:s}),x.jsx(yR,{isVisible:m,onNav:Se,sentenceIndex:N,totalSentences:b.length}),x.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:x.jsx("div",{ref:_,className:"flex-1 overflow-y-auto min-h-0 no-scrollbar",children:k?H?x.jsx(Ty,{error:H,onRetry:Q}):F?x.jsx(xy,{analysis:F,onReanalyze:Q}):x.jsx(_y,{sentence:k,isLoading:Y}):x.jsx("div",{className:"text-center p-8 text-text-muted",children:"End of text."})})})]}):x.jsx("div",{children:"Error: No text selected."})},xR=()=>{const{state:t,dispatch:e}=wt(),l=t.history.find(_=>_.id===t.currentTextEntryId),{analysis:o,isLoading:s,error:f,reanalyze:m}=gy(l==null?void 0:l.id,t.selectedSentence),h=z.useCallback(_=>{e({type:"SET_SELECTED_SENTENCE",payload:_})},[e]);if(!l)return z.useEffect(()=>{e({type:"RESET_VIEW"})},[e]),null;const y=()=>{l&&e({type:"START_EDITING",payload:l.id})},p=()=>{if(!l)return;const _=l.text.split(`
`).flatMap(N=>{var k;return((k=N.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:k.filter(L=>L==null?void 0:L.trim()))||[]}),C=t.selectedSentence?_.indexOf(t.selectedSentence):-1,b=C!==-1?C:l.readingProgress||0;e({type:"ADD_OR_UPDATE_TEXT_ENTRY",payload:{...l,readingProgress:b}}),e({type:"SET_VIEW",payload:ze.ReadingMode})},v=l.text.split(`
`).map(_=>{var C;return((C=_.match(/[^。？！]+(?:[。？！][」』]*)?/g))==null?void 0:C.filter(b=>b==null?void 0:b.trim()))||[]});return x.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto md:grid md:grid-cols-2 md:overflow-hidden",children:[x.jsxs("div",{className:"p-6 flex flex-col md:h-full md:grid md:grid-rows-[auto_1fr] md:gap-y-4 md:min-w-0",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-0",children:[x.jsx("h2",{className:"text-xl font-bold text-text-primary break-words",title:l.title,children:l.title}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:y,title:"Edit Text",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-pencil-square text-xl"})}),x.jsx("button",{id:"start-reading-button",onClick:p,title:"Start Reading Mode",className:"inline-flex items-center justify-center p-2.5 rounded-full text-primary-text bg-accent hover:bg-accent/90 focus-ring shadow-sm",children:x.jsx("i",{className:"bi bi-book text-2xl"})})]})]}),x.jsx("div",{id:"reader-view-text-container",className:"reader-view-text bg-surface-soft border border-border rounded-lg p-4 sm:p-6 overflow-y-auto no-scrollbar min-h-0 max-h-[40vh]",children:v.map((_,C)=>x.jsx("p",{className:"text-lg sm:text-xl leading-relaxed mb-4 last:mb-0",children:_.length>0?_.map((b,N)=>{const k=t.selectedSentence===b,L=!!(l!=null&&l.analyzedSentences[b]),F=["clickable-sentence","cursor-pointer","rounded","p-1","-m-1","transition-colors","duration-200","hover:bg-accent-selected-bg/50"];return k?F.push("selected","bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","font-semibold"):L&&F.push("has-analysis"),x.jsxs(xl.Fragment,{children:[x.jsx("span",{className:F.join(" "),onClick:()=>h(b),children:b})," "]},N)}):x.jsx(x.Fragment,{children:" "})},C))})]}),x.jsx("div",{className:"md:h-full md:overflow-y-auto no-scrollbar md:border-l border-border md:min-w-0",children:x.jsx("div",{className:"p-6 md:h-full",children:x.jsx("div",{id:"analysis-view",className:"md:h-full",children:t.selectedSentence?f?x.jsx(Ty,{error:f,onRetry:m}):o?x.jsx(xy,{analysis:o,onReanalyze:m}):x.jsx(_y,{sentence:t.selectedSentence,isLoading:s}):x.jsx("div",{className:"text-center p-8 text-text-muted md:h-full flex items-center justify-center",children:"Select a sentence to begin."})})})})]})},TR=[0,4,8,24,48,168,336,720,2880],_R=1,SR=.5,CR=2.5,ER=.15,AR=.15,bR=.2;function Hu(t,e){const l={...t};let o=t.srsStage,s=t.intervalModifier??_R;if(e===1){l.incorrectAnswerCount=(t.incorrectAnswerCount||0)+1;const f=Math.ceil(l.incorrectAnswerCount/2),m=t.srsStage>=5?2:1,h=f*m;o=Math.max(1,t.srsStage-h),s-=bR}else l.incorrectAnswerCount=0,e===2?s-=AR:(e===3||(s+=ER),o=t.srsStage+1);if(l.intervalModifier=Math.max(SR,Math.min(s,CR)),o>=9)l.srsStage=9,l.nextReviewDate=new Date("9999-12-31").getTime();else{l.srsStage=o;const m=TR[l.srsStage]*l.intervalModifier,h=new Date;l.nextReviewDate=new Date(h.getTime()+m*60*60*1e3).getTime()}return l}const MR=({onExit:t})=>x.jsx("div",{className:"w-full flex justify-end mb-4",children:x.jsx("button",{"data-action":"review-exit",onClick:t,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})}),NR=({item:t,onReview:e,onExit:l})=>{const{type:o,content:s}=t,[f,m]=z.useState(!1);z.useEffect(()=>{m(!1)},[t]);let h,y;if(o==="word")h=x.jsx("div",{className:"text-5xl md:text-7xl font-japanese font-semibold text-center text-text-primary p-8",children:s.japanese_segment}),y=x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:x.jsx(Ti,{base:s.japanese_segment,reading:s.reading||""})}),x.jsx("div",{className:"text-lg text-text-secondary mb-6",children:s.english_equivalent}),x.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",s.category.replace(/_/g," ").replace(/-/g,", ")]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",s.reading]})]})]});else{const{original_sentence:v,constituent_text:_,pattern_name:C,explanation:b}=s,N=v&&_?v.replace(_,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${_}</span>`):C;h=x.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-8 leading-relaxed",dangerouslySetInnerHTML:{__html:N}}),y=x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:C}),x.jsx("p",{className:"text-lg text-text-secondary",children:b})]})}const p=v=>{e(v),m(!1)};return x.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[x.jsx(MR,{onExit:l}),x.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:f?y:h}),f?x.jsx("div",{className:"mt-8 w-full",children:x.jsxs("div",{children:[x.jsx("p",{className:"text-center text-text-muted mb-4 text-sm",children:"How well did you remember?"}),x.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[x.jsxs("button",{onClick:()=>p(1),"data-action":"review-quality-1",className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:["Again ",x.jsx("span",{className:"text-xs font-normal",children:"(1)"})]}),x.jsxs("button",{onClick:()=>p(2),"data-action":"review-quality-2",className:"text-lg font-bold py-4 px-4 rounded-xl bg-pos-auxiliary-bg text-pos-auxiliary-text hover:opacity-80 focus-ring transition",children:["Hard ",x.jsx("span",{className:"text-xs font-normal",children:"(2)"})]}),x.jsxs("button",{onClick:()=>p(3),"data-action":"review-quality-3",className:"text-lg font-bold py-4 px-4 rounded-xl bg-surface-hover text-text-secondary hover:bg-surface-hover/80 focus-ring transition",children:["Good ",x.jsx("span",{className:"text-xs font-normal",children:"(3)"})]}),x.jsxs("button",{onClick:()=>p(4),"data-action":"review-quality-4",className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:["Easy ",x.jsx("span",{className:"text-xs font-normal",children:"(4)"})]})]})]})}):x.jsx("div",{className:"mt-8 w-full flex items-center",children:x.jsxs("button",{onClick:()=>m(!0),"data-action":"review-show-answer",className:"w-full max-w-xs mx-auto btn-primary text-lg",children:["Show Answer ",x.jsx("span",{className:"text-sm font-normal text-primary-text/80 ml-2",children:"(Space)"})]})})]})},RR=t=>{if(t===null||!isFinite(t))return"";const e=Date.now(),l=t-e;if(l<=0)return"soon";const o=l/(1e3*60),s=o/60,f=s/24;return f>=2?`in ${Math.round(f)} days`:f>=1?"tomorrow":s>=2?`in ${Math.round(s)} hours`:s>=1?"in an hour":o>=2?`in ${Math.round(o)} minutes`:"in a minute"},wR=({learnedCount:t,reviewedCount:e,onManage:l,onExit:o,onRestart:s,hasMoreItems:f,nextReviewTimestamp:m})=>{const y=t+e>0,p=RR(m),v=f?"Round Complete!":y?"Session Complete!":"All Caught Up!",_=y?x.jsxs("div",{className:"mt-2 text-text-secondary space-y-1",children:[x.jsxs("p",{children:["Great work! You learned ",x.jsx("strong",{className:"text-primary",children:t})," new items and reviewed ",x.jsx("strong",{className:"text-accent",children:e})," items."]}),f&&x.jsx("p",{children:"There are more items ready for your next round."}),!f&&p&&x.jsxs("p",{children:["Your next review is due ",p,"."]})]}):x.jsxs("p",{className:"mt-2 text-text-secondary",children:["There are no new words or reviews due right now.",!f&&p&&` Your next review is due ${p}.`]});return x.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[x.jsx("i",{className:"bi bi-check-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:v}),_,x.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[f?x.jsx("button",{onClick:s,className:"btn-primary",children:"Start Next Round"}):x.jsx("button",{onClick:o,className:"btn-secondary",children:"Back to Analyzer"}),x.jsx("button",{onClick:l,className:"btn-ghost",children:"Manage Deck"})]})]})},DR=({onManage:t,onExit:e})=>x.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto",children:[x.jsx("i",{className:"bi bi-journal-bookmark text-6xl text-text-muted/50 mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Review Deck is Empty"}),x.jsx("p",{className:"mt-2 text-text-secondary",children:'Add items by clicking the "Add to Deck" button on words or grammar patterns.'}),x.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[x.jsx("button",{onClick:e,className:"btn-secondary",children:"Back to Analyzer"}),x.jsx("button",{onClick:t,className:"btn-ghost",children:"Manage Deck"})]})]}),IR=({item:t,onDelete:e})=>{const[l,o]=xl.useState(!1);let s,f;if(t.type==="word"){const{japanese_segment:m,english_equivalent:h,reading:y,category:p,pitch_accent:v}=t.content;s=x.jsxs(x.Fragment,{children:[x.jsx("strong",{className:"font-japanese text-lg",children:m})," ",x.jsxs("span",{className:"text-text-muted",children:["- ",h]})]}),f=x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"relative inline-block text-xl font-japanese font-semibold p-2 bg-surface-subtle rounded-lg",style:{paddingTop:"22px"},children:[x.jsx(yy,{reading:y,pitchAccent:v}),x.jsx(Ti,{base:m,reading:y,interactiveKanji:!0})]}),x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3 text-sm mt-2",children:[x.jsxs("div",{children:[x.jsx("strong",{className:"font-medium text-text-secondary block",children:"Meaning"}),x.jsx("p",{className:"text-text-primary",children:h})]}),x.jsxs("div",{children:[x.jsx("strong",{className:"font-medium text-text-secondary block",children:"Category"}),x.jsx("p",{className:"text-text-primary capitalize",children:p.replace(/_/g," ").toLowerCase()})]}),x.jsxs("div",{className:"sm:col-span-2",children:[x.jsx("strong",{className:"font-medium text-text-secondary block",children:"Reading"}),x.jsx("p",{className:"text-text-primary font-japanese",children:y})]})]})]})}else{const{pattern_name:m,constituent_text:h,explanation:y}=t.content;h?s=x.jsxs(x.Fragment,{children:[x.jsx("strong",{className:"font-japanese text-lg",children:h})," ",x.jsxs("span",{className:"text-text-muted",children:["- ",m]})]}):s=x.jsx("strong",{className:"font-japanese text-lg",children:m}),f=x.jsx("p",{className:"text-sm text-text-secondary",children:y})}return x.jsxs("li",{className:"deck-item bg-surface-soft rounded-lg shadow-sm transition-shadow hover:shadow-md",children:[x.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>o(!l),children:[x.jsx("div",{className:"flex-grow pr-2",children:s}),x.jsxs("div",{className:"flex items-center flex-shrink-0 ml-4",children:[x.jsx("button",{onClick:m=>{m.stopPropagation(),e(t.id)},title:"Delete Item",className:"btn-ghost p-2 text-destructive/70 hover:bg-destructive-subtle-bg hover:text-destructive",children:x.jsx("i",{className:"bi bi-trash3 text-xl"})}),x.jsx("i",{className:`bi bi-chevron-down text-xl text-text-muted transition-transform ${l?"rotate-180":""}`})]})]}),l&&x.jsx("div",{className:"p-4 border-t border-border-subtle bg-surface",children:f})]})},UR=({items:t,onDelete:e,onExit:l,title:o})=>x.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsxs("h2",{className:"text-2xl font-bold text-text-primary truncate pr-4",title:o,children:[o," (",t.length," items)"]}),x.jsx("button",{onClick:l,title:"Back to Analyzer",className:"btn-secondary flex-shrink-0",children:"Back"})]}),t.length===0?x.jsx("p",{className:"text-center text-text-muted p-8",children:"Your deck is empty."}):x.jsx("ul",{className:"space-y-3",children:t.map(s=>x.jsx(IR,{item:s,onDelete:e},s.id))})]}),kR=({item:t})=>{if(t.type==="word")return x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:x.jsx(Ti,{base:t.content.japanese_segment,reading:t.content.reading||""})}),x.jsx("div",{className:"text-lg text-text-secondary mb-6",children:t.content.english_equivalent}),x.jsxs("div",{className:"text-sm space-y-2 text-text-muted",children:[x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Category:"})," ",t.content.category.replace(/_/g," ").replace(/-/g,", ")]}),x.jsxs("p",{children:[x.jsx("strong",{className:"font-medium text-text-secondary",children:"Reading:"})," ",t.content.reading]})]})]});const{original_sentence:e,constituent_text:l,pattern_name:o,explanation:s}=t.content,f=e&&l?e.replace(l,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${l}</span>`):o;return x.jsxs("div",{className:"text-center",children:[(e||l)&&x.jsx("div",{className:"text-xl md:text-2xl font-japanese font-medium text-center text-text-primary p-2 leading-relaxed mb-6 pb-6 border-b border-border-subtle",dangerouslySetInnerHTML:{__html:f}}),x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:o}),x.jsx("p",{className:"text-lg text-text-secondary",children:s})]})},LR=({item:t,onExit:e,currentIndex:l,totalInChunk:o,onNext:s,onPrev:f,onStartQuiz:m})=>{const h=l===0,y=l===o-1;return x.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[x.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[x.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[l+1," / ",o]}),x.jsx("button",{onClick:e,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),x.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:x.jsx(kR,{item:t})}),x.jsxs("div",{className:"mt-8 w-full flex items-center justify-center gap-4",children:[x.jsx("button",{onClick:f,disabled:h,className:"p-4 rounded-full bg-surface-hover text-text-secondary disabled:opacity-50 transition",children:x.jsx("i",{className:"bi bi-arrow-left text-2xl"})}),y?x.jsx("button",{onClick:m,className:"btn-primary text-xl px-10 py-4",children:"Start Quiz!"}):x.jsx("button",{onClick:s,className:"p-4 rounded-full bg-surface-hover text-text-secondary transition",children:x.jsx("i",{className:"bi bi-arrow-right text-2xl"})})]})]})},VR=({item:t,isAnswerShown:e})=>{if(t.type==="word"){const{japanese_segment:l,english_equivalent:o,reading:s}=t.content;return x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-5xl md:text-7xl font-japanese font-semibold text-center text-text-primary mb-8",children:l}),e&&x.jsxs("div",{className:"animate-fade-in",children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 pb-4 border-b border-border-subtle",children:x.jsx(Ti,{base:l,reading:s||""})}),x.jsx("div",{className:"text-lg text-text-secondary",children:o})]})]})}else{const{original_sentence:l,constituent_text:o,pattern_name:s,explanation:f}=t.content,m=l&&o?l.replace(o,`<span class="bg-accent-subtle-bg text-accent-text px-2 py-1 rounded">${o}</span>`):s;return x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl md:text-3xl font-japanese font-medium text-center text-text-primary p-4 leading-relaxed",dangerouslySetInnerHTML:{__html:m}}),e&&x.jsxs("div",{className:"animate-fade-in mt-6",children:[x.jsx("div",{className:"text-3xl font-japanese font-semibold mb-4 text-accent",children:s}),x.jsx("p",{className:"text-lg text-text-secondary",children:f})]})]})}},PR=({item:t,onExit:e,onAnswer:l,remainingCount:o})=>{const[s,f]=z.useState(!1);return z.useEffect(()=>{f(!1)},[t]),x.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center px-4",children:[x.jsxs("div",{className:"w-full flex justify-between items-center mb-4",children:[x.jsxs("span",{className:"text-sm font-semibold text-text-muted px-3 py-1 bg-surface rounded-full",children:[o," items left"]}),x.jsx("button",{onClick:e,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),x.jsx("div",{className:"relative w-full min-h-[20rem] flex flex-col justify-center items-center p-6 bg-surface-soft rounded-2xl shadow-lg",children:x.jsx(VR,{item:t,isAnswerShown:s})}),s?x.jsx("div",{className:"mt-8 w-full",children:x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("button",{onClick:()=>l(t,!1),className:"text-lg font-bold py-4 px-4 rounded-xl bg-destructive-subtle-bg text-destructive-subtle-text hover:bg-destructive-subtle-bg/80 focus-ring transition",children:[x.jsx("i",{className:"bi bi-arrow-counterclockwise mr-2"})," I Forgot"]}),x.jsxs("button",{onClick:()=>l(t,!0),className:"text-lg font-bold py-4 px-4 rounded-xl bg-accent-subtle-bg text-accent-text hover:bg-accent-subtle-bg/80 focus-ring transition",children:[x.jsx("i",{className:"bi bi-check-lg mr-2"})," I Remembered"]})]})}):x.jsx("div",{className:"mt-8 w-full flex items-center",children:x.jsx("button",{onClick:()=>f(!0),className:"w-full max-w-xs mx-auto btn-primary text-lg",children:"Show Answer"})})]})},qR=({onContinue:t,onExit:e,hasMoreChunks:l,hasReviews:o})=>{const s=!l&&!o,f=s?"Session Complete!":"Chunk Complete!",m=s?"You've finished all learning and review items for now.":"Great work! You've learned this set of items.",h=s?"See Summary":"Continue";return x.jsxs("div",{className:"text-center py-16 px-6 max-w-lg mx-auto flex flex-col h-full justify-center",children:[x.jsx("i",{className:"bi bi-patch-check-fill text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:f}),x.jsx("p",{className:"mt-2 text-text-secondary",children:m}),x.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[x.jsx("button",{onClick:e,className:"btn-secondary",children:"Finish for Now"}),x.jsx("button",{onClick:t,className:`btn-primary text-lg ${s?"px-8 py-3":""}`,children:h})]})]})},GR=({newCount:t,reviewCount:e,onStartLearning:l,onStartReviewing:o,onExit:s})=>{const f=t>0,m=e>0;return x.jsxs("div",{className:"text-center py-6 px-6 max-w-lg mx-auto flex flex-col h-full",children:[x.jsx("div",{className:"w-full flex justify-end mb-4",children:x.jsx("button",{"data-action":"review-exit",onClick:s,title:"Exit Review Session",className:"btn-ghost",children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})}),x.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center",children:[x.jsx("i",{className:"bi bi-play-circle text-6xl text-accent mx-auto mb-6","aria-hidden":"true"}),x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Ready for your session?"}),x.jsxs("div",{className:"mt-8 flex flex-col gap-4 w-full max-w-xs",children:[f&&x.jsxs("button",{onClick:l,className:"btn-primary text-lg font-semibold px-8 py-3",children:["Learn ",t," new item",t>1?"s":""]}),m&&x.jsxs("button",{onClick:o,className:`${f?"btn-secondary":"btn-primary"} text-lg font-semibold px-8 py-3`,children:["Review ",e," due item",e>1?"s":""]})]})]})]})},hg=5,OR=()=>{const{state:t,dispatch:e}=wt(),{state:l}=Yt(),{showConfirmation:o}=_l(),[s,f]=z.useState("LOADING"),[m,h]=z.useState("STUDY"),[y,p]=z.useState({newItemsForSession:[],allDueReviewItems:[]}),[v,_]=z.useState([]),[C,b]=z.useState([]),[N,k]=z.useState(new Set),[L,F]=z.useState(0),[Y,H]=z.useState(0),[Q,B]=z.useState([]),[j,W]=z.useState({learned:0,reviewed:0}),Se=z.useMemo(()=>{const A=t.reviewDeck.filter(J=>t.currentTextEntryId?J.textEntryId===t.currentTextEntryId||!J.textEntryId:!0).filter(J=>J.srsStage>0&&J.srsStage<9);if(A.length===0)return null;const V=A.map(J=>J.nextReviewDate);return Math.min(...V)},[t.reviewDeck,t.currentTextEntryId]),K=z.useCallback(()=>{const ie=Date.now(),A=t.reviewDeck.filter(me=>t.currentTextEntryId?me.textEntryId===t.currentTextEntryId||!me.textEntryId:!0),V=A.filter(me=>me.srsStage===0).sort((me,he)=>me.addedAt-he.addedAt),J=A.filter(me=>me.srsStage>0&&me.nextReviewDate<=ie).sort((me,he)=>me.nextReviewDate-he.nextReviewDate),$=V.slice(0,l.newWordsPerDay);p({newItemsForSession:$,allDueReviewItems:J});const ue=[];for(let me=0;me<$.length;me+=hg)ue.push($.slice(me,me+hg));_(ue),A.length===0?f("EMPTY"):$.length===0&&J.length===0?f("COMPLETE"):f("START")},[t.reviewDeck,t.currentTextEntryId,l.newWordsPerDay]);z.useEffect(()=>{(s==="LOADING"||s!=="LEARNING"&&s!=="REVIEW"&&s!=="MANAGE")&&(F(0),H(0),B([]),b([]),W({learned:0,reviewed:0}),h("STUDY"),K())},[s,K]),z.useEffect(()=>{s==="REVIEW"&&C.length===0&&j.reviewed>0&&K()},[C,s,j.reviewed,K]);const pe=()=>{t.currentTextEntryId?e({type:"SET_VIEW",payload:ze.Reader}):e({type:"RESET_VIEW"})},ce=()=>{v.length>0?f("LEARNING"):K()},se=()=>{y.allDueReviewItems.length>0?(k(new Set),b([...y.allDueReviewItems]),f("REVIEW")):K()},He=()=>{const ie=v[L];ie&&(B([...ie].sort(()=>.5-Math.random())),h("QUIZ"))},Ge=(ie,A)=>{let V=[...Q];if(A){const J=Hu(ie,3);e({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:J}),W($=>({...$,learned:$.learned+1})),V=V.filter($=>$.id!==ie.id)}else V=V.filter(J=>J.id!==ie.id),V.push(ie);V.length===0?h("CHUNK_COMPLETE"):B(V)},Ee=()=>{L<v.length-1?(F(ie=>ie+1),H(0),h("STUDY")):y.allDueReviewItems.length>0?se():K()},P=ie=>{const A=C[0];if(A)if(ie===1){if(!N.has(A.id)){const V=Hu(A,ie);e({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:V}),k(J=>new Set(J).add(A.id))}b(V=>[...V.slice(1),A])}else if(N.has(A.id))W(V=>({...V,reviewed:V.reviewed+1})),b(V=>V.slice(1));else{const V=Hu(A,ie);e({type:"ADD_OR_UPDATE_REVIEW_ITEM",payload:V}),W(J=>({...J,reviewed:J.reviewed+1})),b(J=>J.slice(1))}},X=ie=>{o("Are you sure you want to delete this item?",()=>{e({type:"REMOVE_REVIEW_ITEM",payload:ie})},{confirmText:"Delete"})},re=z.useMemo(()=>t.history.find(ie=>ie.id===t.currentTextEntryId),[t.history,t.currentTextEntryId]);switch(s){case"LOADING":return x.jsx("div",{className:"p-6 text-center text-text-muted",children:"Loading review session..."});case"START":return x.jsx(GR,{newCount:y.newItemsForSession.length,reviewCount:y.allDueReviewItems.length,onStartLearning:ce,onStartReviewing:se,onExit:pe});case"LEARNING":{const ie=v[L];if(!ie)return K(),null;switch(m){case"STUDY":return x.jsx(LR,{item:ie[Y],onExit:pe,currentIndex:Y,totalInChunk:ie.length,onNext:()=>H(A=>A+1),onPrev:()=>H(A=>A-1),onStartQuiz:He});case"QUIZ":{const A=Q[0];return A?x.jsx(PR,{item:A,onExit:pe,onAnswer:Ge,remainingCount:Q.length}):null}case"CHUNK_COMPLETE":return x.jsx(qR,{onContinue:Ee,onExit:pe,hasMoreChunks:L<v.length-1,hasReviews:y.allDueReviewItems.length>0})}}case"REVIEW":{const ie=C[0];return ie?x.jsx(NR,{item:ie,onReview:P,onExit:pe}):x.jsx("div",{className:"p-6 text-center text-text-muted",children:"Loading next review..."})}case"COMPLETE":{const ie=y.newItemsForSession.length>0||y.allDueReviewItems.length>0;return x.jsx(wR,{learnedCount:j.learned,reviewedCount:j.reviewed,onManage:()=>f("MANAGE"),onExit:pe,nextReviewTimestamp:Se,hasMoreItems:ie,onRestart:K})}case"EMPTY":return x.jsx(DR,{onManage:()=>f("MANAGE"),onExit:pe});case"MANAGE":{const ie=t.reviewDeck.filter(V=>t.currentTextEntryId?V.textEntryId===t.currentTextEntryId||!V.textEntryId:!0),A=t.currentTextEntryId&&re?`Deck for "${re.title}"`:"Full Review Deck";return x.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto no-scrollbar",children:x.jsx(UR,{items:ie,onDelete:X,onExit:K,title:A})})}default:return x.jsx("div",{className:"p-6 text-center text-text-muted",children:"An unexpected error occurred."})}};function BR({entry:t}){const{dispatch:e}=wt(),{dispatch:l}=xn(),{showConfirmation:o}=_l(),s=()=>{l({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),e({type:"SET_CURRENT_TEXT_ENTRY_ID",payload:t.id}),e({type:"SET_VIEW",payload:ze.Reader})},f=m=>{m.stopPropagation(),o(`Are you sure you want to delete "${t.title}"?`,()=>{e({type:"REMOVE_TEXT_ENTRY",payload:t.id})},{confirmText:"Delete"})};return x.jsxs("li",{className:"text-entry-item group p-4 hover:bg-surface-hover transition-colors flex justify-between items-center",children:[x.jsxs("div",{className:"flex-grow pr-4 truncate cursor-pointer",onClick:s,children:[x.jsx("span",{className:"font-medium text-sm pointer-events-none text-text-primary",title:t.title,children:t.title}),x.jsxs("span",{className:"block text-xs text-text-muted mt-1 pointer-events-none",children:["Updated: ",new Date(t.updatedAt).toLocaleString()]})]}),x.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:x.jsx("button",{className:"p-2 rounded-full hover:bg-destructive-subtle-bg text-destructive/70 hover:text-destructive transition-colors",title:"Delete Text",onClick:f,children:x.jsx("i",{className:"bi bi-trash3 text-xl"})})})]})}function zR(){const{state:t,dispatch:e}=wt(),{state:l,dispatch:o}=xn(),{showConfirmation:s}=_l(),f=()=>o({type:"SET_HISTORY_PANEL_OPEN",payload:!1}),m=()=>{t.history.length!==0&&s("Are you sure you want to delete all your saved texts? This cannot be undone.",()=>{e({type:"CLEAR_HISTORY"})},{confirmText:"Delete All"})};return l.isHistoryPanelOpen?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30 transition-opacity",onClick:f}),x.jsxs("div",{className:"fixed top-0 right-0 h-full w-full max-w-md glass-morphism shadow-2xl z-40 flex flex-col border-l border-border transition-transform duration-300 ease-in-out",style:{transform:"translateX(0%)"},children:[x.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-border flex-shrink-0",children:[x.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"My Texts"}),x.jsxs("div",{className:"flex items-center gap-2",children:[t.history.length>0&&x.jsx("button",{title:"Delete All Texts",className:"p-2 rounded-lg text-text-muted hover:bg-destructive-subtle-bg hover:text-destructive transition-colors",onClick:m,children:x.jsx("i",{className:"bi bi-trash3 text-xl"})}),x.jsx("button",{title:"Close Panel",className:"btn-ghost",onClick:f,children:x.jsx("i",{className:"bi bi-x-lg text-xl"})})]})]}),x.jsx("div",{className:"flex-grow overflow-y-auto no-scrollbar",children:t.history.length>0?x.jsx("ul",{className:"divide-y divide-border",children:t.history.map(h=>x.jsx(BR,{entry:h},h.id))}):x.jsxs("div",{className:"text-center p-8",children:[x.jsx("i",{className:"bi bi-file-earmark-text text-5xl text-text-muted/50 mx-auto mb-4","aria-hidden":"true"}),x.jsx("p",{className:"text-text-muted",children:"You have no saved texts yet."}),x.jsx("p",{className:"text-sm text-text-muted/70 mt-1",children:"Start by analyzing some Japanese text!"})]})})]})]}):null}const ja=({label:t,shortcut:e,checked:l,onChange:o,id:s})=>x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("label",{htmlFor:s,className:"text-sm font-medium text-text-secondary cursor-pointer",children:[t," ",e&&x.jsxs("span",{className:"text-xs text-text-muted",children:["(",e,")"]})]}),x.jsxs("label",{htmlFor:s,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-surface-subtle transition-colors focus-within:outline-none focus-within:ring-2 focus-within:ring-focus-ring focus-within:ring-offset-2 cursor-pointer",children:[x.jsx("input",{type:"checkbox",id:s,className:"sr-only peer",checked:l,onChange:o}),x.jsx("span",{className:"ml-1 inline-block h-4 w-4 transform rounded-full bg-surface transition-transform peer-checked:translate-x-5 peer-checked:bg-primary shadow-sm"})]})]});function HR({setIsOpen:t}){const{state:e,dispatch:l}=Yt(),{dispatch:o}=wt(),{showAlert:s,showConfirmation:f}=_l(),m=z.useRef(null),[h,y]=z.useState(""),[p,v]=z.useState(!1);z.useEffect(()=>{const L=F=>{F.key==="Escape"&&t(!1)};return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[t]),z.useEffect(()=>{y(e.userApiKey||"")},[e.userApiKey]);const _=L=>{l({type:"UPDATE_SETTINGS",payload:L})},C=()=>{_({userApiKey:h}),s("API Key settings updated.")},b=async L=>{var H;const F=(H=L.target.files)==null?void 0:H[0];if(!F)return;const Y=new FileReader;Y.onload=Q=>{var B;try{const j=JSON.parse((B=Q.target)==null?void 0:B.result);if(!j.history||!j.settings||!j.reviewDeck)throw new Error("Invalid backup file structure.");f("Importing will overwrite your current history, review deck, and settings. Are you sure you want to continue?",async()=>{try{await Promise.all([Yu(),Cg()]),await Promise.all([...j.history.map(W=>sl(W)),...j.reviewDeck.map(W=>Ju(W)),Eg(j.settings)]),o({type:"SET_HISTORY",payload:j.history||[]}),o({type:"SET_REVIEW_DECK",payload:j.reviewDeck||[]}),l({type:"UPDATE_SETTINGS",payload:j.settings}),s("Import successful!",{onOk:()=>t(!1)}),o({type:"RESET_VIEW"})}catch(W){s(`Import failed during database operation: ${W instanceof Error?W.message:"Unknown error."}`,{onOk:()=>t(!1)})}},{confirmText:"Import",confirmClass:"bg-accent hover:bg-accent/90"})}catch(j){s(`Import failed: ${j instanceof Error?j.message:"Could not read file."}`,{onOk:()=>t(!1)})}finally{L.target.value=""}},Y.readAsText(F)},N=async()=>{try{const[L,F,Y]=await Promise.all([_g(),Sg(),gc()]),H={version:"3.0-indexeddb",exportedAt:Date.now(),history:L,reviewDeck:F,settings:Y},Q=JSON.stringify(H,null,2),B=new Blob([Q],{type:"application/json"}),j=URL.createObjectURL(B),W=document.createElement("a");W.href=j;const Se=new Date().toISOString().split("T")[0];W.download=`japanese-analyzer-backup-${Se}.json`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(j)}catch(L){s(`Export failed: ${L instanceof Error?L.message:"Could not read data from database."}`)}},k=Rp.indexOf(e.analysisDepth);return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-[80]",onClick:()=>t(!1)}),x.jsxs("div",{ref:m,className:"fixed top-20 right-4 flex flex-col w-[95vw] max-w-sm glass-morphism rounded-xl shadow-2xl ring-1 ring-border-subtle z-[90] origin-top-right animate-fade-in max-h-[calc(100vh-12rem)]",children:[x.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-border-subtle flex-shrink-0",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Settings"}),x.jsx("button",{onClick:()=>t(!1),className:"btn-ghost p-1",title:"Close Settings (Esc)",children:x.jsx("i",{className:"bi bi-x-lg text-xl"})})]}),x.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto no-scrollbar",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3",children:[x.jsx(ja,{id:"pitch-accent-checkbox",label:"Pitch Accent",checked:e.showPitchAccent,onChange:L=>_({showPitchAccent:L.target.checked})}),x.jsx(ja,{id:"furigana-checkbox",label:"Furigana",shortcut:"F",checked:e.showFurigana,onChange:L=>_({showFurigana:L.target.checked})}),x.jsx(ja,{id:"color-coding-checkbox",label:"POS Colors",shortcut:"C",checked:e.showColorCoding,onChange:L=>_({showColorCoding:L.target.checked})}),x.jsx(ja,{id:"theme-checkbox",label:"Dark Mode",checked:e.theme==="dark",onChange:L=>_({theme:L.target.checked?"dark":"light"})})]}),x.jsx("hr",{className:"border-border-subtle"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"analysis-depth-slider",className:"text-sm font-medium text-text-secondary",children:"Analysis Depth"}),x.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text capitalize",children:e.analysisDepth})]}),x.jsx("input",{type:"range",id:"analysis-depth-slider",min:"0",max:"2",step:"1",value:k,onChange:L=>_({analysisDepth:Rp[parseInt(L.target.value)]}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"font-size-slider",className:"text-sm font-medium text-text-secondary",children:"Font Size"}),x.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:Fu[e.fontSizeIndex].label})]}),x.jsx("input",{type:"range",id:"font-size-slider",min:"0",max:Fu.length-1,step:"1",value:e.fontSizeIndex,onChange:L=>_({fontSizeIndex:parseInt(L.target.value)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"new-words-slider",className:"text-sm font-medium text-text-secondary",children:"New Words Per Day"}),x.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-primary-subtle-bg text-primary-subtle-text",children:e.newWordsPerDay})]}),x.jsx("input",{type:"range",id:"new-words-slider",min:"5",max:"50",step:"5",value:e.newWordsPerDay,onChange:L=>_({newWordsPerDay:parseInt(L.target.value,10)}),className:"w-full h-2 bg-surface-subtle rounded-lg appearance-none cursor-pointer"})]})]}),x.jsx("hr",{className:"border-border-subtle"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"API Key Management"}),x.jsxs("div",{className:"relative flex items-center",children:[x.jsx("input",{type:p?"text":"password",value:h,onChange:L=>y(L.target.value),placeholder:"Enter your Gemini API Key",className:"w-full rounded-lg border-border-subtle bg-surface-soft shadow-sm focus-ring text-sm px-4 py-2 pr-10","aria-label":"Gemini API Key"}),x.jsx("button",{type:"button",className:"absolute right-2 text-text-muted hover:text-text-primary p-1",onClick:()=>v(!p),title:p?"Hide key":"Show key",children:x.jsx("i",{className:`bi ${p?"bi-eye-slash":"bi-eye"} text-base`})})]}),x.jsx("div",{className:"flex gap-2 mt-2",children:x.jsxs("button",{onClick:C,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-primary/80 text-primary-text hover:bg-primary transition-colors inline-flex items-center justify-center gap-2",children:[x.jsx("i",{className:"bi bi-save text-base"}),"Save Key"]})}),x.jsxs("p",{className:"text-xs text-text-muted mt-2 px-1",children:[e.userApiKey?"Using your custom API key.":"Using the default application key.","Your key is stored in your browser's database."]})]}),x.jsx("hr",{className:"border-border-subtle"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"Data Management"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:N,className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors inline-flex items-center justify-center gap-2",children:[x.jsx("i",{className:"bi bi-download text-base"}),"Export"]}),x.jsxs("label",{className:"flex-1 text-xs font-medium px-3 py-2 rounded-lg bg-surface-soft text-text-secondary hover:bg-surface-hover transition-colors cursor-pointer inline-flex items-center justify-center gap-2",children:[x.jsx("i",{className:"bi bi-upload text-base"}),"Import",x.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:b})]})]})]})]})]})]})}function FR(){const{state:t,dispatch:e}=wt(),{state:l,dispatch:o}=Yt(),{state:s}=xn();z.useEffect(()=>{const f=m=>{var p,v,_,C,b,N,k,L,F;const h=m.target;if(["INPUT","TEXTAREA"].includes(h.tagName)||h.isContentEditable)return;switch(m.key.toLowerCase()==="f"&&(m.preventDefault(),o({type:"UPDATE_SETTINGS",payload:{showFurigana:!l.showFurigana}})),m.key.toLowerCase()==="c"&&(m.preventDefault(),o({type:"UPDATE_SETTINGS",payload:{showColorCoding:!l.showColorCoding}})),t.view){case ze.Review:m.key==="Escape"&&(m.preventDefault(),(p=document.querySelector('[data-action="review-exit"]'))==null||p.click());const Y=document.querySelector('[data-action="review-show-answer"]');Y&&(m.code==="Space"||m.key===" ")&&(m.preventDefault(),Y.click()),Y||(m.key==="1"?(m.preventDefault(),(v=document.querySelector('[data-action="review-quality-1"]'))==null||v.click()):m.key==="2"?(m.preventDefault(),(_=document.querySelector('[data-action="review-quality-2"]'))==null||_.click()):m.key==="3"?(m.preventDefault(),(C=document.querySelector('[data-action="review-quality-3"]'))==null||C.click()):m.key==="4"&&(m.preventDefault(),(b=document.querySelector('[data-action="review-quality-4"]'))==null||b.click()));return;case ze.ReadingMode:m.key==="ArrowRight"?(m.preventDefault(),(N=document.querySelector("#reading-nav-next"))==null||N.click()):m.key==="ArrowLeft"&&(m.preventDefault(),(k=document.querySelector("#reading-nav-prev"))==null||k.click());break}if(t.view===ze.Reader||t.view===ze.ReadingMode){if(m.key.toLowerCase()==="t"){const Y=document.querySelector("#toggle-translation-button");Y&&(m.preventDefault(),Y.click())}if(m.key.toLowerCase()==="s"){const Y=document.querySelector(".tts-button");Y&&(m.preventDefault(),Y.click())}}const y=document.querySelector(".analysis-view-container, .reading-mode-view");if(y){const Y=y.querySelector(".is-focused");m.key==="Escape"&&Y&&(m.preventDefault(),Y.classList.remove("is-focused","ring-2","ring-focus-ring","bg-surface-soft"),y.querySelectorAll(".segment").forEach(Q=>Q.classList.remove("opacity-30")));const H=Array.from(y.querySelectorAll("[data-pattern-id]"));if(H.length>0){const Q=H.findIndex(B=>B.classList.contains("is-focused"));if(m.key.toLowerCase()==="j"||m.key.toLowerCase()==="k"){m.preventDefault();let B=Q===-1?0:m.key==="j"?Q+1:Q-1;B>=H.length&&(B=0),B<0&&(B=H.length-1),(L=H[B])==null||L.click()}m.key.toLowerCase()==="e"&&Y&&(m.preventDefault(),(F=Y.querySelector(".show-examples-button"))==null||F.click())}}};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[t,l,e,o])}function YR(){const{state:t,dispatch:e}=xn(),{visible:l,content:o,position:s,pinned:f,targetElement:m}=t.tooltip,h=z.useRef(null);z.useEffect(()=>{if(!l||!f)return;const v=_=>{m&&m.contains(_.target)||h.current&&h.current.contains(_.target)||e({type:"HIDE_TOOLTIP"})};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[l,f,m,e]);const y=()=>{},p=()=>{t.tooltip.pinned||e({type:"HIDE_TOOLTIP"})};return l?ps.createPortal(x.jsx("div",{ref:h,className:"fixed z-50 max-w-sm rounded-xl glass-morphism border border-border/50 shadow-2xl p-4 text-base transition-all duration-200 max-h-96 overflow-y-auto no-scrollbar",style:{left:`${s.left}px`,top:`${s.top}px`,opacity:1},onMouseOver:y,onMouseOut:p,children:o}),document.body):null}const JR=()=>{const{state:t,dispatch:e}=xn(),{visible:l,content:o,targetElement:s}=t.bottomSheet,f=z.useRef(null),[m,h]=z.useState(!1),[y,p]=z.useState(!1);z.useEffect(()=>{if(l){h(!0);const C=setTimeout(()=>{p(!0)},50);return()=>clearTimeout(C)}else p(!1)},[l]);const v=C=>{C.target===f.current&&C.propertyName==="transform"&&!y&&!l&&h(!1)},_=()=>{e({type:"HIDE_BOTTOM_SHEET"})};return z.useEffect(()=>{const C=N=>{N.target.closest(".segment")||f.current&&!f.current.contains(N.target)&&_()},b=N=>{N.key==="Escape"&&_()};return m&&l&&(document.addEventListener("mousedown",C),document.addEventListener("keydown",b)),()=>{document.removeEventListener("mousedown",C),document.removeEventListener("keydown",b)}},[m,l]),z.useEffect(()=>{const C=document.querySelector(".segment-bottom-sheet-active");C&&C.classList.remove("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active"),s&&l&&s.classList.add("bg-accent-selected-bg/60","dark:bg-accent-selected-bg/30","segment-bottom-sheet-active")},[s,l]),m?ps.createPortal(x.jsxs(x.Fragment,{children:[x.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm z-10 transition-opacity duration-300 md:hidden ${y?"opacity-100":"opacity-0"}`,onClick:_,"aria-hidden":"true"}),x.jsxs("div",{ref:f,className:`fixed bottom-0 left-0 right-0 z-20 bg-surface border-t border-border rounded-t-2xl shadow-2xl-top transition-transform duration-300 ease-in-out max-h-[60vh] flex flex-col md:hidden ${y?"translate-y-0":"translate-y-full"}`,onTransitionEnd:v,children:[x.jsxs("header",{className:"flex-shrink-0 py-3 px-4 border-b border-border-subtle relative text-center",children:[x.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-10 h-1.5 bg-border rounded-full","aria-hidden":"true"}),x.jsx("h3",{className:"font-semibold text-lg text-text-primary font-japanese mt-2",children:o.title}),x.jsx("button",{title:"Close details (Esc)",className:"btn-ghost absolute top-1.5 right-2",onClick:_,children:x.jsx("i",{className:"bi bi-x-lg text-2xl"})})]}),x.jsx("div",{className:"p-4 overflow-y-auto no-scrollbar flex-grow",children:o.body})]})]}),document.body):null};function ZR(){const{state:t}=wt(),{state:e}=xn(),[l,o]=z.useState(!1),s=z.useCallback(()=>{const m=t.view===ze.ReadingMode,h=t.view===ze.Review;let y=!1;if(!h&&!e.bottomSheet.visible){if(m)y=window.scrollY>window.innerHeight/2;else if(t.view===ze.Reader&&t.selectedSentence){const p=document.getElementById("reader-view-text-container");if(p){const v=p.getBoundingClientRect();y=!(v.bottom>0&&v.top<window.innerHeight)}}}o(y)},[t.view,t.selectedSentence,e.bottomSheet.visible]);z.useEffect(()=>(window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)),[s]),z.useEffect(()=>{s()},[t.view,t.selectedSentence,e.bottomSheet.visible]);const f=()=>{if(t.view===ze.ReadingMode)window.scrollTo({top:0,behavior:"smooth"});else if(t.view===ze.Reader&&t.selectedSentence){const m=document.querySelector(".clickable-sentence.selected");m==null||m.scrollIntoView({behavior:"smooth",block:"center"})}};return l?ps.createPortal(x.jsx("button",{className:`fixed bottom-5 right-5 w-12 h-12 bg-accent text-primary-text rounded-full shadow-lg flex items-center justify-center text-2xl font-bold transition-all duration-300 hover:bg-accent/90 z-50 ${l?"opacity-100 visible translate-y-0":"opacity-0 invisible translate-y-5"}`,onClick:f,title:t.view===ze.ReadingMode?"Scroll to top":"Back to analyzed sentence",children:"⇧"}),document.body):null}function KR(){const{state:t,dispatch:e}=wt(),{dispatch:l}=xn(),[o,s]=z.useState(!1),f=t.reviewDeck.filter(h=>{if(t.currentTextEntryId&&h.textEntryId&&h.textEntryId!==t.currentTextEntryId)return!1;const y=new Date;return y.setHours(0,0,0,0),h.nextReviewDate<=y.getTime()}).length,m=()=>{t.currentTextEntryId?e({type:"SET_VIEW",payload:ze.Reader}):e({type:"RESET_VIEW"})};return x.jsxs("header",{id:"app-header",className:"flex justify-between items-center px-4 py-3 border-b border-border bg-gradient-to-r from-background to-surface md:rounded-t-2xl flex-shrink-0",children:[x.jsx("div",{className:"flex items-center gap-4",children:x.jsx("button",{onClick:m,title:"Return to main screen",className:"px-4 py-1 bg-gradient-to-br from-primary to-purple-600 rounded-xl flex items-center justify-center shadow-lg focus-ring hover-lift",children:x.jsx("span",{className:"font-japanese font-bold text-primary-text text-xl select-none dark:text-white",children:"積読"})})}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{title:"New Text",className:"btn-ghost",onClick:()=>e({type:"RESET_VIEW"}),children:x.jsx("i",{className:"bi bi-plus-lg text-xl"})}),x.jsx("button",{title:"My Texts",className:"btn-ghost",onClick:()=>l({type:"SET_HISTORY_PANEL_OPEN",payload:!0}),children:x.jsx("i",{className:"bi bi-clock-history text-xl"})}),x.jsx("div",{className:"relative",children:x.jsxs("button",{title:"Review Deck",className:"btn-ghost",onClick:()=>e({type:"SET_VIEW",payload:ze.Review}),children:[x.jsx("i",{className:"bi bi-stack text-xl"}),f>0&&x.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs rounded-full h-4 w-4 flex items-center justify-center pointer-events-none transition-opacity",children:f})]})}),x.jsxs("div",{children:[x.jsx("button",{title:"Settings",className:"btn-ghost",onClick:()=>s(h=>!h),children:x.jsx("i",{className:"bi bi-gear text-xl"})}),o&&x.jsx(HR,{setIsOpen:s})]})]})]})}function Sy(){const{state:t}=wt(),{state:e}=Yt();if(FR(),z.useEffect(()=>{rR()},[]),t.isLoading||e.isLoading)return x.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background",children:x.jsxs("div",{className:"text-center",children:[x.jsx("i",{className:"bi bi-arrow-repeat text-4xl text-text-muted animate-spin"}),x.jsx("p",{className:"mt-4 text-text-muted",children:"Loading application data..."})]})});const l=()=>{switch(t.view){case ze.Editor:return x.jsx(fg,{});case ze.Reader:return x.jsx(xR,{});case ze.ReadingMode:return x.jsx(vR,{});case ze.Review:return x.jsx(OR,{});default:return x.jsx(fg,{})}},o=t.view===ze.ReadingMode;return x.jsxs("div",{className:`w-full h-full flex flex-col ${o?"":"md:container md:mx-auto md:px-4 md:py-6"}`,children:[x.jsxs("main",{id:"app",className:`bg-surface w-full flex-grow flex flex-col min-h-0 ${o?"":"md:rounded-2xl md:shadow-xl md:border border-border md:overflow-hidden"}`,children:[t.view!==ze.ReadingMode&&x.jsx(KR,{}),l()]}),x.jsx(zR,{}),x.jsx(YR,{}),x.jsx(JR,{}),x.jsx(ZR,{})]})}function $R(){return x.jsx(wg,{children:x.jsx(Ig,{children:x.jsx(Mg,{children:x.jsx(kg,{children:x.jsx(Sy,{})})})})})}const XR=yg.createRoot(document.getElementById("root"));XR.render(x.jsx($R,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("ServiceWorker registration successful with scope: ",t.scope)}).catch(t=>{console.log("ServiceWorker registration failed: ",t)})});function QR(){return x.jsx(wg,{children:x.jsx(Ig,{children:x.jsx(Mg,{children:x.jsx(kg,{children:x.jsx(Sy,{})})})})})}const WR=yg.createRoot(document.getElementById("root"));WR.render(x.jsx(QR,{}));
